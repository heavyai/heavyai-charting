/*! For license information please see mapdc.js.LICENSE.txt */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("d3")):"function"==typeof define&&define.amd?define(["d3"],e):"object"==typeof exports?exports.mapdc=e(require("d3")):t.mapdc=e(t.d3)}(self,(function(t){return(()=>{var e={9874:t=>{function e(t,e,n,r){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=n,this.p2y=r}t.exports=e,e.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},e.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},e.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},e.prototype.solveCurveX=function(t,e){var n,r,i,o,a;for(void 0===e&&(e=1e-6),i=t,a=0;a<8;a++){if(o=this.sampleCurveX(i)-t,Math.abs(o)<e)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if((i=t)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){if(o=this.sampleCurveX(i),Math.abs(o-t)<e)return i;t>o?n=i:r=i,i=.5*(r-n)+n}return i},e.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}},6154:function(t){"undefined"!=typeof self&&self,t.exports=function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=24)}([function(t,e,n){"use strict";var r=n(1),i=n(28),o=n(29),a=(n(13),n(14),n(15),n(30),n(31));n(16),n(17),n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return a}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"EPSILON",(function(){return r})),n.d(e,"ARRAY_TYPE",(function(){return i})),n.d(e,"RANDOM",(function(){return o})),e.setMatrixArrayType=function(t){i=t},e.toRadian=function(t){return t*a},e.equals=function(t,e){return Math.abs(t-e)<=r*Math.max(1,Math.abs(t),Math.abs(e))};var r=1e-6,i="undefined"!=typeof Float32Array?Float32Array:Array,o=Math.random,a=Math.PI/180},function(t,e,n){"use strict";function r(t,e,n,r,i){return t[f]="number"==typeof e?e:1/0,t[p]="number"==typeof n?n:1/0,t[m]="number"==typeof r?r:-1/0,t[_]="number"==typeof i?i:-1/0,t}function i(t,e,n,i){return r(new h.a.ARRAY_TYPE(y.BOX_SIDES),t,e,n,i)}function o(t,e){return t[f]=e[f],t[p]=e[p],t[m]=e[m],t[_]=e[_],t}function a(t){return t[f]=1/0,t[p]=1/0,t[m]=-1/0,t[_]=-1/0,t}function s(t){return t[f]>t[m]||t[p]>t[_]}function u(t,e){return h.d.set(t,e[m]-e[f],e[_]-e[p])}function l(t,e){return u(t,e),h.d.scale(t,t,.5)}function c(t,e,n){return t!==e&&o(t,e),s(e)?(t[f]=n[f],t[m]=n[f],t[p]=n[p],t[_]=n[p]):(n[f]<t[f]?t[f]=n[f]:n[f]>t[m]&&(t[m]=n[f]),n[p]<t[p]?t[p]=n[p]:n[p]>t[_]&&(t[_]=n[p])),t}function d(t,e,n,r){var s=t;t===e&&(s=i()),a(s);var u=h.d.set(h.d.create(),e[f],e[p]),l=h.d.create();return r(l,u,n),c(s,s,l),u[f]=e[m],r(l,u,n),c(s,s,l),u[p]=e[_],r(l,u,n),c(s,s,l),u[f]=e[f],r(l,u,n),c(s,s,l),t===e&&o(t,s),t}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"MINX",(function(){return f})),n.d(e,"MINY",(function(){return p})),n.d(e,"MAXX",(function(){return m})),n.d(e,"MAXY",(function(){return _})),e.set=r,e.create=i,e.clone=function(t){var e=new h.a.ARRAY_TYPE(y.BOX_SIDES);return e[f]=t[f],e[p]=t[p],e[m]=t[m],e[_]=t[_],e},e.copy=o,e.initEmpty=a,e.initInfinity=function(t){return t[f]=-1/0,t[p]=-1/0,t[m]=1/0,t[_]=1/0,t},e.initSizeFromOrigin=function(t,e){return e[0]<0?(t[f]=-e[0],t[m]=0):(t[f]=0,t[m]=e[0]),e[1]<0?(t[p]=-e[1],t[_]=0):(t[p]=0,t[_]=e[1]),t},e.initSizeFromLocation=function(t,e,n){for(var r=0;r<2;r+=1)n[r]<0?(t[r]=e[r]-n[r],t[r+2]=e[r]):(t[r]=e[r],t[r+2]=e[r]+n[r]);return t},e.initCenterExtents=function(t,e,n){for(var r=0;r<2;r+=1)n[r]<0?(t[r]=e[r]+n[r],t[r+2]=e[r]-n[r]):(t[r]=e[r]-n[r],t[r+2]=e[r]+n[r]);return t},e.isEmpty=s,e.isInfinite=function(t){return!(isFinite(t[f])&&isFinite(t[p])&&isFinite(t[m])&&isFinite(t[_]))},e.equals=function(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=e[0],s=e[1],u=e[2],l=e[3];return Math.abs(n-a)<=h.a.EPSILON&&Math.abs(r-s)<=h.a.EPSILON&&Math.abs(i-u)<=h.a.EPSILON&&Math.abs(o-l)<=h.a.EPSILON},e.getSize=u,e.getExtents=l,e.getCenter=function(t,e){return l(t,e),t[f]+=e[f],t[p]+=e[p],t},e.expand=function(t,e,n){t[f]=e[f]-n[0],t[m]=e[m]+n[0],t[p]=e[p]-n[1],t[_]=e[_]+n[1]},e.area=function(t){return(t[m]-t[f])*(t[_]-t[p])},e.hull=function(t,e,n){return i(Math.min(e[f],n[f]),Math.min(e[p],n[p]),Math.max(e[m],n[m]),Math.max(e[_],n[_]))},e.intersection=function(t,e,n){var r=t;t===e&&(r=i());for(var s=f,u=m;s<=p&&!(e[u]<n[s]||e[s]>n[u]);s+=1,u+=1)r[s]=Math.max(e[s],n[s]),r[u]=Math.min(e[u],n[u]);return s!==p+1&&a(r),t===e&&o(t,r),t},e.overlaps=function(t,e){return!(t[m]<=e[f]||t[f]>=e[m]||t[_]<=e[p]||t[p]>=e[_])},e.contains=function(t,e){return!(e[f]<t[f]||e[m]>t[m]||e[p]<t[p]||e[_]>t[_])},e.containsPt=function(t,e){return e[f]>=t[f]&&e[f]<=t[m]&&e[p]>=t[p]&&e[p]<=t[_]},e.encapsulatePt=c,e.translate=function(t,e,n){t[f]=e[f]+n[0],t[p]=e[p]+n[1],t[m]=e[m]+n[0],t[_]=e[_]+n[1]},e.transformMat2=function(t,e,n){return d(t,e,n,h.d.transformMat2)},e.transformMat2d=function(t,e,n){return d(t,e,n,h.d.transformMat2d)};var h=n(0),f=0,p=1,m=2,_=3,y={BOX_SIDES:4}},function(t,e,n){"use strict";function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return t[u]=e,t[l]=n,t}function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return r(new s.a.ARRAY_TYPE(2),t,e)}function o(t,e){return s.d.distance(t,e)}function a(t,e){return s.d.squaredDistance(t,e)}Object.defineProperty(e,"__esModule",{value:!0}),e.set=r,e.create=i,e.clone=function(t){var e=new s.a.ARRAY_TYPE(2);return e[u]=t[u],e[l]=t[l],e},e.copy=function(t,e){return t[u]=e[u],t[l]=e[l],t},e.initFromValues=function(t,e){return i(t,e)},e.addVec2=function(t,e,n){return s.d.add(t,e,n)},e.sub=function(t,e,n){return s.d.sub(t,e,n)},e.transformMat2=function(t,e,n){return s.d.transformMat2(t,e,n)},e.transformMat2d=function(t,e,n){return s.d.transformMat2d(t,e,n)},e.str=function(t){return"point2d(".concat(t[0]," , ").concat(t[1],")")},e.distance=o,n.d(e,"dist",(function(){return c})),e.squaredDistance=a,n.d(e,"sqrDist",(function(){return d})),e.lerp=function(t,e,n,r){return s.d.lerp(t,e,n,r)},e.equals=function(t,e){return s.d.equals(t,e)},e.exactEquals=function(t,e){return s.d.exactEquals(t,e)};var s=n(0),u=0,l=1,c=o,d=a},function(t,e,n){"use strict";var r=n(0);r.c.svd=function(t,e,n,r){if(t&&(t[0]=r[4],t[1]=r[5]),e||n){var i=(r[0]+r[3])/2,o=(r[0]-r[3])/2,a=(r[1]+r[2])/2,s=(r[1]-r[2])/2;if(e){var u=Math.sqrt(i*i+s*s),l=Math.sqrt(o*o+a*a);e[0]=u+l,e[1]=u-l}if(n){var c=Math.atan2(a,o),d=Math.atan2(s,i);n[0]=(d-c)/2,n[1]=(d+c)/2}}},e.a=r.c},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?s(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}e.a=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var l=t?function(t){function e(){for(var t,r,u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];return i(this,e),r=o(this,(t=a(e)).call.apply(t,[this].concat(l))),n.forEach((function(t){var e;"function"==typeof t.prototype.initializer&&(e=t.prototype.initializer).call.apply(e,[s(r)].concat(l))})),r}return u(e,t),e}(t):function(){},c=function(e,n){Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n)).forEach((function(r){r.match(/^(?:constructor|prototype|arguments|caller|name|bind|call|apply|toString|length)$/)||t&&r.match(/^(?:initializer)$/)||Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))};return n.forEach((function(t){c(l.prototype,t.prototype),c(l,t)})),l}},function(t,e,n){"use strict";Math.QUATER_PI=.25*Math.PI,Math.HALF_PI=.5*Math.PI,Math.HALF_NPI=-.5*Math.PI,Math.TWO_PI=2*Math.PI,Math.NPI=-Math.PI,Math.NQUATER_PI=.25*Math.NPI,Math.NHALF_PI=.5*Math.NPI,Math.NTWO_PI=2*Math.NPI,Math.INV_PI=1/Math.PI,Math.RAD_TO_DEG=180/Math.PI,Math.DEG_TO_RAD=Math.PI/180,Math.EPS=1e-5,Math.clamp=function(t,e,n){return t<e?e:t>n?n:t},Math.clamp01=function(t){return t<0?0:t>1?1:t},Math.lerp=function(t,e,n){return t*(1-n)+e*n},e.a=Math},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function s(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.d(e,"a",(function(){return x}));var d=n(2),h=n(18),f=n(20),p=n(10),m=n(5),_=n(8),y=n(11),v=n(0),g=function(t){function e(t){var n;return i(this,e),(n=s(this,u(e).call(this,["changed:xform","changed:style","changed:order","changed:visibility","changed:geom"])))._aabox=d.create(),n._zIndex=t&&t.zIndex?t.zIndex:0,n._visible=!0,n._geomDirty=!1,n._fullXform=v.c.create(),n}return l(e,t),a(e,[{key:"zIndex",set:function(t){if(!Number.isInteger(t))throw new Error("zIndex must be an integer");if(t!==this._zIndex){var e=this._zIndex;this._zIndex=t,this.fire("changed:order",{attr:"zIndex",prevVal:e,currVal:this._zIndex})}return this},get:function(){return this._zIndex}},{key:"aabox",get:function(){return this._updateAABox(),this._aabox}},{key:"visible",set:function(t){if("boolean"!=typeof t)throw new Error("visible must be a boolean");return t!==this._visible&&(this._visible=t,this.fire("changed:visibility",{attr:"visible",prevVal:!this._visible,currVal:this._visible})),this},get:function(){return this._visible}}]),e}(y.a),x=function(t){function e(t){var n;return i(this,e),(n=s(this,u(e).call(this,t)))._stateStack=[],n}return l(e,t),a(e,[{key:"save",value:function(){var t=new _.a;return _.a.copyBasicStyle(this,t),t.zIndex=this.zIndex,this._stateStack.push(t),this}},{key:"restore",value:function(){var t=this._stateStack.pop();return t&&(_.a.copyBasicStyle(t,this),this.zIndex=t.zIndex),this}},{key:"getGlobalDimensions",value:function(){var t=[0,0];return v.c.svd(null,t,null,this.globalXform),t[0]*=this.width,t[1]*=this.height,t}},{key:"containsPoint",value:function(t,e,n,r){var i=!1,o=this.aabox;return this.visible&&d.containsPt(o,e)&&(r.save(),r.setTransform(this._fullXform[0],this._fullXform[1],this._fullXform[2],this._fullXform[3],this._fullXform[4],this._fullXform[5]),r.beginPath(),this._draw(r),r.strokeStyle="rgba(0,0,0,0)",r.lineWidth=this.strokeWidth+5,r.dashPattern=[],r.setTransform(1,0,0,1,0,0),r.stroke(),(this.isFillVisible()&&r.isPointInPath(t[0],t[1])||this.isStrokeVisible()&&r.isPointInStroke(t[0],t[1]))&&(i=!0),r.restore()),i}},{key:"renderBounds",value:function(t,e,n){t.save(),t.setTransform(e[0],e[1],e[2],e[3],e[4],e[5]),n.setStrokeCtx(t);var r=[0,0],i=[0,0],o=this.aabox;d.getCenter(r,o),d.getExtents(i,o),t.beginPath(),t.rect(r[0]-i[0],r[1]-i[1],2*i[0],2*i[1]),t.setTransform(1,0,0,1,0,0),t.stroke(),t.restore()}},{key:"_localXformUpdated",value:function(){this._boundsOutOfDate=!0}},{key:"_globalXformUpdated",value:function(){this._boundsOutOfDate=!0}},{key:"render",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.transformCtx(t,this._fullXform,e),t.beginPath();var o=this._draw(t);(o||void 0===o)&&(this.isFillVisible()&&(null===r||Boolean(r))&&(n.setFillStyle(t,this),t.fill()),this.isStrokeVisible()&&(null===i||Boolean(i))&&(n.setStrokeStyle(t,this),t.setTransform(1,0,0,1,0,0),t.stroke()))}},{key:"setStyle",value:function(t){return _.a.copyBasicStyle(t,this),this}},{key:"toJSON",value:function(){var t=this;return this._stateStack&&this._stateStack.length&&(t=this._stateStack[0]),Object.assign({visible:this.visible,zIndex:t.zIndex},_.a.toJSON(t),p.c.toJSON(this))}},{key:"visible",get:function(){return this._visible&&(this.isFillVisible()||this.isStrokeVisible())}}],[{key:"shapeCompare",value:function(t,e){var n=t.zIndex,r=e.zIndex;if(n<r)return-1;if(n>r)return 1;var i=h.b.compareFillStyle(t,e);return i||(i=f.b.compareStrokeStyle(t,e)),i}}]),e}(Object(m.a)(g,Object(p.b)("changed:xform"),Object(h.a)("changed:style"),Object(f.a)("changed:style")))},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.d(e,"a",(function(){return f}));var c=n(5),d=n(18),h=n(20),f=function(t){function e(){return i(this,e),a(this,s(e).apply(this,arguments))}return u(e,t),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(e,null,[{key:"copyBasicStyle",value:function(t,e){d.b.copyFillStyle(t,e),h.b.copyStrokeStyle(t,e)}},{key:"toJSON",value:function(t){return Object.assign(d.b.toJSON(t),h.b.toJSON(t))}}]),e}(Object(c.a)((function t(){i(this,t)}),d.b,h.b))},function(t,e,n){"use strict";var r=n(0);r.d.cross2d=function(t,e){return t[0]*e[1]-t[1]*e[0]},r.d.angleFast=function(t,e){return Math.acos(r.d.dot(t,e))},r.d.angle=function(t,e){var n=r.d.dot(t,e),i=r.d.cross2d(t,e);return Math.atan2(i,n)},r.d.anglePosX=function(t){var e=Math.atan2(t[1],t[0]);return e<0&&(e*=-1),e},e.a=r.d},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function a(t,e,n,r,i){return l.c.identity(t),l.c.translate(t,t,[r[0]+i[0],r[1]+i[1]]),l.c.rotate(t,t,d.a.DEG_TO_RAD*e),l.c.scale(t,t,n),l.c.translate(t,t,[-i[0],-i[1]]),t}function s(t){t.forEach((function(t){t._xformDirty=!0,s(t._children)}))}e.a=a,n.d(e,"c",(function(){return h})),e.b=function(t){return Object(c.a)(null,h,function(){function e(){r(this,e)}return o(e,[{key:"setPosition",value:function(e){if(!u.equals(e,this._pos)){var n=[this._pos[0],this._pos[1]];u.copy(this._pos,e),this._lxformDirty=!0,s(this._children),this.fire(t,{attr:"position",prevVal:n,currVal:e})}return this}},{key:"translate",value:function(e){if(e[0]||e[1]){var n=[this._pos[0],this._pos[1]];u.addVec2(this._pos,this._pos,e),this._lxformDirty=!0,s(this._children),this.fire(t,{attr:"position",prevVal:n,currVal:[this._pos[0],this._pos[1]]})}return this}},{key:"setScale",value:function(e){if(!l.d.equals(e,this._scale)){var n=[this._scale[0],this._scale[1]];l.d.copy(this._scale,e),this._lxformDirty=!0,s(this._children),this.fire(t,{attr:"size",prevVal:n,currVal:e})}return this}},{key:"scale",value:function(e){if(1!==e[0]||1!==e[1]){var n=[this._scale[0],this._scale[1]];l.d.multiply(this._scale,this._scale,e),this._lxformDirty=!0,s(this._children),this.fire(t,{attr:"size",prevVal:n,currVal:[this._scale[0],this._scale[1]]})}return this}},{key:"setRotation",value:function(e){var n=e%360;if(n!==this._rotDeg){var r=this._rotDeg;this._rotDeg=n,this._lxformDirty=!0,s(this._children),this.fire(t,{attr:"orientation",prevVal:r,curral:this._rotDeg})}}},{key:"rotate",value:function(e){if(e){var n=this._rotDeg;this._rotDeg+=e,this._rotDeg%=360,this._lxformDirty=!0,s(this._children),this.fire(t,{attr:"orientation",prevVal:n,curral:this._rotDeg})}return this}},{key:"setTransformations",value:function(e,n,r,i,o){var a=[],c=[],d=[];if(!(void 0===e||void 0===n||l.a.equals(e,this._pos[0])&&l.a.equals(n,this._pos[1]))){var h=u.clone(this._pos);this._pos[0]=e,this._pos[1]=n,a.push("position"),c.push(h),d.push(u.clone(this._pos))}if(!(void 0===r||void 0===i||l.a.equals(r,this._scale[0])&&l.a.equals(i,this._scale[1]))){var f=l.d.clone(this._scale);l.d.set(this._scale,r,i),a.push("size"),c.push(f),d.push(l.d.clone(this._scale))}if(void 0!==o){var p=o%360;if(!l.a.equals(p,this._rotDeg)){var m=this._rotDeg;this._rotDeg=p,a.push("orientation"),c.push(m),d.push(this._rotDeg)}}return a.length&&(this._lxformDirty=!0,s(this._children),this.fire(t,{attrs:a,prevVals:c,currVals:d})),this}},{key:"pivot",set:function(e){if(!u.equals(e,this._pivot)){var n=[this._pivot[0],this._pivot[1]];u.copy(this._pivot,e),this._lxformDirty=!0,s(this._children),this.fire(t,{attr:"pivot",prevVal:n,currVal:e})}return this},get:function(){return u.clone(this._pivot)}}]),e}())};var u=n(3),l=n(0),c=n(5),d=n(6),h=function(){function t(e){r(this,t),this.initializer(e)}return o(t,[{key:"_initTransformFromOptions",value:function(t){t&&(void 0!==t.position&&this.setPosition(t.position),void 0!==t.scale&&this.setScale(t.scale),void 0!==t.rotation&&this.setRotation(t.rotation),void 0!==t.pivot&&(this.pivot=t.pivot))}},{key:"initializer",value:function(t){this._localXform=l.c.create(),this._lxformDirty=!1,this._pivot=u.create(0,0),this._pos=u.create(0,0),this._scale=l.d.fromValues(1,1),this._rotDeg=0,this._globalXform=l.c.create(),this._xformDirty=!1,this._parent=null,this._children=new Set,this._initTransformFromOptions(t)}},{key:"addChildXform",value:function(t){this._children.has(t)||(this._children.add(t),t._parent&&t._parent.removeChild(t),t._parent=this,t._xformDirty=!0,s(t._children))}},{key:"removeChildXform",value:function(t){this._children.delete(t)}},{key:"unparentXform",value:function(){this._parent&&(this._parent.removeChild(this),this._parent=null,l.c.copy(this._globalXform,this.localXform))}},{key:"getPosition",value:function(){return l.d.clone(this._pos)}},{key:"getPositionRef",value:function(){return this._pos}},{key:"getWorldPosition",value:function(){var t=this.globalXform;return u.create(t[4],t[5])}},{key:"setPosition",value:function(t){u.copy(this._pos,t),this._lxformDirty=!0,s(this._children)}},{key:"translate",value:function(t){return(t[0]||t[1])&&(u.addVec2(this._pos,this._pos,t),this._lxformDirty=!0,s(this._children)),this}},{key:"getScale",value:function(){return l.d.clone(this._scale)}},{key:"getScaleRef",value:function(){return this._scale}},{key:"setScale",value:function(t){return l.d.copy(this._scale,t),this._lxformDirty=!0,s(this._children),this}},{key:"scale",value:function(t){return 1===t[0]&&1===t[1]||(l.d.multiply(this._scale,this._scale,t),this._lxformDirty=!0,s(this._children)),this}},{key:"getRotation",value:function(){return this._rotDeg}},{key:"setRotation",value:function(t){return this._rotDeg=t,this._lxformDirty=!0,s(this._children),this}},{key:"rotate",value:function(t){return t&&(this._rotDeg+=t,this._lxformDirty=!0,s(this._children)),this}},{key:"_dirtyChildren",value:function(){s(this._children)}},{key:"_updatelocalxform",value:function(){this._lxformDirty&&(a(this._localXform,this._rotDeg,this._scale,this._pos,this._pivot),this._localXformUpdated&&this._localXformUpdated(),this._lxformDirty=!1)}},{key:"_updateglobalxform",value:function(){(this._lxformDirty||this._xformDirty)&&(this._updatelocalxform(),this._parent?l.c.multiply(this._globalXform,this._parent.globalXform,this._localXform):l.c.copy(this._globalXform,this._localXform),this._globalXformUpdated&&this._globalXformUpdated(),this._xformDirty=!1)}},{key:"transformCtx",value:function(t,e,n){l.c.multiply(e,n,this.globalXform),t.setTransform(e[0],e[1],e[2],e[3],e[4],e[5])}},{key:"pivot",set:function(t){return u.copy(this._pivot,t),this._lxformDirty=!0,s(this._children),this},get:function(){return u.clone(this._pivot)}},{key:"pivotRef",get:function(){return this._pivot}},{key:"parent",get:function(){return this._parent}},{key:"localXform",get:function(){return this._updatelocalxform(),this._localXform}},{key:"globalXform",get:function(){return this._updateglobalxform(),this._globalXform}}],[{key:"toJSON",value:function(t){var e=t.getPositionRef(),n=t.getScaleRef(),r=t.pivotRef;return{position:[e[0],e[1]],scale:[n[0],n[1]],rotation:t.getRotation(),pivot:[r[0],r[1]]}}}]),t}()},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n,r){var o=this;if(n>=e.length)return 0;var a=0,s=null;return(s=t.get(e[n]))&&(a=i(s[0],e,n+1,r),s[1].forEach((function(t){return t.call(o,r)})),a+=s[1].length),a}function o(t,e){var n=-1,r=t[0],i=t[1];i.length&&e.forEach((function(t){(n=i.indexOf(t))>=0&&i.splice(n,1)})),r.forEach((function(t){o(t,e)}))}function a(t){var e=t;if("string"==typeof t)e=[t];else if(!Array.isArray(t))throw new Error("Input must be an array of strings");return e}n.d(e,"a",(function(){return s}));var s=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.initializer(e)}return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(t,[{key:"initializer",value:function(t){this._listeners=new Map,this.registerEvents(t)}},{key:"registerEvents",value:function(t){var e=this;if(t){var n=a(t);if("string"==typeof t)n=[t];else if(!Array.isArray(t))throw new Error("Events must be an array of strings");n.forEach((function(t){for(var n=t.split(":"),r=e._listeners,i=0;i<n.length;i+=1){var o=r.get(n[i]);o||(o=[new Map,[]],r.set(n[i],o)),r=o[0]}}))}}},{key:"on",value:function(t,e){var n=this;return a(t).forEach((function(t){var r=t.split(":"),i=n._listeners,o=null;r.forEach((function(e){if(!(o=i.get(e))){var n=[];throw i.forEach((function(t,e){return n.push(e)})),new Error("".concat(t," is not a valid event type. The registered event types at this level are [").concat(n,"]"))}i=o[0]})),o[1].indexOf(e)<0&&o[1].push(e)})),this}},{key:"off",value:function(t,e){var n=this,r=a(t),i=e;return Array.isArray(i)||(i=[e]),r.forEach((function(t){var e=t.split(":"),r=n._listeners,a=null,s=0;for(s=0;s<e.length&&(a=r.get(e[s]));s+=1)r=a[0];a&&o(a,i)})),this}},{key:"once",value:function(t,e){var n=this;return this.on(t,(function r(i){n.off(t,r),e.call(n,i)})),this}},{key:"fire",value:function(t,e){var n=t.split(":"),r={type:t,target:this};return Object.assign(r,e),i(this._listeners,n,0,r),this._eventParent&&(r={},Object.getOwnPropertyNames(e).forEach((function(t){r[t]=e[t]})),this._eventParent.fire(t,r)),this}},{key:"listens",value:function(t){for(var e=t.split(":"),n=this._listeners,r=null,i=0;i<e.length&&(r=n.get(e[i]));i+=1)n=r[0];return r||this._eventParent&&this._eventParent.listens(t)}},{key:"setEventedParent",value:function(t,e){return this._eventParent=t,this._eventParentData=e,this}}]),t}()},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function c(t,e,n,r){f.isEmpty(t)?(t[0]=e[0],t[2]=e[0],r[0]=r[2]=n,t[1]=e[1],t[3]=e[1],r[1]=r[3]=n):(e[0]<t[0]?(t[0]=e[0],r[0]=n):e[0]>t[2]&&(t[2]=e[0],r[2]=n),e[1]<t[1]?(t[1]=e[1],r[1]=n):e[1]>t[3]&&(t[3]=e[1],r[3]=n))}function d(t,e,n){var r=e[0]*n[1]-n[0]*e[1];return t[0]+=(e[0]+n[0])*r,t[1]+=(e[1]+n[1])*r,r}function h(t){return Array.isArray(t)||ArrayBuffer&&ArrayBuffer.isView(t)}n.d(e,"a",(function(){return x}));var f=n(2),p=n(3),m=n(7),_=n(0),y=n(6),v=n(22),g=_.c.create(),x=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=t.verts||[];if(n=o(this,s(e).call(this,t)),!h(r)||0===r.length||h(r[0])&&r.length<1||!h(r[0])&&(r.length<2||r.length%2!=0))throw new Error("PolyLine shapes must be initialized with an array of 2d points and contain at least 1 points");n._extentIndices=[-1,-1,-1,-1],n._localaabox=f.create(),n._verts=[],n._centroid=[0,0],f.initEmpty(n._aabox);var i=0,a=0;if(h(r[0])){for(a=0;a<r.length-1;a+=1)n._verts.push(p.clone(r[a])),c(n._aabox,r[a],a,n._extentIndices),i+=d(n._centroid,r[a],r[a+1]);n._verts.push(p.clone(r[a])),c(n._aabox,r[a],a,n._extentIndices),i+=d(n._centroid,r[a],r[0])}else{n._verts.push(p.create(r[0],r[1])),c(n._aabox,n._verts[0],0,n._extentIndices);var u=1;for(a=2;a<r.length-2;a+=2,u+=1)n._verts.push(p.create(r[a],r[a+1])),c(n._aabox,n._verts[u],u,n._extentIndices),i+=d(n._centroid,n._verts[u-1],n._verts[u]);n._verts.push(p.create(r[a],r[a+1])),c(n._aabox,n._verts[u],u,n._extentIndices),i+=d(n._centroid,n._verts[u],n._verts[0])}i*=.5,n._centroid[0]/=6*i,n._centroid[1]/=6*i;var l=p.create();return f.getCenter(l,n._aabox),n.pivot=l,n._verts.length<3?n._convexHull=n._verts.map((function(t,e){return e})):n._convexHull=Object(v.a)(n._verts),n}return u(e,t),function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(e,[{key:"getDimensions",value:function(){return[this.width,this.height]}},{key:"_collapseVerts",value:function(){var t=this;p.set(this._pivot,0,0);var e=this.localXform;if(_.c.equals(e,g))return!1;f.initEmpty(this._aabox);for(var n=0;n<this._verts.length;n+=1)p.transformMat2d(this._verts[n],this._verts[n],e);return this._verts.length<3?this._convexHull=this._verts.map((function(t,e){return e})):this._convexHull=Object(v.a)(this._verts),this._convexHull.forEach((function(e){c(t._aabox,t._verts[e],e,t._extentIndices)})),this.setTransformations(0,0,1,1,0),!0}},{key:"translateVert",value:function(t,e){if(t>=this._verts.length)throw new Error("Cannot translate vertex at index ".concat(t,". There are only ").concat(this._verts.length," vertices in the polygon."));if(e[0]||e[1]){var n=p.clone(this._verts[t]),r=p.clone(this._verts[t]);p.addVec2(r,r,e),this._collapseVerts(),this._resetAABox=!0,this._geomDirty=!0,p.copy(r),this.fire("changed:geom",{attr:"verts[".concat(t,"]"),prevVal:n,currVal:r})}return this}},{key:"setVertPosition",value:function(t,e){if(t>=this._verts.length)throw new Error("Cannot translate vertex at index ".concat(t,". There are only ").concat(this._verts.length," vertices in the polygon."));if(!p.equals(e,this._verts[t])){var n=p.clone(this._verts[t]);this._collapseVerts(),p.copy(this._verts[t],e),this._resetAABox=!0,this._geomDirty=!0,this.fire("changed:geom",{attr:"verts[".concat(t,"]"),prevVal:n,currVal:e})}}},{key:"insertVert",value:function(t,e){var n=y.a.min(y.a.max(t,0),this._verts.length);return this._collapseVerts(),t>=this._verts.length?(this._verts.push(p.clone(e)),n=this._verts.length-1):this._verts.splice(t,0,p.clone(e)),this._resetAABox=!0,this._geomDirty=!0,this.fire("changed:geom:addvert",{attr:"verts[".concat(n,"]"),currVal:e}),n}},{key:"appendVert",value:function(t){return this.insertVert(this._verts.length,t)}},{key:"removeVert",value:function(t){if(t>=this._verts.length||t<0)throw new Error("Cannot remove vertex ".concat(t,". Invalid index. There are only ").concat(this._verts.length," vertices in the shape."));var e=this._verts[t];return this._verts.splice(t,1),this._collapseVerts(),this._resetAABox=!0,this._geomDirty=!0,this.fire("changed:geom:removevert",{attr:"verts[".concat(t,"]"),currVal:e}),t}},{key:"_rebuildAABox",value:function(){var t=this;f.initEmpty(this._aabox),this._verts.length<3?this._convexHull=this._verts.map((function(t,e){return e})):this._convexHull=Object(v.a)(this._verts),this._convexHull.forEach((function(e){c(t._aabox,t._verts[e],e,t._extentIndices)}));var e=p.create(0,0);f.getCenter(e,this._aabox),this.pivot=e}},{key:"_updateAABox",value:function(){var t=this;if(this._resetAABox&&(this._rebuildAABox(),this._resetAABox=!1),this._boundsOutOfDate||this._geomDirty){f.initEmpty(this._aabox);var e=[0,0],n=this.globalXform;if(this._convexHull.forEach((function(r){f.encapsulatePt(t._aabox,t._aabox,p.transformMat2d(e,t._verts[r],n))})),this._boundsOutOfDate=!1,this._geomDirty){var r=p.create();r[0]=this._verts[this._extentIndices[0]][0]+.5*(this._verts[this._extentIndices[2]][0]-this._verts[this._extentIndices[0]][0]),r[1]=this._verts[this._extentIndices[1]][1]+.5*(this._verts[this._extentIndices[3]][1]-this._verts[this._extentIndices[1]][1]),this.pivot=r,this._geomDirty=!1}}}},{key:"_draw",value:function(t){var e=!1;if(this._verts.length>=2){t.moveTo(this._verts[0][0],this._verts[0][1]);for(var n=1;n<this._verts.length;n+=1)t.lineTo(this._verts[n][0],this._verts[n][1]);e=!0}return e}},{key:"toJSON",value:function(){return Object.assign({type:"PolyLine",verts:this.vertsRef.map((function(t){return[t[0],t[1]]}))},a(s(e.prototype),"toJSON",this).call(this))}},{key:"width",get:function(){return this._updateAABox(),!this._verts.length||this._extentIndices[0]<0||this._extentIndices[2]<0?0:this._verts[this._extentIndices[2]][0]-this._verts[this._extentIndices[0]][0]}},{key:"height",get:function(){return this._updateAABox(),!this._verts.length||this._extentIndices[0]<0||this._extentIndices[2]<0?0:this._verts[this._extentIndices[3]][1]-this._verts[this._extentIndices[1]][1]}},{key:"vertsRef",get:function(){return this._verts}},{key:"numVerts",get:function(){return this._verts.length}}]),e}(m.a);x.aaboxEncapsulatePt=c},function(t,e,n){"use strict";e.a=function(){var t=new r.ARRAY_TYPE(9);return r.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t};var r=n(1)},function(t,e,n){"use strict";e.b=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},e.a=function(t,e){var n=e[0]+e[5]+e[10],r=0;return n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t},n(1)},function(t,e,n){"use strict";function r(){var t=new i.ARRAY_TYPE(4);return i.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}e.b=r,e.e=function(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+a*s,t[1]=i*u+o*s,t[2]=o*u-i*s,t[3]=a*u-r*s,t},e.f=function(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u-o*s,t[1]=i*u+a*s,t[2]=o*u+r*s,t[3]=a*u-i*s,t},e.g=function(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+i*s,t[1]=i*u-r*s,t[2]=o*u+a*s,t[3]=a*u-o*s,t},n.d(e,"a",(function(){return u})),n.d(e,"c",(function(){return l})),n.d(e,"d",(function(){return c})),n.d(e,"h",(function(){return d}));var i=n(1),o=n(13),a=n(16),s=n(17),u=(s.b,s.g,s.c),l=(s.l,s.a,s.k,s.d),c=(s.i,s.h),d=s.m;s.j,s.f,s.e,a.a(),a.d(1,0,0),a.d(0,1,0),r(),r(),o.a()},function(t,e,n){"use strict";function r(){var t=new i.ARRAY_TYPE(3);return i.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}e.a=r,e.d=function(t,e,n){var r=new i.ARRAY_TYPE(3);return r[0]=t,r[1]=e,r[2]=n,r},e.f=function(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t},e.c=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},e.b=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t},n.d(e,"e",(function(){return o}));var i=n(1),o=function(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)};r()},function(t,e,n){"use strict";e.b=function(t){var e=new r.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.g=function(t,e,n,i){var o=new r.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=i,o},e.c=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.l=function(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t},e.a=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},e.k=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},e.h=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.sqrt(e*e+n*n+r*r+i*i)},e.m=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i},e.j=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a),t},e.d=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},e.i=function(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t[3]=s+r*(n[3]-s),t},e.f=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.e=function(t,e){var n=t[0],i=t[1],o=t[2],a=t[3],s=e[0],u=e[1],l=e[2],c=e[3];return Math.abs(n-s)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-u)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-l)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(a-c)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))};var r=n(1);!function(){var t=new r.ARRAY_TYPE(4);r.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}()},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}n.d(e,"b",(function(){return u})),e.a=function(t){var e=Object(a.a)(t,"fillColor");return Object(s.a)(null,u,function(){function t(){r(this,t)}return o(t,[{key:"initializer",value:function(t){this._fillColor=new e("red",this),this._initFillStyleFromOptions(t)}}]),t}())};var a=n(19),s=n(5),u=function(){function t(e){r(this,t),this.initializer(e)}return o(t,[{key:"_initFillStyleFromOptions",value:function(t){t&&(void 0!==t.fillColor&&(this.fillColor=t.fillColor),void 0!==t.fillOpacity&&(this.fillOpacity=t.fillOpacity))}},{key:"initializer",value:function(t){this._fillColor=new a.b("black"),this._initFillStyleFromOptions(t)}},{key:"isFillVisible",value:function(){return this._fillColor.opacity>0}},{key:"isTransparent",value:function(){return this._fillColor.isTransparent()}},{key:"setFillCtx",value:function(t){t.fillStyle=this.fillColor}},{key:"fillColor",set:function(t){return this._fillColor.value=t,this},get:function(){return this._fillColor.value}},{key:"fillOpacity",set:function(t){return this._fillColor.opacity=t,this},get:function(){return this._fillColor.opacity}},{key:"packedFillColor",set:function(t){return this._fillColor.packedValue=t,this},get:function(){return this._fillColor.packedValue}}],[{key:"copyFillStyle",value:function(t,e){void 0===t.packedFillColor?(void 0!==t.fillColor&&(e.fillColor=t.fillColor),void 0!==t.fillOpacity&&(e.fillOpacity=t.fillOpacity)):e.packedFillColor=t.packedFillColor}},{key:"compareFillStyle",value:function(t,e){var n=t.isFillVisible(),r=e.isFillVisible();return n!==r?n-r:t.packedFillColor-e.packedFillColor}},{key:"toJSON",value:function(t){return{fillColor:t.fillColor}}}]),t}()},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t,e,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=a(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function d(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}function h(t){return(255&t)/255}function f(t){return _.a.floor(255*_.a.clamp01(t))}function p(t){return"rgba(".concat(t>>>24,", ").concat((16711680&t)>>16,", ").concat((65280&t)>>8,", ").concat(h(t),")")}function m(t){if("string"!=typeof t)throw new Error("".concat(t," is not a valid color string"));var e=0,n=null;if(n=t.match(v))e=255,e|=_.a.clamp(Number.parseInt(n[3],10),0,255)<<8,e|=_.a.clamp(Number.parseInt(n[2],10),0,255)<<16,e|=_.a.clamp(Number.parseInt(n[1],10),0,255)<<24;else if(n=t.match(g))e=f(Number.parseFloat(n[4],10)),e|=_.a.clamp(Number.parseInt(n[3],10),0,255)<<8,e|=_.a.clamp(Number.parseInt(n[2],10),0,255)<<16,e|=_.a.clamp(Number.parseInt(n[1],10),0,255)<<24;else if(n=t.match(x))e=255,e|=_.a.clamp(Number.parseInt(n[3],16),0,255)<<8,e|=_.a.clamp(Number.parseInt(n[2],16),0,255)<<16,e|=_.a.clamp(Number.parseInt(n[1],16),0,255)<<24;else{if(!y.has(t))throw new Error("".concat(t," is not a valid color string"));n=y.get(t).match(x),e=255,e|=_.a.clamp(Number.parseInt(n[3],16),0,255)<<8,e|=_.a.clamp(Number.parseInt(n[2],16),0,255)<<16,e|=_.a.clamp(Number.parseInt(n[1],16),0,255)<<24}return e}n.d(e,"b",(function(){return b})),e.a=function(t,e){return function(n){function r(){return l(this,r),i(this,a(r).apply(this,arguments))}return s(r,n),d(r,[{key:"initializer",value:function(t,e){this._eventHandler=e,o(a(r.prototype),"initializer",this).call(this,t)}},{key:"_checkPackedColorChanged",value:function(n){if(n!==this._color){var r=this._color,i=h(r),o=h(n);this._color=n,this._eventHandler.fire(t,{attr:e,prevVal:p(r),currVal:p(this._color)}),o!==i&&this._eventHandler.fire(t,{attr:"opacity",prevVal:i,currVal:o})}}},{key:"value",set:function(t){var e=m(t);return this._checkPackedColorChanged(e),this},get:function(){return p(this._color)}},{key:"packedValue",set:function(t){var e=0;return e|=t,this._checkPackedColorChanged(e),this},get:function(){return this._color}},{key:"opacity",set:function(e){if("number"!=typeof e)throw new Error("Opacity must be a number between 0-1");var n=255&this._color,r=f(e);return r!==n&&(this._color&=4294967040,this._color|=r,this._eventHandler.fire(t,{attr:"opacity",prevVal:n/255,currVal:r/255})),this},get:function(){return h(this._color)}}]),r}(b)};var _=n(6),y=new Map([["aliceblue","#F0F8FF"],["antiquewhite","#FAEBD7"],["aqua","#00FFFF"],["aquamarine","#7FFFD4"],["azure","#F0FFFF"],["beige","#F5F5DC"],["bisque","#FFE4C4"],["black","#000000"],["blanchedalmond","#FFEBCD"],["blue","#0000FF"],["blueviolet","#8A2BE2"],["brown","#A52A2A"],["burlywood","#DEB887"],["cadetblue","#5F9EA0"],["chartreuse","#7FFF00"],["chocolate","#D2691E"],["coral","#FF7F50"],["cornflowerblue","#6495ED"],["cornsilk","#FFF8DC"],["crimson","#DC143C"],["cyan","#00FFFF"],["darkblue","#00008B"],["darkcyan","#008B8B"],["darkgoldenrod","#B8860B"],["darkgray","#A9A9A9"],["darkgreen","#006400"],["darkkhaki","#BDB76B"],["darkmagenta","#8B008B"],["darkolivegreen","#556B2F"],["darkorange","#FF8C00"],["darkorchid","#9932CC"],["darkred","#8B0000"],["darksalmon","#E9967A"],["darkseagreen","#8FBC8F"],["darkslateblue","#483D8B"],["darkslategray","#2F4F4F"],["darkturquoise","#00CED1"],["darkviolet","#9400D3"],["deeppink","#FF1493"],["deepskyblue","#00BFFF"],["dimgray","#696969"],["dodgerblue","#1E90FF"],["firebrick","#B22222"],["floralwhite","#FFFAF0"],["forestgreen","#228B22"],["fuchsia","#FF00FF"],["gainsboro","#DCDCDC"],["ghostwhite","#F8F8FF"],["gold","#FFD700"],["goldenrod","#DAA520"],["gray","#808080"],["green","#008000"],["greenyellow","#ADFF2F"],["honeydew","#F0FFF0"],["hotpink","#FF69B4"],["indianred","#CD5C5C"],["indigo","#4B0082"],["ivory","#FFFFF0"],["khaki","#F0E68C"],["lavender","#E6E6FA"],["lavenderblush","#FFF0F5"],["lawngreen","#7CFC00"],["lemonchiffon","#FFFACD"],["lightblue","#ADD8E6"],["lightcoral","#F08080"],["lightcyan","#E0FFFF"],["lightgoldenrodyellow","#FAFAD2"],["lightgray","#D3D3D3"],["lightgreen","#90EE90"],["lightpink","#FFB6C1"],["lightsalmon","#FFA07A"],["lightseagreen","#20B2AA"],["lightskyblue","#87CEFA"],["lightslategray","#778899"],["lightsteelblue","#B0C4DE"],["lightyellow","#FFFFE0"],["lime","#00FF00"],["limegreen","#32CD32"],["linen","#FAF0E6"],["magenta","#FF00FF"],["maroon","#800000"],["mediumaquamarine","#66CDAA"],["mediumblue","#0000CD"],["mediumorchid","#BA55D3"],["mediumpurple","#9370DB"],["mediumseagreen","#3CB371"],["mediumslateblue","#7B68EE"],["mediumspringgreen","#00FA9A"],["mediumturquoise","#48D1CC"],["mediumvioletred","#C71585"],["midnightblue","#191970"],["mintcream","#F5FFFA"],["mistyrose","#FFE4E1"],["moccasin","#FFE4B5"],["navajowhite","#FFDEAD"],["navy","#000080"],["oldlace","#FDF5E6"],["olive","#808000"],["olivedrab","#6B8E23"],["orange","#FFA500"],["orangered","#FF4500"],["orchid","#DA70D6"],["palegoldenrod","#EEE8AA"],["palegreen","#98FB98"],["paleturquoise","#AFEEEE"],["palevioletred","#DB7093"],["papayawhip","#FFEFD5"],["peachpuff","#FFDAB9"],["peru","#CD853F"],["pink","#FFC0CB"],["plum","#DDA0DD"],["powderblue","#B0E0E6"],["purple","#800080"],["rebeccapurple","#663399"],["red","#FF0000"],["rosybrown","#BC8F8F"],["royalblue","#4169E1"],["saddlebrown","#8B4513"],["salmon","#FA8072"],["sandybrown","#F4A460"],["seagreen","#2E8B57"],["seashell","#FFF5EE"],["sienna","#A0522D"],["silver","#C0C0C0"],["skyblue","#87CEEB"],["slateblue","#6A5ACD"],["slategray","#708090"],["snow","#FFFAFA"],["springgreen","#00FF7F"],["steelblue","#4682B4"],["tan","#D2B48C"],["teal","#008080"],["thistle","#D8BFD8"],["tomato","#FF6347"],["turquoise","#40E0D0"],["violet","#EE82EE"],["wheat","#F5DEB3"],["white","#FFFFFF"],["whitesmoke","#F5F5F5"],["yellow","#FFFF00"],["yellowgreen","#9ACD32"]]),v=/^rgb\s*\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)\s*$/i,g=/^rgba\s*\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([0,1](?:\.\d*)?)\s*\)\s*$/i,x=/^#([0-9,a-f,A-F]{2})([0-9,a-f,A-F]{2})([0-9,a-f,A-F]{2})\s*$/i,b=function(){function t(e){l(this,t);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.initializer.apply(this,[e].concat(r))}return d(t,[{key:"initializer",value:function(t){this._color=0,t&&(this.value=t)}},{key:"isTransparent",value:function(){return h(this._color)<1}},{key:"value",set:function(t){return this._color=m(t),this},get:function(){return p(this._color)}},{key:"packedValue",set:function(t){return this._color=0,this._color|=t,this},get:function(){return this._color}},{key:"opacity",set:function(t){if("number"!=typeof t)throw new Error("Opacity must be a number between 0-1");var e=255&this._color,n=f(t);return n!==e&&(this._color&=4294967040,this._color|=n),this},get:function(){return h(this._color)}}]),t}()},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function a(t){if("number"!=typeof t)throw new Error("Stroke width must be a number")}function s(t){var e=-1;if("string"!=typeof t||(e=p.indexOf(t.toLowerCase()))<0)throw new Error("Line join must be a string and must be one of [".concat(p.join(", "),"]"));return e}function u(t){var e=-1;if("string"!=typeof t||(e=_.indexOf(t.toLowerCase()))<0)throw new Error("Line cap must be a string and must be one of [".concat(_.join(", "),"]"));return e}function l(t){if(!t||!Array.isArray(t)||t.length%2!=0)throw new Error("The dash pattern must be an array with an even number of numbers (or an empty array)")}function c(t){if("number"!=typeof t)throw new Error("The dash offset must be a number")}n.d(e,"b",(function(){return y})),e.a=function(t){var e=Object(d.a)(t,"strokeColor");return Object(h.a)(null,y,function(){function n(){r(this,n)}return o(n,[{key:"initializer",value:function(t){this._strokeColor=new e("black",this),this._strokeWidth=0,this._lineJoin=f.MITER,this._lineCap=m.BUTT,this._dashPattern=[],this._dashOffset=0,this._initStrokeStyleFromOptions(t)}},{key:"strokeWidth",set:function(e){if(a(e),e!==this._strokeWidth){var n=this._strokeWidth;this._strokeWidth=e,this.fire(t,{attr:"strokeWidth",prevVal:n,curral:this._strokeWidth})}return this},get:function(){return this._strokeWidth}},{key:"lineJoin",set:function(e){var n=s(e);if(n!==this._lineJoin){var r=this._lineJoin;this._lineJoin=n,this.fire(t,{attr:"lineJoin",prevVal:r,curral:this._lineJoin})}return this},get:function(){return p[this._lineJoin]}},{key:"lineCap",set:function(e){var n=u(e);if(n!==this._lineCap){var r=this._lineCap;this._lineCap=n,this.fire(t,{attr:"lineCap",prevVal:r,curral:this._lineCap})}return this},get:function(){return _[this._lineCap]}},{key:"dashPattern",set:function(e){l(e);var n=!1;if(e.length===this._dashPattern.length){for(var r=0;r<e.length;r+=1)if(e[r]!==this._dashPattern[r]){n=!0;break}}else n=!0;if(n){var i=this._dashPattern;this._dashPattern=e.slice(),this.fire(t,{attr:"dashPattern",prevVal:i,curral:this._dashPattern.slice()})}return this},get:function(){return this._dashPattern.slice()}},{key:"dashOffset",set:function(e){if(c(e),e!==this._dashOffset){var n=this._dashOffset;this._dashOffset=e,this._dashPattern.length&&this.fire(t,{attr:"dashOffset",prevVal:n,curral:this._dashOffset})}return this},get:function(){return this._dashOffset}}]),n}())};var d=n(19),h=n(5),f={MITER:0,BEVEL:1,ROUND:2},p=["miter","bevel","round"],m={BUTT:0,SQUARE:1,ROUND:2},_=["butt","square","round"],y=function(){function t(e){r(this,t),this.initializer(e)}return o(t,[{key:"_initStrokeStyleFromOptions",value:function(t){t&&(void 0!==t.strokeColor&&(this.strokeColor=t.strokeColor),void 0!==t.strokeOpacity&&(this.strokeOpacity=t.strokeOpacity),void 0!==t.strokeWidth&&(this.strokeWidth=t.strokeWidth),void 0!==t.lineMiter&&(this.lineJoin=t.lineMiter),void 0!==t.lineCap&&(this.lineCap=t.lineCap),void 0!==t.dashPattern&&(this.dashPattern=t.dashPattern),void 0!==t.dashOffset&&(this.dashOffset=t.dashOffset))}},{key:"initializer",value:function(t){this._strokeColor=new d.b("black"),this._strokeWidth=0,this._lineJoin=f.MITER,this._lineCap=m.BUTT,this._dashPattern=[],this._dashOffset=0,this._initStrokeStyleFromOptions(t)}},{key:"isStrokeVisible",value:function(){return this._strokeColor.opacity>0&&this._strokeWidth>0}},{key:"isTransparent",value:function(){return this._strokeColor.isTransparent()}},{key:"setStrokeCtx",value:function(t){t.strokeStyle=this.strokeColor,t.lineWidth=this._strokeWidth,t.lineJoin=this._lineJoin,t.lineCap=this._lineCap,t.setLineDash(this._dashPattern),t.lineDashOffset=this._dashOffset}},{key:"strokeColor",set:function(t){return this._strokeColor.value=t,this},get:function(){return this._strokeColor.value}},{key:"strokeOpacity",set:function(t){this._strokeColor.opacity=t},get:function(){return this._strokeColor.opacity}},{key:"packedStrokeColor",set:function(t){this._strokeColor.packedValue=t},get:function(){return this._strokeColor.packedValue}},{key:"strokeWidth",set:function(t){return a(t),this._strokeWidth=t,this},get:function(){return this._strokeWidth}},{key:"lineJoin",set:function(t){var e=s(t);return this._lineJoin=e,this},get:function(){return p[this._lineJoin]}},{key:"lineCap",set:function(t){var e=u(t);return this._lineCap=e,this},get:function(){return _[this._lineJoin]}},{key:"dashPattern",set:function(t){return l(t),this._dashPattern=t.slice(),this},get:function(){return this._dashPattern.slice()}},{key:"dashOffset",set:function(t){return c(t),this._dashOffset=t,this},get:function(){return this._dashOffset}}],[{key:"copyStrokeStyle",value:function(t,e){void 0===t.packedStrokeColor?(void 0!==t.strokeColor&&(e.strokeColor=t.strokeColor),void 0!==t.strokeOpacity&&(e.strokeOpacity=t.strokeOpacity)):e.packedStrokeColor=t.packedStrokeColor,void 0!==t.strokeWidth&&(e.strokeWidth=t.strokeWidth),void 0!==t.lineJoin&&(e.lineJoin=t.lineJoin),void 0!==t.lineCap&&(e.lineCap=t.lineCap),void 0!==t.dashPattern&&(e.dashPattern=t.dashPattern),void 0!==t.dashOffset&&(e.dashOffset=t.dashOffset)}},{key:"compareStrokeStyle",value:function(t,e){var n=t.isStrokeVisible(),r=e.isStrokeVisible();if(n!==r)return n-r;if((n=t.packedStrokeColor)!==(r=e.packedStrokeColor))return n-r;if((n=t.strokeWidth)!==(r=e.strokeWidth))return n-r;if((n=t._lineJoin)!==(r=e._lineJoin))return n-r;if((n=t._lineCap)!==(r=e._lineCap))return n-r;if(n=t._dashPattern,r=e._dashPattern,n.length===r.length&&n.length>0){for(var i=0;i<n.length;i+=1)if(n[i]!==r[i])return n[i]-r[i];return t.dashOffset-e.dashOffset}return n.length-r.length}},{key:"toJSON",value:function(t){return{strokeColor:t.strokeColor,strokeWidth:t.strokeWidth,lineJoin:t.lineJoin,lineCap:t.lineCap,dashPattern:t.dashPattern,dashOffset:t.dashOffset}}}]),t}()},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function s(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t,e){t&&" ".concat(t.className," ").indexOf(" ".concat(e," "))<0&&(t.className+=(t.className?" ":"")+e)}function h(t){var e=document.createElement("div");d(e,"mapd-draw-canvas-container");var n=document.createElement("canvas"),r=n.getContext("2d"),i=f.a(r);return d(n,"mapd-draw-canvas"),n.style.position="absolute",n.style.pointerEvents="none",e.appendChild(n),t.appendChild(e),{canvasContainer:e,canvas:n,canvasContext:r,ratio:i}}n.d(e,"a",(function(){return T}));var f=n(32),p=n(3),m=n(7),_=n(8),y=n(33),v=n(34),g=n(11),x=n(35),b=n.n(x),w=["mousedown","mouseup","mousemove","click","dblclick","mouseover","mouseout"],M=["top","bottom","left","right"],L={MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",MOUSEMOVE:"mousemove",CLICK:"click",DBLCLICK:"dblclick",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",SHAPE_ADD:"shape:add",SHAPE_DELETE:"shape:delete"},k=function(t){function e(){var t,n;i(this,e);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=s(this,(t=u(e)).call.apply(t,[this].concat(o))))._defaults={packedFillColor:n.packedFillColor,packedStrokeColor:n.packedStrokeColor,strokeWidth:n.strokeWidth,lineJoin:n.lineJoin,lineCap:n.lineCap,dashPattern:n.dashPattern,dashOffset:n.dashOffset},n}return l(e,t),a(e,[{key:"setFillStyle",value:function(t,e){e.packedFillColor!==this.packedFillColor&&(this.packedFillColor=e.packedFillColor,t.fillStyle=this.fillColor)}},{key:"setStrokeStyle",value:function(t,e){e.packedStrokeColor!==this.packedStrokeColor&&(this.packedStrokeColor=e.packedStrokeColor,t.strokeStyle=this.strokeColor),e.strokeWidth!==this._strokeWidth&&(this.strokeWidth=e.strokeWidth,t.lineWidth=this._strokeWidth),e.lineJoin!==this._lineJoin&&(this.lineJoin=e.lineJoin,t.lineJoin=this._lineJoin),e.lineCap!==this._lineCap&&(this.lineCap=e.lineCap,t.lineCap=this._lineCap);var n=e._dashPattern,r=!1;if(n.length===this._dashPattern.length){for(var i=0;i<n.length;i+=1)if(n[i]!==this._dashPattern[i]){r=!0;break}}else r=!0;r&&(this.dashPattern=n,t.setLineDash(this._dashPattern)),e.dashOffset!==this._dashOffset&&(this.dashOffset=e.dashOffset,t.lineDashOffset=this._dashOffset)}},{key:"applyDefaults",value:function(t){var e=this;Object.getOwnPropertyNames(this._defaults).forEach((function(t){e[t]=e._defaults[t]})),this.setFillCtx(t),this.setStrokeCtx(t)}}]),e}(_.a),T=function(t){function e(t,n){var r;return i(this,e),(r=s(this,u(e).call(this)))._init(t,n),r}return l(e,t),a(e,[{key:"destroy",value:function(){var t=this;this._destroyCanvas(),this._objects&&(this._objects.forEach((function(e,n){n.off("changed",[t._reorderCb,t._redrawCb])})),this._objects.clear(),this._sortedObjs=[],this._reorderedObjIdxs.clear())}},{key:"_resize",value:function(t){var e=0;this._parent.offsetWidth&&(e=Math.max(e,this._parent.offsetWidth-this._margins.left-this._margins.right));var n=0;if(this._parent.offsetHeight&&(n=Math.max(n,this._parent.offsetHeight-this._margins.top-this._margins.bottom)),this._drawCanvas.width=e*this._pixelRatio,this._drawCanvas.height=n*this._pixelRatio,this._drawCanvas.style.left="".concat(this._margins.left,"px"),this._drawCanvas.style.top="".concat(this._margins.top,"px"),this._drawCanvas.style.width="".concat(e,"px"),this._drawCanvas.style.height="".concat(n,"px"),this._camera);else{var r=t&&t.projectionDimensions?t.projectionDimensions:[e,n];this._camera=new v.a([0,0,e,n],r,!!t.flipY&&Boolean(t.flipY)),this._camera.setPosition(t&&t.cameraPosition?t.cameraPosition:[e/2,n/2]),this._camera.on("changed",this._rerenderCb)}this._rerenderCb()}},{key:"_mousedownCB",value:function(t){t.target===this._parent&&this.fire("mousedown",{originalEvent:t})}},{key:"_mouseupCB",value:function(t){t.target===this._parent&&this.fire("mouseup",{originalEvent:t})}},{key:"_mousemoveCB",value:function(t){t.target===this._parent&&this.fire("mousemove",{originalEvent:t})}},{key:"_clickCB",value:function(t){t.target===this._parent&&this.fire("click",{originalEvent:t})}},{key:"_dblclickCB",value:function(t){t.target===this._parent&&this.fire("dblclick",{originalEvent:t})}},{key:"_mouseoverCB",value:function(t){t.target===this._parent&&this.fire("mouseover",{originalEvent:t})}},{key:"_mouseoutCB",value:function(t){t.target===this._parent&&this.fire("mouseout",{originalEvent:t})}},{key:"_enableEvents",value:function(){this.registerEvents(w);for(var t=w.map((function(t){return"_".concat(t,"CB")})),e=0;e<w.length;e+=1)document.addEventListener(w[e],this[t[e]],!0)}},{key:"_disableEvents",value:function(){for(var t=w.map((function(t){return"_".concat(t,"CB")})),e=0;e<w.length;e+=1)document.removeEventListener(w[e],this[t[e]],!0)}},{key:"_initCanvas",value:function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._margins=e&&e.margins?Object.assign({},e.margins):{},M.forEach((function(t){"number"!=typeof n._margins[t]&&(n._margins[t]=0)}));var i=h(t),o=i.canvasContainer,a=i.canvas,s=i.canvasContext,u=i.ratio;this._container=o,this._drawCanvas=a,this._drawCtx=s,this._pixelRatio=u,this._parent=t,Object(y.a)(["_resize"],this),this._resize(e),this._resizeSensor=new b.a(t,this._resize),(r||null===r&&e&&e.enableEvents)&&this._enableEvents()}},{key:"_destroyCanvas",value:function(){this._drawCanvas&&this._disableEvents(),this._parent&&(this._parent.removeChild(this._drawCanvas),this._resizeSensor&&this._resizeSensor.detach(this._parent,this._resize)),this._drawCanvas=null,this._drawCtx=null,this._parent=null}},{key:"_init",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.registerEvents([L.SHAPE_ADD,L.SHAPE_DELETE]),Object(y.a)(["_reorderCb","_rerenderCb"],this),Object(y.a)(["_mousedownCB","_mouseupCB","_mousemoveCB","_clickCB","_dblclickCB","_mouseoverCB","_mouseoutCB"],this),this._renderFrameCb=this.renderAll.bind(this),this._renderRequestTime=0,this._ids={shapeId:1},this._objects=new Map,this._sortedObjs=[],this._reorderedObjIdxs=new Set,this._initCanvas(t,e,n),this._styleState=new k({fillColor:"red"})}},{key:"getContainer",value:function(){return this._parent}},{key:"getCanvasContainer",value:function(){return this._container}},{key:"getCanvas",value:function(){return this._drawCanvas}},{key:"project",value:function(t,e){var n=this._camera.screenToWorldMatrix;return p.transformMat2d(t,e,n)}},{key:"unproject",value:function(t,e){var n=this._camera.worldToScreenMatrix;return p.transformMat2d(t,e,n)}},{key:"hasShape",value:function(t){return this._objects.has(t)}},{key:"addShape",value:function(t){var e=t;Array.isArray(e)||(e=[t]),function(t,e,n,r,i){t.forEach((function(t){e.set(t,{shapeObj:t,shapeId:n.shapeId,shapeIdx:-1}),t.on(["changed:order","changed:visibility","changed:style"],r),t.on(["changed:geom","changed:visibility","changed:xform"],i),n.shapeId+=1}))}(e,this._objects,this._ids,this._reorderCb,this._rerenderCb),this.fire("shape:add",{shape:e});var n={target:e};return this._reorderCb(n),this}},{key:"deleteShape",value:function(t){var e=t;Array.isArray(e)||(e=[t]);for(var n=function(t,e,n,r){var i=[];return t.forEach((function(t){var o=e.get(t);o&&i.push(o.shapeIdx),e.delete(t),t.off(["changed"],[n,r])})),i}(e,this._objects,this._reorderCb,this._rerenderCb),r=-1,i=0;i<e.length;i+=1)(r=this._sortedObjs.indexOf(e[i]))>=0&&this._sortedObjs.splice(r,1),this._reorderedObjIdxs.add(n[i]);return this._rerenderCb(),this.fire("shape:delete",{shape:e}),this}},{key:"deleteAllShapes",value:function(){return this.deleteShape(this.sortedShapes.slice()),this}},{key:"moveShapeToTop",value:function(t){if(this._objects.has(t)){var e=this.sortedShapes,n=e[e.length-1].zIndex;t.zIndex=n+1}}},{key:"moveShapeToBack",value:function(t){if(this._objects.has(t)){var e=this.sortedShapes[0].zIndex;t.zIndex=e}}},{key:"getShapesAsJSON",value:function(){return this.sortedShapes.map((function(t){return t.toJSON()}))}},{key:"_rerenderCb",value:function(){window.requestAnimationFrame(this._renderFrameCb)}},{key:"_reorderCb",value:function(t){var e=this,n=t.target;Array.isArray(n)||(n=[t.target]),n.forEach((function(t){console.assert(t,"A changed event doesn't have an object");var n=e._objects.get(t);console.assert(n,"A changed event target isn't in the list of shapes ".concat(t)),n.shapeIdx<0&&(n.shapeIdx=e._sortedObjs.push(t)-1),e._reorderedObjIdxs.add(n.shapeIdx)})),this._rerenderCb()}},{key:"_renderShapes",value:function(t,e,n){var r=this,i=n.worldToScreenMatrix;e.forEach((function(e){e.visible&&e.render(t,i,r._styleState)}))}},{key:"renderAll",value:function(t){if(t){if(t<=this._renderRequestTime)return;this._renderRequestTime=t}else this._renderRequestTime=performance.now();var e=this._drawCtx;if(e.clearRect(0,0,this._drawCanvas.offsetWidth,this._drawCanvas.offsetHeight),this._objects.size){e.save();var n=this.sortedShapes;this._styleState.applyDefaults(e),this._renderShapes(e,n,this._camera),e.restore()}}},{key:"sortedShapes",get:function(){return this._reorderedObjIdxs.size&&(console.assert(this._sortedObjs.length===this._objects.size,"Size mismatch when rendering objets. Something got out of sync - sorted objs length: ".concat(this._sortedObjs.length,", objects length: ").concat(this._objects.size)),this._sortedObjs.sort(m.a.shapeCompare),this._reorderedObjIdxs.clear()),this._sortedObjs}},{key:"margins",get:function(){var t=this,e={};return M.forEach((function(n){e[n]=t._margins[n]})),e},set:function(t){var e=this;M.forEach((function(n){"number"==typeof t[n]&&t[n]!==e._margins[n]&&(e._margins[n]=t.prop)})),this._resize()}},{key:"viewport",get:function(){return this._camera.viewport},set:function(t){this._camera.viewport=t}},{key:"projectionDimensions",get:function(){return this._camera.projectionDimensions},set:function(t){return this._camera.projectionDimensions=t,this}},{key:"cameraPosition",get:function(){return this._camera.getPosition()},set:function(t){return this._camera.setPosition(t),this}}]),e}(g.a);T.EventConstants=L},function(t,e,n){"use strict";function r(t,e,n){return(e[i]-t[i])*(n[o]-t[o])-(n[i]-t[i])*(e[o]-t[o])}e.a=function(t){var e=[],n=t.length;if(n<3){for(var i=0;i<n;i+=1)e[i]=i;return e}var o=new Array(2*n+1);o.fill(-1);var a=n-2,s=a+3;o[a]=o[s]=2,r(t[0],t[1],t[2])>0?(o[a+1]=0,o[a+2]=1):(o[a+1]=1,o[a+2]=0);for(var u=3;u<n;u+=1)if(r(t[o[a]],t[o[a+1]],t[u])<=0||r(t[o[s-1]],t[o[s]],t[u])<=0){for(;o[a]>=0&&o[a+1]>=0&&r(t[o[a]],t[o[a+1]],t[u])<=0;)a+=1;for(o[a-=1]=u;o[s]>=0&&o[s+1]>=0&&r(t[o[s-1]],t[o[s]],t[u])<=0;)s-=1;o[s+=1]=u}var l=0;for(l=0;l<=s-a-1;l+=1)e[l]=o[a+l];return o[a+l]!==e[0]&&(e[l]=o[a+l]),e};var i=0,o=1},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.d(e,"a",(function(){return d}));var c=n(2),d=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=o(this,s(e).call(this,t)))._width=0,n._height=0,void 0!==t.width&&(n.width=t.width),void 0!==t.height&&(n.height=t.height),n}return u(e,t),function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(e,[{key:"getDimensions",value:function(){return[this._width,this._height]}},{key:"_updateAABox",value:function(){(this._geomDirty||this._boundsOutOfDate)&&(c.initCenterExtents(this._aabox,[0,0],[this._width/2,this._height/2]),c.transformMat2d(this._aabox,this._aabox,this.globalXform),this._geomDirty=this._boundsOutOfDate=!1)}},{key:"_draw",value:function(t){t.rect(0-this.width/2,0-this.height/2,this.width,this.height)}},{key:"toJSON",value:function(){return Object.assign({type:"Rect",width:this.width,height:this.height},a(s(e.prototype),"toJSON",this).call(this))}},{key:"width",set:function(t){if("number"!=typeof t)throw new Error("Width must be a number");if(t!==this._width){var e=this._width;this._width=t,this._geomDirty=!0,this.fire("changed:geom",{attr:"width",prevVal:e,currVal:this._width})}return this},get:function(){return this._width}},{key:"height",set:function(t){if("number"!=typeof t)throw new Error("Height must be a number");if(t!==this._height){var e=this._height;this._height=t,this._geomDirty=!0,this.fire("changed:geom",{attr:"height",prevVal:e,currVal:this._height})}return this},get:function(){return this._height}}]),e}(n(7).a)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(25);n.n(r),n.o(r,"version")&&n.d(e,"version",(function(){return r.version}));var i=n(26);n.d(e,"ShapeBuilder",(function(){return i.a}));var o=n(21);n.d(e,"DrawEngine",(function(){return o.a}));var a=n(2);n.d(e,"AABox2d",(function(){return a}));var s=n(4);n.d(e,"Mat2d",(function(){return s.a}));var u=n(3);n.d(e,"Point2d",(function(){return u}));var l=n(0);n.d(e,"Mat2",(function(){return l.b}));var c=n(8);n.d(e,"BasicStyle",(function(){return c.a}));var d=n(9);n.d(e,"Vec2d",(function(){return d.a}));var h=n(38);n.d(e,"Circle",(function(){return h.a}));var f=n(23);n.d(e,"Rect",(function(){return f.a}));var p=n(39);n.d(e,"Poly",(function(){return p.a}));var m=n(12);n.d(e,"PolyLine",(function(){return m.a}));var _=n(40);n.d(e,"Point",(function(){return _.a}));var y=n(6);n.d(e,"Math",(function(){return y.a}));var v=n(22);n.d(e,"simpleHull_2D",(function(){return v.a}))},function(t,e){t.exports={name:"@mapd/mapd-draw",description:"A Utility Library for drawing and interacting with shapes using canvas",version:"1.1.0",homepage:"https://omnisci.com",bugs:"https://github.com/omnisci/mapd-draw/issues",main:"dist/mapd-draw.js",author:"MapD Technologies",license:"MIT",engines:{node:">=4.0.0"},repository:{type:"git",url:"git+https://github.com/omnisci/mapd-draw.git"},dependencies:{"css-element-queries":"^0.4.0","gl-matrix":"^2.3.2"},devDependencies:{"@babel/core":"^7.0.0","@babel/plugin-proposal-class-properties":"^7.0.0","@babel/plugin-proposal-decorators":"^7.0.0","@babel/plugin-proposal-do-expressions":"^7.0.0","@babel/plugin-proposal-export-default-from":"^7.0.0","@babel/plugin-proposal-export-namespace-from":"^7.0.0","@babel/plugin-proposal-function-bind":"^7.0.0","@babel/plugin-proposal-function-sent":"^7.0.0","@babel/plugin-proposal-json-strings":"^7.0.0","@babel/plugin-proposal-logical-assignment-operators":"^7.0.0","@babel/plugin-proposal-nullish-coalescing-operator":"^7.0.0","@babel/plugin-proposal-numeric-separator":"^7.0.0","@babel/plugin-proposal-optional-chaining":"^7.0.0","@babel/plugin-proposal-pipeline-operator":"^7.0.0","@babel/plugin-proposal-throw-expressions":"^7.0.0","@babel/plugin-syntax-dynamic-import":"^7.0.0","@babel/plugin-syntax-import-meta":"^7.0.0","@babel/preset-env":"^7.0.0","@babel/register":"^7.0.0","babel-eslint":"^10.0.1","babel-loader":"^8.0.0",chai:"^3.5.0",eslint:"^6.0.0","eslint-config-prettier":"^6.5.0","eslint-plugin-prettier":"^3.1.1","http-server":"^0.11.1","json-loader":"0.5.4",mocha:"^6.2.1","pre-commit":"^1.2.2",prettier:"1.18.2",webpack:"^3.12.0"},scripts:{build:"npm run build:prod; npm run build:dev","build:prod":"npm run webpack","build:dev":"npm run webpack:dev",clean:"bash scripts/clean.sh","lint:fix":"eslint --rule 'prettier/prettier: 0' --fix $(find src -name \"*.js\" ! -name '*.spec.js'); prettier --write $(find src -name \"*.js\" ! -name '*.spec.js')",lint:"eslint $(find src -name \"*.js\" ! -name '*.spec.js')",start:"npm run build; http-server -p 8080 -o;","watch:dev":"node node_modules/webpack/bin/webpack.js --progress --colors --watch --config webpack.dev.config.js",webpack:"node node_modules/webpack/bin/webpack.js","webpack:dev":"node node_modules/webpack/bin/webpack.js --config webpack.dev.config.js",test:"mocha --recursive --require @babel/register"},"pre-commit":["lint","test"]}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t,e,n){var r,i=t.getBoundingClientRect(),o=0;return(r=e-i.left-t.clientLeft)>=0&&r<=t.clientWidth&&(o=n-i.top-t.clientTop)>=0&&o<=t.clientHeight}function h(t,e){e.keys={altKey:t.altKey,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,metaKey:t.metaKey}}function f(t){var e=[];return t.forEach((function(t,n){e.push(n)})),e}function p(t,e,n,r,i,o){var a={unselectedShapes:f(n)};m(n),t.save();var s=e[e.length-1].zIndex;t.zIndex=s+1,M.a.copyBasicStyle(r,t),t.selected=!0;var u=null;return(o.scalable||o.rotatable)&&(u=new E.a(i||O,o),t.addChildXform(u)),n.set(t,u),a.selectedShapes=[t],a}function m(t){t.forEach((function(t,e){e.restore(),e.selected=!1,e.removeChildXform(t)})),t.clear()}function _(t,e){var n=document.querySelector("".concat("#".concat(e.id," canvas")));return{x:t.offsetX+n.offsetLeft,y:t.offsetY+n.offsetTop}}function y(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:C.SVG_OFFSET,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:C.SVG_OFFSET,o=document.getElementById("cursor"),a=_(t,e);if(null===o){var s=document.createElement("span");s.setAttribute("id","cursor"),s.setAttribute("style","position: absolute; top: ".concat("".concat(a.y,"px"),"; left: ","".concat(a.x,"px"),"; width: 28px; height: 28px; background: ",n,"; cursor: none; z-index: 10; pointer-events: none; transform: translate(").concat(r,"px, ").concat(i,"px)")),e.appendChild(s)}else o.style.background===n||(o.style.background=n),x(t,e)}function v(){var t=document.getElementById("cursor");null!==t&&t.parentNode.removeChild(t)}function g(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.style.cursor=e;for(var i=0;i<t.childNodes.length;i+=1)t.childNodes[i].style.cursor=e,null===n||!r&&"canvas"===t.childNodes[i].nodeName.toLowerCase()||(t.childNodes[i].style.pointerEvents=n)}function x(t,e){var n=document.getElementById("cursor"),r=_(t,e);null!==n&&(n.style.top="".concat("".concat(r.y,"px")),n.style.left="".concat("".concat(r.x,"px")))}n.d(e,"a",(function(){return z}));var b=n(27),w=n(3),M=n(8),L=n(21),k=n(4),T=n(12),S=n(36),E=n(37),A="url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cg transform='rotate(<degrees>,24,24)'%3E%3Cpolygon style='fill:%23ffffff;' points='16,20 16,12 4,24 16,36 16,28 32,28 32,36 44,24 32,12 32,20 '/%3E%3Cpolygon points='14,22 14,17 7,24 14,31 14,26 34,26 34,31 41,24 34,17 34,22 '/%3E%3C/g%3E%3C/svg%3E\") no-repeat",D={SELECTION_CHANGED:"draw:selectionChanged",DRAG_BEGIN:"draw:drag:begin",DRAG_END:"draw:drag:end"},C={SVG_OFFSET:-14,QUICK_CLICK_TIME:500,RIGHT_ANGLE:90,STRAIGHT_ANGLE:180,FORTY_FIVE_ANGLE:45},P=w.create(0,0),I=w.create(0,0),O={fillColor:"white",strokeColor:"black",strokeWidth:2},R=function(){var t=document.getElementById("cursor");null!==t&&(t.style.display="none")},Y=function(){var t=document.getElementById("cursor");null!==t&&(t.style.display="block")},F=function(t){t.target.parentNode.style.cursor="default",R()},j=function(t){t.target.parentNode.style.cursor="none",Y()},z=function(t){function e(){return i(this,e),a(this,u(e).apply(this,arguments))}return l(e,t),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(e,[{key:"_mousedownCB",value:function(t){if(d(this._drawCanvas,t.clientX,t.clientY)){this.timer=performance.now(),w.set(P,t.offsetX,t.offsetY),w.transformMat2d(I,P,this._camera.screenToWorldMatrix);var e=this._camera.worldToScreenMatrix,n=this.sortedShapes,r=-1,i=null,o=null;for(r=n.length-1;r>=0;r-=1){var a=this._objects.get(n[r]);if(n[r].selected){o=a;var s=null;if((i=this._selectedShapes.get(n[r]))&&(s=i.containsPoint(P,I,e,this._drawCtx)).hit){if(i instanceof S.a&&t.altKey&&s.controlIndex<n[r].numVerts)n[r].removeVert(s.controlIndex),i=null;else{var u=i.parent.localXform,l=k.a.clone(u);k.a.invert(l,l);var c=w.clone(I);w.transformMat2d(c,c,l),this._dragInfo=Object.assign({rotate:Boolean(s.rotate),controlIndex:s.controlIndex,startObjectPos:c,worldToObjectMatrix:l,startLocalPos:i.parent.getPosition(),startLocalScale:i.parent.getScale(),startLocalRot:i.parent.getRotation(),shapeWidth:i.parent.width,shapeHeight:i.parent.height},o)}break}if(n[r].containsPoint(P,I,e,this._drawCtx)){i=n[r];break}}}if(r<0&&this._selectedShapes.size)this._selectedShapes.size&&this.fire(D.SELECTION_CHANGED,{unselectedShapes:f(this._selectedShapes),selectedShapes:[]}),this._dragInfo=null,m(this._selectedShapes);else if(i&&o&&(o.movable||o.rotatable||o.scalable)){var p=document.querySelector("".concat("#".concat(this._parent.id," > canvas")));null===p?(this._parent.addEventListener("mouseout",R),this._parent.addEventListener("mouseover",Y)):(p.addEventListener("mouseout",F),p.addEventListener("mouseover",j)),!this._dragInfo&&o.movable&&(this._dragInfo={startLocalPos:i.getPosition()}),this._dragInfo&&(this._dragInfo.shape=i,this._dragInfo.startPos=w.clone(P),this._dragInfo.startWorldPos=w.clone(I),this._dragInfo.objectToWorldMatrix=k.a.clone(i.globalXform),h(t,this._dragInfo),t.stopImmediatePropagation(),this.fire(D.DRAG_BEGIN,{shapes:f(this._selectedShapes)})),t.preventDefault()}}}},{key:"_mouseupCB",value:function(t){if(this._dragInfo&&this._dragInfo.shape){t.stopImmediatePropagation(),t.preventDefault();var e=document.querySelector("".concat("#".concat(this._parent.id," > canvas")));null===e?(this._parent.removeEventListener("mouseout",R),this._parent.removeEventListener("mouseover",Y)):(e.removeEventListener("mouseout",F),e.removeEventListener("mouseover",j)),this._dragInfo=null,this.fire(D.DRAG_END,{shapes:f(this._selectedShapes)})}else if(performance.now()-this.timer<C.QUICK_CLICK_TIME){w.set(P,t.offsetX,t.offsetY),w.transformMat2d(I,P,this._camera.screenToWorldMatrix);for(var n=this._camera.worldToScreenMatrix,r=this.sortedShapes,i=null,o=null,a=r.length-1;a>=0;a-=1)if((o=this._objects.get(r[a])).selectable&&r[a].containsPoint(P,I,n,this._drawCtx)){i=r[a];break}if(i&&!i.selected){var s=p(i,r,this._selectedShapes,this._selectStyle,this._xformStyle,o);this.fire(D.SELECTION_CHANGED,s)}}}},{key:"_mousemoveCB",value:function(t){if(d(this._drawCanvas,t.clientX,t.clientY)||this._dragInfo)if(this._dragInfo&&this._dragInfo.shape)x(t,this._parent),h(t,this._dragInfo),function(t,e,n,r){(function(t,e,n){var r=e.getBoundingClientRect();t[0]=n.clientX-r.left-e.clientLeft,t[1]=n.clientY-r.top-e.clientTop})(P,t,e),w.transformMat2d(I,P,r.screenToWorldMatrix);var i=n.shape;i instanceof E.a?b.a(i,n,P,I,r):i instanceof S.a?b.c(i,n,P,I,r):b.b(i,n,P,I,r)}(this._drawCanvas,t,this._dragInfo,this._camera),t.stopImmediatePropagation(),t.preventDefault();else if(!t.buttons&&this._selectedShapes.size){w.set(P,t.offsetX,t.offsetY),w.transformMat2d(I,P,this._camera.screenToWorldMatrix);var e=this._camera.worldToScreenMatrix,n=this.sortedShapes,r=0,i=this._camera.isYFlipped();for(r=n.length-1;r>=0;r-=1)if(n[r].selected){var o=this._objects.get(n[r]),a=this._selectedShapes.get(n[r]),s=null;if(g(this._parent,"none","none",!1),a&&(s=a.containsPoint(P,I,e,this._drawCtx)).hit){if(a instanceof E.a)if(s.rotate){var u=n[r].getRotation();i?(u*=-1,1===s.controlIndex?u-=C.RIGHT_ANGLE:0===s.controlIndex?u+=C.STRAIGHT_ANGLE:2===s.controlIndex&&(u+=C.RIGHT_ANGLE)):0===s.controlIndex?u-=C.RIGHT_ANGLE:1===s.controlIndex?u+=C.STRAIGHT_ANGLE:3===s.controlIndex&&(u+=C.RIGHT_ANGLE),y(t,this._parent,"".concat("url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cg transform='rotate(<degrees>,24,24)'%3E%3Cpath style='fill:%23ffffff;' d='M25.9,4C16.6,4,8.8,11.2,7.4,20.8H6.7H3.3l1.6,2.9l3.8,7.1l1.8,3.3l1.8-3.3l3.8-7.1l1.6-2.9h-3.3h-0.1 c1.3-5.7,6.1-9.9,11.7-9.9c8,0,12.1,4.4,12.1,13.1c0,7.2-5.4,13.1-12.1,13.1h-2v2V42v2h2c10.4,0,18.8-9,18.8-20 C44.7,11.7,37.5,4,25.9,4L25.9,4z'/%3E%3Cpath d='M25.9,6c10.5,0,16.8,6.7,16.8,18c0,9.9-7.5,18-16.8,18v-2.9c7.8,0,14.1-6.8,14.1-15.1c0-5.6-1.8-15.1-14.1-15.1 c-7.4,0-13.4,6.1-14,13.9h2.4l-3.8,7.1l-3.8-7.1h2.5C9.7,13.4,17,6,25.9,6'/%3E%3C/g%3E%3C/svg%3E\") no-repeat".replace(/<degrees>/g,"".concat(u))))}else s.controlIndex<4?0===s.controlIndex||3===s.controlIndex?y(t,this._parent,"".concat(A.replace(/<degrees>/g,"".concat(-n[r].getRotation()-C.FORTY_FIVE_ANGLE)))):1!==s.controlIndex&&2!==s.controlIndex||y(t,this._parent,"".concat(A.replace(/<degrees>/g,"".concat(-n[r].getRotation()+C.FORTY_FIVE_ANGLE)))):s.controlIndex%2==0?y(t,this._parent,"".concat(A.replace(/<degrees>/g,"".concat(-n[r].getRotation())))):y(t,this._parent,"".concat(A.replace(/<degrees>/g,"".concat(-n[r].getRotation()+C.RIGHT_ANGLE))));else a instanceof S.a&&(g(this._parent,"none","none",!1),s.controlIndex>=n[r].numVerts?y(t,this._parent,"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpolygon style='fill:%23ffffff;' points='31.2,28 24.8,28 24.8,32.8 20,32.8 20,39.2 24.8,39.2 24.8,44 31.2,44 31.2,39.2 36,39.2 36,32.8 31.2,32.8 '/%3E %3Cpolygon style='fill:%23ffffff' points='12,32 12,4 32.3,24.3 20,24.3 19.7,24.6 '/%3E%3Cpolygon points='13.8,8.2 13.8,27.8 19,22.8 19.2,22.5 28,22.5 '/%3E%3Cpolyline points='29.6,29.6 29.6,34.4 34.4,34.4 34.4,37.6 29.6,37.6 29.6,42.4 26.4,42.4 26.4,37.6 21.6,37.6 21.6,34.4 26.4,34.4 26.4,29.6 29.6,29.6  '/%3E%3C/svg%3E\") no-repeat",-8,-6):t.altKey?y(t,this._parent,"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Crect style='fill:%23ffffff;' x='20' y='32.8' width='16' height='6.4'/%3E%3Cpolygon  style='fill:%23ffffff;' points='12,32 12,4 32.3,24.3 20,24.3 19.7,24.6 '/%3E%3Cpolygon points='13.8,8.2 13.8,27.8 19,22.8 19.2,22.5 28,22.5 '/%3E%3Cpolyline points='34.4,34.4 34.4,37.6 21.6,37.6 21.6,34.4 '/%3E%3C/svg%3E\") no-repeat",-8,-6):y(t,this._parent,"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 48 48'%3E%3Cpath style='fill:%23ffffff;' d='M24,17.5c-3.6,0-6.5,2.9-6.5,6.5s2.9,6.5,6.5,6.5s6.5-2.9,6.5-6.5S27.6,17.5,24,17.5L24,17.5z'/%3E%3Cpath style='fill:%23ffffff;' d='M24,4L4,24l20,20l20-20L24,4z M31.5,31.5h-15v-15h15V31.5z'/%3E%3Cpolygon points='17,34 24,40.5 31,34  '/%3E%3Cpolygon points='31,14 24,7.5 17,14     '/%3E%3Cpolygon points='14,17 7.5,24 14,31   '/%3E%3Cpolygon points='34,31 40.5,24 34,17    '/%3E%3Cpath d='M24,20c2.2,0,4,1.8,4,4s-1.8,4-4,4s-4-1.8-4-4S21.8,20,24,20'/%3E%3C/svg%3E\") no-repeat",C.SVG_OFFSET,C.SVG_OFFSET));t.stopImmediatePropagation(),t.preventDefault();break}if(n[r].containsPoint(P,I,e,this._drawCtx)){if(o&&o.movable){var l=document.getElementById("cursor");null!==l&&l.parentNode.removeChild(l),g(this._parent,"move",null),t.stopImmediatePropagation(),t.preventDefault()}break}}r<0&&(v(),g(this._parent,"default","auto",!1))}}},{key:"_clickCB",value:function(){}},{key:"_dblclickCB",value:function(t){if(d(this._drawCanvas,t.clientX,t.clientY)){w.set(P,t.offsetX,t.offsetY),w.transformMat2d(I,P,this._camera.screenToWorldMatrix);var e=this._camera.worldToScreenMatrix,n=this.sortedShapes,r=-1;for(r=n.length-1;r>=0;r-=1){var i=this._objects.get(n[r]);if(i.selectable&&n[r].containsPoint(P,I,e,this._drawCtx)){if(i.editable&&n[r]instanceof T.a){var o=n[r],a=!1;if(n[r].selected){var s=this._selectedShapes.get(n[r]);s&&(o.restore(),o.removeChildXform(s),a=!(s instanceof E.a))}o.selected=!0,o.save();var u=n[n.length-1].zIndex;o.zIndex=u+1,M.a.copyBasicStyle(this._selectStyle,o);var l=null;a?(i.rotatable||i.scalable)&&(l=new E.a(this._xformStyle||O,i),o.addChildXform(l)):(l=new S.a(o,this._xformStyle),o.addChildXform(l)),this._selectedShapes.set(o,l)}else if(!n[r].selected){var c=p(n[r],n,this._selectedShapes,this._selectStyle,this._xformStyle,i);this.fire(D.SELECTION_CHANGED,c)}break}}r<0&&this._selectedShapes.size?(this._selectedShapes.size&&this.fire(D.SELECTION_CHANGED,{unselectedShapes:f(this._selectedShapes),selectedShapes:[]}),this._dragInfo=null,m(this._selectedShapes),v(),g(this._parent,"default","auto",!1)):t.stopImmediatePropagation(),t.preventDefault()}}},{key:"_mouseoverCB",value:function(){}},{key:"_mouseoutCB",value:function(){}},{key:"_init",value:function(t,n){this._activated=n&&n.enableInteractions,s(u(e.prototype),"_init",this).call(this,t,n,this._activated);var r=Object.getOwnPropertyNames(D).map((function(t){return D[t]}));this.registerEvents(r),this._dragInfo=null,this._selectedShapes=new Map,this._selectStyle=new M.a(n&&n.selectStyle?n.selectStyle:{fillColor:"orange"}),this._xformStyle=new M.a(n&&n.xformStyle?n.xformStyle:{fillColor:"white",strokeColor:"black",strokeWidth:2}),this.timer=0}},{key:"_renderShapes",value:function(t,e,n){var r=this,i=n.worldToScreenMatrix;e.forEach((function(e){if(e.visible&&(e.render(t,i,r._styleState),e.selected)){var n=r._selectedShapes.get(e);n&&n.render(t,i,r._styleState)}}))}},{key:"selectShape",value:function(t){var e=this._objects.get(t);if(e&&e.selectable){var n=p(t,this.sortedShapes,this._selectedShapes,this._selectStyle,this._xformStyle,e);this.fire(D.SELECTION_CHANGED,n)}}},{key:"clearSelection",value:function(){if(this._selectedShapes.size){var t=f(this._selectedShapes);m(this._selectedShapes),this.fire(D.SELECTION_CHANGED,{unselectedShapes:t,selectedShapes:[]}),this._rerenderCb()}}},{key:"addShape",value:function(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=t;if(Array.isArray(o)||(o=[t]),s(u(e.prototype),"addShape",this).call(this,o),o.forEach((function(t){var e=n._objects.get(t);e&&(e.selectable=!r||void 0===r.selectable||Boolean(r.selectable),e.movable=!r||void 0===r.movable||Boolean(r.movable),e.rotatable=!r||void 0===r.rotatable||Boolean(r.rotatable),e.scalable=!r||void 0===r.scalable||Boolean(r.scalable),e.uniformScaleOnly=!(!r||void 0===r.uniformScaleOnly)&&Boolean(r.uniformScaleOnly),e.centerScaleOnly=!(!r||void 0===r.centerScaleOnly)&&Boolean(r.centerScaleOnly),e.editable=!r||void 0===r.editable||Boolean(r.editable))})),i){var a={unselectedShapes:f(this._selectedShapes)},l=[];o.forEach((function(t){var e=n._objects.get(t);e.selectable&&(p(t,n.sortedShapes,n._selectedShapes,n._selectStyle,n._xformStyle,e),l.push(t))})),l.length&&(a.selectedShapes=l,this.fire(D.SELECTION_CHANGED,a))}return this}},{key:"deleteShape",value:function(t){var n=t;Array.isArray(n)||(n=[t]);var r=function(t,e){var n=[];return e.forEach((function(e){var r=t.get(e);e.restore(),e.selected=!1,e.removeChildXform(r),t.delete(e),n.push(e)})),n}(this._selectedShapes,n);return this.fire(D.SELECTION_CHANGED,{unselectedShapes:r,selectedShapes:f(this._selectedShapes)}),v(),g(this._parent,"default","auto",!0),s(u(e.prototype),"deleteShape",this).call(this,n)}},{key:"deleteSelectedShapes",value:function(){var t=f(this._selectedShapes);return m(this._selectedShapes),this.fire(D.SELECTION_CHANGED,{unselectedShapes:t,selectedShapes:[]}),v(),g(this._parent,"default","auto",!0),s(u(e.prototype),"deleteShape",this).call(this,t)}},{key:"enableInteractions",value:function(){return this._enableEvents(),this._activated=!0,this}},{key:"disableInteractions",value:function(){return(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this.clearSelection(),this._disableEvents(),this._activated=!1,this}},{key:"selectStyle",set:function(t){M.a.copyBasicStyle(t,this._selectStyle)},get:function(){return this._selectStyle}},{key:"selectedShapes",get:function(){return f(this._selectedShapes)}},{key:"interactionsEnabled",get:function(){return this._activated}}]),e}(L.a);Object.assign(D,L.a.EventConstants),z.EventConstants=D},function(t,e,n){"use strict";e.a=function(t,e,n,a,s){var u=t.parent,l=[0,0],c=[0,0],d=[0,0];if(e.rotate)!function(t,e,n,a,s){var u=[0,0];i.a.svd(u,[0,0],null,n.objectToWorldMatrix);var l=[0,0];r.sub(l,n.startWorldPos,u),o.a.normalize(l,l);var c=u;r.sub(c,s,u),o.a.normalize(c,c);var d=o.a.angle(l,c);n.keys.shiftKey&&(d=Math.round(d/Math.QUATER_PI)*Math.QUATER_PI),e.setRotation(n.startLocalRot+Math.RAD_TO_DEG*d)}(0,u,e,0,a);else{var h=e.keys.shiftKey||e.uniformScaleOnly,f=e.keys.altKey||e.centerScaleOnly,p=[0,0];if(i.a.svd(p,null,null,e.objectToWorldMatrix),o.a.sub(c,a,e.startWorldPos),h&&e.controlIndex<4){var m=[e.objectToWorldMatrix[0],e.objectToWorldMatrix[1]],_=[e.objectToWorldMatrix[2],e.objectToWorldMatrix[3]],y=[0,0];e.controlIndex<2&&o.a.negate(m,m),e.controlIndex%2==0&&o.a.negate(_,_),o.a.normalize(m,m),o.a.normalize(_,_),o.a.add(y,m,_),o.a.normalize(y,y);var v=o.a.cross2d(c,y),g=null;0===e.controlIndex||3===e.controlIndex?(g=_,v<0&&(g=m)):(g=m,v<0&&(g=_));var x=o.a.dot(c,g);x=Math.sign(x)*Math.sqrt(2*x*x),o.a.scale(c,y,x),r.addVec2(a,e.startWorldPos,c)}r.copy(l,a),r.transformMat2d(l,l,e.worldToObjectMatrix),o.a.sub(d,l,e.startObjectPos),r.copy(p,e.startLocalPos);var b=0,w=0;if(e.controlIndex<4)b=e.controlIndex<2?-1:1,w=e.controlIndex%2==0?-1:1,f||r.addVec2(p,p,o.a.scale(c,c,.5)),u.setPosition(p);else{var M=e.controlIndex-4,L=[0,0];M%2==0?(o.a.set(L,e.objectToWorldMatrix[0],e.objectToWorldMatrix[1]),w=0,b=M<2?-1:1,h&&(w=b,d[1]=d[0])):(o.a.set(L,e.objectToWorldMatrix[2],e.objectToWorldMatrix[3]),b=0,w=M<2?-1:1,h&&(b=w,d[0]=d[1])),f||(o.a.normalize(L,L),o.a.scale(L,L,o.a.dot(c,L)),r.addVec2(p,p,o.a.scale(L,L,.5))),u.setPosition(p)}f&&(b*=2,w*=2),u.setScale([e.startLocalScale[0]*(1+b*d[0]/e.shapeWidth),e.startLocalScale[1]*(1+w*d[1]/e.shapeHeight)])}},e.b=function(t,e,n,a,s){var u=[0,0],l=[0,0];if(i.a.svd(l,null,null,e.objectToWorldMatrix),e.keys.shiftKey){r.sub(u,n,e.startPos);var c=Math.atan2(u[1],u[0]);c=Math.round(c/Math.QUATER_PI)*Math.QUATER_PI;var d=[Math.cos(c),Math.sin(c)];o.a.scale(u,d,o.a.dot(u,d)),o.a.transformMat2(u,u,s.screenToWorldMatrix)}else o.a.sub(u,a,e.startWorldPos);r.addVec2(l,e.startLocalPos,u),t.setPosition(l)},e.c=function(t,e,n,i){var a=t.parent,s=a.numVerts;if(e.controlIndex>=s){var u=Math.min(e.controlIndex-s,s-1),l=u===s-1?0:u+1,c=[0,0],d=[0,0],h=[0,0],f=[0,0],p=a.vertsRef,m=a.globalXform;r.transformMat2d(d,p[u],m),r.transformMat2d(h,p[l],m),r.sub(f,h,d),o.a.scale(f,f,.5),r.addVec2(c,d,f),e.controlIndex=a.insertVert(u+1,c)}else a.setVertPosition(e.controlIndex,i)};var r=n(3),i=n(4),o=n(9)},function(t,e,n){"use strict";function r(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],l=n[2],c=n[3];return t[0]=r*s+o*u,t[1]=i*s+a*u,t[2]=r*l+o*c,t[3]=i*l+a*c,t}function i(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){var t=new o.ARRAY_TYPE(4);return o.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},e.clone=function(t){var e=new o.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.fromValues=function(t,e,n,r){var i=new o.ARRAY_TYPE(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i},e.set=function(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t},e.transpose=function(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},e.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*o-i*r;return a?(a=1/a,t[0]=o*a,t[1]=-r*a,t[2]=-i*a,t[3]=n*a,t):null},e.adjoint=function(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t},e.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},e.multiply=r,e.rotate=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=i*u+a*s,t[2]=r*-s+o*u,t[3]=i*-s+a*u,t},e.scale=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1];return t[0]=r*s,t[1]=i*s,t[2]=o*u,t[3]=a*u,t},e.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},e.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},e.LDU=function(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},e.subtract=i,e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.equals=function(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],s=e[0],u=e[1],l=e[2],c=e[3];return Math.abs(n-s)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-u)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(i-l)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(a-c)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))},e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},n.d(e,"mul",(function(){return a})),n.d(e,"sub",(function(){return s}));var o=n(1),a=r,s=i},function(t,e,n){"use strict";function r(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=n[0],c=n[1],d=n[2],h=n[3],f=n[4],p=n[5];return t[0]=r*l+o*c,t[1]=i*l+a*c,t[2]=r*d+o*h,t[3]=i*d+a*h,t[4]=r*f+o*p+s,t[5]=i*f+a*p+u,t}function i(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}Object.defineProperty(e,"__esModule",{value:!0}),e.create=function(){var t=new o.ARRAY_TYPE(6);return o.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},e.clone=function(t){var e=new o.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.fromValues=function(t,e,n,r,i,a){var s=new o.ARRAY_TYPE(6);return s[0]=t,s[1]=e,s[2]=n,s[3]=r,s[4]=i,s[5]=a,s},e.set=function(t,e,n,r,i,o,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t},e.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=n*o-r*i;return u?(u=1/u,t[0]=o*u,t[1]=-r*u,t[2]=-i*u,t[3]=n*u,t[4]=(i*s-o*a)*u,t[5]=(r*a-n*s)*u,t):null},e.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},e.multiply=r,e.rotate=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=Math.sin(n),c=Math.cos(n);return t[0]=r*c+o*l,t[1]=i*c+a*l,t[2]=r*-l+o*c,t[3]=i*-l+a*c,t[4]=s,t[5]=u,t},e.scale=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=n[0],c=n[1];return t[0]=r*l,t[1]=i*l,t[2]=o*c,t[3]=a*c,t[4]=s,t[5]=u,t},e.translate=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=n[0],c=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=r*l+o*c+s,t[5]=i*l+a*c+u,t},e.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},e.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t},e.subtract=i,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},e.equals=function(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],s=t[4],u=t[5],l=e[0],c=e[1],d=e[2],h=e[3],f=e[4],p=e[5];return Math.abs(n-l)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-c)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(i-d)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(a-h)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(s-f)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(f))&&Math.abs(u-p)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(p))},n.d(e,"mul",(function(){return a})),n.d(e,"sub",(function(){return s}));var o=n(1),a=r,s=i},function(t,e,n){"use strict";var r=(n(1),n(15));n(14),r.a,r.a,r.c,r.d,r.h},function(t,e,n){"use strict";function r(){var t=new d.ARRAY_TYPE(2);return d.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t}function i(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function o(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function a(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function s(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}function u(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function l(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}function c(t){var e=t[0],n=t[1];return e*e+n*n}Object.defineProperty(e,"__esModule",{value:!0}),e.create=r,e.clone=function(t){var e=new d.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},e.fromValues=function(t,e){var n=new d.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},e.set=function(t,e,n){return t[0]=e,t[1]=n,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},e.subtract=i,e.multiply=o,e.divide=a,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t},e.distance=s,e.squaredDistance=u,e.length=l,e.squaredLength=c,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},e.normalize=function(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i),t},e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},e.cross=function(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t},e.lerp=function(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t},e.random=function(t,e){e=e||1;var n=2*d.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},e.transformMat2=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t},e.transformMat2d=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t},e.transformMat3=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t},e.transformMat4=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t},e.rotate=function(t,e,n,r){var i=e[0]-n[0],o=e[1]-n[1],a=Math.sin(r),s=Math.cos(r);return t[0]=i*s-o*a+n[0],t[1]=i*a+o*s+n[1],t},e.angle=function(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=n*n+r*r;a>0&&(a=1/Math.sqrt(a));var s=i*i+o*o;s>0&&(s=1/Math.sqrt(s));var u=(n*i+r*o)*a*s;return u>1?0:u<-1?Math.PI:Math.acos(u)},e.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},e.equals=function(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return Math.abs(n-i)<=d.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-o)<=d.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))},n.d(e,"len",(function(){return h})),n.d(e,"sub",(function(){return f})),n.d(e,"mul",(function(){return p})),n.d(e,"div",(function(){return m})),n.d(e,"dist",(function(){return _})),n.d(e,"sqrDist",(function(){return y})),n.d(e,"sqrLen",(function(){return v})),n.d(e,"forEach",(function(){return g}));var d=n(1),h=l,f=i,p=o,m=a,_=s,y=u,v=c,g=function(){var t=r();return function(e,n,r,i,o,a){var s,u=void 0;for(n||(n=2),r||(r=0),s=i?Math.min(i*n+r,e.length):e.length,u=r;u<s;u+=n)t[0]=e[u],t[1]=e[u+1],o(t,t,a),e[u]=t[0],e[u+1]=t[1];return e}}()},function(t,e,n){"use strict";e.a=function(t){var e=function(t){var e=t.backingStorePixelRatio||t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/e}(t);if(1===e)return 1;["fillRect","clearRect","strokeRect","isPointInPath","isPointInStroke"].forEach((function(n){t[n]=function(t){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return r=r.map((function(t){return t*e})),t.apply(this,r)}}(t[n])}));var n=[e,0,0,e,0,0];return t.setTransform=function(t){return function(){t.apply(this,n),this.transform.apply(this,arguments)}}(t.setTransform),e}},function(t,e,n){"use strict";e.a=function(t,e){t.forEach((function(t){e[t]&&(e[t]=e[t].bind(e))}))}},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function s(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.d(e,"a",(function(){return v}));var d=n(2),h=n(5),f=n(10),p=n(11),m=n(4),_=n(0),y=function(t){function e(t,n){var r,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return i(this,e),(r=s(this,u(e).call(this,["changed","changed:xform"])))._viewport=d.clone(t),r._projectionDimensions=_.d.clone(n),r._yflip=o,r._screenMatrix=m.a.create(),r._screenDirty=!0,r}return l(e,t),a(e,[{key:"isYFlipped",value:function(){return this._yflip}},{key:"viewport",set:function(t){if(!d.equals(t,this._viewport)){var e=d.clone(this._viewport);d.copy(this._viewport,t),this._screenDirty=!0,this._worldToScreenOutdated=!0,this.fire("changed",{attr:"viewport",prevVal:e,currVal:t})}return this},get:function(){return d.clone(this._viewport)}},{key:"viewportRef",get:function(){return this._viewport}},{key:"screenMatrix",get:function(){if(this._screenDirty){var t=[0,0],e=[0,0];d.getCenter(t,this._viewport),d.getExtents(e,this._viewport),m.a.set(this._screenMatrix,e[0],0,0,e[1],t[0],t[1]),this._worldToScreenOutdated=!0,this._screenDirty=!1}return this._screenMatrix}}]),e}(p.a),v=function(t){function e(t,n,r){var o;return i(this,e),(o=s(this,u(e).call(this,t,n,r)))._viewMatrix=m.a.create(),o._viewDirty=!0,o._projMatrix=m.a.create(),o._projDirty=!0,o}return l(e,t),a(e,[{key:"_localXformUpdated",value:function(){this._boundsOutOfDate=!0}},{key:"_globalXformUpdated",value:function(){this._boundsOutOfDate=!0}},{key:"_matricesDirty",value:function(){return this._boundsOutOfDate||this._lxformDirty||this._xformDirty||this._viewDirty||this._projDirty||this._screenDirty}},{key:"projectionDimensions",set:function(t){if(!_.d.equals(t,this._projectionDimensions)){var e=_.d.clone(this._projectionDimensions);d.copy(this._projectionDimensions,t),this._viewDirty=!0,this._projDirty=!0,this.fire("changed",{attr:"projectionDimensions",prevVal:e,currVal:t})}return this},get:function(){return _.d.clone(this._projectionDimensions)}},{key:"projectionDimensionsRef",get:function(){return this._projectionDimensions}},{key:"viewMatrix",get:function(){if(this._viewDirty||this._boundsOutOfDate||this._xformDirty||this._lxformDirty){var t=[0,0],e=[0,0],n=[0,0],r=this.globalXform;m.a.svd(t,e,n,r),m.a.fromTranslation(this._viewMatrix,_.d.negate(t,t)),m.a.rotate(this._viewMatrix,this._viewMatrix,-n[0]),m.a.scale(this._viewMatrix,this._viewMatrix,e),m.a.rotate(this._viewMatrix,this._viewMatrix,-n[1]),this._worldToScreenOutdated=!0,this._viewDirty=!1}return this._viewMatrix}},{key:"projMatrix",get:function(){if(this._projDirty){var t=this._yflip?-1:1;m.a.set(this._projMatrix,2/this._projectionDimensions[0],0,0,2*t/this._projectionDimensions[1],0,0),this._worldToScreenOutdated=!0,this._projDirty=!1}return this._projMatrix}},{key:"worldToScreenMatrix",get:function(){return(!this._worldToScreenMatrix||this._worldToScreenOutdated||this._matricesDirty())&&(this._worldToScreenMatrix||(this._worldToScreenMatrix=m.a.create()),m.a.copy(this._worldToScreenMatrix,this.viewMatrix),m.a.multiply(this._worldToScreenMatrix,this.projMatrix,this._worldToScreenMatrix),m.a.multiply(this._worldToScreenMatrix,this.screenMatrix,this._worldToScreenMatrix),this._worldToScreenOutdated=!1,this._screenToWorldOutdated=!0),this._worldToScreenMatrix}},{key:"screenToWorldMatrix",get:function(){return(!this._screenToWorld||this._screenToWorldOutdated||this._matricesDirty())&&(this._screenToWorld||(this._screenToWorld=m.a.create()),m.a.copy(this._screenToWorld,this.worldToScreenMatrix),m.a.invert(this._screenToWorld,this._screenToWorld),this._screenToWorldOutdated=!1),this._screenToWorld}}]),e}(Object(h.a)(y,Object(f.b)("changed:xform")))},function(t,e,n){var r,i,o;o=function(){function t(t,e){var n=Object.prototype.toString.call(t),r="[object Array]"===n||"[object NodeList]"===n||"[object HTMLCollection]"===n||"[object Object]"===n||"undefined"!=typeof jQuery&&t instanceof jQuery||"undefined"!=typeof Elements&&t instanceof Elements,i=0,o=t.length;if(r)for(;i<o;i++)e(t[i]);else e(t)}if("undefined"==typeof window)return null;var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return window.setTimeout(t,20)},n=function(r,i){function o(){var t,e,n=[];this.add=function(t){n.push(t)},this.call=function(){for(t=0,e=n.length;t<e;t++)n[t].call()},this.remove=function(r){var i=[];for(t=0,e=n.length;t<e;t++)n[t]!==r&&i.push(n[t]);n=i},this.length=function(){return n.length}}function a(t,n){if(t.resizedAttached){if(t.resizedAttached)return void t.resizedAttached.add(n)}else t.resizedAttached=new o,t.resizedAttached.add(n);t.resizeSensor=document.createElement("div"),t.resizeSensor.className="resize-sensor";var r="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: hidden; z-index: -1; visibility: hidden;",i="position: absolute; left: 0; top: 0; transition: 0s;";t.resizeSensor.style.cssText=r,t.resizeSensor.innerHTML='<div class="resize-sensor-expand" style="'+r+'"><div style="'+i+'"></div></div><div class="resize-sensor-shrink" style="'+r+'"><div style="'+i+' width: 200%; height: 200%"></div></div>',t.appendChild(t.resizeSensor),"static"==function(t,e){return t.currentStyle?t.currentStyle[e]:window.getComputedStyle?window.getComputedStyle(t,null).getPropertyValue(e):t.style[e]}(t,"position")&&(t.style.position="relative");var a,s,u,l,c=t.resizeSensor.childNodes[0],d=c.childNodes[0],h=t.resizeSensor.childNodes[1],f=t.offsetWidth,p=t.offsetHeight,m=function(){d.style.width="100000px",d.style.height="100000px",c.scrollLeft=1e5,c.scrollTop=1e5,h.scrollLeft=1e5,h.scrollTop=1e5};m();var _=function(){s=0,a&&(f=u,p=l,t.resizedAttached&&t.resizedAttached.call())},y=function(){u=t.offsetWidth,l=t.offsetHeight,(a=u!=f||l!=p)&&!s&&(s=e(_)),m()},v=function(t,e,n){t.attachEvent?t.attachEvent("on"+e,n):t.addEventListener(e,n)};v(c,"scroll",y),v(h,"scroll",y)}t(r,(function(t){a(t,i)})),this.detach=function(t){n.detach(r,t)}};return n.detach=function(e,n){t(e,(function(t){t.resizedAttached&&"function"==typeof n&&(t.resizedAttached.remove(n),t.resizedAttached.length())||t.resizeSensor&&(t.contains(t.resizeSensor)&&t.removeChild(t.resizeSensor),delete t.resizeSensor,delete t.resizedAttached)}))},n},void 0!==(i="function"==typeof(r=o)?r.call(e,n,e,t):r)&&(t.exports=i)},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.d(e,"a",(function(){return h}));var l=n(2),c=n(3),d=n(0),h=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=o(this,a(e).call(this,n)))._baseVertShape=t,r._vertRadius=4,r._transformedVerts=[],r._baseaabox=l.create(),r._worldToScreenMatrix=d.c.create(),r}return s(e,t),function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(e,[{key:"_updateAABox",value:function(t){var e=this._baseVertShape.aabox;if(!l.equals(e,this._baseaabox)||!d.c.equals(t,this._worldToScreenMatrix)){l.copy(this._baseaabox,e),d.c.copy(this._worldToScreenMatrix,t),l.transformMat2d(this._aabox,this._baseaabox,this._worldToScreenMatrix);var n=this._vertRadius+this.strokeWidth;l.expand(this._aabox,this._aabox,[n,n])}}},{key:"containsPoint",value:function(t,e,n,r){var i={hit:!1,controlIndex:-1};if(this._updateAABox(n),this.visible&&l.containsPt(this._aabox,t)){var o=l.create(),a=this._vertRadius+this.strokeWidth/2,s=[a,a],u=0;for(u=0;u<this._transformedVerts.length;u+=1)if(l.initCenterExtents(o,this._transformedVerts[u],s),l.containsPt(o,t)){i.hit=!0,i.controlIndex=u;break}if(!i.hit){var h=[0,0],f=[0,0],p=1.5*r.lineWidth;for(d.d.set(s,p,p),u=0;u<this._transformedVerts.length-1;u+=1)if(c.sub(f,this._transformedVerts[u+1],this._transformedVerts[u]),d.d.scale(f,f,.5),c.addVec2(h,this._transformedVerts[u],f),l.initCenterExtents(o,h,s),l.containsPt(o,t)){i.hit=!0,i.controlIndex=this._transformedVerts.length+u;break}u>0&&u===this._transformedVerts.length-1&&(c.sub(f,this._transformedVerts[0],this._transformedVerts[u]),d.d.scale(f,f,.5),c.addVec2(h,this._transformedVerts[u],f),l.initCenterExtents(o,h,s),l.containsPt(o,t)&&(i.hit=!0,i.controlIndex=this._transformedVerts.length+u))}}return i}},{key:"renderBounds",value:function(t,e,n){this._updateAABox(e),t.save(),t.setTransform(1,0,0,1,0,0),n.setStrokeCtx(t);var r=[0,0],i=[0,0];l.getCenter(r,this._aabox),l.getExtents(i,this._aabox),t.beginPath(),t.rect(r[0]-i[0],r[1]-i[1],2*i[0],2*i[1]),t.stroke(),t.restore()}},{key:"render",value:function(t){var e=this;t.save(),t.setTransform(1,0,0,1,0,0);var n=this._baseVertShape._fullXform,r=this._baseVertShape.vertsRef;this._transformedVerts=new Array(r.length);var i=[0,0],o=[0,0];t.beginPath();var a=0;this._transformedVerts[a]=[0,0],c.transformMat2d(this._transformedVerts[a],r[a],n);var s=Math.max(1.5*t.lineWidth,2.5);for(a=0;a<r.length-1;a+=1)this._transformedVerts[a+1]=[0,0],c.transformMat2d(this._transformedVerts[a+1],r[a+1],n),c.sub(o,this._transformedVerts[a+1],this._transformedVerts[a]),d.d.scale(o,o,.5),c.addVec2(i,this._transformedVerts[a],o),t.moveTo(i[0]+s,i[1]),t.arc(i[0],i[1],s,0,Math.TWO_PI);a>0&&(c.sub(o,this._transformedVerts[0],this._transformedVerts[a]),d.d.scale(o,o,.5),c.addVec2(i,this._transformedVerts[a],o),t.moveTo(i[0]+s,i[1]),t.arc(i[0],i[1],s,0,Math.TWO_PI),t.fillStyle=t.strokeStyle,t.fill()),t.beginPath(),this._transformedVerts.forEach((function(n){t.moveTo(n[0]+e._vertRadius,n[1]),t.arc(n[0],n[1],e._vertRadius,0,Math.TWO_PI)})),this.isFillVisible()&&(this.setFillCtx(t),t.fill()),this.isStrokeVisible()&&(this.setStrokeCtx(t),t.stroke()),t.restore()}}]),e}(n(7).a)},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t,e,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t,e,n,r,i,o,a){p.transformMat2d(e,e,n),t.setTransform(1,0,0,1,0,0),t.translate(e[0],e[1]),t.rotate(o[1]),t.scale(a[0],a[1]),t.rotate(o[0]),t.translate(-e[0],-e[1]),t.rect(e[0]-i,e[1]-i,r,r)}function h(t,e,n,r,i,o,a,s,u,l){var c=!1,d=!1;if(p.transformMat2d(e,e,n),p.distance(e,t)<=s){v.a.negate(e,e),r[4]=r[0]*e[0]+r[2]*e[1],r[5]=r[1]*e[0]+r[3]*e[1];var h=0,f=0;p.transformMat2d(e,t,r),(Math.abs(e[0])<=i&&Math.abs(e[1])<=i||Boolean(u)&&Boolean(l)&&(d=(h=u*e[0])>-i&&h<=a&&(f=l*e[1])>-i&&f<=a))&&(c=!0)}return{hit:c,rotate:d}}n.d(e,"a",(function(){return x}));var f=n(2),p=n(3),m=n(10),_=n(4),y=n(23),v=n(9),g=4,x=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scalable:!0,rotatable:!0};return i(this,e),(n=a(this,u(e).call(this,t)))._interactiveBoxSize=8,n._interactiveBoxPadding=10,t&&void 0!==t.vertexSize&&(n._interactiveBoxSize=t.vertexSize),n._scalable=!0,n._rotatable=!0,r&&(void 0!==r.scalable&&(n._scalable=Boolean(r.scalable)),void 0!==r.rotatable&&(n._rotatable=Boolean(r.rotatable))),n}return l(e,t),function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(e,[{key:"containsPoint",value:function(t){var e={hit:!1,rotate:!1,controlIndex:-1},n=this.aabox;if((this._rotatable||this._scalable)&&this.visible&&f.containsPt(n,t)){var r=[0,0],i=[0,0];_.a.svd(null,r,i,this._fullXform);var o=_.a.create();r[0]=r[0]<0?-1:1,r[1]=r[1]<0?-1:1,r[0]*r[1]>0&&v.a.negate(i,i),_.a.rotate(o,o,i[1]),_.a.scale(o,o,r),_.a.rotate(o,o,i[0]);for(var a=this._rotatable?this._interactiveBoxPadding:0,s=this._interactiveBoxSize/2,u=this.width/2,l=this.height/2,c=[0,0],d=s+a,m=Math.sqrt(2*d*d),y=0,x=0,b=0;b<g;b+=1)if(y=b<2?-1:1,x=b%2==0?-1:1,p.set(c,y*u,x*l),(e=h(t,c,this._fullXform,o,s,this._interactiveBoxSize,d,m,y,x)).hit){e.controlIndex=b;break}if(!e.hit&&this._scalable)for(var w=0;w<g;w+=1)if(y=w%2==0?w<2?-1:1:0,x=w%2==0?0:w<2?-1:1,p.set(c,y*u,x*l),(e=h(t,c,this._fullXform,o,s,this._interactiveBoxSize,d,m,y,x)).hit){e.controlIndex=w+g;break}e.rotate&&!this._rotatable?e.rotate=!1:e.rotate||this._scalable||(e.rotate=!0)}return e}},{key:"_updatelocalxform",value:function(t){if(this._lxformDirty||t){var e=p.clone(this._pos);p.addVec2(e,e,this._parent.pivotRef),Object(m.a)(this._localXform,this._rotDeg,this._scale,e,this._pivot),this._localXformUpdated&&this._localXformUpdated(),this._lxformDirty=!1}}},{key:"_updateglobalxform",value:function(){(this._lxformDirty||this._xformDirty)&&(this._updatelocalxform(!0),this._parent?_.a.multiply(this._globalXform,this._parent.globalXform,this._localXform):_.a.copy(this._globalXform,this._localXform),this._globalXformUpdated&&this._globalXformUpdated(),this._xformDirty=!1)}},{key:"_updateAABox",value:function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this._geomDirty||this._boundsOutOfDate){var t=(this._rotatable?this._interactiveBoxPadding:0)+this._interactiveBoxSize/2;f.initCenterExtents(this._aabox,[0,0],[this.width/2,this.height/2]),f.transformMat2d(this._aabox,this._aabox,this._fullXform),f.expand(this._aabox,this._aabox,[t,t]),this._aaboxUpdated=!0,this._geomDirty=this._boundsOutOfDate=!1}}},{key:"renderBounds",value:function(t,e,n){var r=this.aabox;t.save(),t.setTransform(1,0,0,1,0,0),n.setStrokeCtx(t);var i=[0,0],o=[0,0];f.getCenter(i,r),f.getExtents(o,r),t.beginPath(),t.rect(i[0]-o[0],i[1]-o[1],2*o[0],2*o[1]),t.stroke(),t.restore()}},{key:"render",value:function(t,n,r){if(this.parent&&void 0!==this.parent.width&&"undefined"!==this.parent.height){this._aaboxUpdated=!1,s(u(e.prototype),"render",this).call(this,t,n,r,!1),this._aaboxUpdated||this._updateAABox(!0);var i=[0,0],o=[0,0];_.a.svd(null,i,o,this._fullXform),i[0]=i[0]<0?-1:1,i[1]=i[1]<0?-1:1;var a=this._interactiveBoxSize/2,l=this.width/2,c=this.height/2,h=[l,c];t.save(),t.beginPath(),d(t,h,this._fullXform,this._interactiveBoxSize,a,o,i),p.set(h,l,-c),d(t,h,this._fullXform,this._interactiveBoxSize,a,o,i),p.set(h,-l,-c),d(t,h,this._fullXform,this._interactiveBoxSize,a,o,i),p.set(h,-l,c),d(t,h,this._fullXform,this._interactiveBoxSize,a,o,i),this._scalable&&(p.set(h,0,c),d(t,h,this._fullXform,this._interactiveBoxSize,a,o,i),p.set(h,0,-c),d(t,h,this._fullXform,this._interactiveBoxSize,a,o,i),p.set(h,l,0),d(t,h,this._fullXform,this._interactiveBoxSize,a,o,i),p.set(h,-l,0),d(t,h,this._fullXform,this._interactiveBoxSize,a,o,i)),this.isFillVisible()&&(r.setFillStyle(t,this),t.fill()),this.isStrokeVisible()&&(r.setStrokeStyle(t,this),t.setTransform(1,0,0,1,0,0),t.stroke()),t.restore()}}},{key:"width",get:function(){return this.parent&&"undefined"!==this.parent.width?this.parent.width:0}},{key:"height",get:function(){return this.parent&&"undefined"!==this.parent.height?this.parent.height:0}}]),e}(y.a)},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.d(e,"a",(function(){return f}));var c=n(2),d=n(7),h=n(6),f=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=o(this,s(e).call(this,t)))._radius=10,void 0!==t.radius&&(n.radius=t.radius),c.initCenterExtents(n._aabox,[0,0],[n._radius,n._radius]),n}return u(e,t),function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(e,[{key:"getDimensions",value:function(){var t=2*this.radius;return[t,t]}},{key:"_updateAABox",value:function(){if(this._geomDirty||this._boundsOutOfDate){var t=this._pos,e=this._scale,n=h.a.DEG_TO_RAD*this._rotDeg,r=h.a.pow(h.a.cos(n),2),i=h.a.pow(h.a.sin(n),2),o=h.a.pow(e[0]*this._radius,2),a=h.a.pow(e[1]*this._radius,2),s=h.a.sqrt(a*i+o*r),u=h.a.sqrt(o*i+a*r);c.initCenterExtents(this._aabox,t,[s,u]),this._geomDirty=!1,this._boundsOutOfDate=!1}}},{key:"_draw",value:function(t){t.arc(0,0,this._radius,0,h.a.TWO_PI,!1)}},{key:"toJSON",value:function(){return Object.assign({type:"Circle",radius:this.radius},a(s(e.prototype),"toJSON",this).call(this))}},{key:"radius",set:function(t){if("number"!=typeof t)throw new Error("Radius must be a number");if(t!==this._radius){var e=this._radius;this._radius=t,this._geomDirty=!0,this.fire("changed:geom",{attr:"radius",prevVal:e,currVal:this._radius})}return this},get:function(){return this._radius}},{key:"width",get:function(){return 2*this.radius}},{key:"height",get:function(){return 2*this.radius}}]),e}(d.a)},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.d(e,"a",(function(){return h}));var c=n(12),d=3,h=function(t){function e(t){var n;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=o(this,s(e).call(this,t)))._verts.length<d)throw new Error("Poly shapes must be initialized with an array of 2d points and contain at least 3 points");return n}return u(e,t),function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(e,[{key:"removeVert",value:function(t){if(this._verts.length<d)throw new Error("Cannot remove vertex ".concat(t,". It would result in a poly with < 3 points. A poly must contain at least 3 points."));a(s(e.prototype),"removeVert",this).call(this,t)}},{key:"_draw",value:function(t){var e=!1;if(this._verts.length>=d){t.moveTo(this._verts[0][0],this._verts[0][1]);for(var n=1;n<this._verts.length;n+=1)t.lineTo(this._verts[n][0],this._verts[n][1]);t.closePath(),e=!0}return e}},{key:"toJSON",value:function(){return Object.assign(a(s(e.prototype),"toJSON",this).call(this),{type:"Poly"})}}]),e}(c.a)},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t,e,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}n.d(e,"a",(function(){return p}));var c=n(2),d=n(7),h=n(4),f=n(6),p=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=o(this,s(e).call(this,t)))._size=5,void 0!==t.size&&(n.size=t.size),c.initCenterExtents(n._aabox,[0,0],[n._radius,n._radius]),n.translate(t.x||0,t.y||0),n}return u(e,t),function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(e,[{key:"_updateAABox",value:function(){if(this._geomDirty||this._boundsOutOfDate){var t=this._pos,e=this._scale,n=f.a.DEG_TO_RAD*this._rotDeg,r=f.a.pow(f.a.cos(n),2),i=f.a.pow(f.a.sin(n),2),o=f.a.pow(e[0]*this._size,2),a=f.a.pow(e[1]*this._size,2),s=f.a.sqrt(a*i+o*r),u=f.a.sqrt(o*i+a*r);c.initCenterExtents(this._aabox,t,[s,u]),this._geomDirty=!1,this._boundsOutOfDate=!1}}},{key:"_draw",value:function(t){t.setTransform(1,0,0,1,0,0);var e=[0,0];h.a.svd(e,null,null,this._fullXform),t.arc(e[0],e[1],this._size,0,f.a.TWO_PI,!1)}},{key:"toJSON",value:function(){return Object.assign({type:"Point",size:this.size},a(s(e.prototype),"toJSON",this).call(this))}},{key:"size",set:function(t){if("number"!=typeof t)throw new Error("Radius must be a number");if(t!==this._size){var e=this._size;this._size=t,this._geomDirty=!0,this.fire("changed:geom",{attr:"size",prevVal:e,currVal:this._size})}},get:function(){return this._size}}]),e}(d.a)}])},6125:function(t,e,n){"use strict";var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var i=n(7057),o=n(4963),a=r(n(8122));function s(t,e){for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r],s=a.polygon(o,e);s.length>0&&(s[0][0]===s[s.length-1][0]&&s[0][1]===s[s.length-1][1]||s.push(s[0]),s.length>=4&&n.push(s))}return n}e.default=function(t,e){var n=o.getGeom(t),r=n.type,u="Feature"===t.type?t.properties:{},l=n.coordinates;switch(r){case"LineString":case"MultiLineString":var c=[];return"LineString"===r&&(l=[l]),l.forEach((function(t){a.polyline(t,e,c)})),1===c.length?i.lineString(c[0],u):i.multiLineString(c,u);case"Polygon":return i.polygon(s(l,e),u);case"MultiPolygon":return i.multiPolygon(l.map((function(t){return s(t,e)})),u);default:throw new Error("geometry "+r+" not supported")}}},8122:t=>{"use strict";function e(t,e,i){var o,a,s,u,l,c=t.length,d=r(t[0],e),h=[];for(i||(i=[]),o=1;o<c;o++){for(a=t[o-1],u=l=r(s=t[o],e);;){if(!(d|u)){h.push(a),u!==l?(h.push(s),o<c-1&&(i.push(h),h=[])):o===c-1&&h.push(s);break}if(d&u)break;d?d=r(a=n(a,s,d,e),e):u=r(s=n(a,s,u,e),e)}d=l}return h.length&&i.push(h),i}function n(t,e,n,r){return 8&n?[t[0]+(e[0]-t[0])*(r[3]-t[1])/(e[1]-t[1]),r[3]]:4&n?[t[0]+(e[0]-t[0])*(r[1]-t[1])/(e[1]-t[1]),r[1]]:2&n?[r[2],t[1]+(e[1]-t[1])*(r[2]-t[0])/(e[0]-t[0])]:1&n?[r[0],t[1]+(e[1]-t[1])*(r[0]-t[0])/(e[0]-t[0])]:null}function r(t,e){var n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}t.exports=e,t.exports.default=e,e.polyline=e,e.polygon=function(t,e){var i,o,a,s,u,l,c;for(o=1;o<=8;o*=2){for(i=[],s=!(r(a=t[t.length-1],e)&o),u=0;u<t.length;u++)(c=!(r(l=t[u],e)&o))!==s&&i.push(n(a,l,o,e)),c&&i.push(l),a=l,s=c;if(!(t=i).length)break}return i}},3292:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5266);e.default=function(t){var e=[1/0,1/0,-1/0,-1/0];return r.coordEach(t,(function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])})),e}},7057:(t,e)=>{"use strict";function n(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return(0===n.id||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function r(t,e,r){return void 0===r&&(r={}),n({type:"Point",coordinates:t},e,r)}function i(t,e,r){void 0===r&&(r={});for(var i=0,o=t;i<o.length;i++){var a=o[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:t},e,r)}function o(t,e,r){if(void 0===r&&(r={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:t},e,r)}function a(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function s(t,e,r){return void 0===r&&(r={}),n({type:"MultiLineString",coordinates:t},e,r)}function u(t,e,r){return void 0===r&&(r={}),n({type:"MultiPoint",coordinates:t},e,r)}function l(t,e,r){return void 0===r&&(r={}),n({type:"MultiPolygon",coordinates:t},e,r)}function c(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t*r}function d(t,n){void 0===n&&(n="kilometers");var r=e.factors[n];if(!r)throw new Error(n+" units is invalid");return t/r}function h(t){return t%(2*Math.PI)*180/Math.PI}function f(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)&&!/^\s*$/.test(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.earthRadius=6371008.8,e.factors={centimeters:100*e.earthRadius,centimetres:100*e.earthRadius,degrees:e.earthRadius/111325,feet:3.28084*e.earthRadius,inches:39.37*e.earthRadius,kilometers:e.earthRadius/1e3,kilometres:e.earthRadius/1e3,meters:e.earthRadius,metres:e.earthRadius,miles:e.earthRadius/1609.344,millimeters:1e3*e.earthRadius,millimetres:1e3*e.earthRadius,nauticalmiles:e.earthRadius/1852,radians:1,yards:e.earthRadius/1.0936},e.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/e.earthRadius,yards:1/1.0936},e.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},e.feature=n,e.geometry=function(t,e,n){switch(void 0===n&&(n={}),t){case"Point":return r(e).geometry;case"LineString":return o(e).geometry;case"Polygon":return i(e).geometry;case"MultiPoint":return u(e).geometry;case"MultiLineString":return s(e).geometry;case"MultiPolygon":return l(e).geometry;default:throw new Error(t+" is invalid")}},e.point=r,e.points=function(t,e,n){return void 0===n&&(n={}),a(t.map((function(t){return r(t,e)})),n)},e.polygon=i,e.polygons=function(t,e,n){return void 0===n&&(n={}),a(t.map((function(t){return i(t,e)})),n)},e.lineString=o,e.lineStrings=function(t,e,n){return void 0===n&&(n={}),a(t.map((function(t){return o(t,e)})),n)},e.featureCollection=a,e.multiLineString=s,e.multiPoint=u,e.multiPolygon=l,e.geometryCollection=function(t,e,r){return void 0===r&&(r={}),n({type:"GeometryCollection",geometries:t},e,r)},e.round=function(t,e){if(void 0===e&&(e=0),e&&!(e>=0))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},e.radiansToLength=c,e.lengthToRadians=d,e.lengthToDegrees=function(t,e){return h(d(t,e))},e.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},e.radiansToDegrees=h,e.degreesToRadians=function(t){return t%360*Math.PI/180},e.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(t>=0))throw new Error("length must be a positive number");return c(d(t,e),n)},e.convertArea=function(t,n,r){if(void 0===n&&(n="meters"),void 0===r&&(r="kilometers"),!(t>=0))throw new Error("area must be a positive number");var i=e.areaFactors[n];if(!i)throw new Error("invalid original units");var o=e.areaFactors[r];if(!o)throw new Error("invalid final units");return t/i*o},e.isNumber=f,e.isObject=function(t){return!!t&&t.constructor===Object},e.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach((function(t){if(!f(t))throw new Error("bbox must only contain numbers")}))},e.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof t))throw new Error("id must be a number or a string")},e.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},e.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},e.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},e.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},e.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},e.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},e.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},4963:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(7057);e.getCoord=function(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")},e.getCoords=function(t){if(Array.isArray(t))return t;if("Feature"===t.type){if(null!==t.geometry)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")},e.containsNumber=function t(e){if(e.length>1&&r.isNumber(e[0])&&r.isNumber(e[1]))return!0;if(Array.isArray(e[0])&&e[0].length)return t(e[0]);throw new Error("coordinates must only contain numbers")},e.geojsonType=function(t,e,n){if(!e||!n)throw new Error("type and name required");if(!t||t.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.type)},e.featureOf=function(t,e,n){if(!t)throw new Error("No feature passed");if(!n)throw new Error(".featureOf() requires a name");if(!t||"Feature"!==t.type||!t.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!t.geometry||t.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+t.geometry.type)},e.collectionOf=function(t,e,n){if(!t)throw new Error("No featureCollection passed");if(!n)throw new Error(".collectionOf() requires a name");if(!t||"FeatureCollection"!==t.type)throw new Error("Invalid input to "+n+", FeatureCollection required");for(var r=0,i=t.features;r<i.length;r++){var o=i[r];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+n+", Feature with geometry required");if(!o.geometry||o.geometry.type!==e)throw new Error("Invalid input to "+n+": must be a "+e+", given "+o.geometry.type)}},e.getGeom=function(t){return"Feature"===t.type?t.geometry:t},e.getType=function(t,e){return"FeatureCollection"===t.type?"FeatureCollection":"GeometryCollection"===t.type?"GeometryCollection":"Feature"===t.type&&null!==t.geometry?t.geometry.type:t.type}},5266:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(7057);function i(t,e,n){if(null!==t)for(var r,o,a,s,u,l,c,d,h=0,f=0,p=t.type,m="FeatureCollection"===p,_="Feature"===p,y=m?t.features.length:1,v=0;v<y;v++){u=(d=!!(c=m?t.features[v].geometry:_?t.geometry:t)&&"GeometryCollection"===c.type)?c.geometries.length:1;for(var g=0;g<u;g++){var x=0,b=0;if(null!==(s=d?c.geometries[g]:c)){l=s.coordinates;var w=s.type;switch(h=!n||"Polygon"!==w&&"MultiPolygon"!==w?0:1,w){case null:break;case"Point":if(!1===e(l,f,v,x,b))return!1;f++,x++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(!1===e(l[r],f,v,x,b))return!1;f++,"MultiPoint"===w&&x++}"LineString"===w&&x++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(o=0;o<l[r].length-h;o++){if(!1===e(l[r][o],f,v,x,b))return!1;f++}"MultiLineString"===w&&x++,"Polygon"===w&&b++}"Polygon"===w&&x++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(b=0,o=0;o<l[r].length;o++){for(a=0;a<l[r][o].length-h;a++){if(!1===e(l[r][o][a],f,v,x,b))return!1;f++}b++}x++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(!1===i(s.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function o(t,e){var n;switch(t.type){case"FeatureCollection":for(n=0;n<t.features.length&&!1!==e(t.features[n].properties,n);n++);break;case"Feature":e(t.properties,0)}}function a(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function s(t,e){var n,r,i,o,a,s,u,l,c,d,h=0,f="FeatureCollection"===t.type,p="Feature"===t.type,m=f?t.features.length:1;for(n=0;n<m;n++){for(s=f?t.features[n].geometry:p?t.geometry:t,l=f?t.features[n].properties:p?t.properties:{},c=f?t.features[n].bbox:p?t.bbox:void 0,d=f?t.features[n].id:p?t.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,i=0;i<a;i++)if(null!==(o=u?s.geometries[i]:s))switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(o,h,l,c,d))return!1;break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(!1===e(o.geometries[r],h,l,c,d))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,h,l,c,d))return!1;h++}}function u(t,e){s(t,(function(t,n,i,o,a){var s,u=null===t?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==e(r.feature(t,i,{bbox:o,id:a}),n,0)&&void 0}switch(u){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var l=0;l<t.coordinates.length;l++){var c={type:s,coordinates:t.coordinates[l]};if(!1===e(r.feature(c,i),n,l))return!1}}))}function l(t,e){u(t,(function(t,n,o){var a=0;if(t.geometry){var s=t.geometry.type;if("Point"!==s&&"MultiPoint"!==s){var u,l=0,c=0,d=0;return!1!==i(t,(function(i,s,h,f,p){if(void 0===u||n>l||f>c||p>d)return u=i,l=n,c=f,d=p,void(a=0);var m=r.lineString([u,i],t.properties);if(!1===e(m,n,o,p,a))return!1;a++,u=i}))&&void 0}}}))}function c(t,e){if(!t)throw new Error("geojson is required");u(t,(function(t,n,i){if(null!==t.geometry){var o=t.geometry.type,a=t.geometry.coordinates;switch(o){case"LineString":if(!1===e(t,n,i,0,0))return!1;break;case"Polygon":for(var s=0;s<a.length;s++)if(!1===e(r.lineString(a[s],t.properties),n,i,s))return!1}}}))}e.coordEach=i,e.coordReduce=function(t,e,n,r){var o=n;return i(t,(function(t,r,i,a,s){o=0===r&&void 0===n?t:e(o,t,r,i,a,s)}),r),o},e.propEach=o,e.propReduce=function(t,e,n){var r=n;return o(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},e.featureEach=a,e.featureReduce=function(t,e,n){var r=n;return a(t,(function(t,i){r=0===i&&void 0===n?t:e(r,t,i)})),r},e.coordAll=function(t){var e=[];return i(t,(function(t){e.push(t)})),e},e.geomEach=s,e.geomReduce=function(t,e,n){var r=n;return s(t,(function(t,i,o,a,s){r=0===i&&void 0===n?t:e(r,t,i,o,a,s)})),r},e.flattenEach=u,e.flattenReduce=function(t,e,n){var r=n;return u(t,(function(t,i,o){r=0===i&&0===o&&void 0===n?t:e(r,t,i,o)})),r},e.segmentEach=l,e.segmentReduce=function(t,e,n){var r=n,i=!1;return l(t,(function(t,o,a,s,u){r=!1===i&&void 0===n?t:e(r,t,o,a,s,u),i=!0})),r},e.lineEach=c,e.lineReduce=function(t,e,n){var r=n;return c(t,(function(t,i,o,a){r=0===i&&void 0===n?t:e(r,t,i,o,a)})),r},e.findSegment=function(t,e){if(e=e||{},!r.isObject(e))throw new Error("options is invalid");var n,i=e.featureIndex||0,o=e.multiFeatureIndex||0,a=e.geometryIndex||0,s=e.segmentIndex||0,u=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),u=u||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":u=u||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var l=n.coordinates;switch(n.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=l.length+s-1),r.lineString([l[s],l[s+1]],u,e);case"Polygon":return a<0&&(a=l.length+a),s<0&&(s=l[a].length+s-1),r.lineString([l[a][s],l[a][s+1]],u,e);case"MultiLineString":return o<0&&(o=l.length+o),s<0&&(s=l[o].length+s-1),r.lineString([l[o][s],l[o][s+1]],u,e);case"MultiPolygon":return o<0&&(o=l.length+o),a<0&&(a=l[o].length+a),s<0&&(s=l[o][a].length-s-1),r.lineString([l[o][a][s],l[o][a][s+1]],u,e)}throw new Error("geojson is invalid")},e.findPoint=function(t,e){if(e=e||{},!r.isObject(e))throw new Error("options is invalid");var n,i=e.featureIndex||0,o=e.multiFeatureIndex||0,a=e.geometryIndex||0,s=e.coordIndex||0,u=e.properties;switch(t.type){case"FeatureCollection":i<0&&(i=t.features.length+i),u=u||t.features[i].properties,n=t.features[i].geometry;break;case"Feature":u=u||t.properties,n=t.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":n=t;break;default:throw new Error("geojson is invalid")}if(null===n)return null;var l=n.coordinates;switch(n.type){case"Point":return r.point(l,u,e);case"MultiPoint":return o<0&&(o=l.length+o),r.point(l[o],u,e);case"LineString":return s<0&&(s=l.length+s),r.point(l[s],u,e);case"Polygon":return a<0&&(a=l.length+a),s<0&&(s=l[a].length+s),r.point(l[a][s],u,e);case"MultiLineString":return o<0&&(o=l.length+o),s<0&&(s=l[o].length+s),r.point(l[o][s],u,e);case"MultiPolygon":return o<0&&(o=l.length+o),a<0&&(a=l[o].length+a),s<0&&(s=l[o][a].length-s),r.point(l[o][a][s],u,e)}throw new Error("geojson is invalid")}},9669:(t,e,n)=>{t.exports=n(1609)},5448:(t,e,n)=>{"use strict";var r=n(4867),i=n(6026),o=n(5327),a=n(4109),s=n(7985),u=n(5061);t.exports=function(t){return new Promise((function(e,l){var c=t.data,d=t.headers;r.isFormData(c)&&delete d["Content-Type"];var h=new XMLHttpRequest;if(t.auth){var f=t.auth.username||"",p=t.auth.password||"";d.Authorization="Basic "+btoa(f+":"+p)}if(h.open(t.method.toUpperCase(),o(t.url,t.params,t.paramsSerializer),!0),h.timeout=t.timeout,h.onreadystatechange=function(){if(h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in h?a(h.getAllResponseHeaders()):null,r={data:t.responseType&&"text"!==t.responseType?h.response:h.responseText,status:h.status,statusText:h.statusText,headers:n,config:t,request:h};i(e,l,r),h=null}},h.onabort=function(){h&&(l(u("Request aborted",t,"ECONNABORTED",h)),h=null)},h.onerror=function(){l(u("Network Error",t,null,h)),h=null},h.ontimeout=function(){l(u("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",h)),h=null},r.isStandardBrowserEnv()){var m=n(4372),_=(t.withCredentials||s(t.url))&&t.xsrfCookieName?m.read(t.xsrfCookieName):void 0;_&&(d[t.xsrfHeaderName]=_)}if("setRequestHeader"in h&&r.forEach(d,(function(t,e){void 0===c&&"content-type"===e.toLowerCase()?delete d[e]:h.setRequestHeader(e,t)})),t.withCredentials&&(h.withCredentials=!0),t.responseType)try{h.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&h.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){h&&(h.abort(),l(t),h=null)})),void 0===c&&(c=null),h.send(c)}))}},1609:(t,e,n)=>{"use strict";var r=n(4867),i=n(1849),o=n(321),a=n(7185);function s(t){var e=new o(t),n=i(o.prototype.request,e);return r.extend(n,o.prototype,e),r.extend(n,e),n}var u=s(n(6419));u.Axios=o,u.create=function(t){return s(a(u.defaults,t))},u.Cancel=n(4442),u.CancelToken=n(4972),u.isCancel=n(6502),u.all=function(t){return Promise.all(t)},u.spread=n(8713),t.exports=u,t.exports.default=u},4442:t=>{"use strict";function e(t){this.message=t}e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,t.exports=e},4972:(t,e,n)=>{"use strict";var r=n(4442);function i(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var n=this;t((function(t){n.reason||(n.reason=new r(t),e(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var t;return{token:new i((function(e){t=e})),cancel:t}},t.exports=i},6502:t=>{"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},321:(t,e,n)=>{"use strict";var r=n(4867),i=n(5327),o=n(782),a=n(3572),s=n(7185);function u(t){this.defaults=t,this.interceptors={request:new o,response:new o}}u.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=s(this.defaults,t)).method=t.method?t.method.toLowerCase():"get";var e=[a,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach((function(t){e.unshift(t.fulfilled,t.rejected)})),this.interceptors.response.forEach((function(t){e.push(t.fulfilled,t.rejected)}));e.length;)n=n.then(e.shift(),e.shift());return n},u.prototype.getUri=function(t){return t=s(this.defaults,t),i(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(t){u.prototype[t]=function(e,n){return this.request(r.merge(n||{},{method:t,url:e}))}})),r.forEach(["post","put","patch"],(function(t){u.prototype[t]=function(e,n,i){return this.request(r.merge(i||{},{method:t,url:e,data:n}))}})),t.exports=u},782:(t,e,n)=>{"use strict";var r=n(4867);function i(){this.handlers=[]}i.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},i.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},i.prototype.forEach=function(t){r.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=i},5061:(t,e,n)=>{"use strict";var r=n(481);t.exports=function(t,e,n,i,o){var a=new Error(t);return r(a,e,n,i,o)}},3572:(t,e,n)=>{"use strict";var r=n(4867),i=n(8527),o=n(6502),a=n(6419),s=n(9699),u=n(7303);function l(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return l(t),t.baseURL&&!s(t.url)&&(t.url=u(t.baseURL,t.url)),t.headers=t.headers||{},t.data=i(t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||a.adapter)(t).then((function(e){return l(t),e.data=i(e.data,e.headers,t.transformResponse),e}),(function(e){return o(e)||(l(t),e&&e.response&&(e.response.data=i(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},481:t=>{"use strict";t.exports=function(t,e,n,r,i){return t.config=e,n&&(t.code=n),t.request=r,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},7185:(t,e,n)=>{"use strict";var r=n(4867);t.exports=function(t,e){e=e||{};var n={};return r.forEach(["url","method","params","data"],(function(t){void 0!==e[t]&&(n[t]=e[t])})),r.forEach(["headers","auth","proxy"],(function(i){r.isObject(e[i])?n[i]=r.deepMerge(t[i],e[i]):void 0!==e[i]?n[i]=e[i]:r.isObject(t[i])?n[i]=r.deepMerge(t[i]):void 0!==t[i]&&(n[i]=t[i])})),r.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],(function(r){void 0!==e[r]?n[r]=e[r]:void 0!==t[r]&&(n[r]=t[r])})),n}},6026:(t,e,n)=>{"use strict";var r=n(5061);t.exports=function(t,e,n){var i=n.config.validateStatus;!i||i(n.status)?t(n):e(r("Request failed with status code "+n.status,n.config,null,n.request,n))}},8527:(t,e,n)=>{"use strict";var r=n(4867);t.exports=function(t,e,n){return r.forEach(n,(function(n){t=n(t,e)})),t}},6419:(t,e,n)=>{"use strict";var r=n(4867),i=n(6016),o={"Content-Type":"application/x-www-form-urlencoded"};function a(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var s,u={adapter:(("undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)||"undefined"!=typeof XMLHttpRequest)&&(s=n(5448)),s),transformRequest:[function(t,e){return i(e,"Accept"),i(e,"Content-Type"),r.isFormData(t)||r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t)?t:r.isArrayBufferView(t)?t.buffer:r.isURLSearchParams(t)?(a(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):r.isObject(t)?(a(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(t){u.headers[t]={}})),r.forEach(["post","put","patch"],(function(t){u.headers[t]=r.merge(o)})),t.exports=u},1849:t=>{"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},5327:(t,e,n)=>{"use strict";var r=n(4867);function i(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var o;if(n)o=n(e);else if(r.isURLSearchParams(e))o=e.toString();else{var a=[];r.forEach(e,(function(t,e){null!=t&&(r.isArray(t)?e+="[]":t=[t],r.forEach(t,(function(t){r.isDate(t)?t=t.toISOString():r.isObject(t)&&(t=JSON.stringify(t)),a.push(i(e)+"="+i(t))})))})),o=a.join("&")}if(o){var s=t.indexOf("#");-1!==s&&(t=t.slice(0,s)),t+=(-1===t.indexOf("?")?"?":"&")+o}return t}},7303:t=>{"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},4372:(t,e,n)=>{"use strict";var r=n(4867);t.exports=r.isStandardBrowserEnv()?{write:function(t,e,n,i,o,a){var s=[];s.push(t+"="+encodeURIComponent(e)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},9699:t=>{"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},7985:(t,e,n)=>{"use strict";var r=n(4867);t.exports=r.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(t){var r=t;return e&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=i(window.location.href),function(e){var n=r.isString(e)?i(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0}},6016:(t,e,n)=>{"use strict";var r=n(4867);t.exports=function(t,e){r.forEach(t,(function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])}))}},4109:(t,e,n)=>{"use strict";var r=n(4867),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,o,a={};return t?(r.forEach(t.split("\n"),(function(t){if(o=t.indexOf(":"),e=r.trim(t.substr(0,o)).toLowerCase(),n=r.trim(t.substr(o+1)),e){if(a[e]&&i.indexOf(e)>=0)return;a[e]="set-cookie"===e?(a[e]?a[e]:[]).concat([n]):a[e]?a[e]+", "+n:n}})),a):a}},8713:t=>{"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},4867:(t,e,n)=>{"use strict";var r=n(1849),i=n(8778),o=Object.prototype.toString;function a(t){return"[object Array]"===o.call(t)}function s(t){return null!==t&&"object"==typeof t}function u(t){return"[object Function]"===o.call(t)}function l(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),a(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}t.exports={isArray:a,isArrayBuffer:function(t){return"[object ArrayBuffer]"===o.call(t)},isBuffer:i,isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:s,isUndefined:function(t){return void 0===t},isDate:function(t){return"[object Date]"===o.call(t)},isFile:function(t){return"[object File]"===o.call(t)},isBlob:function(t){return"[object Blob]"===o.call(t)},isFunction:u,isStream:function(t){return s(t)&&u(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:l,merge:function t(){var e={};function n(n,r){"object"==typeof e[r]&&"object"==typeof n?e[r]=t(e[r],n):e[r]=n}for(var r=0,i=arguments.length;r<i;r++)l(arguments[r],n);return e},deepMerge:function t(){var e={};function n(n,r){"object"==typeof e[r]&&"object"==typeof n?e[r]=t(e[r],n):e[r]="object"==typeof n?t({},n):n}for(var r=0,i=arguments.length;r<i;r++)l(arguments[r],n);return e},extend:function(t,e,n){return l(e,(function(e,i){t[i]=n&&"function"==typeof e?r(e,n):e})),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},8778:t=>{t.exports=function(t){return null!=t&&null!=t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}},2467:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default=function(){var t={},e=null,n="",i="",s=null,u=null,l=null,c=!1;function d(){if(c=!c)e._invokeSetCustomContLegendListener({detail:e.colors().domain()});else{var t="pointmap"===i||"backendScatter"===i?l:o.default.extent(e.data(),e.colorAccessor());t&&e.colorDomain(t),e._invokeClearCustomContLegendListener()}e.redrawAsync()}function h(){var t=function(t){return parseFloat(t.replace(/,/g,""))},n=o.default.select(this).attr("value"),r=t(s.select(".legend-item:first-child .legend-input input").node().value),i=t(s.select(".legend-item:last-child .legend-input input").node().value),a=isFinite(r)?r:e.colorDomain()[0],u=isFinite(i)?i:e.colorDomain()[1];isNaN(a)||isNaN(u)?o.default.select(this).property("value",n):(c=!0,e.colorDomain([a,u]).on("preRedraw.color",null).redrawAsync(),e._invokeSetCustomContLegendListener({detail:[a,u]}))}return t.legendType=function(){return"quantitative"},t.isLocked=function(e){return arguments.length?(c=e,t):c},t.parent=function(n){return arguments.length?(e=n,t):e},t.minMax=function(e){return arguments.length?(l=e,t):l},t.legendTitle=function(e){return arguments.length?(n=e,t):n},t.chartType=function(e){return arguments.length?(i=e,t):i},t.removeLegend=function(){e.root().select(".legend-cont").remove(),e._invokeClearCustomContLegendListener(),e.legend(null)},t.render=function(){e.root().select(".legend-cont").remove();var t=(s=e.root().append("div").attr("class","legend-cont")).append("div").attr("class","legend-group");!function(){var t=(u=s.append("div").attr("class","legend-lock").classed("js-isLocked",c).on("click",d)).append("svg").attr("class","svg-icon").classed("icon-lock",!0).attr("viewBox","0 0 48 48");t.append("g").style("stroke","white").style("stroke-width","6").append("use").attr("xlink:href","#icon-lock"),t.append("use").attr("xlink:href","#icon-lock");var n=u.append("svg").attr("class","svg-icon").classed("icon-unlock",!0).attr("viewBox","0 0 48 48");n.append("g").style("stroke","white").style("stroke-width","6").append("use").attr("xlink:href","#icon-unlock"),n.append("use").attr("xlink:href","#icon-unlock"),c?(e.on("preRender.color",null),e.on("preRedraw.color",null)):(e.on("preRender.color",a),e.on("preRedraw.color",a))}();var n=e.legendablesContinuous(),i=t.selectAll(".legend-item").data(n).enter().append("div").attr("class","legend-item");i.append("div").attr("class","legend-swatch").style("background-color",(function(t){return t?t.color:"#e2e2e2"})),i.append("div").attr("class","legend-label").append("span").text((function(t){return"object"===(void 0===t?"undefined":r(t))&&"NaN"!==t.value?t.value:0})),t.selectAll(".legend-item:first-child , .legend-item:last-child").on("mouseenter",(function(){var t=o.default.select(this),e=t.select("span").node().getBoundingClientRect().width+8;t.select(".legend-input input").style("width",e+"px")})).selectAll(".legend-label").append("div").attr("class","legend-input").append("input").attr("value",(function(t){return"object"===(void 0===t?"undefined":r(t))&&"NaN"!==t.value?t.value:0})).on("click",(function(){this.select();var t=o.default.select(this.parentNode.parentNode);t.classed("active",!0);var e=t.select("span").node().getBoundingClientRect().width+8;t.select(".legend-input input").style("width",e+"px")})).on("blur",(function(){o.default.select(this.parentNode.parentNode).classed("active",!1)})).on("change",h)},t};var i,o=(i=n(5680))&&i.__esModule?i:{default:i};function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.data();e.image||t.colorDomain(o.default.extent(e,t.colorAccessor()))}},2438:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t={},e=void 0,n=0,r=0,o=12,a=5,s=!1,u=560,l=70,c=!1,d=void 0,h=void 0,f=!1;function p(){f=!f,h.classed("js-isLocked",f),f?e.legendLock()():e.legendUnlock()(!0)}function m(){var t=d.select(".legend-item:first-child .legend-input input")[0][0].value,n=d.select(".legend-item:last-child .legend-input input")[0][0].value;e.legendInputChange()([t,n],e.colors().range().length),f=!0,h.classed("js-isLocked",f)}return t.parent=function(n){return arguments.length?(e=n,t):e},t.render=function(){e.root().select(".legend-cont").remove(),(d=e.root().append("div").attr("class","legend-cont").style("display",null===e.colorByExpr()?"none":"block")).append("div").attr("class","legend-title").append("span").text(e.colorByExpr());var t=d.append("div").attr("class","legend-group");(h=d.append("div").attr("class","legend-lock").classed("js-isLocked",f).on("click",p)).append("svg").attr("class","svg-icon").classed("icon-lock",!0).attr("viewBox","0 0 48 48").append("use").attr("xlink:href","#icon-lock"),h.append("svg").attr("class","svg-icon").classed("icon-unlock",!0).attr("viewBox","0 0 48 48").append("use").attr("xlink:href","#icon-unlock");var n=e.legendablesContinuous(),r=t.selectAll(".legend-item").data(n).enter().append("div").attr("class","legend-item");r.append("div").attr("class","legend-swatch").style("background-color",(function(t){return t?t.color:"#e2e2e2"})),r.append("div").attr("class","legend-label").append("span").text((function(t){return t?t.value:0})),t.selectAll(".legend-item:first-child , .legend-item:last-child").on("mouseenter",(function(){var t=i.default.select(this),e=t.select("span").node().getBoundingClientRect().width+8;t.select(".legend-input input").style("width",e+"px")})).selectAll(".legend-label").append("div").attr("class","legend-input").append("input").attr("value",(function(t){return t?t.value:0})).on("focus",(function(){this.select();var t=i.default.select(this.parentNode.parentNode);t.classed("active",!0);var e=t.select("span").node().getBoundingClientRect().width+8;t.select(".legend-input input").style("width",e+"px")})).on("blur",(function(){i.default.select(this.parentNode.parentNode).classed("active",!1)})).on("change",m)},t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t.gap=function(e){return arguments.length?(a=e,t):a},t.itemHeight=function(e){return arguments.length?(o=e,t):o},t.horizontal=function(e){return arguments.length?(s=e,t):s},t.legendWidth=function(e){return arguments.length?(u=e,t):u},t.itemWidth=function(e){return arguments.length?(l=e,t):l},t.autoItemWidth=function(e){return arguments.length?(c=e,t):c},t};var r,i=(r=n(5680))&&r.__esModule?r:{default:r}},6912:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t={},e=void 0,n=0,o=0,a=12,s=5,u=!1,l=560,c=70,d=!1,h=void 0;function f(){return s+a}return t.parent=function(n){return arguments.length?(e=n,t):e},t.render=function(){e.svg().select("g.dc-legend").remove(),h=e.svg().append("g").attr("class","dc-legend").attr("transform","translate("+n+","+o+")");var t=e.legendables(),i=h.selectAll("g.dc-legend-item").data(t).enter().append("g").attr("class","dc-legend-item").on("mouseover",(function(t){e.legendHighlight(t)})).on("mouseout",(function(t){e.legendReset(t)})).on("click",(function(t){t.chart.legendToggle(t)}));h.selectAll("g.dc-legend-item").classed("fadeout",(function(t){return t.chart.isLegendableHidden(t)})),t.some((0,r.pluck)("dashstyle"))?i.append("line").attr("x1",0).attr("y1",a/2).attr("x2",a).attr("y2",a/2).attr("stroke-width",2).attr("stroke-dasharray",(0,r.pluck)("dashstyle")).attr("stroke",(0,r.pluck)("color")):i.append("rect").attr("width",a).attr("height",a).attr("fill",(function(t){return t?t.color:"blue"})),i.append("text").text((0,r.pluck)("name")).attr("x",a+2).attr("y",(function(){return a/2+(this.clientHeight?this.clientHeight:13)/2-2}));var p=0,m=0;i.attr("transform",(function(t,e){if(u){var n="translate("+p+","+m*f()+")",r=!0===d?this.getBBox().width+s:c;return p+r>=l?(++m,p=0):p+=r,n}return"translate(0,"+e*f()+")"}))},t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(o=e,t):o},t.gap=function(e){return arguments.length?(s=e,t):s},t.itemHeight=function(e){return arguments.length?(a=e,t):a},t.horizontal=function(e){return arguments.length?(u=e,t):u},t.legendWidth=function(e){return arguments.length?(l=e,t):l},t.itemWidth=function(e){return arguments.length?(c=e,t):c},t.autoItemWidth=function(e){return arguments.length?(d=e,t):d},t.legendText=function(e){return arguments.length?(_legendText=e,t):_legendText},t=(0,i.default)(t)},o(n(5680));var r=n(5209),i=o(n(9330));function o(t){return t&&t.__esModule?t:{default:t}}},9366:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.getLegendStateFromChart=m,e.handleLegendToggle=function(){var t=this;this.getLayers().forEach((function(e){return e.setState(h((function(e){return{open:!t.legend().state.open}})))})),this.legend().setState(r({},this.legend().state,{open:!this.legend().state.open}))},e.handleLegendDoneRender=function(){var t=this;this.root().classed("horizontal-lasso-tools",(function(){var e=t.root().select(".legendables").node(),n=e&&e.clientHeight>t.height()-120;return t.root().select(".mapd-draw-button-control-group").style("width",n?e.clientWidth+2+"px":"auto"),n}))},e.handleLegendOpen=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.getLayers()[t].setState(h((function(t){return{open:!!a(t)&&!l(t)}}))),this.legend().setState(m(this))},e.handleLegendLock=function(t){var e=t.locked,n=t.index,r=void 0===n?0:n,o=this.getLayers()[r];o.setState(h((function(t){return{locked:void 0===e||!e}})));var a=o.getState().encoding.color,s=!1;if("object"===i(a.scale))if(a.legend.locked){var u=a.scale.domain||o.colorDomain();o.setState(f(u))}else o.setState(f("auto")),s=!0;else void 0===a.scale&&void 0!==a.domain&&(a.legend.locked&&"auto"===a.domain?o.setState(p(o.colorDomain())):a.legend.locked||(o.setState(p("auto")),s=!0));s?this.renderAsync():this.legend().setState(m(this))},e.handleLegendInput=function(t){var e,n=t.domain,a=t.index,s=void 0===a?0:a,u=this.getLayers()[s],l=u.getState().encoding.color.scale,c=this.legend().state.domain||this.legend().state.list[s].domain;o.difference(n,c).length>0&&u.setState(h((function(t){return{locked:!0}}))),"object"===(void 0===l?"undefined":i(l))?u.setState(f(n)):u.setState((e=function(){return{domain:n}},function(t){return r({},t,{encoding:r({},t.encoding,{color:r({},t.encoding.color,e(t.encoding.color))})})})),this.legend().setState(m(this)),this.renderAsync()},e.toLegendState=y;var o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(6486)),a=function(t){return"object"===i(t.legend)&&t.legend.hasOwnProperty("open")},s=function(t){return"object"===i(t.legend)&&t.legend.hasOwnProperty("locked")},u=function(t){return"object"===i(t.legend)&&t.legend.hasOwnProperty("title")},l=function(t){return void 0===t.legend.open||t.legend.open},c=function(t){return"gradient"===t.type?Object.assign({},t,{open:!0}):t},d=function(t){return Object.assign({},t,{type:"nominal",range:t.range,domain:t.domain.slice(1),open:!0})};function h(t){return function(e){return r({},e,{encoding:r({},e.encoding,{color:r({},e.encoding.color,{legend:r({},e.encoding.color.legend,t(e.encoding.color))})})})}}function f(t){return function(e){return r({},e,{encoding:r({},e.encoding,{color:r({},e.encoding.color,{scale:r({},e.encoding.color.scale,{domain:t})})})})}}function p(t){return function(e){return r({},e,{encoding:r({},e.encoding,{color:r({},e.encoding.color,{domain:t})})})}}function m(t,e,n){var a=t.root().selectAll(".legend"),s=t.getLayerNames();return a.size()>s.length&&n&&"master"!==n.currentLayer&&t.root().selectAll(".legend").filter((function(t,e){return e!==n.currentLayer})).remove(),y(t.getLayerNames().map((function(e){var a=t.getLayer(e),u=a.getState(),l=a.getState().encoding.color;return s.length>1||o.isEqual(n,u)?"object"===i(l.scale)&&"auto"===l.scale.domain?r({},l,{scale:r({},l.scale,{domain:a.colorDomain()})}):void 0===l.scale&&"auto"===l.domain?r({},l,{domain:a.colorDomain()}):l:l})),t,e)}function _(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("ordinal"===t.type)return{type:"nominal",title:u(t)?t.legend.title:"Legend",open:!a(t)||t.legend.open,range:t.range,domain:t.domain,position:e?"bottom-left":"top-right"};if("quantitative"===t.type&&t.domain&&v(t.domain))return{type:"nominal",title:u(t)?t.legend.title:"Legend",open:!a(t)||t.legend.open,range:t.range,domain:t.domain.slice(1),position:e?"bottom-left":"top-right"};if("quantitative"===t.type)return{type:"gradient",title:u(t)?t.legend.title:"Legend",locked:!!s(t)&&t.legend.locked,open:!a(t)||t.legend.open,range:t.range,domain:t.domain,position:"bottom-left"};if("quantize"===t.type){var n=t.scale;return{type:"gradient",title:u(t)?t.legend.title:"Legend",locked:!!s(t)&&t.legend.locked,open:!a(t)||t.legend.open,range:n.range,domain:n.domain,position:"bottom-left"}}return{}}function y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1],n=arguments[2];return 1===t.length&&t[0].domain&&v(t[0].domain)?d(t[0]):1===t.length?c(_(t[0],n)):t.length?{type:"stacked",list:t.map(_),open:void 0===e.legendOpen()||e.legendOpen(),maxHeight:e.height()-56}:{}}function v(t){return t.reduce((function(t,e){return"NULL"===e?t+1:t}),0)>1}},402:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=(0,s.default)((0,a.default)((0,u.default)({}))),c=4,f=!1,p=!1;n._numberOfBars=null;var m=void 0;function _(){n.popup().classed("js-showPopup",!1)}function y(t){return i.utils.safeNumber(Math.abs(n.y()(t.y+t.y0)-n.y()(t.y0)))}function v(t,e){return function(){var n=o.default.select(this).attr("fill")===t;return e?!n:n}}return(0,r.override)(n,"rescale",(function(){return n._rescale(),m=void 0,n})),n.label((function(t){return i.utils.printSingleValue(t.y0+t.y)}),!1),n.measureValue=function(t){var e=n.valueFormatter();return e&&e(t)||i.utils.formatValue(t)},n.plotData=function(){var t=n.chartBodyG().selectAll("g.stack").data(n.data());!function(){var t=void 0,e=n.group().binParams()[0];if(e)t=e.timeBin?n.getTimeBinSize(e):e.numBins;else{var r=n.data()[0].values.map((function(t){return t.x}));t=Math.max.apply(null,r)-Math.min.apply(null,r)}((m=n.isOrdinal()&&void 0===c?Math.floor(n.x().rangeBand()):c?Math.floor((n.xAxisLength()-(t-1)*c)/t):Math.floor(n.xAxisLength()/(1+n.barPadding())/t))===1/0||isNaN(m)||m<1)&&(m=1)}(),t.enter().append("g").attr("class",(function(t,e){return"stack _"+e}));var e,a=t.size()-1;t.each((function(t,e){var s=o.default.select(this);!function(t,e,o){function a(t,e){return t.name?(t.layer=t.name,n.getColor(t,e)):n.getColor(t,e)}o.values.length;var s=t.selectAll("rect.bar").data(o.values,(function(t){return t.x instanceof Date?t.x.getTime():t.x})),u=s.enter().append("rect").attr("class","bar").attr("fill",a).attr("y",n.yAxisHeight()).attr("height",0);n.renderTitle()&&u.append("title").text((0,i.pluck)("data",n.title(o.name))),n.isOrdinal()&&s.on("click",n.onClick),(0,r.transition)(s,n.transitionDuration()).attr("x",(function(t){var e=n.x()(t.x);return f&&(e-=m/2),n.isOrdinal()&&void 0!==c&&(e+=c/2),i.utils.safeNumber(e)})).attr("y",(function(t){var e=n.y()(t.y+t.y0);return t.y<0&&(e-=y(t)),i.utils.safeNumber(e)})).attr("width",m).attr("height",(function(t){return y(t)})).attr("fill",a).select("title").text((0,i.pluck)("data",n.title(o.name))),(0,r.transition)(s.exit(),n.transitionDuration()).attr("height",0).remove()}(s,0,t),n.renderLabel()&&a===e&&function(t,e,o){var a=t.selectAll("text.barLabel").data(o.values,(0,i.pluck)("x"));a.enter().append("text").attr("class","barLabel").attr("text-anchor","middle"),n.isOrdinal()&&(a.on("click",n.onClick),a.attr("cursor","pointer")),(0,r.transition)(a,n.transitionDuration()).attr("x",(function(t){var e=n.x()(t.x);return f||(e+=m/2),i.utils.safeNumber(e)})).attr("y",(function(t){var e=n.y()(t.y+t.y0);return t.y<0&&(e-=y(t)),i.utils.safeNumber(e-3)})).text((function(t){return n.label()(t)})),(0,r.transition)(a.exit(),n.transitionDuration()).attr("height",0).remove()}(s,0,t)})),n.brushOn()&&(e=n.g().on("mouseout",(function(){n.g().selectAll(".bar").style("fill-opacity",1),_()})).on("mousemove",(function(){n.isBrushing()?_():function(t,e){var r,i=(r=n.popupCoordinates(o.default.mouse(e)))[0],a=r[1],s=i-n.margins().left,u=(n.margins().top,[]);t.selectAll(".stack").each((function(){var t=null,e=o.default.select(this).selectAll(".bar").style("fill-opacity",1);e[0].sort((function(t,e){return o.default.select(t).attr("x")-o.default.select(e).attr("x")})),e[0].some((function(e,n){var r=o.default.select(e);if(s<r.attr("x"))return!0;t={elm:r,datum:r.datum(),i:n}})),t&&Math.abs(t.elm.attr("x")-s)<m&&(t.elm.style("fill-opacity",.8),u.push(t))})),u.length>0?function(t,e,r){if(!n.popupIsEnabled())return _(),!1;var i=n.popup().classed("hide-delay",!0),a=i.select(".chart-popup-content").html("").classed("popup-list",!0);a.append("div").attr("class","popup-header").text(n.popupTextAccessor(t));var s=a.selectAll(".popup-item").data(t).enter().append("div").attr("class","popup-item");s.append("div").attr("class","popup-legend").style("background-color",(function(t){return n.getColor(t.datum,t.i)})),n.series().keys()&&s.append("div").attr("class","popup-item-key").text((function(t){return n.colorDomain()[t.datum.idx]})),s.append("div").attr("class","popup-item-value").text((function(t){return n.measureValue(t.datum.y)})),function(t,e){n.popup().attr("style",(function(){return"transform:translate("+t+"px,"+e+"px)"})).select(".chart-popup-box").classed("align-left-center",!0).classed("align-right-center",(function(){return t+(o.default.select(this).node().getBoundingClientRect().width+32)>n.width()}))}(e,r),i.classed("js-showPopup",!0)}(u.reverse(),i,a):_()}(e,this)})))},n.fadeDeselectedArea=function(){var t=n.chartBodyG().selectAll("rect.bar"),e=n.brush().extent();if(n.isOrdinal())n.hasFilter()?(t.classed(r.constants.SELECTED_CLASS,(function(t){return n.hasFilter(t.x)})),t.classed(r.constants.DESELECTED_CLASS,(function(t){return!n.hasFilter(t.x)}))):(t.classed(r.constants.SELECTED_CLASS,!1),t.classed(r.constants.DESELECTED_CLASS,!1));else if(n.brushIsEmpty(e))t.classed(r.constants.DESELECTED_CLASS,!1);else{var i=e[0],o=e[1];t.classed(r.constants.DESELECTED_CLASS,(function(t){return t.x<i||t.x>=o}))}},n.centerBar=function(t){return arguments.length?(f=t,n):f},(0,r.override)(n,"onClick",(function(t){n._onClick(t.data)})),n.barPadding=function(t){return arguments.length?(n._rangeBandPadding(t),c=void 0,n):n._rangeBandPadding()},n._useOuterPadding=function(){return void 0===c},n.outerPadding=n._outerRangeBandPadding,n.gap=function(t){return arguments.length?(c=t,n):c},n.extendBrush=function(){var t=n.brush().extent();return!n.round()||f&&!p||(t[0]=t.map(n.round())[0],t[1]=t.map(n.round())[1],n.chartBodyG().select(".brush").call(n.brush().extent(t))),t},n.alwaysUseRounding=function(t){return arguments.length?(p=t,n):p},n.legendHighlight=function(t){n.isLegendableHidden(t)||n.g().selectAll("rect.bar").classed("highlight",v(t.color)).classed("fadeout",v(t.color,!0))},n.legendReset=function(){n.g().selectAll("rect.bar").classed("highlight",!1).classed("fadeout",!1)},(0,r.override)(n,"xAxisMax",(function(){var t=this._xAxisMax();return"resolution"in n.xUnits()&&(t+=n.xUnits().resolution),t})),n.getTimeBinSize=function(t){return t.extract&&"year"!==t.timeBin?(e=t.timeBin,h[e]):Math.ceil((n.xAxisMax()-n.xAxisMin())/function(t){return 1e3*d[t]}(t.timeBin));var e},n.renderLabel(!1),(n=(0,l.default)(n)).destroyChart=function(){(0,r.deregisterChart)(n,n.chartGroup()),n.on("filtered",null),n.filterAll(),n.resetSvg(),n.root().attr("style","").attr("class","").html(""),n._doRender=function(){return n}},n.anchor(t,e)};var r=n(791),i=n(5209),o=c(n(5680)),a=c(n(9825)),s=c(n(2508)),u=c(n(1007)),l=c(n(409));function c(t){return t&&t.__esModule?t:{default:t}}var d={century:31536e5,decade:31536e4,year:31536e3,quarter:10368e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60,second:1,millisecond:.001},h={day:31,isodom:31,isodow:7,month:12,quarter:4,hour:24,minute:60}},7696:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=(0,i.default)({}),s=(1.5,function(t){var e=t.quartiles[0],n=t.quartiles[2],r=1.5*(n-e),i=-1,o=t.length;do{++i}while(t[i]<e-r);do{--o}while(t[o]>n+r);return[i,o]}),u=o.default.box(),l=null,c=function(t,e){return n.isOrdinal()?n.x().rangeBand():t/(1+n.boxPadding())/e};n.yAxisPadding(12),n.x(o.default.scale.ordinal()),n.xUnits(r.units.ordinal),n.data((function(t){return t.all().map((function(t){return t.map=function(e){return e.call(t,t)},t})).filter((function(t){return 0!==n.valueAccessor()(t).length}))})),n.boxPadding=n._rangeBandPadding,n.boxPadding(.8),n.outerPadding=n._outerRangeBandPadding,n.outerPadding(.5),n.boxWidth=function(t){return arguments.length?(c=o.default.functor(t),n):c};var d=function(t,e){return"translate("+n.x()(n.keyAccessor()(t,e))+", 0)"};return n._preprocessData=function(){n.elasticX()&&n.x().domain([])},n.plotData=function(){var t=c(n.effectiveWidth(),n.xUnitCount());u.whiskers(s).width(t).height(n.effectiveHeight()).value(n.valueAccessor()).domain(n.y().domain()).duration(n.transitionDuration()).tickFormat(l);var e=n.chartBodyG().selectAll("g.box").data(n.data(),(function(t){return t.key}));!function(t){t.enter().append("g").attr("class","box").attr("transform",d).call(u).on("click",(function(t){n.filter(t.key),n.redrawGroup()}))}(e),function(t){(0,r.transition)(t,n.transitionDuration()).attr("transform",d).call(u).each((function(){o.default.select(this).select("rect.box").attr("fill",n.getColor)}))}(e),function(t){t.exit().remove().call(u)}(e),n.fadeDeselectedArea()},n.fadeDeselectedArea=function(){n.hasFilter()?n.g().selectAll("g.box").each((function(t){n.isSelectedNode(t)?n.highlightSelected(this):n.fadeDeselected(this)})):n.g().selectAll("g.box").each((function(){n.resetHighlight(this)}))},n.isSelectedNode=function(t){return n.hasFilter(t.key)},n.yAxisMin=function(){var t=o.default.min(n.data(),(function(t){return o.default.min(n.valueAccessor()(t))}));return a.utils.subtract(t,n.yAxisPadding())},n.yAxisMax=function(){var t=o.default.max(n.data(),(function(t){return o.default.max(n.valueAccessor()(t))}));return a.utils.add(t,n.yAxisPadding())},n.tickFormat=function(t){return arguments.length?(l=t,n):l},n.anchor(t,e)};var r=n(791),i=s(n(1007)),o=s(n(5680)),a=n(5209);function s(t){return t&&t.__esModule?t:{default:t}}},526:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=(0,i.default)((0,o.default)((0,a.default)({}))),l=[],c=null,d=!1,h=!1,f=!1;n.transitionDuration(750);var p=function(t){return"translate("+m(t)+","+_(t)+")"};function m(t){var e=n.x()(n.keyAccessor()(t));return isNaN(e)&&(e=0),e}function _(t){var e=n.y()(n.valueAccessor()(t));return isNaN(e)&&(e=0),e}return n.setPopupHeader=function(t){return arguments.length?(l=t,n):l},n.measureValue=function(t,e,r){if("measure"===r){var i=n.valueFormatter();return i&&i(t,e)||s.utils.formatValue(t)}s.utils.formatValue(t)},n.hideOverlappedLabels=function(){var t=n.svg().selectAll(".node");t[0].reverse(),t.classed("hide-label",(function(t){return n.bubbleR(t)<n.minRadiusWithLabel()})).each((function(e,i){i>0?e.radius:n.bubbleR(e);var o=i>0?e.xPixel:m(e),a=i>0?e.yPixel:_(e),s=e.key0;if(!r.default.select(this).classed("hide-label"))for(var u=i+1;u<t[0].length;u++){var l=r.default.select(t[0][u]),c=(e=l.datum()).xPixel=m(e),d=e.yPixel=_(e),h=e.radius=n.bubbleR(e),f=e.key0;if(!(Math.abs(a-d)>10||h<n.minRadiusWithLabel()||l.classed("hide-label"))){var p=o-5*String(s).length/2,y=o+5*String(s).length/2,v=c-5*String(f).length/2,g=c+5*String(f).length/2;(p>=v&&p<=g||y>=v&&y<=g||p<=v&&y>=g)&&l.classed("hide-label",!0)}}}))},n.showPopup=function(t,e){n.svg().select(".mouse-out-detect").empty()&&n.svg().insert("rect",":first-child").attr("class","mouse-out-detect").attr({width:n.width(),height:n.height()}).on("mousemove",n.hidePopup),c=t;var i=n.popup(),o=i.select(".chart-popup-content").html("");o.append("div").attr("class","popup-bridge").style("width",2*n.bubbleR(t)+"px").style("height",n.bubbleR(t)+24+"px").style("border-radius","0 0 "+n.bubbleR(t)+"px "+n.bubbleR(t)+"px").on("click",(function(){n.onClick(t)})).append("div").attr("class","bridge-hitbox");var a=o.append("div").attr("class","popup-table-wrap").on("mouseleave",n.hidePopup).append("table").attr("class","popup-table");a.append("tr").selectAll("th").data(l).enter().append("th").append("div").attr("class","ellipse-text").text((function(t){return t.label})).append("div").attr("class","full-text").text((function(t){return t.label})).on("mouseenter",(function(){r.default.select(this).style("transform",(function(){var t=r.default.select(this),e=t.node().getBoundingClientRect().width,n=t.node().parentNode.getBoundingClientRect().width;if(e<n)return t.classed("scroll-text",!1),"none";var i=e-n;return t.style("transition-duration",.05*i+"s").classed("scroll-text",!0).on("webkitTransitionEnd",(function(){setTimeout((function(){t.classed("scroll-text",!1).style("transform","translateX(0)")}),500),setTimeout((function(){t.style("transform","translateX("+-i+"px)").classed("scroll-text",!0)}),1e3)})),"translateX("+-i+"px)"}))})).on("mouseleave",(function(){r.default.select(this).classed("scroll-text",!1).style("transform","translateX(0)")}));var s=[t],u=n.svg().selectAll(".node"),d=!1;u[0].reverse(),u.each((function(e,n){var r,i,o;t!==e?d&&(r=t,i=e,o=Math.sqrt((r.xPixel-i.xPixel)*(r.xPixel-i.xPixel)+(r.yPixel-i.yPixel)*(r.yPixel-i.yPixel)),r.radius+8>=o)&&s.push(e):d=!0})),a.selectAll(".popup-row-item").data(s).enter().append("tr").html((function(t){return function(t){for(var e='\n            <td>\n                <div class="table-dim">\n                    <div class="table-legend" style="background:'+n.getColor(t)+'"></div>\n                    <div class="table-dim-val">'+n.label()(t)+"</div>\n                </div>\n            </td>\n        ",r=1;r<l.length;r++)if(l[r].alias){var i=l[r];e=e+"<td>"+n.measureValue(t[i.alias],i.label,i.type)+"</td>"}return e}(t)})).on("click",(function(t){n.onClick(t)})).attr("class","popup-row-item"),n.updatePopup(),i.classed("js-showPopup popup-scrollable delay-pointer scatter-plot-popup",!0),n.root().node().parentNode.parentNode.style.zIndex=1,setTimeout((function(){i.classed("delay-pointer",!1)}),250),function(t,e){var i=m(t)+n.margins().left,o=_(t)+n.margins().top,a=n.popup().style("transform",(function(){var t=r.default.select(this).select(".chart-popup-box").node().getBoundingClientRect().width/2,e=i-t<0?t-i-16:i+t>n.width()?n.width()-(i+t)+16:0;return r.default.select(this).select(".popup-bridge").style("left",(function(){return 0!==e?t-e+"px":"50%"})),"translate("+(i+e)+"px,"+o+"px)"}));a.select(".chart-popup-box").classed("align-center",!0).classed("popdown",(function(){return a.node().getBoundingClientRect().top-76<r.default.select(this).node().getBoundingClientRect().height})).select(".popup-table-wrap").style("overflow-y",(function(){return a.select(".popup-table").node().getBoundingClientRect().height>160?"scroll":"hidden"}))}(t)},n.updatePopup=function(){n.hasFilter()?n.popup().selectAll(".popup-row-item").each((function(t){r.default.select(this).classed("deselected",!n.isSelectedNode(t)).classed("selected",n.isSelectedNode(t))})):n.popup().selectAll(".popup-row-item").classed("deselected",!1).classed("selected",!1)},n.hidePopup=function(){n.popup().classed("js-showPopup",!1),n.root().node().parentNode.parentNode.style.zIndex="auto",r.default.selectAll(".node-hover").classed("node-hover",!1),c=null},n.elasticRadius=function(t){return arguments.length?(d=t,n):d},n.hasSizeMeasure=function(t){return arguments.length?(f=t,n):f},n.sortBubbleSize=function(t){return arguments.length?(h=t,n):h},n.plotData=function(){if(d&&n.r().domain([n.rMin(),n.rMax()]),f){var t=Math.max(2,n.xAxisLength()*n.minBubbleRelativeSize());n.r().range([t,n.xAxisLength()*n.maxBubbleRelativeSize()])}else n.r().range([n.MIN_RADIUS,n.MIN_RADIUS]);var e=n.data();if(h){var i=n.radiusValueAccessor();e.sort((function(t,e){return r.default.descending(i(t),i(e))}))}var o=n.chartBodyG().selectAll("g."+n.BUBBLE_NODE_CLASS).data(e);h&&o.order(),function(t){var e=void 0;(e=t.enter().append("g")).append("circle").attr("class",(function(t,e){return n.BUBBLE_CLASS+" _"+e})).on("click",n.onClick).attr("fill",n.getColor).attr("r",0);var i=n.debounce((function(t,e,i){r.default.select(i).classed("node-hover",!0),n.showPopup(t,e)}),250);e.attr("class",n.BUBBLE_NODE_CLASS).attr("transform",p).on("mouseover",(function(t,e){JSON.stringify(c)!==JSON.stringify(t)&&(i(t,e,this),n.hidePopup())})),(0,u.transition)(t,n.transitionDuration()).selectAll("circle."+n.BUBBLE_CLASS).attr("r",(function(t){return n.bubbleR(t)})).attr("opacity",(function(t){return n.bubbleR(t)>0?1:0})),n._doRenderLabel(e),n.prepareLockAxis("x")}(o),function(t){(0,u.transition)(t,n.transitionDuration()).attr("transform",p).select("circle."+n.BUBBLE_CLASS).attr("fill",n.getColor).attr("r",(function(t){return n.bubbleR(t)})).attr("opacity",(function(t){return n.bubbleR(t)>0?1:0})),n.doUpdateLabels(t),n.doUpdateTitles(t)}(o),function(t){t.exit().remove()}(o),n.fadeDeselectedArea()},n.renderBrush=function(){},n.redrawBrush=function(){n.fadeDeselectedArea()},n.anchor(t,e)};var r=l(n(5680)),i=l(n(7074)),o=l(n(6733)),a=l(n(1007)),s=n(5209),u=n(791);function l(t){return t&&t.__esModule?t:{default:t}}},5514:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=(0,a.default)((0,s.default)((0,o.default)({}))),c=void 0,d=[],h=null,f=null,p=!1;function m(t){var e=[0,0];return e[0]=111319.49077777778*t[0],e[1]=6378136.999112157*Math.log(Math.tan(.00872664625997*(90+t[1]))),e}function _(){return(c=n.select("g.bubble-overlay")).empty()&&(c=n.svg().append("g").attr("class","bubble-overlay")),c}return n.MIN_RADIUS=2,n.MAX_RADIUS=10,n.scaleRadius=!1,n.colorCountDictionary={},n.clickCallback=function(t){return arguments.length?(f=t,n):f},n.transitionDuration(0),n.radiusValueAccessor((function(t){return t.value})),n.r(u.default.scale.sqrt()),n.bounds=null,n.savedData=[],n.onColorCountUpdate=function(t){return arguments.length?(h=t,n):h},n.sampling=function(t){return arguments.length?(t&&!p?(0,r.incrementSampledCount)():!t&&p&&(0,r.decrementSampledCount)(),0==(p=t)&&n.dimension().samplingRatio(null),n):p},n.setSample=function(){if(p){var t=n.dimension().getCrossfilterId(),e=(0,i.lastFilteredSize)(t);void 0===e?n.dimension().samplingRatio(null):n.dimension().samplingRatio(Math.min(n.cap()/e,1))}},n.onClick=function(t){if(null!=n.bounds){n.bounds[1][0],n.bounds[0][0],n.width(),n.bounds[1][1],n.bounds[0][1],n.height();var e=m([t.x,t.y]);e[0],n.bounds[0][0],n.height(),e[1],n.bounds[0][1],null!=f&&f(t)}},n.point=function(t,e,r){return d.push({name:t,x:e,y:r}),n},n.setBounds=function(t){n.bounds=[[0,0],[0,0]],n.bounds[0]=m(t[0]),n.bounds[1]=m(t[1])},n._doRender=function(){return(c=_()).selectAll("g").remove(),n.plotData(),n.fadeDeselectedArea(),n},n.remapPoints=function(){if(null!=n.bounds){for(var t=1/(n.bounds[1][0]-n.bounds[0][0])*n.width(),e=1/(n.bounds[1][1]-n.bounds[0][1])*n.height(),r=n.savedData.length,i=0;i<r;i++)n.savedData[i].xPixel=(n.savedData[i].xCoord-n.bounds[0][0])*t,n.savedData[i].yPixel=n.height()-(n.savedData[i].yCoord-n.bounds[0][1])*e;c&&c.selectAll("g.node").data(n.savedData,(function(t){return t.key0})).attr("transform",(function(t){return"translate("+t.xPixel+","+t.yPixel+")"}))}},n.plotData=function(){n.colorCountDictionary={},n.savedData=n.data(),n.savedData.forEach((function(t){t.color in n.colorCountDictionary?n.colorCountDictionary[t.color]++:n.colorCountDictionary[t.color]=1,t.key=n.keyAccessor()(t)})),null!=h&&h(n.colorCountDictionary),n.savedData;new Date;!function(t){if(null!=n.bounds)for(var e=1/(n.bounds[1][0]-n.bounds[0][0])*n.width(),r=1/(n.bounds[1][1]-n.bounds[0][1])*n.height(),i=t.length,o=0;o<i;o++){var a=m([t[o].x,t[o].y]),s=(a[0]-n.bounds[0][0])*e,u=n.height()-(a[1]-n.bounds[0][1])*r;t[o].xPixel=s,t[o].yPixel=u,t[o].xCoord=a[0],t[o].yCoord=a[1]}}(n.savedData),n.scaleRadius&&(n.r().domain([n.rMin(),n.rMax()]),n.r().range([n.MIN_RADIUS,n.MAX_RADIUS])),c||_();var t=c.selectAll("g.node").data(n.savedData,(function(t){return t.key}));t.enter().append("g").attr("class",(function(t){return"node "+l.utils.nameToId(t.key)})).attr("transform",(function(t){return"translate("+t.xPixel+","+t.yPixel+")"})).append("circle").attr("class",n.BUBBLE_CLASS).attr("r",(function(t){return n.scaleRadius?n.bubbleR(t):n.radiusValueAccessor()(t)})).attr("fill",n.getColor).on("click",n.onClick),t.attr("transform",(function(t){return"translate("+t.xPixel+","+t.yPixel+")"})).attr("r",(function(t){return n.scaleRadius?n.bubbleR(t):n.radiusValueAccessor()(t)})),t.exit().remove(),new Date},n._doRedraw=function(){return n.plotData(),n.fadeDeselectedArea(),n},n.debug=function(t){if(t){var e=n.select("g."+r.constants.DEBUG_GROUP_CLASS);e.empty()&&(e=n.svg().append("g").attr("class",r.constants.DEBUG_GROUP_CLASS));var i=e.append("text").attr("x",10).attr("y",20);e.append("rect").attr("width",n.width()).attr("height",n.height()).on("mousemove",(function(){var t=u.default.mouse(e.node()),n=t[0]+", "+t[1];i.text(n)}))}else n.selectAll(".debug").remove();return n},n.anchor(t,e),n};var r=n(791),i=n(6253),o=c(n(7831)),a=c(n(7074)),s=c(n(6733)),u=c(n(5680)),l=n(5209);function c(t){return t&&t.__esModule?t:{default:t}}},2209:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=void 0,u=(0,i.default)((0,s.default)((0,a.default)((0,r.default)({})))),l=void 0,c=void 0,d=void 0,h=void 0,f=!1;function p(t){h=t;var e,r=n.attr("transform","translate("+c.size()[0]/2+","+c.size()[1]/2+")").selectAll("text").data(h);r.enter().append("text"),r.exit().remove(),r.style("font-size",(function(t){return t.size+"px"})).style("font-family","Impact").style("fill",u.getColor).style("cursor","pointer").attr("text-anchor","middle").attr("transform",(function(t){return"translate("+[t.x,t.y]+")rotate("+t.rotate+")"})).text((function(t){return t.key0})).on("click",m).classed("deselected",(function(t){return!!u.hasFilter()&&!_(t)})).classed("selected",(function(t){return!!u.hasFilter()&&_(t)})),e=r,u.renderTitle()&&(e.selectAll("title").remove(),e.append("title").text(u.title()))}function m(t){f=!0,u.onClick(t)}function _(t){return u.hasFilter(u.cappedKeyAccessor(t))}return u.setNoRelayout=function(t){f=t},u.title((function(t){return u.cappedKeyAccessor(t)+": "+u.cappedValueAccessor(t)})),u.label(u.cappedKeyAccessor),u._doRender=function(){var t;return u.resetSvg(),n=u.svg().append("g").attr("transform","translate("+u.margins().left+","+u.margins().top+")"),f?(p(h),f=!1):(l=u.data(),t=o.default.extent(l,u.cappedValueAccessor),d=o.default.scale.log().domain(t).range([10,Math.max(14,Math.min(u.effectiveWidth(),u.effectiveHeight())/10)]),(c=o.default.layout.cloud().size([u.width(),u.height()]).words(l.map((function(t){return{key0:t.key0,value:t.value,color:t.color,text:t.key0,size:d(u.valueAccessor()(t))}}))).rotate((function(){return 0})).font("Impact").fontSize((function(t){return t.size})).on("end",p)).start()),u},u._doRedraw=function(){return u._doRender()},u.anchor(t,e)};var r=u(n(7831)),i=u(n(6733)),o=u(n(5680)),a=u(n(7399)),s=u(n(4880));function u(t){return t&&t.__esModule?t:{default:t}}},2861:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=(0,r.default)({}),s=[],u={},l=!1,c=!0,d=!1,h=i.default.svg.axis(),f=0,p=12,m=void 0,_=!1;function y(t,e){t._generateG(n.g()),t.g().attr("class","sub _"+e)}function v(){return s.filter((function(t){return!t.useRightYAxis()}))}function g(){return s.filter((function(t){return t.useRightYAxis()}))}function x(t){return t.map((function(t){return t.yAxisMin()}))}function b(t){return t.map((function(t){return t.yAxisMax()}))}return n._mandatoryAttributes([]),n.transitionDuration(500),(0,o.override)(n,"_generateG",(function(){for(var t=this.__generateG(),e=0;e<s.length;++e){var r=s[e];y(r,e),r.dimension()||r.dimension(n.dimension()),r.group()||r.group(n.group()),r.chartGroup(n.chartGroup()),r.svg(n.svg()),r.xUnits(n.xUnits()),r.transitionDuration(n.transitionDuration()),r.brushOn(n.brushOn()),r.renderTitle(n.renderTitle()),r.elasticX(n.elasticX())}return t})),n._brushing=function(){for(var t=n.extendBrush(),e=n.brushIsEmpty(t),r=0;r<s.length;++r)s[r].filterAll(),e||s[r].filter(t)},n._prepareYAxis=function(){var t=0!==v().length,e=0!==g().length,r=function(t,e){var r=void 0,o=void 0,s=void 0,u=void 0;if(t&&(r=i.default.min(x(v())),o=a.utils.add(i.default.max(b(v())),n.yAxisPadding())),e&&(s=i.default.min(x(g())),u=a.utils.add(i.default.max(b(g())),n.yAxisPadding())),n.alignYAxes()&&t&&e&&(r<0||s<0)){var l=void 0,c=void 0;r<0&&(l=o/r),s<0&&(c=u/s),r<0&&s<0?l<c?u=s*l:o=r*c:r<0?s=u/l:r=o/(u/s)}return{lyAxisMin:r,lyAxisMax:o,ryAxisMin:s,ryAxisMax:u}}(t,e);t&&function(t){(void 0===n.y()||n.elasticY()||n.resizing())&&(void 0===n.y()&&n.y(i.default.scale.linear()),n.y().domain([t.lyAxisMin,t.lyAxisMax]).rangeRound([n.yAxisHeight(),0])),n.y().range([n.yAxisHeight(),0]),n.yAxis(n.yAxis().scale(n.y())),n.yAxis().orient("left")}(r),e&&function(t){(void 0===n.rightY()||n.elasticY()||n.resizing())&&(void 0===n.rightY()&&n.rightY(i.default.scale.linear()),n.rightY().domain([t.ryAxisMin,t.ryAxisMax]).rangeRound([n.yAxisHeight(),0])),n.rightY().range([n.yAxisHeight(),0]),n.rightYAxis(n.rightYAxis().scale(n.rightY())),n.rightYAxis().orient("right")}(r),v().length>0&&!_?n._renderHorizontalGridLinesForAxis(n.g(),n.y(),n.yAxis()):g().length>0&&n._renderHorizontalGridLinesForAxis(n.g(),m,h)},n.renderYAxis=function(){0!==v().length&&(n.renderYAxisAt("y",n.yAxis(),n.margins().left),n.renderYAxisLabel("y",n.yAxisLabel(),-90)),0!==g().length&&(n.renderYAxisAt("yr",n.rightYAxis(),n.width()-n.margins().right),n.renderYAxisLabel("yr",n.rightYAxisLabel(),90,n.width()-p))},n.plotData=function(){for(var t=0;t<s.length;++t){var e=s[t];e.g()||y(e,t),l&&e.colors(n.colors()),e.x(n.x()),e.xAxis(n.xAxis()),e.useRightYAxis()?(e.y(n.rightY()),e.yAxis(n.rightYAxis())):(e.y(n.y()),e.yAxis(n.yAxis())),e.plotData(),e._activateRenderlets()}},n.useRightAxisGridLines=function(t){return arguments?(_=t,n):_},n.childOptions=function(t){return arguments.length?(u=t,s.forEach((function(t){t.options(u)})),n):u},n.fadeDeselectedArea=function(){for(var t=0;t<s.length;++t){var e=s[t];e.brush(n.brush()),e.fadeDeselectedArea()}},n.rightYAxisLabel=function(t,e){return arguments.length?(f=t,n.margins().right-=p,p=void 0===e?12:e,n.margins().right+=p,n):f},n.compose=function(t){return(s=t).forEach((function(t){t.height(n.height()),t.width(n.width()),t.margins(n.margins()),c&&t.title(n.title()),t.options(u)})),n},n.children=function(){return s},n.shareColors=function(t){return arguments.length?(l=t,n):l},n.shareTitle=function(t){return arguments.length?(c=t,n):c},n.rightY=function(t){return arguments.length?(m=t,n.rescale(),n):m},n.alignYAxes=function(t){return arguments.length?(d=t,n.rescale(),n):d},delete n.yAxisMin,delete n.yAxisMax,(0,o.override)(n,"xAxisMin",(function(){return a.utils.subtract(i.default.min(s.map((function(t){return t.xAxisMin()}))),n.xAxisPadding())})),(0,o.override)(n,"xAxisMax",(function(){return a.utils.add(i.default.max(s.map((function(t){return t.xAxisMax()}))),n.xAxisPadding())})),n.legendables=function(){return s.reduce((function(t,e){return l&&e.colors(n.colors()),t.push.apply(t,e.legendables()),t}),[])},n.legendHighlight=function(t){for(var e=0;e<s.length;++e)s[e].legendHighlight(t)},n.legendReset=function(t){for(var e=0;e<s.length;++e)s[e].legendReset(t)},n.legendToggle=function(){console.log("composite should not be getting legendToggle itself")},n.rightYAxis=function(t){return arguments.length?(h=t,n):h},n.anchor(t,e)};var r=s(n(1007)),i=s(n(5680)),o=n(791),a=n(5209);function s(t){return t&&t.__esModule?t:{default:t}}},445:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=(0,a.default)({}),s=r.default.format(","),u="rows",l=null;(0,i.override)(n,"group",(function(t,e){return arguments.length?((0,o.groupAll)(t),n._group(t,e)):n._group()}));var c=function(){return null};return n.isCountChart=function(){return!0},n.dataFetchRequestCallback(c),n.dataFetchSuccessfulCallback(c),n.formatNumber=function(t){return arguments.length?(s=t,n):s},n.countLabel=function(t){return arguments.length?(u=t,n):u},n.tot=function(t){return arguments.length?(l=t,n):l},n.getTotalRecordsAsync=function(){return n.tot()?Promise.resolve():n.dimension().sizeAsync().then((function(t){return n.tot(t),Promise.resolve()}))},n.setDataAsync((function(t,e){return n.getTotalRecordsAsync().then((function(){var e=t.getCrossfilterId(),n=(0,o.lastFilteredSize)(e);return void 0!==n?Promise.resolve(n):t.valueAsync().then((function(t){return(0,o.setLastFilteredSize)(e,t),t}))})).then((function(t){e(null,t)})).catch((function(t){e(t)}))})),n._doRender=function(t){var e=s(n.tot()),r=s(t),i=n.root().style("width","auto").style("height","auto").html("").append("div").attr("class","count-widget");return i.append("span").attr("class","count-selected").classed("not-filtered",r===e).text("-0"===r?0:r),i.append("span").classed("not-filtered",r===e).text(" of "),i.append("span").attr("class","count-all").text(e),i.append("span").attr("class","count-label").text(" "+u),n},n._doRedraw=function(t){return n._doRender(t)},n.anchor(t,e)};var r=s(n(5680)),i=n(791),o=n(6253),a=s(n(7831));function s(t){return t&&t.__esModule?t:{default:t}}},6761:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=i.default.format(",d"),s=(0,r.default)({}),u={some:"",all:""};return s.isCountChart=function(){return!0},(0,a.override)(s,"group",(function(t,e){return arguments.length?((0,o.groupAll)(t),s._group(t,e)):s._group()})),s.html=function(t){return arguments.length?(t.all&&(u.all=t.all),t.some&&(u.some=t.some),s):u},s.formatNumber=function(t){return arguments.length?(n=t,s):n},s.setDataAsync((function(t,e){return t.valueAsync().then((function(t){e(null,t)})).catch((function(t){e(t)}))})),s._doRender=function(){var t=s.dimension().size();s.root().style("width","auto").style("height","auto");var e;e=null!=s.dataCache?s.dataCache:s.group().value();var r=n(t),i=n(e);return t===e&&""!==u.all?s.root().html(u.all.replace("%total-count",r).replace("%filter-count",i)):""!==u.some?s.root().html(u.some.replace("%total-count",r).replace("%filter-count",i)):(s.selectAll(".total-count").text(r),s.selectAll(".filter-count").classed("dark-text",r!==i).text(i)),s},s._doRedraw=function(){return s._doRender()},s.anchor(t,e)};var r=s(n(7831)),i=s(n(5680)),o=n(6253),a=n(791);function s(t){return t&&t.__esModule?t:{default:t}}},3926:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=(0,i.default)({}),o=999,a=function(t){return"you need to provide an html() handling param:  "+JSON.stringify(t)},s=function(t){return t},u=r.default.ascending,l=0,c=void 0,d=function(t){return"<div class='dc-grid-group'><h1 class='dc-grid-label'>"+n.keyAccessor()(t)+"</h1></div>"};return n._doRender=function(){var t;return n.selectAll("div.dc-grid-top").remove(),(t=function(){var t,e=n.root().selectAll("div.dc-grid-top").data((t=n.dimension().top(o),r.default.nest().key(n.group()).sortKeys(u).entries(t.sort((function(t,e){return u(s(t),s(e))})).slice(l,c))),(function(t){return n.keyAccessor()(t)})),i=e.enter().append("div").attr("class","dc-grid-top");return d&&i.html((function(t){return d(t)})),e.exit().remove(),i}().order().selectAll("div.dc-grid-item").data((function(t){return t.values}))).enter().append("div").attr("class","dc-grid-item").html((function(t){return a(t)})),t.exit().remove(),n},n._doRedraw=function(){return n._doRender()},n.beginSlice=function(t){return arguments.length?(l=t,n):l},n.endSlice=function(t){return arguments.length?(c=t,n):c},n.size=function(t){return arguments.length?(o=t,n):o},n.html=function(t){return arguments.length?(a=t,n):a},n.htmlGroup=function(t){return arguments.length?(d=t,n):d},n.sortBy=function(t){return arguments.length?(s=t,n):s},n.order=function(t){return arguments.length?(u=t,n):u},n.anchor(t,e)};var r=o(n(5680)),i=o(n(7831));function o(t){return t&&t.__esModule?t:{default:t}}},3243:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t,e,n,d){var h=void 0!==e&&e,f=t.attributes.id.value,p=null;(p=h?(0,a.default)((0,i.default)((0,r.default)({})),f,d):(0,i.default)((0,r.default)({}))).colorAccessor((function(t){return t||0})),p.accent=function(t){var e=M(0).name;p.selectAll("g."+e).each((function(e){w(0,e)==t&&p.accentSelected(this)}))},p.unAccent=function(t){var e=M(0).name;p.selectAll("g."+e).each((function(e){w(0,e)==t&&p.unAccentSelected(this)}))},p.measureValue=function(t){var e=p.valueFormatter();return e&&e(t)||u.utils.formatValue(t)};var m=!1,_=o.default.geo.path();h&&_.projection(p.mapProject.bind(p)),p._projectionFlag;var y=[];p.transitionDuration(0),p.fitBounds=function(){if(M(0)){var t=M(0).bounds,e=p.convertBounds(t);p.map().fitBounds(e,{animate:!1},{skipRedraw:!0})}};var v=!1;function g(t,e){var n=function(t){for(var e={},n=t,r=0;r<n.length;++r)e[p.keyAccessor()(n[r])]=p.valueAccessor()(n[r]);return e}(e);(function(t){return M(t).keyAccessor})(t)&&function(t,e,n){var r=o.default.behavior.drag().on("dragstart",(function(){o.default.event.sourceEvent.preventDefault()})),i=t.select("path").attr("fill",(function(){return o.default.select(this).attr("fill")||"#e2e2e2"})).on("mouseenter",(function(t,e){!function(t,e,n){var r=p.popup(),i=r.select(".chart-popup-content").html("");i.append("div").attr("class","popup-legend").style("background-color",p.getColor(n[M(0).keyAccessor(t)],e)),i.append("div").attr("class","popup-value").html((function(){var e=w(0,t);return'<div class="popup-value-dim">'+e+'</div><div class="popup-value-measure">'+(isNaN(n[e])?"N/A":p.measureValue(n[e]))+"</div>"})),r.classed("js-showPopup",!0)}(t,e,n)})).on("mousemove",k).on("mouseleave",L).call(r).on("click",(function(t){return p.onClick(t,e)}));(0,s.transition)(i,p.transitionDuration()).attr("fill",(function(t,r){var i=n[M(e).keyAccessor(t)];return p.getColor(i,r)}))}(function(t){return p.svg().selectAll(function(t){return"g.layer"+t+" g."+M(t).name}(t)).classed("selected",(function(e){return x(t,e)})).classed("deselected",(function(e){return b(t,e)})).attr("class",(function(e){var n=M(t).name+" "+u.utils.nameToId(M(t).keyAccessor(e));return x(t,e)&&(n+=" selected"),b(t,e)&&(n+=" deselected"),n}))}(t),t,n)}function x(t,e){return p.hasFilter()&&p.hasFilter(w(t,e))^p.filtersInverse()}function b(t,e){return p.hasFilter()&&!x(t,e)}function w(t,e){return M(t).keyAccessor(e)}function M(t){return y[t]}function L(){p.popup().classed("js-showPopup",!1)}function k(){var t,e=(t=p.popupCoordinates(o.default.mouse(this)))[0],n=t[1]-16;p.popup().attr("style",(function(){return"transform:translate("+e+"px,"+n+"px)"})).select(".chart-popup-box").classed("align-right",(function(){return e+o.default.select(this).node().getBoundingClientRect().width>p.width()}))}return p.shiftToZoom=function(t){return void 0!==t&&(v=t),v},p.destroyChart=function(){this.map().remove()},p.getClosestResult=function(){},p._doRender=function(t){p.resetSvg();for(var e=0;e<y.length;++e){var n=p.svg().append("g").attr("class","layer"+e),r=M(e).data.map((function(t){return(0,c.default)(t,[p.lonMin(),p.latMin(),p.lonMax(),p.latMax()])})),i=n.selectAll("g."+M(e).name).data(r).enter().append("g").attr("class",M(e).name);i.append("path").attr("fill","white").attr("d",_),i.append("title"),g(e,t)}p._projectionFlag=!1,m=!0},p.onClick=function(t,e){var n=M(e).keyAccessor(t);p.handleFilterClick(o.default.event,n)},p._doRedraw=function(t){if(!m)return p._doRender();for(var e=0;e<y.length;++e)g(e,t),p._projectionFlag&&p.svg().selectAll("g."+M(e).name+" path").attr("d",_);p._projectionFlag=!1},p.overlayGeoJson=function(t,e,n){for(var r=0;r<y.length;++r)if(y[r].name===e)return y[r].data=t,y[r].keyAccessor=n,p;var i,o;return y.push({name:e,data:t,keyAccessor:n}),y[y.length-1].bounds=(i={type:"FeatureCollection",features:M(y.length-1).data},[[(o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}((0,l.default)(i),4))[0],o[1]],[o[2],o[3]]]),p},p.projection=function(t){return h||(_.projection(t),p._projectionFlag=!0),p},p.geoJsons=function(){return y},p.geoPath=function(){return _},p.removeGeoJson=function(t){for(var e=[],n=0;n<y.length;++n){var r=y[n];r.name!==t&&e.push(r)}return y=e,p},p.anchor(t,n)};var r=d(n(7831)),i=d(n(7399)),o=d(n(5680)),a=d(n(6207)),s=n(791),u=n(5209),l=d(n(3292)),c=d(n(6125));function d(t){return t&&t.__esModule?t:{default:t}}},1693:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.heatMapKeyAccessorNoFormat=void 0;var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.heatMapKeyAccessor=m,e.heatMapValueAccesor=y,e.heatMapValueAccesorNoFormat=v,e.heatMapRowsLabel=g,e.heatMapColsLabel=x,e.yAxisDataIsNonNumerical=b,e.xAxisDataIsNonNumerical=function(t){var e=(t||{}).key0;return"number"!=typeof(Array.isArray(e)?e[0]:e)},e.default=function(t,e){var n=6.75,p=void 0,w=void 0,M=void 0,L=c.utils.nullsFirst(c.utils.compareDates(o.default.ascending)),k=c.utils.nullsFirst(c.utils.compareDates(o.default.ascending)),T=o.default.scale.ordinal(),S=o.default.scale.ordinal(),E=n,A=n,D=void 0,C=void 0,P=!1,I={top:null,left:0},O=void 0,R={left:48,bottom:56},Y=void 0,F=void 0,j=(E=n,A=n,(0,a.default)((0,s.default)((0,h.default)({}))));j.isHeatMap=!0,j._mandatoryAttributes(["group"]),j.title(j.colorAccessor());var z=function(t){return t},N=function(t){return t};j.dockedAxesSize=function(t){return arguments.length?(R=t,j):R},j.colsLabel=function(t){return arguments.length?(z=t,j):z},j.rowsLabel=function(t){return arguments.length?(N=t,j):N},j.xAxisLabel=function(t){return arguments.length?(C=t,j):C},j.yAxisLabel=function(t){return arguments.length?(D=t,j):D};var B=function(t){G(0,t)},U=function(t){G(1,t)},H=function(t){var e=[t.key0,t.key1];j.handleFilterClick(o.default.event,e)},V=function(t){return function(){return t.style("opacity",1)}},W=function(t){return function(){return t.style("opacity",null)}};function G(t,e){var n=e instanceof Date?(0,i.formatDataValue)(e):e,r=j.selectAll(".box-group").filter((function(e){return(1===t?j.valueAccessor()(e):j.keyAccessor()(e))===n})),o=r.filter((function(t){return!j.hasFilter([t.key0,t.key1])}));u.events.trigger((function(){o.empty()?r.each((function(t){j.filter([t.key0,t.key1])})):o.each((function(t){j.filter([t.key0,t.key1])})),j.redrawGroup()}))}function q(t,e){var n=j.popup(),r=n.select(".chart-popup-content").html("").classed("popup-list",!0);r.append("div").attr("class","popup-header").html((function(){return z(j.keyAccessor()(t,e))+" x "+N(j.valueAccessor()(t,e))}));var i=r.append("div").attr("class","popup-item");i.append("div").attr("class","popup-legend").style("background-color",j.getColor(t,e)),i.append("div").attr("class","popup-item-value").html((function(){var e=j.valueFormatter();return e&&e(t.color)||c.utils.formatValue(t.color)})),n.classed("js-showPopup",!0)}function X(){j.popup().classed("js-showPopup",!1)}function Z(){var t;t=j.popupCoordinates(o.default.mouse(this));var e=j.root().select(".svg-wrapper").node(),n=t[0]+R.left-e.scrollLeft,r=t[1]+j.margins().top-e.scrollTop;j.popup().attr("style",(function(){return"transform:translate("+n+"px,"+r+"px)"})).select(".chart-popup-box").classed("align-right",(function(){return n+o.default.select(this).node().getBoundingClientRect().width>j.width()}))}j.filter=function(t,e){return arguments.length?j._filter(d.filters.TwoDimensionalFilter(t),e):j._filter()},j.rows=function(t){return arguments.length?(M=t,j):M},j.rowOrdering=function(t){return arguments.length?(k=t,j):k},j.cols=function(t){return arguments.length?(w=t,j):w},j.colOrdering=function(t){return arguments.length?(L=t,j):L},j._doRender=function(){j.resetSvg(),j.margins(r({},j.margins(),{top:16,right:16,bottom:0}));var t=j.svg().append("g");return(p=t.attr("class","heatmap").attr("transform","translate(0, 16)")).append("g").attr("class","box-wrapper"),j._generateG(t,p),P=!0,O=j.root().append("div").attr("class","docked-axis-wrapper"),j.x()&&j._prepareXAxis(j.g(),!0),j.y()&&j._prepareYAxis(j.g()),j._doRedraw()},j._doRedraw=function(){if(!P)return j._doRender();var t=j.data(),e=j.rows()||t.map(j.valueAccessorNoFormat()),n=j.cols()||t.map(j.keyAccessorNoFormat());k&&(k=j.shouldSortYAxisDescending(t)?c.utils.nullsLast(o.default.descending):c.utils.nullsFirst(o.default.ascending),e=e.sort(k)),L&&(n=n.sort(L));var r=function(t){return function(e){return"string"==typeof e||!t||e>=t[0]&&e<=t[1]||null===e&&j.showNullDimensions()}};n=n.filter(r(j.x()&&j.x().domain())).map((function(t){return t instanceof Date?(0,i.formatDataValue)(t):t})),e=e.filter(r(j.y()&&j.y().domain())).map((function(t){return t instanceof Date?(0,i.formatDataValue)(t):t})),e=S.domain(e),n=T.domain(n),j.dockedAxesSize(j.getAxisSizes(n.domain(),e.domain()));var a=e.domain().length,s=n.domain().length,u=j.width()-R.left,d=j.height()-R.bottom,h=Math.max((u-j.margins().right)/s,16),f=Math.max((d-j.margins().top)/a,16),m=h*s+j.margins().right,_=f*a+j.margins().top;n.rangeBands([0,h*s]),e.rangeBands([f*a,0]),j.svg().attr("width",m).attr("height",_);var y=j.root().classed("heatmap-scroll",!0).select(".svg-wrapper").style("width",j.width()-R.left+"px").style("height",j.height()-R.bottom+"px").style("left",R.left+"px").on("scroll",(function(){I={top:o.default.select(this).node().scrollTop,left:o.default.select(this).node().scrollLeft},j.root().select(".docked-x-axis").style("left",-I.left+"px"),j.root().select(".docked-y-axis").style("top",-I.top+"px")})).node();y.scrollLeft=I.left,y.scrollTop=null===I.top&&k===o.default.ascending?_:I.top||0;var v=p.select(".box-wrapper").selectAll("g.box-group").data(j.data(),(function(t,e){return j.keyAccessor()(t,e)+"\0"+j.valueAccessor()(t,e)}));v.enter().append("g").attr("class","box-group").append("rect").attr("class","heat-box").attr("fill","white").on("mouseenter",q).on("mousemove",Z).on("mouseleave",X).on("click",j.boxOnClick()),(0,l.transition)(v.select("rect"),j.transitionDuration()).attr("x",(function(t,e){return n(j.keyAccessor()(t,e))})).attr("y",(function(t,n){return e(j.valueAccessor()(t,n))})).attr("rx",E).attr("ry",A).attr("fill",j.getColor).attr("width",h).attr("height",f),v.exit().remove();var g=O.selectAll(".docked-x-axis");g.empty()&&(g=O.append("div").attr("class","docked-x-axis")),g.style("height",R.bottom+"px").html("").selectAll("div.text").data(n.domain()).enter().append("div").attr("class",(function(){return"text "+(R.bottom>52?"rotate-down":"center")})).style("left",(function(t){return n(t)+h/2+R.left+"px"})).on("click",j.xAxisOnClick()).append("span").html(j.colsLabel()).attr("title",(function(t){var e=""+j.colsLabel()(t);return e.match(/null/gi)?"NULL":e}));var x=O.selectAll(".docked-y-axis");x.empty()&&(x=O.append("div").attr("class","docked-y-axis")),x.style("width",R.left+"px").style("left",R.left+"px").html("").selectAll("div.text").data(e.domain()).enter().append("div").attr("class","text").style("top",(function(t){return e(t)+f/2+j.margins().top+"px"})).on("click",j.yAxisOnClick()).html(j.rowsLabel()).attr("title",(function(t){var e=""+j.rowsLabel()(t);return e.match(/null/gi)?"NULL":e}));var b=O.selectAll(".axes-mask");return b.empty()&&(b=O.append("div").attr("class","axes-mask")),b.style("width",R.left+"px").style("height",R.bottom+"px"),j.hasFilter()?j.selectAll("g.box-group").each((function(t){j.isSelectedNode(t)?j.highlightSelected(this):j.fadeDeselected(this)})):j.selectAll("g.box-group").each((function(){j.resetHighlight(this)})),j.renderAxisLabels(),j.x()&&(j._prepareXAxis(j.g(),!0),Y=j.root().selectAll(".axis-lock.type-x .axis-input")),j.y()&&(j._prepareYAxis(j.g()),F=j.root().selectAll(".axis-lock.type-y .axis-input")),g.on("mouseover",V(Y)),g.on("mouseout",W(Y)),x.on("mouseover",V(F)),x.on("mouseout",W(F)),j},j.boxOnClick=function(t){return arguments.length?(H=t,j):H},j.xAxisOnClick=function(t){return arguments.length?(B=t,j):B},j.yAxisOnClick=function(t){return arguments.length?(U=t,j):U},j.xBorderRadius=function(t){return arguments.length?(E=t,j):E},j.renderAxisLabels=function(){var t=j.root(),e=t.selectAll(".y-axis-label");e.empty()&&(e=t.append("div").attr("class","y-axis-label").text(D)),e.style("top",j.effectiveHeight()/2+j.margins().top+"px"),j.prepareLabelEdit("y");var n=t.selectAll(".x-axis-label");n.empty()&&(n=t.append("div").attr("class","x-axis-label").text(C)),n.style("left",j.effectiveWidth()/2+j.margins().left+"px"),j.prepareLabelEdit("x")},j.yBorderRadius=function(t){return arguments.length?(A=t,j):A},j.isSelectedNode=function(t){return j.hasFilter([t.key0,t.key1])^j.filtersInverse()},j.colsMap=new Map,j.rowsMap=new Map,j._axisPadding={left:36,bottom:42};var K=function(t,e){return t.map((function(t){return null===t?"NULL":t})).map((function(t){return e(t)?e(t).toString().length:0})).reduce((function(t,e){return Math.max(t,e)}),null)};j.getAxisSizes=function(t,e){return{left:Math.min(5*K(e,j.rowsLabel()),72)+j._axisPadding.left,bottom:Math.max(Math.min(5*K(t,j.colsLabel()),72)+j._axisPadding.bottom,52)}},j.shouldSortYAxisDescending=function(t){return t&&t.length&&b((0,f.getFirstNonNullDatumForAxis)(t,"y"))},j.keyAccessor(m.bind(j)).valueAccessor(y.bind(j)).colorAccessor((function(t){return t.value})).rowsLabel(g.bind(j)).colsLabel(x.bind(j));var J=_.bind(j);j.keyAccessorNoFormat=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e){return J(e,t)}};var $=v.bind(j);return j.valueAccessorNoFormat=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e){return $(e,t)}},j.anchor(t,e)};var i=n(7038),o=p(n(5680)),a=p(n(7399)),s=p(n(4880)),u=n(7467),l=n(791),c=n(5209),d=n(2496),h=p(n(1007)),f=n(2814);function p(t){return t&&t.__esModule?t:{default:t}}function m(t){var e=t.key0;if(Array.isArray(e)){var n=(0,i.isArrayOfObjects)(e)?e[0].value:e[0],r=n instanceof Date?(0,i.formatDataValue)(n):n;return this.colsMap.set(r,e),r}return e}var _=e.heatMapKeyAccessorNoFormat=function(t){var e=t.key0,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Array.isArray(e)){var r=n&&e[1]?1:0,o=(0,i.isArrayOfObjects)(e)?e[r].value:e[r];return this.colsMap.set(o,e),o}return e};function y(t){var e=t.key1;if(Array.isArray(e)){var n=(0,i.isArrayOfObjects)(e)?e[0].value:e[0],r=n instanceof Date?(0,i.formatDataValue)(n):n;return this.rowsMap.set(r,e),r}return e}function v(t){var e=t.key1,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Array.isArray(e)){var r=n&&e[1]?1:0,o=(0,i.isArrayOfObjects)(e)?e[r].value:e[r];return this.rowsMap.set(o,e),o}return e}function g(t){var e=this.rowsMap.get(t)||t,n=this.dateFormatter();n&&t&&t instanceof Date&&Array.isArray(e)&&e[0]&&(e=e[0].value||e[0]);var r=Array.isArray(e)?e.map((function(t){return t.value})):null;return n&&n(r||e,this.yAxisLabel())||(0,i.formatDataValue)(e)}function x(t){var e=this.colsMap.get(t)||t,n=this.dateFormatter();n&&t&&t instanceof Date&&Array.isArray(e)&&e[0]&&(e=e[0].value||e[0]);var r=Array.isArray(e)?e.map((function(t){return t.value})):null;return n&&n(r||e,this.xAxisLabel())||(0,i.formatDataValue)(e)}function b(t){var e=(t||{}).key1;return"number"!=typeof(Array.isArray(e)?e[0]:e)}},2935:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=1e-6,c=(0,s.default)((0,u.default)((0,o.default)({}))),d=!1,h=5,f=null,p=n,m=n,_="linear",y=.7,v=void 0,g=void 0,x=!0;function b(t,e){return t.name?(t.layer=t.name,c.getColor(t,e)):c.getColor(t,e)}function w(t){return!t||t.indexOf("NaN")>=0?"M0,0":t}function M(){c.popup().classed("js-showPopup",!1)}function L(){return f||h}function k(t,e){c.renderTitle()&&(t.selectAll("title").remove(),t.append("title").text((0,i.pluck)("data",c.title(e.name))))}function T(t,e,n){return function(){var r=a.default.select(this),i=r.attr("stroke")===t&&r.attr("stroke-dasharray")===(e instanceof Array?e.join(","):null)||r.attr("fill")===t;return n?!i:i}}return c.transitionDuration(500),c._rangeBandPadding(1),c.plotData=function(){var t=c.chartBodyG(),e=t.selectAll("g.stack-list");e.empty()&&(e=t.append("g").attr("class","stack-list"));var n=e.selectAll("g.stack").data(c.data()),o=n.enter().append("g").attr("class",(function(t,e){return"stack _"+e}));!function(t,e){var n=a.default.svg.line().x((function(t){return c.x()(t.x)})).y((function(t){return d?c.y()(t.y+t.y0):c.y()(t.y)})).interpolate(_).tension(y);v&&n.defined(v);var i=t.append("path").attr("class","line").attr("stroke",b);g&&i.attr("stroke-dasharray",g),(0,r.transition)(e.select("path.line"),c.transitionDuration()).attr("stroke",b).attr("d",(function(t){return w(n(t.values))}))}(o,n),function(t,e){if(d){var n=a.default.svg.area().x((function(t){return c.x()(t.x)})).y((function(t){return c.y()(t.y+t.y0)})).y0((function(t){return c.y()(t.y0)})).interpolate(_).tension(y);v&&n.defined(v),t.append("path").attr("class","area").attr("fill",b).attr("d",(function(t){return w(n(t.values))})),(0,r.transition)(e.select("path.area"),c.transitionDuration()).attr("fill",b).attr("d",(function(t){return w(n(t.values))}))}}(o,n),function(t,e){var n,r="dc-tooltip-list",o=t.select("g.dc-tooltip-list");o.empty()&&(o=t.append("g").attr("class",r)),e.each((function(t,e){var n=t.values;v&&(n=n.filter(v));var r=o.select("g.dc-tooltip._"+e);r.empty()&&(r=o.append("g").attr("class","dc-tooltip _"+e)),function(t){(t.select("path.yRef").empty()?t.append("path").attr("class","yRef"):t.select("path.yRef")).style("display","none").attr("stroke-dasharray","5,5"),(t.select("path.xRef").empty()?t.append("path").attr("class","xRef"):t.select("path.xRef")).style("display","none").attr("stroke-dasharray","5,5")}(r);var s=r.selectAll("circle.dot").data(n,(function(t){return t.x instanceof Date?t.x.toISOString():t.x}));s.enter().append("circle").attr("class","dot").attr("r",L()).style("fill-opacity",p).style("stroke-opacity",m).on("mousemove",(function(){var t=a.default.select(this);!function(t){t.style("fill-opacity",.8),t.style("stroke-opacity",.8),t.attr("r",h)}(t),function(t,e){var n=t.attr("cx"),r=t.attr("cy"),i="M"+(c._yAxisX()-c.margins().left)+" "+r+"L"+n+" "+r,o="M"+n+" "+c.yAxisHeight()+"L"+n+" "+r;e.select("path.yRef").style("display","").attr("d",i),e.select("path.xRef").style("display","").attr("d",o)}(t,r)})).on("mouseout",(function(){a.default.select(this).style("fill-opacity",p).style("stroke-opacity",m).attr("r",L()),function(t){t.select("path.yRef").style("display","none"),t.select("path.xRef").style("display","none")}(r)})),s.attr("cx",(function(t){return i.utils.safeNumber(c.x()(t.x))})).attr("cy",(function(t){return d?i.utils.safeNumber(c.y()(t.y+t.y0)):i.utils.safeNumber(c.y()(t.y))})).attr("fill",b).call(k,t),s.exit().remove()})),c.brushOn()&&!c.focusChart()&&(n=c.g().on("mouseout",(function(){c.g().selectAll(".dot").style("fill-opacity",0),M()})).on("mousemove",(function(){c.isBrushing()?M():function(t,e){var n,r=(n=c.popupCoordinates(a.default.mouse(e)))[0],i=n[1],o=r-c.margins().left,s=[];t.selectAll(".dc-tooltip").each((function(){var t=null,e=null,n=a.default.select(this).selectAll(".dot").style("fill-opacity",0);n[0].sort((function(t,e){return a.default.select(t).attr("cx")-a.default.select(e).attr("cx")})),n[0].some((function(n,r){var i=a.default.select(n);if(o<i.attr("cx"))return e={elm:i,datum:i.datum(),i:r},!0;t={elm:i,datum:i.datum(),i:r}})),(e=t&&e&&Math.abs(t.elm.attr("cx")-o)<Math.abs(e.elm.attr("cx")-o)?t:e)&&Math.abs(e.elm.attr("cx")-o)<32&&(e.elm.style("fill-opacity",1),s.push(e))})),s.length>0?function(t,e,n){if(!c.popupIsEnabled())return M(),!1;var r=c.popup(),i=r.select(".chart-popup-content").html("").classed("popup-list",!0);i.append("div").attr("class","popup-header").text(c.popupTextAccessor(t));var o=i.selectAll(".popup-item").data(t.sort((function(t,e){return d?e.datum.y+e.datum.y0-(t.datum.y+t.datum.y0):e.datum.y-t.datum.y}))).enter().append("div").attr("class","popup-item");o.append("div").attr("class","popup-legend").style("background-color",(function(t){return b(t.datum,t.i)})),c.series().keys()&&o.append("div").attr("class","popup-item-key").text((function(t){return c.colorDomain()[t.datum.idx]})),o.append("div").attr("class","popup-item-value").classed("text-align-right",Boolean(c.series().keys())).text((function(t){return c.measureValue(t.datum.y)})),function(t,e){c.popup().attr("style",(function(){return"transform:translate("+t+"px,"+e+"px)"})).select(".chart-popup-box").classed("align-left-center",!0).classed("align-right-center",(function(){return t+(a.default.select(this).node().getBoundingClientRect().width+32)>c.width()}))}(e,n),r.classed("js-showPopup",!0)}(s,r,i):M()}(n,this)})))}(t,n)},c.interpolate=function(t){return arguments.length?(_=t,c):_},c.tension=function(t){return arguments.length?(y=t,c):y},c.defined=function(t){return arguments.length?(v=t,c):v},c.dashStyle=function(t){return arguments.length?(g=t,c):g},c.measureValue=function(t){var e=c.valueFormatter();return e&&e(t)||i.utils.formatValue(t)},c.dimensionValue=function(t){var e=c.dateFormatter();return e&&e(t)||i.utils.formatValue(t)},c.renderArea=function(t){return arguments.length?(d=t,c):d},c.xyTipsOn=function(t){return arguments.length?(x=t,c):x},c.dotRadius=function(t){return arguments.length?(h=t,c):h},c.renderDataPoints=function(t){return arguments.length?(t?(p=t.fillOpacity||.8,m=t.strokeOpacity||.8,f=t.radius||2):(p=n,m=n,f=null),c):{fillOpacity:p,strokeOpacity:m,radius:f}},c.legendHighlight=function(t){c.isLegendableHidden(t)||c.g().selectAll("path.line, path.area").classed("highlight",T(t.color,t.dashstyle)).classed("fadeout",T(t.color,t.dashstyle,!0))},c.legendReset=function(){c.g().selectAll("path.line, path.area").classed("highlight",!1).classed("fadeout",!1)},(0,r.override)(c,"legendables",(function(){var t=c._legendables();return g?t.map((function(t){return t.dashstyle=g,t})):t})),(c=(0,l.default)(c)).destroyChart=function(){(0,r.deregisterChart)(c,c.chartGroup()),c.on("filtered",null),c.filterAll(),c.resetSvg(),c.root().attr("style","").attr("class","").html(""),c._doRender=function(){return c}},c.anchor(t,e)};var r=n(791),i=n(5209),o=c(n(1007)),a=c(n(5680)),s=c(n(2508)),u=c(n(9825)),l=c(n(409));function c(t){return t&&t.__esModule?t:{default:t}}},7940:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.splitStrOnLastAs=void 0,e.default=function(t,e){var n=(0,o.default)({}),u=null,c=50,d=0,h=0,f=!1,p={},m={},_=null,y=null,v=null,g=null,x=!1,b=null,w=!1,M="",L=["sort"],k=r.default.dispatch.apply(r.default,L),T=n.on.bind(n);function S(t){return t.agg_mode?t.agg_mode.toUpperCase()+" "+t.expression:t.expression}function E(t,e){var i=_.getTable()[0]+"."+t,o=_.getColumns()[i].type;"TIMESTAMP"===o?e="TIMESTAMP(3) '"+e.toISOString().slice(0,-1).replace("T"," ")+"'":"DATE"===o&&(e="DATE '"+r.default.time.format.utc("%Y-%m-%d")(e)+"'"),n.addFilteredColumn(t),m[t]=e,y.filter(D(m)),(0,s.redrawAllAsync)(n.chartGroup())}function A(t){delete m[t],n.removeFilteredColumn(t),y.filter(D(m)),n.filterAll(),(0,s.redrawAllAsync)(n.chartGroup())}function D(t){var e="",n=null;for(var r in t)n="null"===t[r]?r+" IS null":r+" = "+t[r],""===e?e+=n:e=e+" AND "+n;return e}return n.on=function(t,e){return-1===L.indexOf(t)?T(t,e):k.on(t,e),n},n._invokeSortListener=function(t){"undefined"!==t&&k.sort(n,t)},n.resetTable=function(){n.root().html("")},n.crossfilter=function(t){return arguments.length?(y=t.filter(),_=t,n):_},n.sortColumn=function(t){return arguments.length?(v=t,n):v},n.nullsOrder=function(t){return arguments.length?(M=t,n):M},n.tableWrapper=function(t){return arguments.length?(u=t,n):u},n.colAliases=function(t){return arguments.length?(b=t,n):b},n.addRowsCallback=function(t,e){t||e.length>0&&(f=!1,n.dataCache=(n.dataCache||[]).concat(e),n._doRedraw(n.dataCache))},n.addRows=function(){f=!0,d+=c,n.getData(c,d,n.addRowsCallback)},n.setDataAsync((function(t,e){var r=n.resetTableStateReturnSize();n.getData(r,0,e)})),n.data((function(){return n.dataCache})),n.getData=function(t,e,r){x=n.dimension().value()[0],(g=x?n.group():n.dimension()).order(v?v.col.name:null);var i=v&&"asc"===v.order?"bottomAsync":"topAsync";return x||g.nullsOrder(v?M:""),"topAsync"===i?g[i](t,e).then((function(t){return r(null,t)})).catch((function(t){return r(t)})):g[i](t,e,null,r)},n.resetTableStateReturnSize=function(){f=!1,!x&&u&&(u.select(".md-table-scroll").node().scrollTop=0);var t=c;return x?t=d>0?d:t:d=0,t},n.addFilteredColumn=function(t){p[t]=null},n.removeFilteredColumn=function(t){delete p[t]},n.clearFilteredColumns=function(){p={}},n.getFilteredColumns=function(){return p},n.clearTableFilter=function(){m={},n.clearFilteredColumns(),y.filter()},n._doRender=function(t){var e,o;return u||(n.resetTable(),(u=n.root().append("div").attr("class","md-table-wrapper")).append("div").attr("class","md-header-spacer"),u.append("div").attr("class","md-table-scroll").append("table"),u.append("div").attr("class","md-table-header")),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=n.tableWrapper().select("table").html("");if(0!==t.length){var o=[];x?(n.dimension().getDimensionName().forEach((function(t,e){o.push({expression:t,name:"key"+e,label:b?b[e]:t,type:"dimension",measureName:t.measureName})})),n.group().reduce().forEach((function(t,e){t.expression&&o.push({expression:t.expression,name:t.name,agg_mode:t.agg_mode,label:b?b[n.dimension().value().length+e]:S(t),type:"measure",measureName:t.measureName})}))):o=n.dimension().getProjectOn().map((function(t,e){var n=l(t);return{expression:n[0],name:n[1],label:b?b[e]:n[0],type:"project",measureName:t.measureName}})),e.append("tr").selectAll("th").data(o).enter().append("th").text((function(t){return t.label}));var a=e.selectAll(".table-row").data(t).enter().append("tr").attr("class",(function(t){var e="table-row ";if(x&&(e+="grouped-data ",n.hasFilter())){var r=[];for(var i in t)t.hasOwnProperty(i)&&i.includes("key")&&r.push(t[i]);e+=!n.hasFilter(r)^n.filtersInverse()?"deselected":"selected"}return e}));o.forEach((function(t){a.append("td").html((function(e){var r=void 0,o=e[t.name];"measure"===t.type?r=n.valueFormatter():Array.isArray(o)&&o[0].value instanceof Date?(r=n.dateFormatter(),o=o[0].value):r=n.valueFormatter();var a=o&&o[0]&&o[0].isExtract?null:t.measureName||t.expression;return r&&r(o,a)||(0,i.formatDataValue)(o)})).classed("filtered",t.expression in p).on("click",(function(e){if(!window.getSelection().toString().length)if(x)n.onClick(e);else if(t.expression in p){delete m[t.expression];var r=[];n.removeFilteredColumn(t.expression),r.some((function(t){return null!=t}))?n.onClick(r):n.filterAll(),(0,s.redrawAllAsync)(n.chartGroup())}else{E(t.expression,e[t.name]);var i=o.map((function(t){return m[t.expression]}));n.onClick(i)}}))}));var c=n.tableWrapper().select(".md-table-header").html("").append("div").attr("class","docked-table-header").style("left",(function(){return"-"+u.select(".md-table-scroll").node().scrollLeft+"px"}));n.tableWrapper().select(".md-table-scroll").on("scroll",(function(){c.style("left","-"+r.default.select(this).node().scrollLeft+"px");var t=r.default.select(this).node();if(!f){var i=t.scrollTop+t.getBoundingClientRect().height;t.scrollTop>h&&e.node().scrollHeight<=i+i/5&&n.addRows()}h=t.scrollTop})),e.selectAll("th").each((function(e,i){var o=c.append("div").attr("class","table-header-item").classed("isFiltered",(function(){return e.expression in p})),a=o.append("div").attr("class","table-sort").classed("disabled",(function(){var e=!!t[0]&&"string"==typeof t[0]["col"+i];return!x&&e})).classed("active",!!v&&v.index===i).classed(v?v.order:"",!0).style("width",r.default.select(this).node().getBoundingClientRect().width+"px"),l=a.append("span").text(e.label),d=a.append("div").attr("class","sort-btn").on("click",(function(){u.selectAll(".table-sort").classed("active asc desc",!1),v=v&&v.index===i?"desc"===v.order?{index:i,col:e,order:"asc"}:null:{index:i,col:e,order:"desc"},n._invokeSortListener(v),(0,s.redrawAllAsync)(n.chartGroup())}));d.append("svg").attr("class","svg-icon").classed("icon-sort",!0).attr("viewBox","0 0 48 48").append("use").attr("xlink:href","#icon-sort"),d.append("svg").attr("class","svg-icon").classed("icon-sort-arrow",!0).attr("viewBox","0 0 48 48").append("use").attr("xlink:href","#icon-arrow1"),o.append("div").attr("class","unfilter-btn").attr("data-expr",e.expression).on("click",(function(){A(r.default.select(this).attr("data-expr"))})).style("left",l.node().getBoundingClientRect().width+20+"px").append("svg").attr("class","svg-icon").classed("icon-unfilter",!0).attr("viewBox","0 0 48 48").append("use").attr("xlink:href","#icon-unfilter")}))}}(t),x&&(u.select(".md-table-scroll").node().scrollTop=h),f||(e=u.select(".md-table-scroll").node(),(o=u.select("table").node()).scrollHeight>0&&o.scrollHeight<=e.scrollTop+e.getBoundingClientRect().height+18&&n.addRows()),n},n._doRedraw=function(t){return n._doRender(t)},n.size=function(t){return arguments.length?(c=t,n):c},n.pauseAutoLoad=function(){return f},n.offset=function(){return d},n.destroyChart=function(){n.sampling(!1)},n.sampling=function(t){return arguments.length?(t&&!w?(0,a.incrementSampledCount)():!t&&w&&(0,a.decrementSampledCount)(),!1===(w=t)&&n.dimension().samplingRatio(null),n):w},n.anchor(t,e)};var r=u(n(5680)),i=n(7038),o=u(n(7831)),a=n(791),s=n(6253);function u(t){return t&&t.__esModule?t:{default:t}}var l=e.splitStrOnLastAs=function(t){var e=[];return e[0]=t.substring(0,t.lastIndexOf("AS")-1),e[1]=t.substring(t.lastIndexOf("AS")+3,t.length),e}},1177:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=(0,r.default)({}),o="#22a7f0";return n.colors=function(t){return arguments.length?(o=t,n):o},n.getColor=function(t,e){return"string"==typeof o?o:o[0]},n.setDataAsync((function(t,e){return t.valueAsync().then((function(t){e(null,t)})).catch((function(t){e(t)}))})),n._doRender=function(t){var e=n.valueFormatter(),r=t;e&&e(t)?r=e(t):"-0"===(r=i.utils.formatValue(t))&&(r=0);var o=n.root().html("").append("div").attr("class","number-chart-wrapper"),a=n.width(),s=n.height(),u=a-a/100*5,l=s-s/100*5,c=i.utils.getFontSizeFromWidth(r,u,l);return o.append("span").attr("class","number-chart-number").style("color",n.getColor).style("font-size",c+"px").html(r),n},n._doRedraw=function(t){return n._doRender(t)},n.anchor(t,e)};var r=o(n(7831)),i=(o(n(5680)),n(5209));function o(t){return t&&t.__esModule?t:{default:t}}n(6253)},3613:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n="empty-chart",d="empty",h=void 0,f=void 0,p=0,m=0,_=void 0,y=void 0,v=void 0,g=.4,x=void 0,b=!1,w=(0,i.default)((0,o.default)((0,r.default)({}))),M=void 0,L=void 0,k=void 0,T=void 0,S=void 0,E=!1;w.redoSelect=R,w.accent=I,w.unAccent=O,w.colorAccessor(w.cappedKeyAccessor),w.title((function(t){return w.cappedKeyAccessor(t)+": "+w.cappedValueAccessor(t)})),w.slicesCap=w.cap,w.label(w.cappedKeyAccessor),w.renderLabel(!0),w.transitionDuration(350),w.measureValue=function(t){var e=w.getMeasureName(),n=w.valueFormatter(),r=w.cappedValueAccessor(t);return n&&n(r,e)||c.utils.formatValue(r)},w.redoSelect=R,w.accent=I,w.unAccent=O;var A=w.getDataAsync();function D(){h=f||a.default.min([w.width(),w.height()])/2;var t=Y(),e=a.default.layout.pie().sort(null).value(w.cappedValueAccessor),r=w.data(),i=void 0;if(r&&a.default.sum(r,w.valueAccessor())?(i=e(c.utils.maybeFormatInfinity(w.data())),_.classed(n,!1)):(i=e([{key:d,value:1,others:[d]}]),_.classed(n,!0)),k){var o=0,s=!0,p=!1,m=void 0;try{for(var y,v=i[Symbol.iterator]();!(s=(y=v.next()).done);s=!0)o+=y.value.value}catch(t){p=!0,m=t}finally{try{!s&&v.return&&v.return()}finally{if(p)throw m}}var g=!0,T=!1,S=void 0;try{for(var E,A=i[Symbol.iterator]();!(g=(E=A.next()).done);g=!0){var D=E.value;D.percentage=(0,u.formatPercentage)(D.value,o)}}catch(t){T=!0,S=t}finally{try{!g&&A.return&&A.return()}finally{if(T)throw S}}}if(_){var I=_.selectAll("g.pie-slice").data(i);!function(t,e,n){(function(t,e){var n=t.append("path").attr("fill",B).on("click",U).on("mouseenter",H).on("mousemove",W).on("mouseleave",V).attr("d",(function(t,n){return q(t,n,e)}));(0,l.transition)(n,w.transitionDuration(),(function(t){t.attrTween("d",N)}))})(function(t){return t.enter().append("g").attr("class",(function(t,e){return"pie-slice _"+e})).classed("stroke-thick",G)}(t),e),function(t,e){if(w.renderLabel()){var n=_.selectAll("g.pie-label").data(t);n.exit().remove();var r=n.enter().append("g").attr("class",(function(t,e){var n="pie-label _"+e;return x&&(n+=" external"),n})).attr("transform",(function(t){return X(t,e)})).on("click",U);M&&L?(r.append("text").attr("class","value-dim").attr("dy","-0.8em"),r.append("text").attr("class","value-measure").attr("dy",".4em"),r.append("text").attr("class","value-percentage").attr("dy","1.6em")):M?(r.append("text").attr("class","value-dim").attr("dy","0"),r.append("text").attr("class","value-measure").attr("dy","1.2em")):L?(r.append("text").attr("class","value-dim").attr("dy","0"),r.append("text").attr("class","value-percentage").attr("dy","1.2em")):r.append("text").attr("class","value-dim").attr("dy",".4em"),C(r,e),x&&b&&P(t,e)}}(n,e)}(I,t,i),function(t,e){(function(t,e){var n=_.selectAll("g.pie-slice").data(t).classed("all-others",(function(t){return t.data.isAllOthers})).select("path").attr("d",(function(t,n){return q(t,n,e)}));(0,l.transition)(n,w.transitionDuration(),(function(t){t.attrTween("d",N)})).attr("fill",B)})(t,e),function(t,e){w.renderLabel()&&(C(_.selectAll("g.pie-label").data(t),e),x&&b&&P(t,e))}(t,e),function(t){w.renderTitle()&&_.selectAll("g.pie-slice").data(t).select("title").text((function(t){return w.title()(t.data)}))}(t)}(i,t),function(t){t.exit().remove()}(I),R(),(0,l.transition)(_,w.transitionDuration()).attr("transform","translate("+w.cx()+","+w.cy()+")")}w.generatePopup()}function C(t,e){(0,l.transition)(t,w.transitionDuration()).attr("transform",(function(t){return X(t,e)})),t.style("font-size",G()?"14px":"12px"),t.select(".value-dim").classed("deselected-label",(function(t){return w.hasFilter()&&!F(t)})).html((function(t){return w.label()(t.data)})).html((function(t){var e=j(t),n=a.default.select(this).node().getBoundingClientRect().width,r=function(t,e,n){return e>n?z(t.toString().replace(u.nullLabelHtml,"NULL"),e,n).replace(/\bNULL[^A-Za-z]/g,u.nullLabelHtml+" "):t}(w.label()(t.data),n,e);return a.default.select(this.parentNode).classed("hide-label",""===r),r})),w.measureLabelsOn()&&(t.select(".value-measure").classed("deselected-label",(function(t){return w.hasFilter()&&!F(t)})).text((function(t){return a.default.select(this.parentNode).classed("hide-label")?"":w.measureValue(t.data)})).text((function(t){if(a.default.select(this.parentNode).classed("hide-label"))return"";var e=j(t),n=a.default.select(this).node().getBoundingClientRect().width;return n>e?z(w.measureValue(t.data),n,e):w.measureValue(t.data)})),L&&t.select(".value-percentage").classed("deselected-label",(function(t){return w.hasFilter()&&!F(t)})).text((function(t){if(a.default.select(this.parentNode).classed("hide-label"))return"";var e=j(t),n=a.default.select(this).node().getBoundingClientRect().width;return n>e?z(t.percentage,n,e):t.percentage})))}function P(t,e){var n=_.selectAll("polyline.pie-slice").data(t);n.enter().append("polyline").attr("class",(function(t,e){return"pie-path _"+e+" pie-slice"})),n.exit().remove(),(0,l.transition)(n,w.transitionDuration()).attrTween("points",(function(t){this._current=this._current||t;var n=a.default.interpolate(this._current,t);return this._current=n(0),function(t){var r=a.default.svg.arc().outerRadius(h-m+x).innerRadius(h-m),i=n(t);return[e.centroid(i),r.centroid(i)]}})).style("visibility",(function(t){return t.endAngle-t.startAngle<1e-4?"hidden":"visible"}))}function I(t){w.selectAll("g.pie-slice").each((function(e){w.cappedKeyAccessor(e.data)==t&&w.accentSelected(this)}))}function O(t){w.selectAll("g.pie-slice").each((function(e){w.cappedKeyAccessor(e.data)==t&&w.unAccentSelected(this)}))}function R(){w.hasFilter()?w.selectAll("g.pie-slice").each((function(t){F(t)?w.highlightSelected(this):w.fadeDeselected(this)})):w.selectAll("g.pie-slice").each((function(){w.resetHighlight(this)}))}function Y(){return a.default.svg.arc().outerRadius(h-m).innerRadius(w.innerRadius())}function F(t){return w.hasFilter(w.cappedKeyAccessor(t.data))^w.filtersInverse()}function j(t){var e=t.endAngle-t.startAngle;if(isNaN(e)||e*(h/2)<(w.measureLabelsOn()?28:20))return 0;var n=Z(t,Y()),r=Math.abs(n[1]);if(e>=Math.TWO_PI)return r;var i=n[0]*n[1]<0?t.startAngle:t.endAngle,o=n[1]>=0?Math.PI:n[0]<0?2*Math.PI:0,a=Math.tan(Math.abs(o-i))*r,s=2*(o>=t.startAngle&&o<t.endAngle?Math.abs(n[0])+a:Math.abs(n[0])-a),u=h-w.innerRadius()-24;return s>u||s<0?u:s}function z(t,e,n){if(e>n)return String(t).slice(0,n/9)+"";String(t)}function N(t){t.innerRadius=w.innerRadius();var e=this._current;(function(t){return!t||isNaN(t.startAngle)||isNaN(t.endAngle)})(e)&&(e={startAngle:0,endAngle:0});var n=a.default.interpolate(e,t);return this._current=n(0),function(t){return q(n(t),0,Y())}}function B(t,e){return w.getColor(t.data,e)}function U(t,e){_.attr("class")===n||t.data.isAllOthers||w.onClick(t.data,e)}function H(t,e){var n=w.popup(),r=n.select(".chart-popup-content").html("");r.append("div").attr("class","popup-legend").style("background-color",B(t,e)),r.append("div").attr("class","popup-value").html((function(){return'<div class="popup-value-dim">'+w.label()(t.data)+'</div><div class="popup-value-measure">'+w.measureValue(t.data)+"</div>"+(k?'<div class="popup-value-measure">'+t.percentage+"</div>":"")})),n.classed("js-showPopup",!0)}function V(){w.popup().classed("js-showPopup",!1)}function W(){var t,e=(t=w.popupCoordinates(a.default.mouse(this)))[0]+w.width()/2,n=t[1]+w.height()/2;w.popup().attr("style",(function(){return"transform:translate("+e+"px,"+n+"px)"})).select(".chart-popup-box").classed("align-center",(function(){return e+a.default.select(this).node().getBoundingClientRect().width>w.width()&&e-a.default.select(this).node().getBoundingClientRect().width/2>=0})).classed("align-right",(function(){return e+a.default.select(this).node().getBoundingClientRect().width>w.width()&&e-a.default.select(this).node().getBoundingClientRect().width>=0}))}function G(){return 480<Math.min(w.width(),w.height())}function q(t,e,n){var r=n(t,e);return r.indexOf("NaN")>=0&&(r="M0,0"),r}function X(t,e){var n;return n=x?a.default.svg.arc().outerRadius(h-m+x).innerRadius(h-m+x).centroid(t):Z(t,e),isNaN(n[0])||isNaN(n[1])?"translate(0,0)":"translate("+n+")"}function Z(t,e){return x?a.default.svg.arc().outerRadius(h-m+x).innerRadius(h-m+x).centroid(t):0===p&&"donut"!=S?a.default.svg.arc().outerRadius(h-m).innerRadius(h/5).centroid(t):e.centroid(t)}function K(t,e){w.selectAll("g.pie-slice").each((function(n){t.name===n.data.key&&a.default.select(this).classed("highlight",e)}))}return w.setDataAsync((function(t,e){A(t,(function(n,r){!n&&T&&r?r.some((function(t){return"All Others"===t.key0}))?e(null,r):t.getCrossfilter().groupAll().reduce([t.reduce()[0]]).valueAsync(!1,!1,t.dimension().getDimensionIndex()).then((function(t){var n=t-a.default.sum(r,w.valueAccessor());n>0&&r.push({key0:"All Others",val:n,isAllOthers:!0}),e(null,r)})).catch((function(t){e(t)})):e(n,r)}))})),(0,l.override)(w,"getColor",(function(t,e){return t.isAllOthers?"#888888":w._getColor(t,e)})),w._doRender=function(){return w.resetSvg(),_=w.svg().append("g").attr("class","pie-wrapper").attr("transform","translate("+w.cx()+","+w.cy()+")"),D(),E=!0,w},w.externalRadiusPadding=function(t){return arguments.length?(m=t,w):m},w.innerRadius=function(t){return arguments.length?(p=t,w):S?"donut"===S?(Math.min(w.width(),w.height())-m)/5:0:p},w.pieStyle=function(t){return arguments.length?(S=t,w):S},w.radius=function(t){return arguments.length?(f=t,w):f},w.cx=function(t){return arguments.length?(y=t,w):y||w.width()/2},w.cy=function(t){return arguments.length?(v=t,w):v||w.height()/2},w._doRedraw=function(){return E?(D(),w):w._doRender()},w.minAngleForLabel=function(t){return arguments.length?(g=t,w):g},w.emptyTitle=function(t){return 0===arguments.length?d:(d=t,w)},w.externalLabels=function(t){return 0===arguments.length?x:(x=t||void 0,w)},w.drawPaths=function(t){return 0===arguments.length?b:(b=t,w)},w.legendables=function(){return w.data().map((function(t,e){var n={name:t.key0,data:t.value,others:t.others,chart:w};return n.color=w.getColor(t,e),n}))},w.legendHighlight=function(t){K(t,!0)},w.legendReset=function(t){K(t,!1)},w.legendToggle=function(t){w.onClick({key:t.name,others:t.others})},(w=(0,s.default)(w)).showAbsoluteValues=function(t){return arguments.length?(M=t,E&&w._doRender(),w):M},w.showPercentValues=function(t){return arguments.length?(L=t,E&&w._doRender(),w):L},w.showAllOthers=function(t){return arguments.length?(T=t,E&&(w.expireCache(),w.renderAsync()),w):T},w.showPercentValuesInPopup=function(t){return arguments.length?(k=t,E&&w.generatePopup(),w):k},w.anchor(t,e)};var r=d(n(7831)),i=d(n(6733)),o=d(n(7399)),a=d(n(5680)),s=d(n(3268)),u=n(7038),l=n(791),c=(n(6253),n(5209));function d(t){return t&&t.__esModule?t:{default:t}}},7491:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default=function(t,e,n,h){var f,m=null,_=null,y=void 0!==e&&e,v=t.attributes.id.value,g={isOpera:Boolean(window.opr)&&Boolean(opr.addons)||Boolean(window.opera)||navigator.userAgent.indexOf(" OPR/")>=0,isFirefox:"undefined"!=typeof InstallTrigger,isSafari:Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,isIE:f=Boolean(document.documentMode),isEdge:!f&&Boolean(window.StyleMedia),isChrome:Boolean(window.chrome)&&Boolean(window.chrome.webstore)};(m=y?(0,a.default)((0,s.default)({}),v,h,!0,!1):(0,u.default)((0,o.default)({},h,g),h,!0))._mandatoryAttributes([]);var x=window.hasOwnProperty("con")?con:null,b={},w={},M=[],L=null,k=null,T=null,S=null,E=!1,A=1,D=256,C=2,P=!0,I=!0,O=!1;function R(t){var e=m.getDataRenderBounds();m._updateXAndYScales(e),m._vegaSpec=p(m),m.con().renderVegaAsync(m.__dcFlag__,JSON.stringify(m._vegaSpec),{}).then((function(n){window&&window.paused||(b[n.nonce]=e),t(null,n)})).catch((function(e){t(e)}))}m.legendOpen=function(t){return arguments.length?(I=t,m):I},m.popupDisplayable=function(t){P=Boolean(t)},m.x=function(t){return arguments.length?(L=t,m):L},m.y=function(t){return arguments.length?(k=t,m):k},m.xLatLngBnds=function(t){return arguments.length?(T=t,chart):T},m.yLatLngBnds=function(t){return arguments.length?(S=t,chart):S},m._resetRenderBounds=function(){b={}},m._resetLayers=function(){M=[],w={}},m.pushLayer=function(t,e){if(!w[t]){if(!t.match(/^\w+$/))throw new Error("A layer name can only have alpha numeric characters (A-Z, a-z, 0-9, or _)");return M.push(t),w[t]=e,m}},m.popLayer=function(){var t=M.pop(),e=w[t];return delete w[t],e},m.popAllLayers=function(){var t=M.map((function(t){var e=w[t];return delete w[t],e}));return M=[],t},m.getLayer=function(t){return w[t]},m.getAllLayers=function(){return Object.keys(w).map((function(t){return w[t]}))},m.getLayerAt=function(t){var e=M[t];return w[e]},m.getLayers=function(){return M.map((function(t){return w[t]}))},m.getLayerNames=function(){return M},m.xRangeFilter=function(t){for(var e in w)w[e]},m.yRangeFilter=function(t){for(var e in w)w[e]},m.clearLayerFilters=function(){for(var t in w){var e=w[t];"function"==typeof e.filterAll&&e.filterAll(m)}},m.destroyChart=function(){for(var t in _.setState({}),m.filterAll(),w)w[t].destroyLayer(m);m.map()&&m.map().remove()},m.con=function(t){return arguments.length?(x=t,m):x},m.useGeoTypes=function(t){return m._useGeoTypes=t,m},m.usePixelRatio=function(t){return arguments.length?(E=Boolean(t),A=E&&window.devicePixelRatio||1,m):E},m._getPixelRatio=function(){return A},m.setSample=function(){M.forEach((function(t){var e=w[t];e&&"function"==typeof e.setSample&&e.setSample()}))},m.shiftToZoom=function(t){return void 0!==t&&(O=t),O},m.setDataAsync((function(t,e){var n=m.getAllLayers(),i=n.length?d.filter(n,(function(t){return"poly"===t.getState().mark.type})):null;if(i&&i.length){var o=i.map((function(t){return function(t,e){var n=t.map().getBounds(),r=e.getState().encoding.geoTable,i=e.getState().encoding.geocol,o="SELECT COUNT(*) AS n FROM "+r+" WHERE ST_XMax("+r+"."+i+") >= "+n._sw.lng+" AND ST_XMin("+r+"."+i+") <= "+n._ne.lng+" AND ST_YMax("+r+"."+i+") >= "+n._sw.lat+" AND ST_YMin("+r+"."+i+") <= "+n._ne.lat;return t.con().queryAsync(o,{})}(m,t)}));Promise.all(o).then((function(t){t.forEach((function(t,e){var n=t&&t[0]&&t[0].n,o=i[e];o.setState(r({},o.getState(),{bboxCount:n}))})),R(e)}))}else R(e)})),m.data((function(t){if(null!==m.dataCache)return m.dataCache;var e=m.getDataRenderBounds();m._updateXAndYScales(e),m._vegaSpec=p(m,(0,l.lastFilteredSize)(t.getCrossfilterId()));var n=m.con().renderVega(m.__dcFlag__,JSON.stringify(m._vegaSpec));return b[n.nonce]=e,n})),m._getXScaleName=function(){return"x"},m._getYScaleName=function(){return"y"},m._updateXAndYScales=function(t){var e=t&&4===t.length&&t[0]instanceof Array&&2===t[0].length;if(null===L&&(L=d3.scale.linear()),null===k&&(k=d3.scale.linear()),m._useGeoTypes&&"function"==typeof m.useLonLat&&m.useLonLat()&&(T=[t[0][0],t[1][0]],S=[t[2][1],t[0][1]]),e)"function"==typeof m.useLonLat&&m.useLonLat()?(L.domain([m.conv4326To900913X(t[0][0]),m.conv4326To900913X(t[1][0])]),k.domain([m.conv4326To900913Y(t[2][1]),m.conv4326To900913Y(t[0][1])])):(L.domain([t[0][0],t[1][0]]),k.domain([t[2][1],t[0][1]]));else{var n=getLayers(),r=[],i=[];for(layer in n){var o,a=layer.xDim(),s=layer.yDim();layer.viewBoxDim(),a&&null!==(o=a.getFilter())&&r.push(o),s&&null!==(o=s.getFilter())&&i.push(o)}if(r.length){var u=r.reduce((function(t,e){return[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}),[Number.MAX_VALUE,-Number.MAX_VALUE]);"function"==typeof m.useLonLat&&m.useLonLat()?L.domain([m.conv4326To900913X(u[0]),m.conv4326To900913X(u[1])]):L.domain(u)}else L.domain([.001,.999]);if(i.length){var l=i.reduce((function(t,e){return[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}),[Number.MAX_VALUE,-Number.MAX_VALUE]);"function"==typeof m.useLonLat&&m.useLonLat()?k.domain([m.conv4326To900913X(l[0]),m.conv4326To900913X(l[1])]):k.domain(l)}else k.domain([.001,.999])}},m._determineScaleType=function(t){return void 0!==t.rangeBand?"ordinal":void 0!==t.exponent?"power":void 0!==t.base?"log":void 0!==t.quantiles?"quantiles":void 0!==t.interpolate?"linear":"quantize"},m._doRender=function(t,n,r){!t&&Boolean(!r)&&(t=m.data());var o=null;if(t.vega_metadata){var a=JSON.parse(t.vega_metadata);for(var s in w)"function"==typeof w[s]._updateFromMetadata&&(o=w[s].getState(),w[s]._updateFromMetadata(a,s))}var u=(0,i.getLegendStateFromChart)(m,e,o);_.setState(u),m.isLoaded()?Object.keys(t).length?m._setOverlay({data:t.image,bounds:b[t.nonce],nonce:t.nonce,browser:g,redraw:Boolean(n)}):m._setOverlay({data:null,bounds:null,nonce:null,browser:g,redraw:Boolean(n)}):m.map().once("style.load",(function(){m._doRender(t,n,r)}))},m._doRedraw=function(t){m._doRender(t||null,!0)},m.minPopupShapeBoundsArea=function(t){return arguments.length?(D=t,m):D},m.popupSearchRadius=function(t){return arguments.length?(C=t,m):C},m.getClosestResult=function(t,e){var n="function"==typeof m.effectiveHeight?m.effectiveHeight():m.height(),r=m._getPixelRatio()||1,i=new TPixel({x:Math.round(t.x*r),y:Math.round((n-t.y)*r)});if(t){var o=0,a={};M.forEach((function(t){var e=w[t];e.getPopupAndRenderColumns&&e.hasPopupColumns&&e.hasPopupColumns()&&(a[t]=e.getPopupAndRenderColumns(m),++o)})),o&&m.con().getResultRowForPixelAsync(m.__dcFlag__,i,a,Math.ceil(C*r)).then((function(t){return e(t[0])})).catch((function(t){throw new Error("getResultRowForPixel failed with message: "+t.error_msg)}))}},m.measureValue=function(t,e){var n=m.valueFormatter(),r=null;return e&&(r=e.replace(/.*\((.*)\).*/,"$1")),r&&n&&n(t,r)||t},m.displayPopup=function(t,e){if(P&&t&&t.row_set&&t.row_set.length&&m.select(".map-popup").empty()){var n=w[t.vega_table_name];if(n&&n.areResultsValidForPopup(t.row_set)){var r=m.root().append("div").attr("class","map-popup");n.displayPopup(m,r,t,D,e)}}},m.hidePopup=function(t){if(!m.select(".map-popup").empty())for(var e=0;e<M.length;++e){var n=M[e],r=w[n];if(r){t?r.hidePopup(m,(function(){m.select(".map-popup").remove()})):m.select(".map-popup").remove();break}}};var Y=m.anchor(t,n),F=Y.root().append("div").attr("class","legend");return(_=new c.Legend(F.node())).on("open",i.handleLegendOpen.bind(m)),_.on("lock",i.handleLegendLock.bind(m)),_.on("input",i.handleLegendInput.bind(m)),_.on("toggle",i.handleLegendToggle.bind(m)),_.on("doneRender",i.handleLegendDoneRender.bind(m)),m.legend=function(t){return _},m.deleteLayerLegend=function(t,e,n){"master"!==t&&m.root().selectAll(".legend").filter((function(r,i){return i===e&&"master"===n||!(t!==e&&n<e)})).remove()},m.destroyChartLegend=function(){m.root().selectAll(".legend").remove()},Y};var i=n(9366),o=h(n(1561)),a=h(n(6207)),s=h(n(7831)),u=h(n(5811)),l=n(6253),c=n(2723),d=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(6486));function h(t){return t&&t.__esModule?t:{default:t}}function f(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function p(t){var e=t._getPixelRatio(),n=("function"==typeof t.effectiveWidth?t.effectiveWidth():t.width())*e,r=("function"==typeof t.effectiveHeight?t.effectiveHeight():t.height())*e,i=[],o=[{name:t._getXScaleName(),type:t._determineScaleType(t.x()),domain:t.x().domain(),range:"width"},{name:t._getYScaleName(),type:t._determineScaleType(t.y()),domain:t.y().domain(),range:"height"}],a=[];t._useGeoTypes&&a.push({name:"mercator_map_projection",type:"mercator",bounds:{x:t.xLatLngBnds(),y:t.yLatLngBnds()}});var s=[];return t.getLayerNames().forEach((function(e){var n=t.getLayer(e).genVega(t,e);i.push.apply(i,f(n.data)),o.push.apply(o,f(n.scales)),s.push.apply(s,f(n.marks))})),{width:Math.round(n),height:Math.round(r),viewRenderOptions:{premultipliedAlpha:t.getLayerNames().length>0&&"backendScatter"===t.getLayerNames()[0]},data:i,scales:o,projections:a,marks:s}}},7881:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=void 0,h=8,f=16,p=!1,m="0.35em",_=2,y=void 0,v=void 0,g=!1,x=!1,b=0,w=4,M=!1,L=!1,k=(0,s.default)((0,i.default)((0,u.default)((0,o.default)((0,r.default)({}))))),T=void 0,S=void 0,E=a.default.svg.axis().orient("bottom"),A=(0,d.formatCache)(E),D=void 0;function C(t){var e=t||k.data();D=c.utils.maybeFormatInfinity(e),function(){var t=k.root(),e=t.select("g.axis");if(function(){if(T||(T=a.default.scale.linear()),T.range([0,k.effectiveWidth()]),S){var t=a.default.extent(D,k.cappedValueAccessor);t[0]>0?t[0]=0:t[0]===t[1]&&t[0]<0&&(t[1]=0),T.domain(t)}E.scale(T),k.xAxis().ticks(k.getNumTicksForXAxis())}(),e.empty())if(k.autoScroll()){e=t.append("div").attr("class","external-axis").style("height",k.margins().bottom+"px").append("svg").attr("height",32).append("g").attr("class","axis").attr("transform","translate("+k.margins().left+", 1)");var r=k.debounce((function(){b=a.default.select(this).node().scrollTop}),250);k.root().select(".svg-wrapper").on("scroll",r)}else e=n.append("g").attr("class","axis").attr("transform","translate(0, "+k.effectiveHeight()+")");k.autoScroll()&&t.select(".external-axis svg").attr("width",k.width());var i=t.selectAll(".y-axis-label");i.empty()&&(i=t.append("div").attr("class","y-axis-label")),i.text("undefined"!=typeof aliases?aliases[v]:v).style("top",k.effectiveHeight()/2+k.margins().top+"px");var o,s,u=t.selectAll(".x-axis-label");u.empty()&&(u=t.append("div").attr("class","x-axis-label")),u.text(k.xAxisLabel()).style("left",k.effectiveWidth()/2+k.margins().left+"px"),o=k.valueFormatter(),s=k.getMeasureName(),o&&null!==o(0,s)?A.setTickFormat((function(t){return o(t,s)})):A.setTickFormatFromCache(),(0,l.transition)(e,k.transitionDuration()).call(E),k.prepareLockAxis("x")}(),n.selectAll("g.tick").select("line.grid-line").remove(),n.selectAll("g.tick").append("line").attr("class","grid-line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",(function(){return-k.effectiveHeight()}));var r=n.selectAll("g.row").data(D);!function(t){var e=t.enter().append("g").attr("class",(function(t,e){return"row _"+e}));e.append("rect").attr("width",0),function(t){k.renderLabel()&&t.append("text").on("click",O),k.measureLabelsOn()&&t.append("text").attr("class","value-measure").on("click",O),k.renderTitleLabel()&&t.append("text").attr("class","titlerow").on("click",O)}(e),I(t)}(r),function(t){t.exit().remove()}(r),function(t){var e=D.length,n=void 0;n=M||(k.effectiveHeight()-w-(e+1)*w)/e,(x=2*f>(k.measureLabelsOn()?64:32))&&(n=(k.effectiveHeight()-w-(e+1)*w)/e),k.autoScroll()&&(n=n<16?16:n,k.root().select(".svg-wrapper").style("height",k.height()-k.margins().bottom+"px").style("overflow-y","auto").style("overflow-x","hidden"),k.svg().attr("height",16===n?e*(n+w)+8:k.height()-56)),p||(f=n/2);var r=t.attr("transform",(function(t,e){return"translate(0,"+((e+1)*w+e*n)+")"})).select("rect").attr("height",n).attr("fill",k.getColor).on("click",O).classed("deselected",(function(t){return!!k.hasFilter()&&!F(t)})).classed("selected",(function(t){return!!k.hasFilter()&&F(t)}));(0,l.transition)(r,k.transitionDuration()).attr("width",(function(t){return Math.abs(P()-T(k.valueAccessor()(t)))})).attr("transform",Y),k.measureLabelsOn()||function(t){k.renderTitle()&&(t.selectAll("title").remove(),t.append("title").text(k.title()))}(t),I(t)}(r),k.autoScroll()&&(k.root().select(".svg-wrapper").node().scrollTop=b)}function P(){var t=T(0);return t===-1/0||t!=t?T(1):t}function I(t){if(t.selectAll("text").style("font-size",x?"14px":"12px"),k.renderLabel()){var e=t.select("text").attr("x",h).attr("y",f).attr("dy",m).attr("dy",R()?"-0.25em":m).on("click",O).attr("class",(function(t,e){return"row _"+e})).classed("value-dim",!0).classed("deselected-label",(function(t){return k.hasFilter()&&!F(t)})).html(k.label());(0,l.transition)(e,k.transitionDuration()).attr("transform",Y)}if(k.measureLabelsOn()){var n=t.select(".value-measure").classed("deselected-label",(function(t){return k.hasFilter()&&!F(t)})).attr("y",f).attr("dy",R()?"1.1em":m).on("click",O).attr("text-anchor",R()?"start":"end").html((function(t){return t.label?t.label:k.measureValue(t)})).attr("x",(function(t,e){if(R())return h+1;var n=a.default.select(this),r=Math.abs(P()-T(k.valueAccessor()(t))),i=0,o=n.node();o&&o.getClientRects&&o.getClientRects().length>0&&(i=o.getBBox().width);var s=0,u=k.svg().select("text.value-dim._"+e).node();u&&u.getClientRects&&u.getClientRects().length>0&&(s=u.getBBox().width);var l=i+s+16;return n.attr("text-anchor",R()||r<l?"start":"end"),r>l?r-4:s+16}));(0,l.transition)(n,k.transitionDuration()).attr("transform",Y)}if(k.renderTitleLabel()){var r=t.select(".titlerow").attr("x",k.effectiveWidth()-_).attr("y",f).attr("text-anchor","end").on("click",O).attr("class",(function(t,e){return"titlerow _"+e})).text((function(t){return k.title()(t)}));(0,l.transition)(r,k.transitionDuration()).attr("transform",Y)}}function O(t){k.onClick(t)}function R(){return k.measureLabelsOn()&&f>16}function Y(t){var e=T(k.cappedValueAccessor(t)),n=P();return"translate("+(e>n?n:e)+",0)"}function F(t){return k.hasFilter(k.cappedKeyAccessor(t))^k.filtersInverse()}return k.rowsCap=k.cap,k.accent=function(t){k.selectAll("g.row").each((function(e){k.cappedKeyAccessor(e)==t&&k.accentSelected(this)}))},k.unAccent=function(t){k.selectAll("g.row").each((function(e){k.cappedKeyAccessor(e)==t&&k.unAccentSelected(this)}))},k.setYAxisLabel=function(t){v=t},k.xAxisLabel=function(t,e){return arguments.length?(y=t,k):y},k.scrollTop=function(t){return arguments.length?(b=t,k):b},k.getNumTicksForXAxis=function(){var t=k.effectiveWidth();return t/k.xAxis().scale().ticks().length<64?Math.ceil(t/64):10},k._doRender=function(t){return k.resetSvg(),n=k.svg().append("g").attr("transform","translate("+k.margins().left+","+k.margins().top+")"),C(t),k},k.title((function(t){return k.cappedKeyAccessor(t)+": "+k.cappedValueAccessor(t)})),k.measureValue=function(t){var e=k.getMeasureName(),n=k.valueFormatter(),r=k.cappedValueAccessor(t);return n&&n(r,e)||c.utils.formatValue(r)},k.x=function(t){return arguments.length?(T=t,k):T},k.renderTitleLabel=function(t){return arguments.length?(L=t,k):L},k._doRedraw=function(t){return n?(C(t),k):k._doRender(t)},k.xAxis=function(){return E},k.fixedBarHeight=function(t){return arguments.length?(M=t,k):M},k.gap=function(t){return arguments.length?(w=t,k):w},k.elasticX=function(t){return arguments.length?(S=t,k):S},k.autoScroll=function(t){return arguments.length?(g=t,k):g},k.labelOffsetX=function(t){return arguments.length?(h=t,k):h},k.labelOffsetY=function(t){return arguments.length?(f=t,p=!0,k):f},k.titleLabelOffsetX=function(t){return arguments.length?(_=t,k):_},k.anchor(t,e)};var r=h(n(7831)),i=h(n(6733)),o=h(n(7399)),a=h(n(5680)),s=h(n(3953)),u=h(n(4880)),l=n(791),c=n(5209),d=n(7038);function h(t){return t&&t.__esModule?t:{default:t}}},7933:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=(0,r.default)({}),u=i.default.svg.symbol(),l=function(t){return t.value},c=n.keyAccessor();n.keyAccessor((function(t){return c(t)[0]})),n.valueAccessor((function(t){return c(t)[1]})),n.colorAccessor((function(){return n._groupName}));var d=function(t){return"translate("+n.x()(n.keyAccessor()(t))+","+n.y()(n.valueAccessor()(t))+")"},h=3,f=5,p=0;function m(t,e){var r=n.selectAll(".chart-body path.symbol").filter((function(){return t(i.default.select(this))})),o=u.size();u.size(Math.pow(e,2)),(0,s.transition)(r,n.transitionDuration()).attr("d",u),u.size(o)}function _(t){var e=n.selectAll(".chart-body path.symbol").each((function(e){this.filtered=t&&t.isFiltered(e.key)}));(0,s.transition)(e,n.transitionDuration()).attr("d",u)}return u.size((function(t){return l(t)?this.filtered?Math.pow(f,2):Math.pow(h,2):p})),(0,s.override)(n,"_filter",(function(t){return arguments.length?n.__filter(a.filters.RangedTwoDimensionalFilter(t)):n.__filter()})),n.plotData=function(){var t=n.chartBodyG().selectAll("path.symbol").data(n.data());t.enter().append("path").attr("class","symbol").attr("opacity",0).attr("fill",n.getColor).attr("transform",d),(0,s.transition)(t,n.transitionDuration()).attr("opacity",(function(t){return l(t)?1:0})).attr("fill",n.getColor).attr("transform",d).attr("d",u),(0,s.transition)(t.exit(),n.transitionDuration()).attr("opacity",0).remove()},n.existenceAccessor=function(t){return arguments.length?(l=t,this):l},n.symbol=function(t){return arguments.length?(u.type(t),n):u.type()},n.symbolSize=function(t){return arguments.length?(h=t,n):h},n.highlightedSize=function(t){return arguments.length?(f=t,n):f},n.hiddenSize=function(t){return arguments.length?(p=t,n):p},n.legendables=function(){return[{chart:n,name:n._groupName,color:n.getColor()}]},n.legendHighlight=function(t){m((function(e){return e.attr("fill")===t.color}),f),n.selectAll(".chart-body path.symbol").filter((function(){return i.default.select(this).attr("fill")!==t.color})).classed("fadeout",!0)},n.legendReset=function(t){m((function(e){return e.attr("fill")===t.color}),h),n.selectAll(".chart-body path.symbol").filter((function(){return i.default.select(this).attr("fill")!==t.color})).classed("fadeout",!1)},n.setHandlePaths=function(){},n.extendBrush=function(){var t=n.brush().extent();return n.round()&&(t[0]=t[0].map(n.round()),t[1]=t[1].map(n.round()),n.g().select(".brush").call(n.brush().extent(t))),t},n.brushIsEmpty=function(t){return n.brush().empty()||!t||t[0][0]>=t[1][0]||t[0][1]>=t[1][1]},n._brushing=function(){var t=n.extendBrush();if(n.redrawBrush(n.g()),n.brushIsEmpty(t))o.events.trigger((function(){n.filterAll(),n.redrawGroup()})),_(!1);else{var e=a.filters.RangedTwoDimensionalFilter(t);o.events.trigger((function(){n.filterAll(),n.filter(e),n.redrawGroup()}),s.constants.EVENT_DELAY),_(e)}},n.setBrushY=function(t){t.call(n.brush().y(n.y()))},n.anchor(t,e)};var r=u(n(1007)),i=u(n(5680)),o=n(7467),a=n(2496),s=n(791);function u(t){return t&&t.__esModule?t:{default:t}}},7100:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DAYS=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],e.MONTHS=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],e.QUARTERS=["Q1","Q2","Q3","Q4"],e.HOURS=["12AM","1AM","2AM","3AM","4AM","5AM","6AM","7AM","8AM","9AM","10AM","11AM","12PM","1PM","2PM","3PM","4PM","5PM","6PM","7PM","8PM","9PM","10PM","11PM"]},1320:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SPINNER_DELAY=1e3},6253:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LockTracker=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();e.startRenderTime=y,e.startRedrawTime=function(){return d},e.resetRedrawStack=v,e.redrawStackEmpty=function(t){return _.isEmpty(t)},e.renderStackEmpty=function(t){return m.isEmpty(t)},e.isEqualToRedrawCount=function(t){return++l===t},e.incrementRenderStack=function(){return a++},e.resetRenderStack=function(){u=0},e.isEqualToRenderCount=function(t){return++u===t},e.redrawAllAsync=function(t,e,n){if((0,o.refreshDisabled)()){var r=e?o.chartRegistry.listAll():o.chartRegistry.list(t);return Promise.resolve(r)}return y()?_.start(t,e,(function(){var r=s++;d=new Date;var i=function(){var i=e?o.chartRegistry.listAll():o.chartRegistry.list(t);return n&&(i=i.filter((function(t){return t.__dcFlag__!==n.__dcFlag__}))),i.map((function(t){return t.expireCache(),t._invokeDataFetchListener(),t.isHeatMap?t.renderAsync(r,i.length).catch((function(e){throw t._invokeDataErrorListener(e),e})):t.redrawAsync(r,i.length).catch((function(e){throw t._invokeDataErrorListener(e),e}))}))};return null!==(0,o.renderlet)()&&(0,o.renderlet)(t),g()?x().then((function(){return Promise.all(i())})).catch((function(t){throw console.log(t),v(),t})):Promise.all(i()).catch((function(t){throw console.log(t),v(),t}))})):Promise.reject("redrawAllAsync() is called before renderAllAsync(), please call renderAllAsync() first.")},e.renderAllAsync=function(t,e){if((0,o.refreshDisabled)()){var n=e?o.chartRegistry.listAll():o.chartRegistry.list(t);return Promise.resolve(n)}return m.start(t,e,(function(){var n=a++;c=new Date;var r=function(){var r=e?o.chartRegistry.listAll():o.chartRegistry.list(t);return r.map((function(t){return t.expireCache(),t.renderAsync(n,r.length)}))};return null!==(0,o.renderlet)()&&(0,o.renderlet)(t),g()?x().then((function(){return Promise.all(r())})):Promise.all(r())}))},e.groupAll=g,e.getLastFilteredSizeAsync=x,e.lastFilteredSize=function(t){return f[t]},e.setLastFilteredSize=function(t,e){f[t]=e},e.resetState=function(){h={},f={}};var o=n(791),a=0,s=0,u=0,l=0,c=null,d=null,h={},f={},p=e.LockTracker=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.all=null,this.groups={},this.pendingAll=null,this.pendingGroups={}}return i(t,[{key:"shouldStart",value:function(t,e){return!this.all&&(e?0===Object.keys(this.groups).length:!this.groups[t])}},{key:"isEmpty",value:function(t){return void 0!==t?this.shouldStart(t,!1):this.shouldStart(null,!0)}},{key:"start",value:function(t,e,n){var r=this;if(this.shouldStart(t,e))return this._run(t,e,n);if(this.pendingAll)return this.pendingAll;if(this.pendingGroups[t])return this.pendingGroups[t];var i=this.all||(e?Promise.all(Object.values(this.groups).map((function(t){return t.catch((function(){return[]}))}))):this.groups[t]);if(e){var o=function(){return r.pendingAll=null,r._run(t,e,n)};i=i.then(o,o),this.pendingAll=i}else{var a=function(){return delete r.pendingGroups[t],r.pendingAll?r.pendingAll:r._run(t,e,n)};i=i.then(a,a),this.pendingGroups[t]=i}return i}},{key:"_run",value:function(t,e,n){var r=this,i=function(){e?r.all=null:delete r.groups[t]},o=null;try{o=n()}catch(t){o=Promise.reject(t)}return o=o.then((function(t){return i(),t}),(function(t){throw i(),t})),e?this.all=o:this.groups[t]=o,o}}]),t}(),m=new p,_=new p;function y(){return c}function v(){l=0}function g(t){if(!arguments.length){for(var e in h)if(h.hasOwnProperty(e))return h;return null}return h[t.getCrossfilterId()]=t,h}function x(t){var e=[],n=null;if("number"==typeof t?n=t:"object"===(void 0===t?"undefined":r(t))&&"function"==typeof t.getCrossfilterId&&(n=t.getCrossfilterId()),null!==n){var i=h[n];return i?i.valueAsync().then((function(t){return f[n]=t,t})):new Promise((function(t){return t("The group with crossfilterId "+n+" is not an active groupAll() group")}))}return t?new Promise((function(t){return t("The argument to getLastFilteredSizeAsync must be a crossfilterId or a group/groupAll object, or call getLastFilteredSizeAsync without an argument to calculate all groupAlls")})):Promise.all(Object.keys(h).map((function(t){return e.push(t),h[t].valueAsync()}))).then((function(t){for(var n=0;n<t.length;++n)f[e[n]]=t[n]}))}},791:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.round=e.units=e.chartRegistry=e.constants=void 0,e.logging=function(t){if(!arguments.length)return o;o=t},e.sampledCount=function(t){if(!arguments.length)return a;a=t},e.incrementSampledCount=function(){return a++},e.decrementSampledCount=function(){return a--},e.refreshDisabled=function(t){if(!arguments.length)return s;s=t},e.disableRefresh=function(){s=!0},e.enableRefresh=function(){s=!1},e.globalTransitionDuration=function(t){if(!arguments.length)return u;u=t},e.disableTransitions=function(t){if(!arguments.length)return c;c=t},e.registerChart=function(t,e){h.register(t,e)},e.getChart=function(t){return h.listAll().reduce((function(e,n){return n.__dcFlag__===t?n:e}),null)},e.deregisterChart=function(t,e){h.deregister(t,e)},e.hasChart=function(t){return h.has(t)},e.deregisterAllCharts=function(t){h.clear(t)},e.filterAll=function(t){for(var e=h.list(t),n=0;n<e.length;++n)e[n].filterAll()},e.refocusAll=function(t){for(var e=h.list(t),n=0;n<e.length;++n)e[n].focus&&e[n].focus()},e.transition=f,e.optionalTransition=function(t,e,n,r){return t?function(t){return f(t,e,n,r)}:function(t){return t}},e.afterTransition=function(t,e){if(t.empty()||!t.duration)e.call(t);else{var n=0;t.each((function(){++n})).each("end",(function(){--n||e.call(t)}))}},e.override=function(t,e,n){var r=t[e];t["_"+e]=r,t[e]=n},e.renderlet=function(t){if(!arguments.length)return l;l=t},e.instanceOfChart=function(t){return t instanceof Object&&t.__dcFlag__&&!0};var r=n(5209);function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var o=!1,a=0,s=!1,u=null,l=null,c=!1,d=e.constants={CHART_CLASS:"dc-chart",DEBUG_GROUP_CLASS:"debug",STACK_CLASS:"stack",DESELECTED_CLASS:"deselected",SELECTED_CLASS:"selected",NODE_INDEX_NAME:"__index__",GROUP_INDEX_NAME:"__group_index__",DEFAULT_CHART_GROUP:"__default_chart_group__",NEGLIGIBLE_NUMBER:1e-10,ACCENT_CLASS:"accented",EVENT_DELAY:0},h=e.chartRegistry=function(){var t={};function e(e){return e||(e=d.DEFAULT_CHART_GROUP),t[e]||(t[e]=[]),e}return{has:function(e){for(var n in t)if(t[n].indexOf(e)>=0)return!0;return!1},register:function(n,r){Array.isArray(r)?r.forEach((function(r){return t[e(r)].push(n)})):t[e(r)].push(n)},deregister:function(n,r){if(Array.isArray(r))r.forEach((function(i){r=e(i);for(var o=0;o<t[r].length;o++)if(t[r][o].anchorName()===n.anchorName()){t[r].splice(o,1);break}}));else{r=e(r);for(var i=0;i<t[r].length;i++)if(t[r][i].anchorName()===n.anchorName()){t[r].splice(i,1);break}}},clear:function(e){Array.isArray(e)?e.forEach((function(e){return delete t[e]})):e?delete t[e]:t={}},list:function(n){return Array.isArray(n)?n.reduce((function(n,r){return[].concat(i(n),i(t[e(r)]))}),[]).filter((function(t,e,n){return n.indexOf(t)===e})):(n=e(n),t[n])},listAll:function(){return Object.keys(t).reduce((function(e,n){return e.concat(t[n])}),[]).filter((function(t,e,n){return n.indexOf(t)===e}))}}}();function f(t,e,n,r){if(e<=0||void 0===e||c)return t;var i=t.transition(r).duration(e);return"function"==typeof n&&n(i),i}var p=e.units={};p.integers=function(t,e){return Math.abs(e-t)},p.ordinal=function(t,e,n){return n},p.fp={},p.fp.precision=function(t){var e=function t(e,n){var i=Math.abs((n-e)/t.resolution);return r.utils.isNegligible(i-Math.floor(i))?Math.floor(i):Math.ceil(i)};return e.resolution=t,e};var m=e.round={};m.floor=function(t){return Math.floor(t)},m.ceil=function(t){return Math.ceil(t)},m.round=function(t){return Math.round(t)}},4097:(t,e)=>{"use strict";function n(t){var e=t||"Unexpected internal error";this.message=e,this.toString=function(){return e},this.stack=(new Error).stack}function r(){n.apply(this,arguments)}function i(){n.apply(this,arguments)}Object.defineProperty(e,"__esModule",{value:!0}),e.Exception=n,e.InvalidStateException=r,e.BadArgumentException=i,n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,r.prototype=Object.create(n.prototype),r.prototype.constructor=r,i.prototype=Object.create(n.prototype),i.prototype.constructor=i,e.DestroyedChartError=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.name="DestroyedChartError",n.message=t||"Chart was destroyed before operation completed",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Error),e}()},7467:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=e.events={current:null};n.trigger=function(t,e){e?(n.current=t,setTimeout((function(){t===n.current&&t()}),e)):t()}},2496:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.filters=void 0;var r=n(7038),i=e.filters={};i.RangedFilter=function(t,e){var n=new Array(t,e);return n.isFiltered=function(t){return t>=this[0]&&t<=this[1]},n.filterType="RangedFilter",n},i.TwoDimensionalFilter=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(null===t)return null;if(t===Symbol.for("clear"))return t;var e=(0,r.normalizeFiltersArray)(t);return e.isFiltered=function(t){return t.length&&t.length===e.length&&t[0]===e[0]&&t[1]===e[1]},e.filterType="TwoDimensionalFilter",e},i.RangedTwoDimensionalFilter=function(t){if(null===t)return null;if(t===Symbol.for("clear"))return t;var e,n=t;return e=n[0]instanceof Array?[[Math.min(t[0][0],t[1][0]),Math.min(t[0][1],t[1][1])],[Math.max(t[0][0],t[1][0]),Math.max(t[0][1],t[1][1])]]:[[t[0],-1/0],[t[1],1/0]],n.isFiltered=function(t){var n=void 0,r=void 0;if(t instanceof Array){if(2!==t.length)return!1;n=t[0],r=t[1]}else n=t,r=e[0][1];return n>=e[0][0]&&n<e[1][0]&&r>=e[0][1]&&r<e[1][1]},n.filterType="RangedTwoDimensionalFilter",n}},5579:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseFactsFromCustomSQL=e.legendCont=e.legend=e.legendContinuous=e.spinnerMixin=e.scatterMixin=e.rasterMixin=e.rasterLayer=e.rasterLayerPolyMixin=e.rasterLayerPointMixin=e.rasterLayerHeatmapMixin=e.mapMixin=e.marginMixin=e.stackMixin=e.coordinateGridRasterMixin=e.coordinateGridMixin=e.colorMixin=e.capMixin=e.bubbleMixin=e.baseMixin=e.asyncMixin=e.countWidget=e.boxPlot=e.mapdTable=e.scatterPlot=e.rowChart=e.rasterChart=e.numberChart=e.lineChart=e.pieChart=e.heatMap=e.geoChoroplethChart=e.dataGrid=e.dataCount=e.compositeChart=e.cloudChart=e.bubbleChart=e.barChart=e.bubbleOverlay=e.errors=e.d3=void 0;var r=n(791);Object.keys(r).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})}));var i=n(6253);Object.keys(i).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})}));var o=n(7467);Object.keys(o).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})}));var a=n(2496);Object.keys(a).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}})}));var s=n(5209);Object.keys(s).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return s[t]}})}));var u=n(5357);Object.keys(u).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return u[t]}})}));var l=n(5514);Object.defineProperty(e,"bubbleOverlay",{enumerable:!0,get:function(){return K(l).default}});var c=n(402);Object.defineProperty(e,"barChart",{enumerable:!0,get:function(){return K(c).default}});var d=n(526);Object.defineProperty(e,"bubbleChart",{enumerable:!0,get:function(){return K(d).default}});var h=n(2209);Object.defineProperty(e,"cloudChart",{enumerable:!0,get:function(){return K(h).default}});var f=n(2861);Object.defineProperty(e,"compositeChart",{enumerable:!0,get:function(){return K(f).default}});var p=n(6761);Object.defineProperty(e,"dataCount",{enumerable:!0,get:function(){return K(p).default}});var m=n(3926);Object.defineProperty(e,"dataGrid",{enumerable:!0,get:function(){return K(m).default}});var _=n(3243);Object.defineProperty(e,"geoChoroplethChart",{enumerable:!0,get:function(){return K(_).default}});var y=n(1693);Object.defineProperty(e,"heatMap",{enumerable:!0,get:function(){return K(y).default}});var v=n(3613);Object.defineProperty(e,"pieChart",{enumerable:!0,get:function(){return K(v).default}});var g=n(2935);Object.defineProperty(e,"lineChart",{enumerable:!0,get:function(){return K(g).default}});var x=n(1177);Object.defineProperty(e,"numberChart",{enumerable:!0,get:function(){return K(x).default}});var b=n(7491);Object.defineProperty(e,"rasterChart",{enumerable:!0,get:function(){return K(b).default}});var w=n(7881);Object.defineProperty(e,"rowChart",{enumerable:!0,get:function(){return K(w).default}});var M=n(7933);Object.defineProperty(e,"scatterPlot",{enumerable:!0,get:function(){return K(M).default}});var L=n(7940);Object.defineProperty(e,"mapdTable",{enumerable:!0,get:function(){return K(L).default}});var k=n(7696);Object.defineProperty(e,"boxPlot",{enumerable:!0,get:function(){return K(k).default}});var T=n(445);Object.defineProperty(e,"countWidget",{enumerable:!0,get:function(){return K(T).default}});var S=n(1402);Object.defineProperty(e,"asyncMixin",{enumerable:!0,get:function(){return K(S).default}});var E=n(7831);Object.defineProperty(e,"baseMixin",{enumerable:!0,get:function(){return K(E).default}});var A=n(7074);Object.defineProperty(e,"bubbleMixin",{enumerable:!0,get:function(){return K(A).default}});var D=n(6733);Object.defineProperty(e,"capMixin",{enumerable:!0,get:function(){return K(D).default}});var C=n(7399);Object.defineProperty(e,"colorMixin",{enumerable:!0,get:function(){return K(C).default}});var P=n(1007);Object.defineProperty(e,"coordinateGridMixin",{enumerable:!0,get:function(){return K(P).default}});var I=n(1561);Object.defineProperty(e,"coordinateGridRasterMixin",{enumerable:!0,get:function(){return K(I).default}});var O=n(9825);Object.defineProperty(e,"stackMixin",{enumerable:!0,get:function(){return K(O).default}});var R=n(4880);Object.defineProperty(e,"marginMixin",{enumerable:!0,get:function(){return K(R).default}});var Y=n(6207);Object.defineProperty(e,"mapMixin",{enumerable:!0,get:function(){return K(Y).default}});var F=n(4830);Object.defineProperty(e,"rasterLayerHeatmapMixin",{enumerable:!0,get:function(){return K(F).default}});var j=n(8033);Object.defineProperty(e,"rasterLayerPointMixin",{enumerable:!0,get:function(){return K(j).default}});var z=n(4558);Object.defineProperty(e,"rasterLayerPolyMixin",{enumerable:!0,get:function(){return K(z).default}});var N=n(2345);Object.defineProperty(e,"rasterLayer",{enumerable:!0,get:function(){return K(N).default}});var B=n(8302);Object.defineProperty(e,"rasterMixin",{enumerable:!0,get:function(){return K(B).default}});var U=n(5811);Object.defineProperty(e,"scatterMixin",{enumerable:!0,get:function(){return K(U).default}});var H=n(1706);Object.defineProperty(e,"spinnerMixin",{enumerable:!0,get:function(){return K(H).default}});var V=n(2438);Object.defineProperty(e,"legendContinuous",{enumerable:!0,get:function(){return K(V).default}});var W=n(6912);Object.defineProperty(e,"legend",{enumerable:!0,get:function(){return K(W).default}});var G=n(2467);Object.defineProperty(e,"legendCont",{enumerable:!0,get:function(){return K(G).default}});var q=n(5769);Object.defineProperty(e,"parseFactsFromCustomSQL",{enumerable:!0,get:function(){return K(q).default}});var X=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(5680)),Z=n(4097);function K(t){return t&&t.__esModule?t:{default:t}}n(2350),n(396),n(99),n(2285),n(9336),"test"!=={NODE_ENV:"production"}.BABEL_ENV&&(window.mapboxgl=n(6158)),e.d3=X,e.errors={Exception:Z.Exception,InvalidStateException:Z.InvalidStateException,BadArgumentException:Z.BadArgumentException}},1402:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=["dataFetch","dataError"],n=i.default.dispatch.apply(i.default,e),r=t.on.bind(t);t.dataCache=null,t.queryId=0;var s=function(t,e){t.allAsync(e)};return t.on=function(i,o){var a=i.includes(".")?i.slice(0,i.indexOf(".")):i;return-1===e.indexOf(a)?r(i,o):n.on(i,o),t},t._invokeDataFetchListener=function(){n.dataFetch(t)},t._invokeDataErrorListener=function(e){n.dataError(t,e)},t.dataAsync=function(e){return s.call(t,t.group(),e)},t.getDataAsync=function(){return s},t.setDataAsync=function(e){return s=e,t.expireCache(),t},t.data((function(e){return null!==t.dataCache?t.dataCache:(console.log("Warning: Deprecate sync method .data()"),e.all())})),t.renderAsync=function(e,n){if((0,a.refreshDisabled)())return Promise.resolve();t.hasOwnProperty("setSample")&&t.setSample();var r=t.queryId++;return new Promise((function(i,a){var s=function(t,e){t?a(t):i(e)};return t._invokeDataFetchListener(),t.dataAsync((function(i,u){i?(t._invokeDataErrorListener(i),(0,o.resetRenderStack)(),a(i)):t.render(r,e,n,u,s)}))}))},t.redrawAsync=function(e,n){if((0,a.refreshDisabled)())return Promise.resolve();t.hasOwnProperty("setSample")&&t.setSample();var r=t.queryId++;return new Promise((function(i,a){var s=function(t,e){t?a(t):i(e)};t._invokeDataFetchListener(),t.dataAsync((function(i,u){i?(t._invokeDataErrorListener(i),(0,o.resetRedrawStack)(),a(i)):t.redraw(r,e,n,u,s)}))}))},t.redrawGroup=function(){function e(t){(0,a.logging)()&&console.log("Redraw Group Error",t)}return t.commitHandler()?t.commitHandler()(!1,(function(n){n?e(n):(0,o.redrawAllAsync)(t.chartGroup()).catch((function(t){return e(t)}))})):(0,o.redrawAllAsync)(t.chartGroup()).catch((function(t){return e(t)})),t},t};var r,i=(r=n(5680))&&r.__esModule?r:{default:r},o=n(6253),a=n(791)},7831:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){t.__dcFlag__=r.utils.uniqueId();var e=void 0,n=void 0,y=void 0,v=void 0,g=void 0,x=void 0,b=void 0,w=!0,M=!1,L=null,k=null,T=null,S=null,E=200,A=function(t){var e=t&&t.getBoundingClientRect&&t.getBoundingClientRect().width;return e&&e>E?e:E},D=A,C=200,P=function(t){var e=t&&t.getBoundingClientRect&&t.getBoundingClientRect().height;return e&&e>C?e:C},I=P,O=(0,r.pluck)("key"),R=(0,r.pluck)("key"),Y=(0,r.pluck)("val"),F=!1,j=function(e){var n=t.keyAccessor()(e),r=t.valueAccessor()(e);return(n instanceof Date?n.toISOString():n)+": "+(r instanceof Date?r.toISOString():r)},z=!0,N=!0,B=500,U=r.printers.filters,H=["dimension","group"],V=i.constants.DEFAULT_CHART_GROUP,W=l.default.dispatch("preRender","postRender","preRedraw","postRedraw","filtered","zoomed","renderlet","pretransition","bboxFiltered"),G=void 0,q=void 0,X=void 0,Z=void 0,K=void 0;t.isCountChart=function(){return!1};var J=[],$=function(t,e){if(0===e.length)return e},Q=function(t){return t.all()};function tt(){g&&g.attr("width",t.width()).attr("height",t.height())}function et(e){if(!t[e]||!t[e]())throw new c.InvalidStateException("Mandatory attribute chart."+e+" is missing on chart[#"+t.anchorName()+"]")}function nt(e){if(Array.isArray(e)&&t.colorDomain&&G&&"quantitative"===G.legendType()&&(!G.isLocked||!G.isLocked())){var n=l.default.extent(e,t.colorAccessor());t.colorDomain(n)}}t.height=function(e){return arguments.length?(I=l.default.functor(e||P),t):I(v.node())},t.width=function(e){return arguments.length?(D=l.default.functor(e||A),t):D(v.node())},t.accent=function(){},t.unAccent=function(){},t.minWidth=function(e){return arguments.length?(E=e,t):E},t.minHeight=function(e){return arguments.length?(C=e,t):C},t.dimension=function(n){return arguments.length?(e=n,t.expireCache(),t):e},t.data=function(e){return arguments.length?(Q=l.default.functor(e),t.expireCache(),t):Q.call(t,n)},t.group=function(e,r){return arguments.length?(n=e,t._groupName=r,t.expireCache(),t):n},t.binParams=function(e){return arguments.length?(0,u.createBinParams)(t,e):t.group().binParams()},t.ordering=function(e){return arguments.length?(_ordering=e,crossfilter.quicksort.by(_ordering),t.expireCache(),t):_ordering},t._computeOrderedGroups=function(t){return t.slice(0)},t.select=function(t){return v.select(t)},t.selectAll=function(t){return v?v.selectAll(t):null},t.anchor=function(e,n){if(!arguments.length)return y;if((0,i.instanceOfChart)(e))y=e.anchor(),v=e.root(),x=!0;else{if(!e)throw new c.BadArgumentException("parent must be defined");y=e.select&&e.classed?e.node():e,(v=l.default.select(y)).classed(i.constants.CHART_CLASS,!0),(0,i.deregisterChart)(t,n),(0,i.registerChart)(t,n),x=!1}return V=n,t},t.anchorName=function(){var e=t.anchor();return e&&e.id?e.id:e&&e.replace?e.replace("#",""):"dc-chart"+t.chartID()},t.root=function(e){return arguments.length?(v=e,t):v},t.svg=function(e){return arguments.length?(g=e,t):g},t.resetSvg=function(){return t.root().html(""),t.generateSvg()},t.generateSvg=function(){return g=t.root().append("div").attr("class","svg-wrapper").append("svg"),tt(),g},t.popup=function(e){return arguments.length?(b=e,t):b},t.enablePopup=function(e){return w=e,t},t.popupIsEnabled=function(){return w},t.generatePopup=function(){return t.select(".chart-popup").remove(),(b=t.root().append("div").attr("class","chart-popup")).append("div").attr("class","chart-popup-box").append("div").attr("class","chart-popup-content"),b},t.popupCoordinates=function(e){if(!(navigator.userAgent.toLowerCase().indexOf("firefox")>-1)||l.default.selectAll(".react-grid-item.cssTransforms").empty()||!l.default.selectAll(".react-grid-layout.chart-edit-mode").empty())return e;var n=t.root().node().getBoundingClientRect(),r=l.default.select(".react-grid-layout").node().getBoundingClientRect().top;return[e[0]-n.x,e[1]-Math.abs(r-n.y)+40]},t.isTargeting=function(e){return arguments.length?(M=e,t):M},t.colorByExpr=function(e){return arguments.length?(L=e,t):L},t.filterPrinter=function(e){return arguments.length?(U=e,t):U},t.controlsUseVisibility=function(e){return arguments.length?(N=e,t):N},t.turnOnControls=function(){if(v){var e=t.controlsUseVisibility()?"visibility":"display";t.selectAll(".reset").style(e,null),t.selectAll(".filter").text(U(t.filters())).style(e,null)}return t},t.turnOffControls=function(){if(v){var e=t.controlsUseVisibility()?"visibility":"display",n=t.controlsUseVisibility()?"hidden":"none";t.selectAll(".reset").style(e,n),t.selectAll(".filter").style(e,n).text(t.filter())}return t},t.transitionDuration=function(e){return arguments.length?(B=e,t):null!=(0,i.globalTransitionDuration)()?(0,i.globalTransitionDuration)():B},t._mandatoryAttributes=function(e){return arguments.length?(H=e,t):H},t.render=function(e,n,r,a,s){if(!(0,i.refreshDisabled)()){t.dataCache=null!=a?a:null,v&&v.style("height",t.height()+"px").style("width",t.width()+"px"),W.preRender(t,a),H&&H.forEach(et),nt(a);var u=t._doRender(a);if(G&&t.colorDomain&&G.render(),t.generatePopup(),t._activateRenderlets("postRender",a),null!=n&&(0,o.isEqualToRenderCount)(r)){if((0,i.logging)()){var l=new Date-dc._startRenderTime;console.log("Render elapsed: "+l+" ms")}if((0,i.globalTransitionDuration)(null),(0,o.resetRenderStack)(),(0,o.renderStackEmpty)(null))return(0,o.renderAllAsync)(null).then((function(t){s(null,t)})).catch((function(t){s(t)}))}return s&&s(null,u||t),u}},t._activateRenderlets=function(e,n){W.pretransition(t,n),t.transitionDuration()>0&&g?g.transition().duration(t.transitionDuration()).each("end",(function(){W.renderlet(t,n),e&&W[e](t,n)})):(W.renderlet(t,n),e&&W[e](t,n))},t.redraw=function(e,n,r,a,s){if(!(0,i.refreshDisabled)()){t.dataCache=null!=a?a:null,tt(),W.preRedraw(t,a),nt(a);var u=t._doRedraw(a);if(G&&t.colorDomain&&G.render(),t._activateRenderlets("postRedraw",a),null!=n&&(0,o.isEqualToRedrawCount)(r)){if((0,i.logging)()){var l=new Date-dc._startRedrawTime;console.log("Redraw elapsed: "+l+" ms")}(0,i.globalTransitionDuration)(null),(0,o.resetRedrawStack)();var c=t.chartGroup();if((0,o.redrawStackEmpty)(c))return(0,o.redrawAllAsync)(c).then((function(t){s(null,t)})).catch((function(t){s(t)}))}return s&&s(null,u||t),u}},t.commitHandler=function(e){return arguments.length?(q=e,t):q},t.redrawGroup=function(e){return q?q(!1,(function(n,r){n?(console.log(n),e&&e(n)):dc.redrawAll(t.chartGroup(),e)})):dc.redrawAll(t.chartGroup(),e),t},t.renderGroup=function(e){return q?q(!1,(function(n,r){n?(console.log(n),e&&e(n)):dc.renderAll(t.chartGroup(),e)})):dc.renderAll(t.chartGroup(),e),t},t._invokeFilteredListener=function(e,n){void 0!==e&&W.filtered(t,e,n)},t._invokeZoomedListener=function(){W.zoomed(t)},t._invokeBboxFilteredListener=function(){return W.bboxFiltered(t)};var rt=function(t,e){return void 0===e?t.length>0:t.some((function(t){return e<=t&&e>=t}))};t.hasFilterHandler=function(e){return arguments.length?(rt=e,t):rt},t.hasFilter=function(t){return rt(J,t)};var it=function(t,e){for(var n=0;n<t.length;n++){if(r.utils.deepEquals(t[n],e)){t.splice(n,1);break}if(t[n]<=e&&t[n]>=e){t.splice(n,1);break}}return t};t.removeFilterHandler=function(e){return arguments.length?(it=e,t):it};var ot=function(t,e){return t.push(e),t};t.addFilterHandler=function(e){return arguments.length?(ot=e,t):ot};var at=function(t){return[]};function st(){if(t.dimension()&&t.dimension().filter){var e=$(t.dimension(),J);J=e||J}}return t.resetFilterHandler=function(e){return arguments.length?(at=e,t):at},t.replaceFilter=function(e){J=[],t.filter(e)},t.filter=function(e,n){return arguments.length?((n=void 0!==n&&n)!==t.filtersInverse()&&(J=at(J),t.filtersInverse(n)),e instanceof Array&&e[0]instanceof Array&&!e.isFiltered?e[0].forEach((function(e){t.hasFilter(e)?it(J,e):ot(J,e)})):e===Symbol.for("clear")?filters=at(J):t.hasFilter(e)?it(J,e):ot(J,e),st(),t._invokeFilteredListener(e,n),null!==v&&t.hasFilter()?t.turnOnControls():t.turnOffControls(),t):J.length>0?J[0]:null},t.filters=function(){return J},t.accentSelected=function(t){l.default.select(t).classed(i.constants.ACCENT_CLASS,!0)},t.unAccentSelected=function(t){l.default.select(t).classed(i.constants.ACCENT_CLASS,!1)},t.highlightSelected=function(t){l.default.select(t).classed(i.constants.SELECTED_CLASS,!0),l.default.select(t).classed(i.constants.DESELECTED_CLASS,!1)},t.fadeDeselected=function(t){l.default.select(t).classed(i.constants.SELECTED_CLASS,!1),l.default.select(t).classed(i.constants.DESELECTED_CLASS,!0)},t.resetHighlight=function(t){l.default.select(t).classed(i.constants.SELECTED_CLASS,!1),l.default.select(t).classed(i.constants.DESELECTED_CLASS,!1)},t.onClick=function(e){var n,r=t.keyAccessor()(e);n=Array.isArray(r)&&r.length||!Array.isArray(r)&&void 0!==r?r:e,t.handleFilterClick(l.default.event,n)},t.filterHandler=function(e){return arguments.length?($=e,t):$},t._doRender=function(){return t},t._doRedraw=function(){return t},t.legendables=function(){return[]},t.legendLock=function(e){return arguments.length?(k=e,t):k},t.legendUnlock=function(e){return arguments.length?(T=e,t):T},t.legendInputChange=function(e){return arguments.length?(S=e,t):S},t.legendHighlight=function(){},t.legendReset=function(){},t.legendToggle=function(){},t.isLegendableHidden=function(){return!1},t.keyAccessor=function(e){return arguments.length?(O=e,t):O},t.valueAccessor=function(e){return arguments.length?(Y=e,t):Y},t.label=function(e,n){return arguments.length?(R=e,(void 0===n||n)&&(F=!0),t):R},t.renderLabel=function(e){return arguments.length?(F=e,t):F},t.title=function(e){return arguments.length?(j=e,t):j},t.renderTitle=function(e){return arguments.length?(z=e,t):z},t.renderlet=f.logger.deprecate((function(e){return t.on("renderlet."+r.utils.uniqueId(),e),t}),'chart.renderlet has been deprecated.  Please use chart.on("renderlet.<renderletKey>", renderletFunction)'),t.chartGroup=function(e){return arguments.length?(x||(0,i.deregisterChart)(t,V),V=e,x||(0,i.registerChart)(t,V),t):V},t.expireCache=function(){return t},t.destroyChart=function(){return t},t.legend=function(e){return arguments.length?((G=e)&&G.parent(t),t):G},t.legendContinuous=function(e){return arguments.length?((K=e).parent(t),t):K},t.chartID=function(){return t.__dcFlag__},t.options=function(e){var n=["anchor","group","xAxisLabel","yAxisLabel","stack","title","point","getColor","overlayGeoJson"];for(var r in e)"function"==typeof t[r]?e[r]instanceof Array&&-1!==n.indexOf(r)?t[r].apply(t,e[r]):t[r].call(t,e[r]):dc.logger.debug("Not a valid option setter name: "+r);return t},t.on=function(e,n){return W.on(e,n),t},t.debounce=function(t,e,n){var r=void 0;return function(){var i=this,o=arguments,a=function(){r=null,n||t.apply(i,o)},s=n&&!r;clearTimeout(r),r=setTimeout(a,e),s&&t.apply(i,o)}},t.showNullDimensions=function(e){return arguments.length?(t.expireCache(),t.dimension().setEliminateNull(!e),t):!t.dimension().getEliminateNull()},t.keyAccessor(p.multipleKeysAccessorForCap),t.ordering=function(){},t.rangeChartEnabled=function(){return!1},t.isTime=function(){return null},t.isMulti=function(){return!1},t.valueFormatter=function(e){return arguments.length?(X=e,t):X},t.dateFormatter=function(e){return arguments.length?(Z=e,t):Z},t.getMeasureName=function(){var e=t.group().reduce();return e&&e[0]?e[0].measureName:null},t=(0,s.default)((0,d.default)((0,h.default)((0,m.default)((0,_.default)((0,a.default)(t))))))};var r=n(5209),i=n(791),o=n(6253),a=y(n(1402)),s=y(n(2656)),u=n(2814),l=y(n(5680)),c=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(4097)),d=y(n(1480)),h=y(n(2169)),f=n(5357),p=n(2446),m=y(n(3268)),_=y(n(1706));function y(t){return t&&t.__esModule?t:{default:t}}},2775:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.roundTimeBin=l,e.default=function(t){var e="auto",n=["bin"],r=o.default.dispatch.apply(o.default,n),c=t.on.bind(t);return t.on=function(e,i){return-1===n.indexOf(e)?c(e,i):r.on(e,i),t},t._invokeBinListener=function(e){"undefined"!==e&&r.bin(t,e)},t.binInputOptions=function(){return i.BIN_INPUT_OPTIONS},t.timeBinInputVal=function(n){return void 0===n?e:(e=n,t)},t.binBrush=function(e){var n=e?t.rangeChart().extendBrush():null,r=e?n:t.extendBrush(),i=t.group().binParams()[0]?t.group().binParams()[0].binBounds:null,o=e?n:i;if(r[0].getTime&&r[0].getTime()!==r[1].getTime()){var c=t.group().binParams()[0].timeBin,d=r.map((function(t){return l(t,c,"round")}));if(d[0]<o[0]&&(d[0]=l(r[0],c,"ceil")),d[1]>o[1]&&(d[1]=l(r[1],c,"floor")),d[0]>=d[1]&&(d[0]=l(r[0],c,"floor"),d[1]=l(r[1],c,"ceil")),!isNaN(t.xAxisMax())&&d[0].getTime()===t.xAxisMax().getTime()){var h=t.binInputOptions().filter((function(e){return t.group().binParams()[0].timeBin===e.val}))[0].numSeconds;d[0]=new Date(d[0].getTime()-1e3*h),d[0]=l(d[0],c,"round")}if(!isNaN(t.xAxisMin())&&d[1].getTime()===t.xAxisMin().getTime()){var f=t.binInputOptions().filter((function(e){return t.group().binParams()[0].timeBin===e.val}))[0].numSeconds;d[1]=new Date(d[1].getTime()+1e3*f),d[1]=l(d[1],c,"round")}var p=s.filters.RangedFilter(d[0],d[1]);a.events.trigger((function(){t.replaceFilter(p)}),u.constants.EVENT_DELAY)}},t.changeBinVal=function(e){t.timeBinInputVal(e);for(var n=t.stack().slice(),r=function(r){var o=n[r].group.binParams().map((function(t,n){if(n===r&&t){var o=t.binBounds,a=t.numBins,s="auto"===e,u=o.map((function(t){return t.getTime()}));t.timeBin=s?(0,i.autoBinParams)(u,a):e,t.auto=s}return t}));0===r?t.group(n[r].group.binParams(o),n[r].name):t.stack(n[r].group.binParams(o),n[r].name,n[r].accessor)},o=0;o<n.length;o++)r(o);return t._invokeBinListener(e),t.renderAsync().then((function(){t.binBrush()}))},t};var r,i=n(2814),o=(r=n(5680))&&r.__esModule?r:{default:r},a=n(7467),s=n(2496),u=n(791);function l(t,e,n){if(!e||"millisecond"===e)return t;if(o.default.time[e])return o.default.time[e].utc[n](t);var r="quarter"===e?"month":"year",i=[];switch(e){case"quarter":i=[-2,2,3];break;case"decade":i=[-5,5,10];break;case"century":i=[-50,50,100]}var a="round"===n?i[0]:"ceil"===n?0:-i[2],s="round"===n?i[1]:"ceil"===n?i[2]:0,u=o.default.time[r].offset(t,a),l=o.default.time[r].offset(t,s);return o.default.time[r].utc.round(o.default.time[r+"s"](u,l,i[2])[0])}},7074:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=.3,n=.004,a=2;t.BUBBLE_NODE_CLASS="node",t.BUBBLE_CLASS="bubble",t.MIN_RADIUS=10,t.accent=function(e){t.selectAll("g."+t.BUBBLE_NODE_CLASS).each((function(n){n.key0===e&&t.accentSelected(this)}))},t.unAccent=function(e){t.selectAll("g."+t.BUBBLE_NODE_CLASS).each((function(n){n.key0===e&&t.unAccentSelected(this)}))},(t=(0,r.default)(t)).renderLabel(!0),t.setDataAsync((function(e,n){if(void 0!==t.cap())return e.topAsync(t.cap()).then((function(t){n(null,t)})).catch((function(t){n(t)}));e.allAsync(n)})),t.data((function(e){return null!==t.dataCache?t.dataCache:e.top(void 0!==t.cap()?t.cap():1/0)}));var s=i.default.scale.linear().domain([0,100]),u=function(t){return t.r};t.r=function(e){return arguments.length?(s=e,t):s},t.radiusValueAccessor=function(e){return arguments.length?(u=e,t):u},t.rMin=function(){return i.default.min(t.data(),(function(e){return t.radiusValueAccessor()(e)}))},t.rMax=function(){return i.default.max(t.data(),(function(e){return t.radiusValueAccessor()(e)}))},t.bubbleR=function(e){var n=t.radiusValueAccessor()(e),r=t.r()(n);return(isNaN(r)||n<=0)&&(r=0),r};var l=function(e){return t.label()(e)},c=function(e){return function(e){return t.bubbleR(e)>a}(e)?"all":"none"};t._doRenderLabel=function(e){if(t.renderLabel()){var n=e.select("text");n.empty()&&(n=e.append("text").attr("text-anchor","middle").attr("dy",".3em").on("click",t.onClick)),n.attr("opacity",0).attr("pointer-events",c).html(l),(0,o.transition)(n,t.transitionDuration()).attr("opacity",1),t.hideOverlappedLabels()}},t.doUpdateLabels=function(e){t._doRenderLabel(e)};var d=function(e){return t.title()(e)};return t._doRenderTitles=function(e){t.renderTitle()&&e.select("title").empty()&&e.append("title").text(d)},t.doUpdateTitles=function(e){t.renderTitle()&&e.selectAll("title").text(d)},t.minRadius=function(e){return arguments.length?(t.MIN_RADIUS=e,t):t.MIN_RADIUS},t.minRadiusWithLabel=function(e){return arguments.length?(a=e,t):a},t.maxBubbleRelativeSize=function(n){return arguments.length?(e=n,t):e},t.minBubbleRelativeSize=function(e){return arguments.length?(n=e,t):n},t.fadeDeselectedArea=function(){t.hasFilter()?t.selectAll("g."+t.BUBBLE_NODE_CLASS).each((function(e){t.isSelectedNode(e)?t.highlightSelected(this):t.fadeDeselected(this)})):t.selectAll("g."+t.BUBBLE_NODE_CLASS).each((function(){t.resetHighlight(this)}))},t.isSelectedNode=function(e){return t.hasFilter(e.key0)^t.filtersInverse()},t.onClick=function(e){var n=Array.isArray(e.key0)?e.key0.map((function(t){return t.hasOwnProperty("value")?t.value:t})):e.key0;t.handleFilterClick(i.default.event,n),t.updatePopup(e)},t};var r=a(n(7399)),i=a(n(5680)),o=n(791);function a(t){return t&&t.__esModule?t:{default:t}}},6733:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=void 0,n="desc",r="Others",a=function(e){var n=i.default.sum(e,t.valueAccessor()),o=t.group().all(),a=i.default.sum(o,t.valueAccessor()),s=e.map(t.keyAccessor()),u=o.map(t.keyAccessor()),l=i.default.set(s),c=u.filter((function(t){return!l.has(t)}));return a>n?e.concat([{others:c,key:r,value:a-n}]):e};return t._mandatoryAttributes().push("cap"),t.cappedKeyAccessor=function(e,n){return e.others?e.key0:t.keyAccessor()(e,n)},t.cappedValueAccessor=function(e,n){return e.others?e.value:t.valueAccessor()(e,n)},t.ordering=function(e){return t.expireCache(),e?(n=e,t):n},t.setDataAsync((function(r,i){function o(e,n){if(e)i(e);else{var r=t._computeOrderedGroups(n);i(null,a?a(r):r)}}if(void 0===e)null!=t.dataCache?i(null,t._computeOrderedGroups(t.dataCache)):r.allAsync((function(e,n){e?i(e):i(null,t._computeOrderedGroups(n))}));else if(null!=t.dataCache)o(null,t.dataCache);else{if("desc"===n)return r.topAsync(e).then((function(t){o(null,t)})).catch((function(t){o(t)}));"asc"===n&&r.bottomAsync(e,void 0,void 0,o)}})),t.expireCache=function(){t.dataCache=null},t.data((function(n){if(t.dataCache||console.warn("Empty dataCache. Please fetch new data"),void 0===e)return t._computeOrderedGroups(t.dataCache);var r=t.dataCache;return a?a(r):r})),t.cap=function(n){return arguments.length?(e=n,t.expireCache(),t):e},t.othersLabel=function(e){return arguments.length?(r=e,t):r},t.othersGrouper=function(e){return arguments.length?(a=e,t):a},(0,o.override)(t,"onClick",(function(e){e.others&&t.filter([e.others]),t._onClick&&t._onClick(e)})),t};var r,i=(r=n(5680))&&r.__esModule?r:{default:r},o=n(791)},7399:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=i.default.scale.category20c(),n=!0,r=function(e){return t.keyAccessor()(e)};return t.colors=function(n){return arguments.length?(e=n instanceof Array?i.default.scale.quantize().range(n):i.default.functor(n),t):e},t.ordinalColors=function(e){return t.colors(i.default.scale.ordinal().range(e))},t.linearColors=function(e){return t.colors(i.default.scale.linear().range(e).interpolate(i.default.interpolateHcl))},t.colorAccessor=function(e){return arguments.length?(r=e,n=!1,t):r},t.defaultColorAccessor=function(){return n},t.colorDomain=function(n){return arguments.length?(e.domain(n),t):e.domain()},t.calculateColorDomain=function(){var n=[i.default.min(t.data(),t.colorAccessor()),i.default.max(t.data(),t.colorAccessor())];return e.domain(n),t},t.getColor=function(n,i){if(void 0===n)return"#e2e2e2";var o=t.colors().range(),a=o[Math.floor(o.length/2)];return e(r.call(this,n,i))||a},t.colorCalculator=function(e){return arguments.length?(t.getColor=e,t):t.getColor},t};var r,i=(r=n(5680))&&r.__esModule?r:{default:r}},1007:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=!1;(t=(0,c.default)((0,a.default)((0,d.default)((0,i.default)(t))))).colors(s.default.scale.category10()),t._mandatoryAttributes().push("x"),t._rangeFocused=!1,t._rangeInput=!1,t._binInput=!1,t._binSnap=!1;var n=!1,p=n,_=n;function y(){U=!0,G&&(t.x().domain(mt(t.x().domain(),w)),K&&t.x().domain(mt(t.x().domain(),K.x().domain())));var e=t.x().domain(),n=l.filters.RangedFilter(e[0],e[1]);t.replaceFilter(n),t.rescale(),(0,f.redrawAllAsync)(t.chartGroup())}var v=void 0,g=void 0,x=void 0,b=void 0,w=void 0,M=s.default.svg.axis().orient("bottom"),L=r.units.integers,k=0,T=!1,S=void 0,E=0,A=void 0,D=void 0,C=s.default.svg.axis().orient("left"),P=0,I=!1,O=void 0,R=0,Y=s.default.svg.brush(),F=!0,j=!1,z=void 0,N=!1,B=!1,U=!1,H=!1,V=void 0,W=[1,1/0],G=!0,q=s.default.behavior.zoom().on("zoom",y),X=s.default.behavior.zoom().on("zoom",null),Z=!1,K=void 0,J=void 0,$=!1,Q=0,tt=.5,et=0,nt=!1;function rt(e,n){t.isOrdinal()||!t.elasticX()||t.rangeChart()&&(!t.rangeChart()||t.rangeChart().filters().length)?(t.elasticX()||0===b.domain().length)&&b.domain(t._ordinalXDomain()):b.domain([t.xAxisMin(),t.xAxisMax()]);var i,o,a=b?b.domain():[];!n&&(o=a,(i=A)&&o&&i.length===o.length&&!i.some((function(t,e){var n=t instanceof Date&&!isNaN(t.getTime())?t.toISOString():t.toString(),r=o[e]instanceof Date&&!isNaN(o[e].getTime())?o[e].toISOString():o[e].toString();return t&&o[e]?n!==r:t===o[e]})))||t.rescale(),A=a,t.isOrdinal()?b.rangeBands([0,t.xAxisLength()],et,t._useOuterPadding()?tt:0):b.range([0,t.xAxisLength()]),t.xAxis().ticks(t.getNumTicksForXAxis()),function(e){var n=e.selectAll("g.vertical");if(B){n.empty()&&(n=e.insert("g",":first-child").attr("class","grid-line vertical").attr("transform","translate("+t.margins().left+","+t.margins().top+")"));var i=M.tickValues()?M.tickValues():"function"==typeof b.ticks?b.ticks(M.ticks()[0]):b.domain(),o=n.selectAll("line").data(i),a=o.enter().append("line").attr("x1",(function(t){return b(t)})).attr("y1",t._xAxisY()-t.margins().top).attr("x2",(function(t){return b(t)})).attr("y2",0).attr("opacity",0);(0,r.transition)(a,t.transitionDuration()).attr("opacity",1),(0,r.transition)(o,t.transitionDuration()).attr("x1",(function(t){return b(t)})).attr("y1",t._xAxisY()-t.margins().top).attr("x2",(function(t){return b(t)})).attr("y2",0),o.exit().remove()}else n.selectAll("line").remove()}(e),t.prepareLabelEdit("x"),t.prepareLockAxis("x")}function it(t,e){e.toCache&&_===n&&(_=C.tickFormat()),C.tickFormat(t),e.fromCache&&(_=n)}function ot(t,e){e.toCache&&p===n&&(p=M.tickFormat()),M.tickFormat(t),e.fromCache&&(p=n)}t.rescale=function(){return V=void 0,H=!0,t},t.resizing=function(){return H},t.rangeChart=function(e){return arguments.length?((K=e)&&K.focusChart(t),t):K},t.zoomScale=function(e){return arguments.length?(W=e,t):W},t.zoomOutRestrict=function(e){return arguments.length?(W[0]=e?1:0,G=e,t):G},t._generateG=function(e,n,r){return n?(x=r,g=n):(v=void 0===e?t.svg():e,g=v.append("g"),x=g.append("g").attr("class","chart-body").attr("transform","translate("+t.margins().left+", "+t.margins().top+")").attr("clip-path","url(#"+dt()+")"),g)},t.g=function(e){return arguments.length?(g=e,t):g},t.mouseZoomable=function(e){return arguments.length?($=e,t):$},t.chartBodyG=function(e){return arguments.length?(x=e,t):x},t.x=function(e){return arguments.length?(w=(b=e).domain(),t.rescale(),t):b},t.xOriginalDomain=function(e){return arguments.length?(w=e,t):w},t.xUnits=function(e){return arguments.length?(L=e,t):L},t.xAxis=function(e){return arguments.length?(M=e,t):M},t.elasticX=function(e){return arguments.length?(T=e,t):T},t.xAxisPadding=function(e){return arguments.length?(k=e,t):k},t.xUnitCount=function(){if(void 0===V){var e=t.xUnits()(t.x().domain()[0],t.x().domain()[1],t.x().domain());V=e instanceof Array?e.length:e}return V},t.useRightYAxis=function(e){return arguments.length?(nt=e,t):nt},t.isOrdinal=function(){return t.xUnits()===r.units.ordinal},t._useOuterPadding=function(){return!0},t._ordinalXDomain=function(){return t._computeOrderedGroups(t.data()).map(t.keyAccessor())},t.renderXAxis=function(e){var i,o,a,u,c,d,h=e.selectAll("g.x");i=t.group().binParams()[0]||{},o=t.x().domain(),a=t.dateFormatter(),u=t.valueFormatter(),c=Boolean(a&&a(new Date,t.xAxisLabel())),d=Boolean(u&&u(null,t.xAxisLabel())),o&&o[0]&&o[0]instanceof Date&&!i.extract&&c?ot((function(e){return a(e,t.xAxisLabel())}),{toCache:!0}):!i.extract&&d?ot((function(e){return u(e,t.xAxisLabel())}),{toCache:!0}):p!==n&&ot(p,{fromCache:!0}),h.empty()&&(h=e.append("g").attr("class","axis x").attr("transform","translate("+t.margins().left+","+t._xAxisY()+")"));var f=t.root();if(t.rangeInput()){var _=f.selectAll(".range-display");if(_.empty()){var y=(_=f.append("div").attr("class","range-display").style("right",t.margins().right+"px")).append("div");_.append("span").html(" &mdash; ");var v=_.append("div");y.append("input").attr("class","range-start-day range-day"),y.append("input").attr("class","range-start-time range-time"),v.append("input").attr("class","range-end-day range-day"),v.append("input").attr("class","range-end-time range-time"),_.selectAll("input").each((function(){s.default.select(this).on("focus",yt).on("keydown",(function(){13===s.default.event.keyCode&&function(e){var n=this||e,r=s.default.select(n),i=r.attr("value"),o=r.property("value"),a=(t.filter()||t.x().domain(),t.binInputOptions().filter((function(e){return t.group().binParams()[0].timeBin===e.val}))[0].numSeconds),u=a>3600?s.default.time.format.utc("%m-%d-%Y"):r.attr("class").indexOf("day")>=0?s.default.time.format.utc("%m-%d-%Y %I:%M%p"):s.default.time.format.utc("%b %d, %Y %I:%M%p"),c=a>3600?o:s.default.select(n.parentNode).selectAll(".range-day").property("value")+" "+s.default.select(n.parentNode).selectAll(".range-time").property("value"),d=u.parse(c);if(!d)return r.property("value",i),void n.blur();var h=t.rangeChart()?t.rangeChart():t,f=h.filter()||h.x().domain(),p=r.attr("class").indexOf("start")>=0?0:1,_=0===p?1:0;f[p]=d<h.xAxisMin()?h.xAxisMin():d>h.xAxisMax()?h.xAxisMax():d,a>3600&&(f[_]=s.default.time.day.utc.round(f[_])),f.sort((function(t,e){return t-e})),f[0].getTime()===f[1].getTime()&&(f[1]=new Date(f[1].getTime()+a*m)),t._binInput&&(f[1]=new Date(f[1].getTime()));var y=l.filters.RangedFilter(f[0],f[1]);h.replaceFilter(y),h.rescale(),h.redrawAsync().then((function(){t.rangeChart()&&(t._binSnap=t._binInput,t.focus(y),t.replaceFilter(y)),n.blur(),t.updateRangeInput(),t.redrawGroup()}))}(this)}))})),t.group().binParams()[0]&&t.group().binParams()[0].timeBin&&t.updateRangeInput(),t.root().select("div > .svg-wrapper").on("mouseover",(function(){_.selectAll("input").classed("active",!0)})).on("mouseleave",(function(){_.selectAll("input").classed("active",!1)}))}}var g=f.selectAll(".x-axis-label");!t.rangeChart()&&g.empty()&&(g=f.append("div").attr("class","x-axis-label")),t.rangeChart()||g.style("left",t.effectiveWidth()/2+t.margins().left+"px").text(t.xAxisLabel()),(0,r.transition)(h,t.transitionDuration()).attr("transform","translate("+t.margins().left+","+t._xAxisY()+")").call(t.xAxis()),t.updateBinInput()},t._xAxisY=function(){return t.height()-t.margins().bottom},t.xAxisLength=function(){return t.effectiveWidth()},t.xAxisLabel=function(e,n){return arguments.length?(S=e,t.margins().bottom-=E,E=void 0===n?12:n,t.margins().bottom+=E,t):S},t._prepareXAxis=rt,t._prepareYAxis=function(e){if(void 0===D||t.elasticY()){void 0===D&&(D=s.default.scale.linear());var n=t.yAxisMin()||0,r=t.yAxisMax()||0;D.domain([n,r]).rangeRound([t.yAxisHeight(),0])}D.range([t.yAxisHeight(),0]),(C=C.scale(D)).ticks(t.effectiveHeight()/C.scale().ticks().length<16?Math.ceil(t.effectiveHeight()/16):10),nt&&C.orient("right"),t._renderHorizontalGridLinesForAxis(e,D,C),t.prepareLockAxis("y")},t.renderYAxisAt=function(e,n,i){var o=t.g().selectAll("g."+e);o.empty()&&(o=t.g().append("g").attr("class","axis "+e).attr("transform","translate("+i+","+t.margins().top+")")),(0,r.transition)(o,t.transitionDuration()).attr("transform","translate("+i+","+t.margins().top+")").call(n)},t.renderYAxis=function(){var e,r=nt?t.width()-t.margins().right:t._yAxisX();(e=t.valueFormatter())&&e(null,t.yAxisLabel())?it((function(n){return e(n,t.yAxisLabel())}),{toCache:!0}):_!==n&&it(_,{fromCache:!0}),t.renderYAxisAt("y",C,r);var i=nt?t.width()-R:R,o=nt?90:-90;t.renderYAxisLabel("y",t.yAxisLabel(),o,i)},t._renderHorizontalGridLinesForAxis=function(e,n,i){var o=e.selectAll("g.horizontal");if(N){var a=i.tickValues()?i.tickValues():n.ticks(i.ticks()[0]);o.empty()&&(o=e.insert("g",":first-child").attr("class","grid-line horizontal").attr("transform","translate("+t.margins().left+","+t.margins().top+")"));var s=o.selectAll("line").data(a),u=s.enter().append("line").attr("x1",1).attr("y1",(function(t){return n(t)})).attr("x2",t.xAxisLength()).attr("y2",(function(t){return n(t)})).attr("opacity",0);(0,r.transition)(u,t.transitionDuration()).attr("opacity",1),(0,r.transition)(s,t.transitionDuration()).attr("x1",1).attr("y1",(function(t){return n(t)})).attr("x2",t.xAxisLength()).attr("y2",(function(t){return n(t)})),s.exit().remove()}else o.selectAll("line").remove()},t._yAxisX=function(){return t.useRightYAxis()?t.width()-t.margins().right:t.margins().left},t.yAxisLabel=function(e,n){return arguments.length?(O=e,t.margins().left-=R,R=void 0===n?12:n,t.margins().left+=R,t):O},t.y=function(e){return arguments.length?(D=e,t.rescale(),t):D},t.yAxis=function(e){return arguments.length?(C=e,t):C},t.elasticY=function(e){return arguments.length?(I=e,t):I},t.renderHorizontalGridLines=function(e){return arguments.length?(N=e,t):N},t.renderVerticalGridLines=function(e){return arguments.length?(B=e,t):B};var at=function(e){return function(n){return t.isHeatMap?t.keyAccessorNoFormat(e)(n):t.keyAccessor()(n)}},st=function(e){return function(n){return t.isHeatMap?t.valueAccessorNoFormat(e)(n):t.valueAccessor()(n)}};function ut(t,e){var n=!!t.binParams()[0]&&t.binParams()[0].extract;if(t.focusChart()&&e.length&&!n){var r=t.focusChart(),i=r.binParams();i[0]&&(i[0].binBounds=e,r.binParams(i)),t.brush().extent(e)}}function lt(t){if(t.binParams()[0]){var e=t.binParams()[0].extract;if(t.focusChart()&&!t.filters().length&&!e){var n=t.focusChart().binParams().map((function(t){return t}));n[0].binBounds=t.binParams()[0].binBounds,t.focusChart().binParams(n),t.focusChart().x().domain(t.x().domain().slice(0))}}}function ct(){var e=t._xAxisY()-t.margins().top;return e<0?0:e}function dt(){return t.anchorName().replace(/[ .#=\[\]]/g,"-")+"-clip"}function ht(){var e=h.utils.appendOrSelect(v,"defs"),n=dt(),r=h.utils.appendOrSelect(e,"#"+n,"clipPath").attr("id",n),i=2*Q;h.utils.appendOrSelect(r,"rect").attr("width",t.xAxisLength()+i).attr("height",t.yAxisHeight()+i).attr("transform","translate(-"+Q+", -"+Q+")")}function ft(e){t.isOrdinal()&&(F=!1),rt(t.g(),e),t._prepareYAxis(t.g()),t.plotData(),(t.elasticX()||H||e)&&t.renderXAxis(t.g()),(t.elasticY()||H||e)&&t.renderYAxis(t.g()),e?t.renderBrush(t.g(),!1):t.redrawBrush(t.g(),H),t.fadeDeselectedArea(),H=!1}function pt(){$?t._enableMouseZoom():Z&&t._disableMouseZoom()}function mt(t,e){var n=[];return n[0]=s.default.max([t[0],e[0]]),n[1]=s.default.min([t[1],e[1]]),n}function _t(t,e){return!t&&!e||!(!t||!e)&&(0===t.length&&0===e.length||t[0].valueOf()===e[0].valueOf()&&t[1].valueOf()===e[1].valueOf())}function yt(){this.select();var e=s.default.time.format.utc("%m-%d-%Y"),n=s.default.time.format.utc("%I:%M%p"),r=s.default.select(this),i=t.filter()||t.x().domain(),o=r.attr("class").indexOf("start")>=0?0:1;r.property("value",r.classed("range-day")?e(i[o]):n(i[o]))}return t.xAxisMin=function(){var e=s.default.min(t.data(),at()),n=s.default.max(t.data(),at(!0)),r=h.utils.subtract(e,k,n-e);return e instanceof Date?new Date(r):r},t.xAxisMax=function(){var e=s.default.max(t.data(),at(!0)),n=s.default.min(t.data(),at()),r=h.utils.add(e,k,e-n);return e instanceof Date?new Date(r):r},t.yAxisMin=function(){var e=s.default.min(t.data(),st()),n=s.default.max(t.data(),st(!0)),r=h.utils.subtract(e,P,n-e);return e instanceof Date?new Date(r):r},t.yAxisMax=function(){var e=s.default.max(t.data(),st(!0)),n=s.default.min(t.data(),st()),r=h.utils.add(e,P,e-n);return e instanceof Date?new Date(r):r},t.yAxisPadding=function(e){return arguments.length?(P=e,t):P},t.yAxisHeight=function(){var e=t.effectiveHeight();return e<0?0:e},t.round=function(e){return arguments.length?(z=e,t):z},t._rangeBandPadding=function(e){return arguments.length?(et=e,t):et},t._outerRangeBandPadding=function(e){return arguments.length?(tt=e,t):tt},(0,r.override)(t,"filter",(function(e,n){return arguments.length?(t._filter(e,n),e.length?(ut(t,e),t.brush().extent(e)):(lt(t),t.brush().clear()),t.rangeInput()&&t.updateRangeInput(),t):t._filter()})),t.brush=function(e){return arguments.length?(Y=e,t):Y},t.isBrushing=function(e){return arguments.length?(j=e,t):j},t.renderBrush=function(e){if(F){var n=e.select("g.brush").empty()?e.append("g"):e.select("g.brush");n.attr("class","brush").attr("transform","translate("+t.margins().left+","+t.margins().top+")").call(Y.x(t.x())),n.select("rect.extent").attr("clip-path","url(#"+dt()+")"),t.setBrushY(n,!1),t.setHandlePaths(n),Y.on("brush",t._brushing),Y.on("brushstart",(function(){j=!0,t._disableMouseZoom(),(0,r.disableTransitions)(!0)})),Y.on("brushend",(function(){j=!1,pt(),(0,r.disableTransitions)(!1)})),t.hasFilter()&&t.redrawBrush(e,!1)}},t.brushSnap=function(){s.default.event.sourceEvent&&t.binBrush()},t.triggerReplaceFilter=function(t){H=!1},t.setHandlePaths=function(e){e.selectAll(".resize").append("path").attr("d",t.resizeHandlePath)},t.setBrushY=function(e){e.selectAll(".brush rect").attr("height",ct()),e.selectAll(".resize path").attr("d",t.resizeHandlePath)},t.extendBrush=function(){var e=Y.extent();return t.round()&&(e[0]=e.map(t.round())[0],e[1]=e.map(t.round())[1],g.select(".brush").call(Y.extent(e))),e},t.brushIsEmpty=function(t){return Y.empty()||!t||t[1]<=t[0]},t._brushing=function(){t.brushSnap();var e=t.extendBrush();if(t.redrawBrush(g,!1),t.brushIsEmpty(e))u.events.trigger((function(){t.focusChart()&&t.focusChart().filterAll(),t.filterAll(),t.redrawGroup()}),r.constants.EVENT_DELAY);else{var n=l.filters.RangedFilter(e[0],e[1]);u.events.trigger((function(){(0,r.globalTransitionDuration)(10),t.replaceFilter(n),t.redrawGroup()}),r.constants.EVENT_DELAY)}t.rangeInput()?t.updateRangeInput():t.focusChart()&&t.focusChart().rangeInput()&&t.focusChart().updateRangeInput()},t.redrawBrush=function(e,n){if(F){t.filter()&&(t.brush().empty()||t._redrawBrushFlag)&&(t._redrawBrushFlag=!1,t.brush().extent(t.filter()));var i=(0,r.optionalTransition)(n,t.transitionDuration())(e.select("g.brush"));t.setBrushY(i),i.call(t.brush().x(t.x()).extent(t.brush().extent()))}t.fadeDeselectedArea()},t.fadeDeselectedArea=function(){},t.resizeHandlePath=function(t){var e=Number("e"===t),n=e?1:-1,r=ct()/3;return"M"+.5*n+","+r+"A6,6 0 0 "+e+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*r+"ZM"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)},t.clipPadding=function(e){return arguments.length?(Q=e,t):Q},t._preprocessData=function(t){},t._doRender=function(){return t._redrawBrushFlag=!0,t.resetSvg(),t._preprocessData(),t._generateG(),t.root().classed("coordinate-chart",!0),ht(),ft(!0),pt(),e=!0,t},t._doRedraw=function(){return e?(t._preprocessData(),ft(!1),ht(),t):t._doRender()},t._enableMouseZoom=function(){Z=!0,q.x(t.x()).scaleExtent(W).size([t.width(),t.height()]).duration(t.transitionDuration()),t.root().call(q)},t._disableMouseZoom=function(){t.root().call(X)},t.focus=function(e){!function(t){return t instanceof Array&&t.length>1}(e)?t.x().domain(w):t.x().domain(e),q.x(t.x()),y()},t.refocused=function(){return U},t.focusChart=function(e){return arguments.length?(J=e,t.on("filtered",(function(t){J.rangeFocused(!0),t.filter()?_t(t.filter(),J.filter())||u.events.trigger((function(){J.focus(t.filter())})):u.events.trigger((function(){J.x().domain(J.xOriginalDomain())})),J.rangeFocused(!1)})),t):J},t.brushOn=function(e){return arguments.length?(F=e,t):F},t.popupTextAccessor=function(e){return function(){var n=t.dateFormatter(),r=null,i=e[0].datum.data.key0;return Array.isArray(i)&&i[0]&&(i=void 0!==i[0].value?i[0].value:i[0]),n&&i instanceof Date&&(r=n),r&&r(i)||h.utils.formatValue(i)}},t.getNumTicksForXAxis=function(){var e=t.x().domain(),n=t.group().binParams()[0],r=t.effectiveWidth();if(n&&n.extract){var i=e[e.length-1]-e[0];return r/i<64?Math.ceil(r/64):i}return r/t.xAxis().scale().ticks().length<64?Math.ceil(r/64):10},t.rangeFocused=function(e){return arguments.length?(t._rangeFocused=e,t):t._rangeFocused},t.rangeInput=function(e){return arguments.length?(t._rangeInput=e,t):t._rangeInput},t.binInput=function(e){return arguments.length?(t._binInput=e,t):t._binInput},t.updateRangeInput=function(){var e=s.default.time.format.utc("%b %d, %Y"),n=s.default.time.format.utc("%I:%M%p"),r=t.filter()||t.x().domain(),i=t.root().selectAll(".range-display"),o=t.binInputOptions().filter((function(e){return t.group().binParams()[0].timeBin===e.val}))[0].numSeconds;i.select(".range-start-day").property("value",e(r[0])).attr("value",e(r[0])),i.select(".range-start-time").classed("disable",o>3600).property("value",n(r[0])).attr("value",n(r[0])),i.select(".range-end-day").property("value",e(r[1])).attr("value",e(r[1])),i.select(".range-end-time").classed("disable",o>3600).property("value",n(r[1])).attr("value",n(r[1]))},t.renderYAxisLabel=function(e,n,r){var i=t.root(),o=i.selectAll(".y-axis-label");if(o.empty()&&(o=i.append("div").attr("class","y-axis-label")),""!==n){var a=t.rangeChart()?t.rangeChart().height()-t.rangeChart().margins().bottom+t.margins().bottom:t.margins().bottom;o.style("top",(t.effectiveHeight()+a)/2+t.margins().top+"px").text(n)}t.prepareLabelEdit("y")},t.updateBinInput=function(){if(t.binInput()&&t.group().binParams()[0]){var e=t.root(),n=e.selectAll(".bin-row");n.empty()&&(n=e.append("div").attr("class","bin-row").style("left",t.margins().left+"px")),n.html("").append("span").text("BIN:");var r=n.selectAll(".bin-row-item").data(t.binInputOptions()).enter(),i=Math.abs((t.x().domain()[0].getTime()-t.x().domain()[1].getTime())/1e3),o=t.group().binParams()[0],a=o.auto,s=o.timeBin,u=o.numBins;r.append("div").attr("class","bin-row-item").classed("inactive",(function(t){return function(t){return t.numSeconds&&i/t.numSeconds>u||t.numSeconds&&i/t.numSeconds<2}(t)})).classed("active",(function(t){return!("auto"!==t.val||!a)||(a?void 0:t.val===s)})).classed("underline",(function(t){return a&&t.val===s})).text((function(t){return t.label})).on("click",(function(e){return t.changeBinVal(e.val)}))}},t=(0,o.default)(t)};var r=n(791),i=p(n(7831)),o=p(n(2775)),a=p(n(7399)),s=p(n(5680)),u=n(7467),l=n(2496),c=p(n(3953)),d=p(n(4880)),h=n(5209),f=n(6253);function p(t){return t&&t.__esModule?t:{default:t}}var m=1e3},1561:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default=function(t,e,n){e="undefined"==typeof mapboxgl?e:mapboxgl;var f=u.default.svg.brush(),p=!1,m=[1,1],_=[0,0],y=[[0,1],[0,1]],v=null,g=[],x=null,b=!1,w=!1,M=!1,L=M,k=M;function T(e,n,r){x||(x=[[e,n]]);var i=t.xDim(),o=t.yDim();i&&i.filter(e),o&&o.filter(n),"function"==typeof t.getLayers&&t.getLayers().forEach((function(t){"function"==typeof t.xDim&&"function"==typeof t.yDim&&(i=t.xDim(),o=t.yDim(),null!==i&&null!==o&&(i.filter(e),o.filter(n)))})),g=r?[]:[[e,n]],t._invokeFilteredListener(g,!1),t.xRangeFilter(e),t.yRangeFilter(n)}(t=(0,d.default)((0,s.default)((0,l.default)((0,o.default)(t)))))._mandatoryAttributes().push("x","y"),t.resetSvg=function(){return t.root().selectAll("*:not(.legend)").remove(),t.generateSvg()},t.filters=function(){return g},t.filter=function(e){if(null==e||e===Symbol.for("clear"))T((x=x||[[]])[0][0],x[0][1],!0);else{if(!Array.isArray(e)||2!==e.length)throw new Error("Invalid filter applied. Filter must be an array with two elements");T(e[0],e[1],!1)}return t};var S=void 0,E=void 0,A=void 0,D=void 0,C=void 0,P=void 0,I=void 0,O=void 0,R=void 0,Y=void 0,F=void 0,j=!1,z=u.default.svg.axis().orient("bottom"),N=i.units.integers,B=0,U=!1,H=void 0,V=0,W=void 0,G=u.default.svg.axis().orient("left"),q=0,X=!1,Z=void 0,K=0,J=!1,$=!1,Q=!1,tt=void 0,et=.5,nt=0,rt=!1,it=[[-1/0,-1/0],[1/0,1/0]];function ot(){if(!R){var t=D,e=new Uint8Array([0,0,0,0]),n=R=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,e)}}function at(){R&&(D.deleteTexture(R),R=0),Y=null}function st(e,n,r){var i=D,o=function(e,o){if(!w){if(e)throw e;if(r===v){var a=t.x().domain(),s=t.y().domain();if(a[0]===n[0][0]&&a[1]===n[1][0]&&s[0]===n[2][1]&&s[1]===n[0][1]){R||ot(),Y&&o.width==Y.width&&o.height==Y.height?(i.bindTexture(i.TEXTURE_2D,R),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,o)):(i.bindTexture(i.TEXTURE_2D,R),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,o),Y||(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR))),Y=o,m[0]=1,m[1]=1,_[0]=0,_[1]=0;var u=t.xRange(),l=t.yRange();y[0][0]=u[0],y[0][1]=u[1],y[1][0]=l[0],y[1][1]=l[1],st()}}}};e&&c.default.get(e,{responseType:"arraybuffer"}).then((function(t){var e=t.data,n=new window.Image,r=window.URL||window.webkitURL;n.onload=function(){o(null,n),r.revokeObjectURL(n.src)},n.onerror=function(){return o(new Error("Could not load scatterplot image"))};var i=new window.Blob([new Uint8Array(e)],{type:"image/png"});n.src=e.byteLength?r.createObjectURL(i):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="})),null!=r&&(v=r);var a=window.devicePixelRatio||1;i.viewport(0,0,t.effectiveWidth()*a,t.effectiveHeight()*a),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.enable(i.BLEND),i.useProgram(C),i.bindBuffer(i.ARRAY_BUFFER,O),i.uniform2fv(C.u_texCoordsScale,m),i.uniform2fv(C.u_texCoordsOffset,_),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,R),i.uniform1i(C.u_sampler,0),i.drawArrays(i.TRIANGLE_STRIP,0,4)}t._fitToMaxBounds=function(t,e){var n=t[0][0],r=t[0][1],i=t[1][0],o=t[1][1],a=i-n,s=o-r,u=it[0][0],l=it[0][1],c=it[1][0],d=it[1][1],h=[[Math.max(n,u),Math.max(r,l)],[Math.min(i,c),Math.min(o,d)]];if(e){var f=a-(h[1][0]-h[0][0]),p=s-(h[1][1]-h[0][1]);0!==f&&(h[0][0]!==u?h[0][0]=Math.max(h[0][0]-f,u):h[1][0]!==c&&(h[1][0]=Math.min(h[1][0]+f,c))),0!==p&&(h[0][1]!==l?h[0][1]=Math.max(h[0][1]-p,l):h[1][1]!==d&&(h[1][1]=Math.min(h[1][1]+p,d)))}return h},t.maxBounds=function(e){if(!arguments.length)return it;if(!(e instanceof Array&&2===e.length&&e[0]instanceof Array&&2===e[0].length&&e[1]instanceof Array&&2===e[1].length))throw new Error("Invalid bounds argument. A bounds object should be: [[xmin, ymin], [xmax, ymax]]");return it=[[Math.min(e[0][0],e[1][0]),Math.min(e[0][1],e[1][1])],[Math.max(e[0][0],e[1][0]),Math.max(e[0][1],e[1][1])]],t},t.unproject=function(n){var r=t.x(),i=t.y(),o=r?r.invert(n.x):0,a=i?i.invert(n.y):0;return new e.Point(o,a)},t.enableInteractions=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!arguments.length)return j;if(j=Boolean(e),F){var r=t.map();F.getInteractionPropNames(t).forEach((function(t){r[t]&&((void 0===n[t]?j:Boolean(n[t]))?r[t].enable():(r[t].disable(),"dragPan"===t&&r[t].onMouseUp({button:0})))}))}return t},t.rescale=function(){return tt=void 0,Q=!0,t},t.resizing=function(){return Q},t._removeOverlay=function(){at()},t._generateG=function(r){void 0===r&&(r=t.svg());var i=r!==S;if(S=r,E&&!i||(E=S.append("g")),A){if(i){s=t.root().node();var o=A.node();s.appendChild(o)}}else{var s=t.root();A=s.append("canvas").attr("class","webgl-canvas").style("position","absolute");var u=s.node();!function(t){var e={alpha:!0,antialias:!0,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1};if(!(D=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw{name:"WebGL",message:"WebGL Not Enabled"};var n=D,r=C=n.createProgram(),i=P=n.createShader(n.FRAGMENT_SHADER);if(n.shaderSource(i,"precision mediump float;\n\nuniform sampler2D u_sampler;\n\nvarying vec2 v_texCoords;\n\nvoid main() {\n    if (v_texCoords[0] >= 0.0 && v_texCoords[0] <= 1.0 &&\n        v_texCoords[1] >= 0.0 && v_texCoords[1] <= 1.0) {\n        gl_FragColor = texture2D(u_sampler, v_texCoords);\n    }\n}"),n.compileShader(i),!n.getShaderParameter(i,n.COMPILE_STATUS))throw new Error("Error compiling fragment shader: "+n.getShaderInfoLog(i));n.attachShader(r,i);var o=I=n.createShader(n.VERTEX_SHADER);if(n.shaderSource(o,"precision mediump float;\nattribute vec2 a_pos;\nattribute vec2 a_texCoords;\n\nvarying vec2 v_texCoords;\nuniform vec2 u_texCoordsScale;\nuniform vec2 u_texCoordsOffset;\n\nvoid main(void) {\n    gl_Position = vec4(a_pos, 0, 1);\n\n    v_texCoords = u_texCoordsScale * a_texCoords + u_texCoordsOffset;\n    v_texCoords.y = (1.0 - v_texCoords.y);\n}"),n.compileShader(o),!n.getShaderParameter(o,n.COMPILE_STATUS))throw new Error("Error compiling vertex shader: "+n.getShaderInfoLog(o));if(n.attachShader(r,o),n.linkProgram(r),n.validateProgram(r),!n.getProgramParameter(r,n.LINK_STATUS))throw new Error("Error linking shader program: "+n.getProgramInfoLog(r));r.a_pos=n.getAttribLocation(r,"a_pos"),r.a_texCoords=n.getAttribLocation(r,"a_texCoords"),n.enableVertexAttribArray(r.a_pos),n.enableVertexAttribArray(r.a_texCoords),r.u_texCoordsScale=n.getUniformLocation(r,"u_texCoordsScale"),r.u_texCoordsOffset=n.getUniformLocation(r,"u_texCoordsOffset"),r.u_sampler=n.getUniformLocation(r,"u_sampler"),n.useProgram(r);var a=O=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,a),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]),n.STATIC_DRAW),n.vertexAttribPointer(C.a_pos,2,n.FLOAT,!1,16,0),n.vertexAttribPointer(C.a_texCoords,2,n.FLOAT,!1,16,8),ot()}(A.node()),F=(0,a.default)(t,u,y,m,_,T,ft,n,e,j)}return E},t.g=function(e){return arguments.length?(E=e,t):E},t.chartBody=function(t){return A},t.xOriginalDomain=function(){},t.xUnits=function(e){return arguments.length?(N=e,t):N},t.xAxis=function(e){return arguments.length?(z=e,t):z},t.elasticX=function(e){return arguments.length?(U=e,t):U},t.xAxisPadding=function(e){return arguments.length?(B=e,t):B},t.xUnitCount=function(){if(void 0===tt){var e=t.xUnits()(t.x().domain()[0],t.x().domain()[1],t.x().domain());tt=e instanceof Array?e.length:e}return tt},t.useRightYAxis=function(e){return arguments.length?(rt=e,t):rt},t.isOrdinal=function(){return t.xUnits()===i.units.ordinal},t._useOuterPadding=function(){return!0};var ut=u.default.time.format.utc.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%b",function(t){return t.getUTCMonth()}],["%Y",function(){return!0}]]);function lt(t,e){e.toCache&&L===M&&(L=z.tickFormat()),z.tickFormat(t),e.fromCache&&(L=M)}function ct(t,e){e.toCache&&k===M&&(k=G.tickFormat()),G.tickFormat(t),e.fromCache&&(k=M)}function dt(){b||(t.resetSvg(),t.svg().style("position","absolute"),t._generateG(),b=!0)}function ht(e,n,r){if(w)throw new h.DestroyedChartError;return dt(),t._preprocessData(),pt(!0,e,n,r),p=!0,t}function ft(e,n,r){if(w)throw new h.DestroyedChartError;return p?(t._preprocessData(),pt(!1,e,n,r),t):ht(e,n,r)}function pt(e,n,r,o){!function(){if(!w){var e=t.effectiveWidth(),n=t.effectiveHeight(),r=t.margins(),i=r.left,o=r.right,a=r.top,s=r.bottom,u=window.devicePixelRatio||1,l=A.style("width"),c=A.style("height");A.style("width",e+"px").style("height",n+"px").style("left",i+"px").style("top",a+"px").attr("width",e*u).attr("height",n*u),S.style("width",e+(o+i)+"px").style("height",n+(a+s)+"px").attr("width",(e+(o+i))*u).attr("height",(n+(a+s))*u),l===A.style("width")&&c===A.style("height")||t.map().fire("resize",{width:e,height:n,top:a,left:i})}}(),st(n,r,o);var a=e?t.transitionDuration():10;(function(e,n,r,o){var a,s,u,l,c,d,h,f=n.domain();!r&&(s=f,(a=W)&&s&&a.length===s.length&&!a.some((function(t,e){return t&&s[e]?t.toString()!==s[e].toString():t===s[e]})))||t.rescale(),W=f,n.range([0,Math.round(t.xAxisLength())]),z=z.scale(n),u=f[0]instanceof Date,l=t.dateFormatter(),c=t.valueFormatter(),d=Boolean(l&&l(new Date,t.xAxisLabel())),h=Boolean(c&&c(null,t.xAxisLabel())),u&&d?lt((function(e){return l(e,t.xAxisLabel())}),{toCache:!0}):u?lt(ut):h?lt((function(e){return c(e,t.xAxisLabel())}),{toCache:!0}):L!==M&&lt(L,{fromCache:!0}),z.ticks(t.effectiveWidth()/z.scale().ticks().length<64?Math.ceil(t.effectiveWidth()/64):10),t.prepareLabelEdit("x"),t.prepareLockAxis("x"),function(e,n,r){var o=e.selectAll("g.vertical");if($){o.empty()&&(o=e.insert("g",":first-child").attr("class","grid-line vertical").attr("transform","translate("+t.margins().left+","+t.margins().top+")"));var a=z.tickValues()?z.tickValues():"function"==typeof n.ticks?n.ticks(z.ticks()[0]):n.domain(),s=o.selectAll("line").data(a),u=s.enter().append("line").attr("x1",(function(t){return n(t)})).attr("y1",t._xAxisY()-t.margins().top).attr("x2",(function(t){return n(t)})).attr("y2",0).attr("opacity",0);void 0===r&&(r=t.transitionDuration()),(0,i.transition)(u,r).attr("opacity",1),(0,i.transition)(s,r).attr("x1",(function(t){return n(t)})).attr("y1",t._xAxisY()-t.margins().top).attr("x2",(function(t){return n(t)})).attr("y2",0),s.exit().remove()}else o.selectAll("line").remove()}(e,n,o)})(t.g(),t.x(),e,a),t._prepareYAxis(t.g(),t.y(),a),(t.elasticX()||Q||e)&&t.renderXAxis(t.g(),a),(t.elasticY()||Q||e)&&t.renderYAxis(t.g(),a),t.fadeDeselectedArea(),Q=!1,t.map().fire("render",{})}return t.renderXAxis=function(e,n){var r=e.selectAll("g.x");r.empty()&&(r=e.append("g").attr("class","axis x").attr("transform","translate("+t.margins().left+","+t._xAxisY()+")"));var o=t.root(),a=o.selectAll(".x-axis-label");a.empty()&&(a=o.append("div").attr("class","x-axis-label")),a.style("left",t.effectiveWidth()/2+t.margins().left+"px").text(t.xAxisLabel()),void 0===n&&(n=t.transitionDuration()),(0,i.transition)(r,n).attr("transform","translate("+t.margins().left+","+t._xAxisY()+")").call(z)},t._xAxisY=function(){return t.height()-t.margins().bottom},t.xAxisLength=function(){return t.effectiveWidth()},t.xAxisLabel=function(e,n){return arguments.length?(H=e,t.margins().bottom-=V,V=void 0===n?12:n,t.margins().bottom+=V,t):H},t._prepareYAxis=function(e,n,r){var i,o;n.range([Math.round(t.yAxisHeight()),0]),(G=G.scale(n)).ticks(t.effectiveHeight()/G.scale().ticks().length<16?Math.ceil(t.effectiveHeight()/16):10),rt&&G.orient("right"),i=t.dateFormatter(),o=t.valueFormatter(),Boolean(i&&i(new Date,t.yAxisLabel())),Boolean(o&&o(null,t.yAxisLabel()))?ct((function(e){return o(e,t.yAxisLabel())}),{toCache:!0}):k!==M&&ct(k,{fromCache:!0}),t._renderHorizontalGridLinesForAxis(e,n,G,r),t.prepareLabelEdit("y"),t.prepareLockAxis("y")},t.renderYAxisLabel=function(e,n,r,i){var o=t.root(),a=o.selectAll(".y-axis-label");a.empty()&&(a=o.append("div").attr("class","y-axis-label")),""!==n&&a.style("top",t.effectiveHeight()/2+t.margins().top+"px").text(n)},t.renderYAxisAt=function(e,n,r,o){var a=t.g().selectAll("g."+e);a.empty()&&(a=t.g().append("g").attr("class","axis "+e).attr("transform","translate("+r+","+t.margins().top+")")),void 0===o&&(o=t.transitionDuration()),(0,i.transition)(a,o).attr("transform","translate("+r+","+t.margins().top+")").call(n)},t.renderYAxis=function(e,n){var r=rt?t.width()-t.margins().right:t._yAxisX();t.renderYAxisAt("y",G,r,n);var i=rt?t.width()-K:K,o=rt?90:-90;t.renderYAxisLabel("y",t.yAxisLabel(),o,i)},t._renderHorizontalGridLinesForAxis=function(e,n,r,o){var a=e.selectAll("g.horizontal");if(J){var s=r.tickValues()?r.tickValues():n.ticks(r.ticks()[0]);a.empty()&&(a=e.insert("g",":first-child").attr("class","grid-line horizontal").attr("transform","translate("+t.margins().left+","+t.margins().top+")"));var u=a.selectAll("line").data(s),l=u.enter().append("line").attr("x1",1).attr("y1",(function(t){return n(t)})).attr("x2",t.xAxisLength()).attr("y2",(function(t){return n(t)})).attr("opacity",0);void 0===o&&(o=t.transitionDuration()),(0,i.transition)(l,o).attr("opacity",1),(0,i.transition)(u,o).attr("x1",1).attr("y1",(function(t){return n(t)})).attr("x2",t.xAxisLength()).attr("y2",(function(t){return n(t)})),u.exit().remove()}else a.selectAll("line").remove()},t._yAxisX=function(){return t.useRightYAxis()?t.width()-t.margins().right:t.margins().left},t.yAxisLabel=function(e,n){return arguments.length?(Z=e,t.margins().left-=K,K=void 0===n?12:n,t.margins().left+=K,t):Z},t.yAxis=function(e){return arguments.length?(G=e,t):G},t.elasticY=function(e){return arguments.length?(X=e,t):X},t.renderHorizontalGridLines=function(e){return arguments.length?(J=e,t):J},t.renderVerticalGridLines=function(e){return arguments.length?($=e,t):$},t.yAxisPadding=function(e){return arguments.length?(q=e,t):q},t.yAxisHeight=function(){return t.effectiveHeight()},t._rangeBandPadding=function(e){return arguments.length?(nt=e,t):nt},t._outerRangeBandPadding=function(e){return arguments.length?(et=e,t):et},(0,i.override)(t,"filter",(function(e,n){return arguments.length?(t._filter(e,n),e?t.brush().extent(e):t.brush().clear(),t):t._filter()})),t.brush=function(e){return arguments.length?(f=e,t):f},t.isBrushing=function(e){return arguments.length?(_isBrushing=e,t):_isBrushing},t.fadeDeselectedArea=function(){},t.resizeHandlePath=function(e){var n=Number("e"===e),r=n?1:-1,i=(t._xAxisY()-t.margins().top)/3;return"M"+.5*r+","+i+"A6,6 0 0 "+n+" "+6.5*r+","+(i+6)+"V"+(2*i-6)+"A6,6 0 0 "+n+" "+.5*r+","+2*i+"ZM"+2.5*r+","+(i+8)+"V"+(2*i-8)+"M"+4.5*r+","+(i+8)+"V"+(2*i-8)},t._preprocessData=function(){},t._doRender=function(){ht()},t._doRedraw=function(){ft()},t._drawScatterPlot=function(t,e,n,r){t?ht(e,n,r):ft(e,n,r)},t._destroyScatterPlot=function(){var t;w=!0,t=D,"object"===(void 0===C?"undefined":r(C))&&(t.deleteProgram(C),P&&t.deleteShader(P),I&&t.deleteShader(I),O&&t.deleteBuffer(O),C=P=I=O=0,at()),F&&F.destroy(),F=null,A&&A.parentNode&&A.parentNode.removeChild(node),A=null},t.init=function(){return dt(),new Promise((function(e,n){e(t)}))},t};var i=n(791),o=f(n(7831)),a=f(n(9353)),s=f(n(7399)),u=f(n(5680)),l=f(n(4880)),c=f(n(9669)),d=f(n(3953)),h=n(4097);function f(t){return t&&t.__esModule?t:{default:t}}},9336:(t,e,n)=>{"use strict";var r,i=(r=n(5680))&&r.__esModule?r:{default:r};!function(){function t(t){return[0,t.length-1]}function e(t){return[i.default.quantile(t,.25),i.default.quantile(t,.5),i.default.quantile(t,.75)]}i.default.box=function(){var n=1,r=1,o=0,a=null,s=Number,u=t,l=e,c=null;function d(t){t.each((function(t,e){t=t.map(s).sort(i.default.ascending);var d=i.default.select(this),h=t.length,f=t[0],p=t[h-1],m=t.quartiles=l(t),_=u&&u.call(this,t,e),y=_&&_.map((function(e){return t[e]})),v=_?i.default.range(0,_[0]).concat(i.default.range(_[1]+1,h)):i.default.range(h),g=i.default.scale.linear().domain(a&&a.call(this,t,e)||[f,p]).range([r,0]),x=this.__chart__||i.default.scale.linear().domain([0,1/0]).range(g.range());this.__chart__=g;var b=d.selectAll("line.center").data(y?[y]:[]);b.enter().insert("line","rect").attr("class","center").attr("x1",n/2).attr("y1",(function(t){return x(t[0])})).attr("x2",n/2).attr("y2",(function(t){return x(t[1])})).style("opacity",1e-6).transition().duration(o).style("opacity",1).attr("y1",(function(t){return g(t[0])})).attr("y2",(function(t){return g(t[1])})),b.transition().duration(o).style("opacity",1).attr("y1",(function(t){return g(t[0])})).attr("y2",(function(t){return g(t[1])})),b.exit().transition().duration(o).style("opacity",1e-6).attr("y1",(function(t){return g(t[0])})).attr("y2",(function(t){return g(t[1])})).remove();var w=d.selectAll("rect.box").data([m]);w.enter().append("rect").attr("class","box").attr("x",0).attr("y",(function(t){return x(t[2])})).attr("width",n).attr("height",(function(t){return x(t[0])-x(t[2])})).transition().duration(o).attr("y",(function(t){return g(t[2])})).attr("height",(function(t){return g(t[0])-g(t[2])})),w.transition().duration(o).attr("y",(function(t){return g(t[2])})).attr("height",(function(t){return g(t[0])-g(t[2])}));var M=d.selectAll("line.median").data([m[1]]);M.enter().append("line").attr("class","median").attr("x1",0).attr("y1",x).attr("x2",n).attr("y2",x).transition().duration(o).attr("y1",g).attr("y2",g),M.transition().duration(o).attr("y1",g).attr("y2",g);var L=d.selectAll("line.whisker").data(y||[]);L.enter().insert("line","circle, text").attr("class","whisker").attr("x1",0).attr("y1",x).attr("x2",n).attr("y2",x).style("opacity",1e-6).transition().duration(o).attr("y1",g).attr("y2",g).style("opacity",1),L.transition().duration(o).attr("y1",g).attr("y2",g).style("opacity",1),L.exit().transition().duration(o).attr("y1",g).attr("y2",g).style("opacity",1e-6).remove();var k=d.selectAll("circle.outlier").data(v,Number);k.enter().insert("circle","text").attr("class","outlier").attr("r",5).attr("cx",n/2).attr("cy",(function(e){return x(t[e])})).style("opacity",1e-6).transition().duration(o).attr("cy",(function(e){return g(t[e])})).style("opacity",1),k.transition().duration(o).attr("cy",(function(e){return g(t[e])})).style("opacity",1),k.exit().transition().duration(o).attr("cy",(function(e){return g(t[e])})).style("opacity",1e-6).remove();var T=c||g.tickFormat(8),S=d.selectAll("text.box").data(m);S.enter().append("text").attr("class","box").attr("dy",".3em").attr("dx",(function(t,e){return 1&e?6:-6})).attr("x",(function(t,e){return 1&e?n:0})).attr("y",x).attr("text-anchor",(function(t,e){return 1&e?"start":"end"})).text(T).transition().duration(o).attr("y",g),S.transition().duration(o).text(T).attr("y",g);var E=d.selectAll("text.whisker").data(y||[]);E.enter().append("text").attr("class","whisker").attr("dy",".3em").attr("dx",6).attr("x",n).attr("y",x).text(T).style("opacity",1e-6).transition().duration(o).attr("y",g).style("opacity",1),E.transition().duration(o).text(T).attr("y",g).style("opacity",1),E.exit().transition().duration(o).attr("y",g).style("opacity",1e-6).remove()})),i.default.timer.flush()}return d.width=function(t){return arguments.length?(n=t,d):n},d.height=function(t){return arguments.length?(r=t,d):r},d.tickFormat=function(t){return arguments.length?(c=t,d):c},d.duration=function(t){return arguments.length?(o=t,d):o},d.domain=function(t){return arguments.length?(a=null===t?t:i.default.functor(t),d):a},d.value=function(t){return arguments.length?(s=t,d):s},d.whiskers=function(t){return arguments.length?(u=t,d):u},d.quartiles=function(t){return arguments.length?(l=t,d):l},d}}()},9330:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t._scrollPos=0,t._expanded=!0,t._heightRatio=3,t._title="Legend",t._key="key0",t.legendType=function(){return"custom"},t.render=function(){if(null===document.getElementById("cursor")){t.parent().root().select(".dc-legend").remove();var e=t.parent().root().append("div").attr("class","dc-legend").classed("collapsed",!t._expanded),n=e.append("div").attr("class","dc-legend-header").text(t._expanded?t._title:"Legend").on("click",(function(){t._expanded=!t._expanded,t.render()}));if(t._expanded){n.append("div").attr("class","toggle-btn");var r=e.append("div").attr("class","dc-legend-body").style("max-height",t.parent().height()/t._heightRatio+"px").on("scroll",(function(){t._scrollPos=r.node().scrollTop})),i=t.legendables(),o=r.selectAll(".dc-legend-item").data(i).enter().append("div").attr("class","dc-legend-item");o.append("div").attr("class","legend-item-color").style("background",(function(t){return t?t.color:"#868686"})),o.append("div").attr("class","legend-item-text").text((function(t){return t.name}));var a=r.node();a&&(a.scrollTop=t._scrollPos)}}},t.removeLegend=function(){t.parent().root().select(".dc-legend").remove(),t.parent().legend(null)},t.legendables=function(){var e,n,r=t.parent().colors();return(e=r.domain(),n=r.range(),(e.length<n.length?e:n).map((function(t,r){return[e[r],n[r]]}))).map((function(e){return{name:e[0],color:e[1],chart:t.parent()}}))},t.setTitle=function(e){return t._title=e,t},t.setKey=function(e){return t._key=e,t},t}},2508:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=["updateBinBounds"],n=o.default.dispatch.apply(o.default,e),r=t.on.bind(t),a=t.getDataAsync();function s(e,n){if(!t.elasticX()||!t.binParams()[0]||t.rangeChart()&&t.rangeChart().filter())return a(e,n);e.getMinMaxWithFilters().then((function(r){if(!r)return a(e,n);t.binParams((0,i.adjust)((0,i.set)((0,i.lensProp)("binBounds"),[r.min_val,r.max_val]),0,t.binParams())),t.focusChart()&&t.filter()?t.focusChart()._invokeBinBoundsListener([r.min_val,r.max_val]):t._invokeBinBoundsListener([r.min_val,r.max_val]),a(e,n)})).catch((function(t){return n(t)}))}return t.on=function(i,o){var a=i.includes(".")?i.slice(0,i.indexOf(".")):i;return-1===e.indexOf(a)?r(i,o):n.on(i,o),t},t._invokeBinBoundsListener=function(e){void 0!==e&&n.updateBinBounds(t,e)},t.on("dataFetch.reBin",(function(){t.elasticX()&&t.getDataAsync()!==s&&(a=t.getDataAsync(),t.setDataAsync(s))})),t};var r,i=n(9133),o=(r=n(5680))&&r.__esModule?r:{default:r}},1480:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.addFilterHandler=a,e.hasFilterHandler=u,e.filterHandlerWithChartContext=l,e.default=function(t){var e=[],n=!1,r=!1,s=o;function c(){if(t.dimension()&&t.dimension().filter){var n=t.filterHandler()(t.dimension(),e);e=n||e}}return t.filters=function(){return e},t.replaceFilter=function(n){e=[],t.filter(n)},t.softFilterClear=function(e){return arguments.length?(n=e,t):n},t.filtersInverse=function(e){return arguments.length?(r=e,t):r},t.filterAll=function(e){return e?t.softFilterClear(!0):t.softFilterClear(!1),t.filter(Symbol.for("clear"))},t.filterHandler(l(t)),t.addFilterHandler(a),t.hasFilter=function(t){return s(e,t)},t.hasFilterHandler=function(e){return arguments.length?(s=e,t):s},t.hasFilterHandler(u),t.filter=function(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return arguments.length?(Array.isArray(n)&&1===n.length?n=n[0]:Array.isArray(n)&&(n=n.map((function(t){return Array.isArray(t)&&1===t.length?t[0]:t}))),r!==t.filtersInverse()&&(e=t.resetFilterHandler()(e),t.filtersInverse(r)),n===Symbol.for("clear")||Array.isArray(n)&&0===n.length?e=t.resetFilterHandler()(e):t.hasFilter(n)?t.removeFilterHandler()(e,n):t.addFilterHandler()(e,n),c(),t._invokeFilteredListener(n,r),null!==t.root()&&t.hasFilter()?t.turnOnControls():t.turnOffControls(),t):e.length>0?e[0]:null},t.handleFilterClick=function(e,n){if(!e.defaultPrevented){var r=e.metaKey||e.ctrlKey;i.events.trigger((function(){t.filter(n,r)}))}},t};var r=n(7038),i=n(7467),o=function(){};function a(t,e){return(0,r.isArrayOfObjects)(e)?t.push(e.map((function(t){return null===t?null:t.value}))):t.push(e),t}var s=function t(e){return Array.isArray(e)?e.map(t):e instanceof Date?e.toISOString():e};function u(t,e){if(void 0===e)return t.length>0;e=Array.isArray(e)?e.map(r.normalizeArrayByValue):e;var n=s(t),i=s(e);return n.some((function(t){return i<=t&&i>=t}))}function l(t){return function(e,n){if("crossfilter"===e.type)return n;if(0===n.length)e.filterAll(t.softFilterClear()),t.clearTableFilter&&t.clearTableFilter();else if(t.getFilteredColumns&&Object.keys(t.getFilteredColumns()).length>0)return n;return n}}},2169:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=["xLabel","yLabel"],n=i.default.dispatch.apply(i.default,e),r=t.on.bind(t),o=!1;function a(){return"function"==typeof t.rangeChart&&t.rangeChart()}function s(){return"function"==typeof t.focusChart&&t.focusChart()}function u(){return Boolean(window.MSInputMethodContext)&&Boolean(document.documentMode)}function l(e,n){return"y"===e?.9*(t.height()+(a()?t.rangeChart().height():0)-Math.max(t.margins().top+t.margins().bottom,64)):.9*(n?t.width()-180:t.effectiveWidth())}function c(e){return e?t.getAxisLabelContainerWidth("x",e)/2+32:t.effectiveWidth()/2+t.margins().left}function d(){var e=a()?t.rangeChart().height()-t.rangeChart().margins().bottom+t.margins().bottom:0;return(t.height()-Math.max(t.margins().top+t.margins().bottom,64)+e)/2+t.margins().top}function h(e,n){if(t[e+"AxisLabel"](n),s())return t.focusChart()["_invokeLabel"+e.toUpperCase()+"Listener"](n),void("x"===e&&(t.xAxisLabel(n),t.redrawAsync()));t["_invokeLabel"+e.toUpperCase()+"Listener"](n),t.redrawAsync()}return t.measureLabelsOn=function(e){return arguments.length?(o=e,t):o},t.on=function(i,o){var a=i.includes(".")?i.slice(0,i.indexOf(".")):i;return-1===e.indexOf(a)?r(i,o):n.on(i,o),t},t._invokeLabelYListener=function(e){n.yLabel(t,e)},t._invokeLabelXListener=function(e){n.xLabel(t,e)},t.getAxisLabelContainerWidth=function(e,n){return("x"===e?t.effectiveWidth():t.effectiveHeight())-("x"===e&&n?32:0)},t.prepareLabelEdit=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"y";if(!(a()&&"x"===e||s()&&"y"===e)){var n="x"===e&&t.legend()&&t.legend().legendType&&"quantitative"===t.legend().legendType(),r={left:"y"===e?"":c(n)+"px",top:"y"===e?d()+"px":""};t.root().selectAll(".axis-label-edit.type-"+e).remove(),t.root().selectAll(".y-axis-label, .x-axis-label").style("display","none");var o=t.root().append("div").attr("class","axis-label-edit type-"+e).style("width",t.getAxisLabelContainerWidth(e,n)+"px").classed("has-legend",n).style("top",r.top).style("left",r.left).append("div").attr("class","input-wrapper").style("max-width",l(e,n)+"px").style("width",u()?l(e,n)+"px":"auto");o.append("span").text(t[e+"AxisLabel"]()),o.append("input").attr("value",t[e+"AxisLabel"]()).attr("title",t[e+"AxisLabel"]()).on("focus",(function(){this.select()})).on("keyup",(function(){i.default.select(this.parentNode).select("span").text(this.value),13===i.default.event.keyCode&&this.blur()})).on("mouseup",(function(){i.default.event.preventDefault()})).on("change",(function(){this.blur()})).on("blur",(function(){h(e,this.value)}))}},t};var r,i=(r=n(5680))&&r.__esModule?r:{default:r}},2656:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){t.legendablesContinuous=function(){for(var e=[],n=t.colors().domain(),r=n[1]-n[0],i=t.colors().range(),o=i.length,s=function(t){var e=t.group();if(!e||!e.reduce)return null;var n=t.group().reduce();if(!Array.isArray(n))return null;var r=n.filter((function(t){return"color"===t.name}));return r.length>0&&void 0!==r[0].measureName?r[0].measureName:null}(t),u=0;u<o;u++){var l=u/(o-1)*r+n[0];l=t.isTargeting()?"%"+(100*parseFloat(l)).toFixed(2):"count(*)"===t.colorByExpr()?parseInt(l):parseFloat(l);var c;c=0===r?i[Math.floor(o/2)]:i[u];var d=t.valueFormatter(),h=l;isNaN(h)||(h=d&&d(h,s)||a(h)),e.push({color:c,value:h})}return e};var e=["clearCustomContLegend","setCustomContLegend"],n=i.default.dispatch.apply(i.default,e);return(0,o.override)(t,"on",(function(r,i){return-1===e.indexOf(r)?t._on(r,i):n.on(r,i),t})),t._invokeClearCustomContLegendListener=function(){n.clearCustomContLegend(t)},t._invokeSetCustomContLegendListener=function(e){n.setCustomContLegend(t,e)},t};var r,i=(r=n(5680))&&r.__esModule?r:{default:r},o=n(791);function a(t){var e=i.default.format(","),n=parseFloat(t).toFixed(2);return t>=1e3&&(n=Math.round(t)),e(n)}},3953:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=["elasticX","elasticY","xDomain","yDomain"],n=r.default.dispatch.apply(r.default,e),i=t.on.bind(t);function l(e){if("y"===e){t.elasticY(!t.elasticY()),t._invokeelasticYListener();var n=t.y().domain().slice(0);t._invokeYDomainListener(t.elasticY()&&t.originalYMinMax||n)}else{t.elasticX(!t.elasticX()),t._invokeelasticXListener();var r=t.x().domain().slice();t._invokeXDomainListener(t.elasticX()&&t.originalXMinMax||r),t.focusChart&&t.focusChart()&&(t.focusChart().elasticX(!t.focusChart().elasticX()),t.focusChart()._invokeelasticXListener(),t.elasticX()?t.focusChart()._invokeXDomainListener(null):t.focusChart()._invokeXDomainListener(t.x().domain().slice()),t.focusChart().redrawAsync())}t.redrawAsync()}function f(e,n){(function(t,e){return e&&(t[0]<e[0]||t[1]<e[0]||t[0]>e[1]||t[1]>e[1])})(n,"x"===e?t.originalXMinMax:t.originalYMinMax)||n.some(isNaN)||n[1]<=n[0]||"x"===e&&t.rangeChart&&t.rangeChart()&&(n[0]<t.rangeChart().x().domain()[0]||n[1]>t.rangeChart().x().domain()[1])?t.prepareLockAxis(e):function(e,n){if("y"===e)t.elasticY(!1),t._invokeelasticYListener(),t.y().domain(n),t._invokeYDomainListener(n);else{if(t.rangeChart&&t.rangeChart())return function(t,e){if(t.filters().length)if(e[0]<=t.filter()[0]&&t.filter()[1]<=e[1]){var n=t.filter().slice();t.rangeChart().replaceFilter(e),t.replaceFilter(n)}else t.rangeChart().replaceFilter(e);else t.rangeChart().filter(e)}(t,n);t.elasticX(!1),t._invokeelasticXListener(),t.x().domain(n),t._invokeXDomainListener(n),t.focusChart&&t.focusChart()&&(t.focusChart().elasticX(!1),t.focusChart()._invokeelasticXListener(),t.focusChart()._invokeXDomainListener(n),t.filters().length||t.focusChart().x().domain(n),t.focusChart().xOriginalDomain(n),t.focusChart().renderAsync())}t.renderAsync()}(e,n)}return t.on=function(r,o){var a=r.includes(".")?r.slice(0,r.indexOf(".")):r;return-1===e.indexOf(a)?i(r,o):n.on(r,o),t},t._invokeelasticYListener=function(){var e=t.getLayer&&t.getLayer("backendScatter");t.elasticY&&t.elasticY()&&e&&(e.yDim().filter([t.originalYMinMax]),t.y().domain(t.originalYMinMax)),n.elasticY(t)},t._invokeYDomainListener=function(e){n.yDomain(t,e)},t._invokeelasticXListener=function(){var e=t.getLayer&&t.getLayer("backendScatter");t.elasticX&&t.elasticX()&&e&&(e.xDim().filter([t.originalXMinMax]),t.x().domain(t.originalXMinMax)),n.elasticX(t)},t._invokeXDomainListener=function(e){n.xDomain(t,e)},t.prepareLockAxis=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"y",n=t.data&&t.data(),i=(0,u.getFirstNonNullDatumForAxis)(n,e),p=t.isHeatMap&&n&&Array.isArray(n)&&i&&("y"===e?(0,s.yAxisDataIsNonNumerical)(i):(0,s.xAxisDataIsNonNumerical)(i));if(!(t.focusChart&&t.focusChart()&&"y"===e||p)){var m=t.dockedAxesSize&&t.dockedAxesSize()?t.dockedAxesSize().left:t.margins().left,_=t.dockedAxesSize&&t.dockedAxesSize()?t.dockedAxesSize().bottom:t.margins().bottom,y={left:"y"===e?m-12+"px":t.width()-t.margins().right+"px",top:"y"===e?t.margins().top-24+"px":t.height()-_+"px"},v={minLeft:m+"px",minTop:t.height()-_+"px",maxLeft:"y"===e?m+"px":t.width()-t.margins().right+"px",maxTop:"y"===e?t.margins().top+"px":t.height()-_+"px"},g={top:"y"===e?0:t.height()-_+"px",left:"y"===e?0:m+"px",width:"y"===e?m+"px":t.width()-m+"px",height:"y"===e?t.height()+"px":_+"px"},x=t[e]().domain().slice(),b=!1,w=t.isHeatMap&&"y"===e;if(w){for(var M=t.data&&t.data(),L=t.shouldSortYAxisDescending(M)?a.utils.nullsLast(r.default.descending):a.utils.nullsFirst(r.default.ascending),k=t.rows()||M.map(t.valueAccessor()),T=(k=k.sort(L)).find((function(t){return null!==t})),S=null,E=k.length-1;E>=0;E--)if(null!==k[E]){S=k[E];break}var A=x[0]<x[1],D=T<S;(b=T!==S&&!A===D)&&x.reverse()}t.root().selectAll(".axis-lock.type-"+e).remove();var C=t.root().append("div").attr("class","axis-lock type-"+e);C.append("div").attr("class","hit-box").style("width",g.width).style("height",g.height).style("top",g.top).style("left",g.left);var P=function(){if("x"===e&&t.elasticX()){var n=t.x().domain().slice();return isNaN(n[0])||isNaN(n[1])}return!1};C.append("div").attr("class","lock-toggle type-"+e).classed("is-locked",(function(){return"y"===e?!t.elasticY():!t.elasticX()})).classed("disabled",P).style("top",y.top).style("left",y.left).on("click",(function(){P()||l(e)})),t.rangeChart&&t.rangeChart()&&"x"===e&&C.selectAll(".lock-toggle.type-x").remove();var I=C.append("div").attr("class","axis-input max").style("top",v.maxTop).style("left",v.maxLeft);I.append("input").attr("pattern","[0-9-]").attr("value",d(x[1])).on("focus",(function(){this.select()})).on("change",(function(){var t=x[1],n=x[0],r=t instanceof Date?(0,o.default)(this.value,c).toDate():h(this.value.replace(/,/g,""));f(e,b?[r,n]:[n,r])})).on("keyup",(function(){13===r.default.event.keyCode&&this.blur()}));var O=d(x[1]);I.append("div").text(O);var R=C.append("div").attr("class","axis-input min").style("top",v.minTop).style("left",v.minLeft);R.append("input").attr("value",d(x[0])).on("focus",(function(){this.select()})).on("change",(function(){var t=x[1],n=x[0]instanceof Date?(0,o.default)(this.value,c).toDate():h(this.value.replace(/,/g,""));f(e,b?[t,n]:[n,t])})).on("keyup",(function(){13===r.default.event.keyCode&&this.blur()})),R.append("div").text(d(x[0]))}},t};var r=l(n(5680)),i=n(7038),o=l(n(381)),a=n(5209),s=n(1693),u=n(2814);function l(t){return t&&t.__esModule?t:{default:t}}var c="MM-DD-YYYY";function d(t){return t instanceof Date?r.default.time.format.utc("%m-%d-%Y")(t):(0,i.formatDataValue)(t)}function h(t){return/^(\-|\+)?([0-9]+(\.[0-9]+)?)$/.test(t)?Number(t):NaN}},6207:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};e.default=function(t,e,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],d=15,h=1500,f=1e-5,p=180-f,m=-180+f,_=85-f,y=-85+f,v=(n=void 0===n?mapboxgl:n,null),g=null,x=null,b=null,w=e;t._xDimName=null,t._yDimName=null,t._viewBoxDimName=null;var M=!1,L=!1,k=null,T=!1,S=null,E=null,A=null,D=null,C=0,P=!0,I=100,O="mapbox://styles/mapbox/light-v9",R=[0,30],Y=1,F="bottom-right",j=null,z=!0;t._minCoord=null,t._maxCoord=null,t._reProjMapbox=!0;var N=null,B=null,U=[[m,y],[p,_]],H=n.LngLatBounds.convert(U),V=H,W=null,G=!0;function q(t){var e=r(t,2),n=r(e[0],2),i=n[0],o=n[1],a=r(e[1],2),s=a[0],u=a[1];return[[Math.max(m,i),Math.max(y,o)],[Math.min(p,s),Math.min(_,u)]]}function X(t){W&&ot(),at()}function Z(t){v.boxZoom.disable(),t.originalEvent.shiftKey?(v.scrollZoom.enable(),v.dragPan.enable()):(v.scrollZoom.disable(),v.dragPan.disable())}function K(e){if(t.shiftToZoom()&&(e.originalEvent&&!e.originalEvent.shiftKey||"moveend"===e.type))return v.scrollZoom.disable(),void v.dragPan.disable();if(v.dragPan.enable(),v.scrollZoom.enable(),("moveend"!==e.type||"moveend"!==D)&&L&&!e.skipRedraw){D=e.type;var n=(new Date).getTime(),r=v.getBounds();if(z?(t._minCoord=[r._sw.lng,r._sw.lat],t._maxCoord=[r._ne.lng,r._ne.lat]):(t._minCoord=t.conv4326To900913([r._sw.lng,r._sw.lat]),t._maxCoord=t.conv4326To900913([r._ne.lng,r._ne.lat])),"moveend"!==e.type){if(P&&(C=n,P=!1),I===1/0||n-C<I)return}else"moveend"===e.type&&(P=!0);C=n;var i=!1;"function"==typeof t.getLayers&&t.getLayers().forEach((function(e){if("function"==typeof e.xDim&&"function"==typeof e.yDim){var n=e.xDim(),o=e.yDim();null!==n&&null!==o&&(i=!0,n.filter([t._minCoord[0],t._maxCoord[0]]),o.filter([t._minCoord[1],t._maxCoord[1]]))}else if("function"==typeof e.viewBoxDim&&e.getState().data.length<2){var a=e.viewBoxDim();null!==a&&(i=!0,a.filterST_Min_ST_Max({lonMin:r._sw.lng,lonMax:r._ne.lng,latMin:r._sw.lat,latMax:r._ne.lat}))}})),setTimeout((function(){null!==S&&null!==E?(S.filter([t._minCoord[0],t._maxCoord[0]]),E.filter([t._minCoord[1],t._maxCoord[1]]),(0,s.redrawAllAsync)(t.chartGroup()).catch((function(t){(0,s.resetRedrawStack)(),console.log("on move event redrawall error:",t)}))):i?(0,s.redrawAllAsync)(t.chartGroup()).catch((function(t){(0,s.resetRedrawStack)(),console.log("on move event redrawall error:",t)})):null!==A&&layer.getState().data.length<2?(A.filterST_Min_ST_Max({lonMin:t._minCoord[0],lonMax:t._maxCoord[0],latMin:t._minCoord[1],latMax:t._maxCoord[1]}),(0,s.redrawAllAsync)(t.chartGroup()).catch((function(t){(0,s.resetRedrawStack)(),console.log("on move event redrawall error:",t)}))):(t._projectionFlag=!0,t.redrawAsync())}),0)}}t.useLonLat=function(e){return arguments.length?(z=e,t):z},t.map=function(){return v},t.lonMin=function(){return m},t.lonMax=function(){return p},t.latMin=function(){return y},t.latMax=function(){return _},t.setInitialBounds=function(t){V=t},t.convertBounds=function(t){if(!n)throw new Error("Cannot convert bounds: mapboxgl uninitialized.");return n.LngLatBounds.convert(q(t))},t.enableInteractions=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!arguments.length)return G;var r=["scrollZoom","boxZoom","dragPan","keyboard","doubleClickZoom"];return G=Boolean(e),T&&r.forEach((function(t){v[t]&&((void 0!==n[t]?Boolean(n[t]):G)?v[t].enable():(v[t].disable(),"dragPan"===t&&v[t]._onMouseUp({button:0})))})),t},t.getDataRenderBounds=function(){var e=v.getBounds();M||t.setFilterBounds(e);var n=[c(e.getNorthWest()),c(e.getNorthEast()),c(e.getSouthEast()),c(e.getSouthWest())];return z||(n=[t.conv4326To900913(n[0]),t.conv4326To900913(n[1]),t.conv4326To900913(n[2]),t.conv4326To900913(n[3])]),M=!0,n},t.xDim=function(e){return arguments.length?((S=e)&&(t._xDimName=S.value()[0]),t):S},t.yDim=function(e){return arguments.length?((E=e)&&(t._yDimName=E.value()[0]),t):E},t.viewBoxDim=function(e){return arguments.length?((A=e)&&(t._viewBoxDimName=A.value()[0]),t):A},t.resetLayer=function(){"function"==typeof t._resetRenderBounds&&t._resetRenderBounds(),k=null},t.colorBy=function(e){return arguments.length?(j=e,t):j},t.mapUpdateInterval=function(e){return arguments.length?(I=e,t):I},t.conv900913To4326X=function(t){return t/111319.490778},t.conv900913To4326Y=function(t){return 57.295779513*(2*Math.atan(Math.exp(t/6378136.99911))-1.570796327)},t.conv900913To4326=function(e){return[t.conv900913To4326X(e[0]),t.conv900913To4326Y(e[1])]},t.conv4326To900913X=function(t){return 111319.490778*t},t.conv4326To900913Y=function(t){return 6378136.99911*Math.log(Math.tan(.00872664626*t+.785398163397))},t.conv4326To900913=function(e){return[t.conv4326To900913X(e[0]),t.conv4326To900913Y(e[1])]};var J=function(){document.querySelectorAll(".mapboxgl-ctrl-logo").forEach((function(t){t.parentElement&&(t.parentElement.style.display="block")}))};function $(t,e){v.getStyle().layers.forEach((function(n){n.id.includes(t)&&e(n)}))}var Q=[],tt={};function et(){T||(n.accessToken=g,t.root().style("width",t.width()+"px").style("height",t.height()+"px"),(v=new n.Map({container:w,style:O,interactive:!0,center:R,zoom:Y,maxBounds:H,preserveDrawingBuffer:!0,attributionControl:!1,logoPosition:"bottom-right"}).fitBounds([V._sw,V._ne],{linear:!0,duration:0})).dragRotate.disable(),v.touchZoomRotate.disableRotation(),v.addControl(new n.NavigationControl,"bottom-right"),v.addControl(new n.AttributionControl,F),v.addControl(new n.ScaleControl({maxWidth:80,unit:"metric"}),"bottom-right"),t.addMapListeners(),T=!0,t.enableInteractions(G),t.shiftToZoom()&&v.on("mousedown",Z))}function nt(){var t=null,e=v.getStyle();if("Mapbox Outdoors"===e.name||"Mapbox Streets"===e.name)t="road-label-large";else for(var n=e.layers,r=0;r<n.length;++r)if("symbol"===n[r].type){t=n[r].id;break}return t}t.mapStyle=function(e){if(!arguments.length)return O;if(O=e,v){k||(k="_points");var n="overlay"+k;$(n,(function(t){tt[t.source]||(tt[t.source]=v.getSource(t.source).serialize(),Q.push(t))})),v.setStyle(O),void 0!==t.resetLayer&&t.resetLayer()}return t},t.mapboxToken=function(e){return arguments.length?(g=e,t):g},t.center=function(e){return arguments.length?(R=e,T&&v.setCenter(R),t):R=v.getCenter()},t.zoom=function(e){return arguments.length?(Y=e,T&&v.setZoom(Y),t):Y=v.getZoom()},t.attribLocation=function(e){return arguments.length?(F=e,t):F},t.resetSvg=function(){if(t.svg()&&t.svg().remove(),t.map()){var e=o.default.select(t.map().getCanvasContainer()).append("svg").attr("class","poly-svg");e.attr("width",t.width()).attr("height",t.height()),t.svg(e)}},t.mapProject=function(e){if(0==t._reProjMapbox){var n=this._maxCoord[0]-this._minCoord[0],r=this._maxCoord[1]-this._minCoord[1];return[((i=this.conv4326To900913(e))[0]-this._minCoord[0])/n*this.width(),(1-(i[1]-this._minCoord[1])/r)*this.height()]}var i;return[(i=this.map().project(e)).x,i.y]},t._setOverlay=function(e){var n=e.data,r=e.bounds,i=e.browser,o=(e.redraw,t.map()),s=document.getElementsByClassName("mapboxgl-canvas-container"),l=t.selectAll(".mapboxgl-canvas-container")[0].parentNode.id,c=a.filter(s,(function(t){return t.parentNode.id===l||t.parentNode.parentNode.id===l})),d=document.getElementsByClassName("mapboxgl-canvas"),h=t.selectAll(".mapboxgl-canvas")[0].parentNode.id,f=a.filter(d,(function(t){return t.parentNode.id===h||t.parentNode.parentNode.id===h}));c.length>1&&c[0].remove(),f.length>1&&f[0].remove();var p=r;if(void 0!==p){if(z||(p=[t.conv900913To4326(r[0]),t.conv900913To4326(r[1]),t.conv900913To4326(r[2]),t.conv900913To4326(r[3])]),i.isSafari||i.isIE||i.isEdge)var m=u.utils.b64toBlob(n,"image/png"),_=URL.createObjectURL(m);else _="data:image/png;base64,"+n;if(k){var y="overlay"+k,v=o.getSource(y);v?v.updateImage({url:_,coordinates:p}):x(y)}else{var g="overlay"+(k="_points");o.getSource(g)||x(g)}}function x(t){var e=nt();o.addSource(t,{type:"image",url:_,coordinates:p}),o.addLayer({id:t,source:t,type:"raster",paint:{"raster-opacity":1,"raster-fade-duration":0}},e)}},t._removeOverlay=function(){var e=t.map(),n="overlay"+k;e.removeLayer(n),e.removeSource(n)},t.isLoaded=function(){return v._loaded&&v.style&&v.style._loaded},t.addMapListeners=function(){v.on("moveend",K),v.on("sourcedata",J),t.shiftToZoom()?(v.on("drag",K),v.on("wheel",K)):v.on("move",K)},t.removeMapListeners=function(){v.off("move",K),v.off("moveend",K)},t.on("postRender",(function(){L=!0})),t.on("preRender",(function(e){var n=e.width(),r=e.height();n===x&&r===b||(t.root().select("#"+w+" canvas").attr("width",n).attr("height",r),x=n,b=r,v.resize())}));var rt=void 0;function it(t){return Promise.resolve()}function ot(){t.root().append("input").attr("type","text").attr("placeholder","Zoom to").classed("geocoder-input",!0).style("top","5px").style("right","5px").style("float","right").style("position","absolute").on("keydown",(function(){"Enter"!==o.default.event.key&&13!==o.default.event.keyCode||W.locate(this.value).then(t.zoomToLocation)}))}function at(){t.root().append("div").classed("latLonCoordinate",!0)}function st(t){var e=t.bounds.sw,n=t.bounds.ne;return!isNaN(e[0])&&!isNaN(n[0])&&!isNaN(e[1])&&!isNaN(n[1])&&e[0]<=n[0]&&e[1]<n[1]&&e[0]>=m&&e[0]<=p&&e[1]>=y&&e[1]<=_&&n[0]>=m&&n[0]<=p&&n[1]>=y&&n[1]<=_}return t.fitInitialBounds=function(e){return arguments.length||rt(),rt=e,t},t.init=function(e){if(!T){var i=!1,o=!1;if(n.accessToken=g,!n.supported())throw{name:"WebGL",message:"WebGL Not Enabled"};return et(),new Promise((function(e,n){v.on("load",(function(n){X(),o=!0,i&&it().then((function(){e(t)}))})),v.on("style.load",(function(){i=!0,o&&it().then((function(){e(t)}))})),v.on("styledata",(function(){Q.length&&Object.entries(tt).forEach((function(t){var e=r(t,2),n=e[0],i=e[1];v.getSource(i)||(v.addSource(n,i),Q.forEach((function(t){v.addLayer(t)})),Q=[],tt={})}))})),v.on("mousedown",(function(t){N=t.point.x,B=t.point.y})),v.on("mouseup",(function(e){N===e.point.x&&B===e.point.y&&t.getClosestResult(e.point,(function(n){var r=n.row_set[0];t.getLayerNames().forEach((function(n){var i=t.getLayer(n);"function"==typeof i.onClick&&i.onClick(t,r,e.originalEvent)}))}))})),v.on("mousemove",(function(t){var e=t.lngLat.lng.toFixed(8),n=t.lngLat.lat.toFixed(8),r=v.getContainer().getElementsByClassName("latLonCoordinate")[0];r&&(r.classList.add("visible"),r.innerHTML="Lon: "+e+" </br> Lat: "+n)})),v.on("mouseout",(function(t){var e=v.getContainer().getElementsByClassName("latLonCoordinate")[0];e&&e.classList.remove("visible")}))}))}},t.setFilterBounds=function(e){z?(t._minCoord=[e._sw.lng,e._sw.lat],t._maxCoord=[e._ne.lng,e._ne.lat]):(t._minCoord=t.conv4326To900913([e._sw.lng,e._sw.lat]),t._maxCoord=t.conv4326To900913([e._ne.lng,e._ne.lat])),t.getLayers().forEach((function(e){if("function"==typeof e.xDim&&"function"==typeof e.yDim){var n=e.xDim(),r=e.yDim();null!==n&&null!==r&&(n.filter([t._minCoord[0],t._maxCoord[0]]),r.filter([t._minCoord[1],t._maxCoord[1]]))}}))},t.geocoder=function(e){if(!arguments.length)return W;if("function"!=typeof e.locate)throw new Error("Geocoder must have a location function");return W=e,t},t.zoomToLocation=function(e){if(!T)return t;if(e.bounds)st(e)&&v.fitBounds([e.bounds.sw,e.bounds.ne],{linear:!0,duration:h});else{var n=e.center;v.setCenter(n),v.setZoom(d)}return t},i&&(t=(0,l.rasterDrawMixin)(t)),t};var i,o=(i=n(5680))&&i.__esModule?i:{default:i},a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(6486)),s=n(6253),u=n(5209),l=n(3411);function c(t){return Object.keys(t).map((function(e){return t[e]}))}},4880:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e={top:10,right:50,bottom:48,left:60};return t.margins=function(n){return arguments.length?(e=n,t):e},t.effectiveWidth=function(){return t.width()-t.margins().left-t.margins().right},t.effectiveHeight=function(){return t.height()-t.margins().top-t.margins().bottom},t}},409:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=null,n=!1,o={group:null,values:null,selected:null,keys:null},a={group:s("group"),values:s("values"),selected:s("selected"),keys:s("keys")};function s(t){return function(e){return void 0===e?o[t]:(o[t]=e,a)}}function u(){var e;t.isMulti()&&(function(){for(;t.stack().length;)t.stack().pop()}(),e=t.series().keys(),t.series().selected().forEach((function(n){var r=Object.keys(e).reduce((function(t,r){return e[r]===n?r:t}),null);t.stack(t.group(),r,(function(t){return t[r]}))})),Object.keys(t.series().keys()).length===t.stack().length||t.series().keys().other||function(){var e,n,r;(e=t.series().keys(),n=t.series().selected()||[],r=n.slice(),Object.keys(e).reduce((function(t,r){return t.concat(n.indexOf(e[r]))}),[]).forEach((function(t){return r.splice(t,1)})),r).forEach((function(e){var n="series_"+(Object.keys(t.series().keys()).length+1);t.series().keys()[n]=e}))}(),t.showOther()&&t.stack(t.group(),"other",(function(t){return t.other})))}return(0,r.override)(t,"_doRedraw",(function(){if(t.isMulti()){u();var e=t.__doRedraw();return t.generatePopup(),e}return t.__doRedraw()})),(0,r.override)(t,"dimension",(function(n){return n?(e=n.value().slice(),t._dimension(n)):t._dimension()})),t.series=function(){return a},t.isMulti=function(){return t.dimension().value().length>1},t.showOther=function(e){return"boolean"==typeof e?(n=e,t):n},t.setDataAsync((function(n,r){return t.isMulti()?t.series().group().topAsync(21,0).then((function(n){var o=t.series().selected(),a=Boolean(o&&o.length);return t.series().values(n.map((function(t){return t.key0}))).selected(a?o:t.series().values().slice(0,5)),t.group().dimension().set(function(t,e){return function(n){return[n[0],(r=t[1],i=e,"CASE when"===r.slice(0,9)?r:"CASE when "+r+" IN ("+i.map((function(t){return"'"+t.replace(/'/,"''")+"'"})).join(",")+") then "+r+" ELSE 'other' END")];var r,i}}(e,t.series().selected())),t.group().dimension().multiDim(!1),t.group().reduce(t.group().reduce()).all((function(e,n){if(e)return r(e);var o=function(t){return t.reduce((function(t,e){var n=e.key1,r=e.key0,o=e.val;if(t.keys[n]?t.keys[n]=t.keys[n]:t.keys[n]="other"===n?n:"series_"+(Object.keys(t.keys).length+1),Array.isArray(r)){var a=r[0].isExtract?r[0].value:r[0].value||r[0],s=a instanceof Date?a.toISOString():a,u=r[0].alias instanceof Date?r[0].alias.toISOString():r[0].alias||s;"number"!=typeof t.ranges[u]?(t.data[t.data.length]=i({key0:r},t.keys[n],o),t.ranges[u]=t.data.length-1):t.data[t.ranges[u]][t.keys[n]]=o}else"number"!=typeof t.ranges[r]?(t.data[t.data.length]=i({key0:r},t.keys[n],o),t.ranges[r]=t.data.length-1):t.data[t.ranges[r]][t.keys[n]]=o;return t}),{keys:{},ranges:{},data:[]})}(n),a=o.data,s=o.keys;return t.series().keys(function(t){return Object.keys(t).reduce((function(e,n){return e[t[n]]=n,e}),{})}(s)),r(e,a)}))})).catch((function(t){return r(t)})):n.all(r)})),t.on("preRender",u),t};var r=n(791);function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},3268:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t.label((function(e){var n=t&&t.valueFormatter(),r=t&&t.dateFormatter(),o=t.dimension().getDimensionName();if(1===o.length)return i(e.key0,o[0],n,r);var a=[],s=0;for(var u in e){if(e.hasOwnProperty(u)&&u.indexOf("key")>-1){var l=i(e[u],o[s],n,r);a.push(l)}s++}return a.join(" / ")}),!0),t};var r=n(7038);function i(t,e,n,i){var o=null,a=e,s=t,u=!1;return Array.isArray(t)&&t[0]&&(s=t[0].value||t[0],t[0].isExtract&&(a=null,u=!0)),i&&s instanceof Date?o=i:n&&"number"==typeof s&&(o=n),!u&&o&&o(s,a)||(0,r.formatDataValue)(t)}},3411:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.rasterDrawMixin=function(t){var e=null,n=null,c=null,d=null,p=new Map,m=null,_=null,y={fillColor:"#22a7f0",fillOpacity:.1,strokeColor:"#22a7f0",strokeWidth:1.5,dashPattern:[]},v={fillColor:"#ef9b20",fillOpacity:.1,strokeColor:"#ef9b20",strokeWidth:2,dashPattern:[8,2]};function g(t){return!t.layerType||"function"!=typeof t.layerType||"points"===t.layerType()||"heat"===t.layerType()}function x(){var n="function"==typeof t.useLonLat&&t.useLonLat(),o=e.sortedShapes,l=(0,i.getLatLonCircleClass)();return(t.getLayers&&"function"==typeof t.getLayers?t.getLayers():[t]).forEach((function(t){if(t.layerType&&"function"==typeof t.layerType&&"points"!==t.layerType()&&"heat"!==t.layerType()){if((!t.layerType||"function"!=typeof t.layerType||"lines"===t.layerType())&&t.getState().data.length<2){var e=null,i=null,c=t.group();if(c)e=c.getCrossfilter();else e=t.viewBoxDim()||t.crossfilter();e&&((i=p.get(e))||(i={coordFilter:e},p.set(e,i),i.shapeFilters=[]),o.forEach((function(t){if(t instanceof l){var e=t.getWorldPosition();r.conv900913To4326(e,e);var o=t.radius,a={spatialRelAndMeas:"filterST_Distance",filters:{point:[e[0],e[1]],distanceInKm:o}};s.find(i.shapeFilters,a)||i.shapeFilters.push(a)}else if(t instanceof u.Poly){var c=[0,0],d=[],h=t.vertsRef,f=t.globalXform;h.forEach((function(t){u.Point2d.transformMat2d(c,t,f),n&&r.conv900913To4326(c,c),d.push([c[0],c[1]])}));var p={spatialRelAndMeas:"filterST_Contains",filters:d};s.find(i.shapeFilters,p)||i.shapeFilters.push(p)}})))}}else{var d=null,m=null,_=t.group();if(_)d=_.getCrossfilter();else{var y=t.dimension();d=y?y.getCrossfilter():t.crossfilter()}if(d){(m=p.get(d))||(m={coordFilter:d.filter(),px:[],py:[]},p.set(d,m),m.shapeFilters=[]);var v=t.xDim(),g=t.yDim();if(v&&g){var x=v.value()[0],b=g.value()[0];m.px.push(x),m.py.push(b),o.forEach((function(t){if(t instanceof l){var e=t.getWorldPosition();r.conv900913To4326(e,e);var i=1e3*t.radius;m.shapeFilters.push("DISTANCE_IN_METERS("+e[0]+", "+e[1]+", "+x+", "+b+") < "+i)}else if(t instanceof u.Circle){var o=Math.pow(t.radius,2),s=u.Mat2d.clone(t.globalXform);u.Mat2d.invert(s,s),m.shapeFilters.push(f(t,x,b,n)+" AND (POWER("+s[0]+" * CAST("+x+" AS FLOAT) + "+s[2]+" * CAST("+b+" AS FLOAT) + "+s[4]+", 2.0) + POWER("+s[1]+" * CAST("+x+" AS FLOAT) + "+s[3]+" * CAST("+b+" AS FLOAT) + "+s[5]+", 2.0)) / "+o+" <= 1.0")}else if(t instanceof u.Poly){var c=[0,0],d=[0,0],p=[0,0],_=[],y=t.vertsRef,v=t.globalXform;y.forEach((function(t){u.Point2d.transformMat2d(c,t,v),n&&r.conv900913To4326(c,c),_.push(c[0],c[1])}));for(var g=(0,a.default)(_),w=[],M=0,L=0;L<g.length;L+=3)M=2*g[L],u.Point2d.set(c,_[M],_[M+1]),M=2*g[L+1],u.Point2d.set(d,_[M],_[M+1]),M=2*g[L+2],u.Point2d.set(p,_[M],_[M+1]),w.push(h(c,d,p,x,b,!n));w.length&&m.shapeFilters.push(f(t,x,b,n)+" AND ("+w.join(" OR ")+")")}}))}}}})),p.forEach((function(t){if(t.px&&t.py&&t.px.length&&t.py.length&&t.shapeFilters.length){var e=t.shapeFilters.join(" OR "),n=t.px.map((function(e,n){return{px:e,py:t.py[n]}})).reduce((function(t,e){return t.some((function(t){return t.px===e.px&&t.py===e.py}))?t:[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(t),[e])}),[]).map((function(t,n){return"("+t.px+" IS NOT NULL AND "+t.py+" IS NOT NULL AND ("+e+"))"})).join(" AND ");t.coordFilter.filter([n]),t.px=[],t.py=[],t.shapeFilters=[]}else t.coordFilter&&t.shapeFilters&&t.shapeFilters.length&&t.shapeFilters[0].spatialRelAndMeas?(t.coordFilter.filterSpatial(),t.shapeFilters.forEach((function(e){t.coordFilter.filterSpatial(e.spatialRelAndMeas,e.filters)})),t.shapeFilters=[]):t.coordFilter.filter()})),t._invokeFilteredListener(t.filters(),!1)}t.getRasterFilterObj=function(t){var e=g(t),n=function(t){var e=g(t),n=t.group();if(n)return n.getCrossfilter();var r=e?t.dimension():t.viewBoxDim();return r?e?r.getCrossfilter():r:t.crossfilter()}(t);if(void 0!==n){var r=p.get(n);return r||(e?(r={coordFilter:n.filter(),px:[],py:[]},p.set(n,r),r.shapeFilters=[]):(r={coordFilter:n},p.set(n,r),r.shapeFilters=[]),r)}};var b=t.debounce((function(){x(),setTimeout((function(){return(0,l.redrawAllAsync)(t.chartGroup())}))}),50);function w(){b()}function M(){var n=e.getShapesAsJSON();return n[0]?t.nonDrawFilters().concat(Array.from(n)):t.nonDrawFilters()}function L(r){if(!arguments.length)return e.getShapesAsJSON();if(null===r)e.deleteAllShapes(),x();else if(void 0!==r.type){var o=null;if("Feature"===r.type)return void console.log("WARNING - trying to load an incompatible lasso dashboard. All filters will be cleared.");var a={};if("LatLonCircle"===r.type){var s=(0,i.getLatLonCircleClass)();o=new s(r),a.uniformScaleOnly=!0,a.centerScaleOnly=!0,a.rotatable=!1}else void 0!==u[r.type]?o=new u[r.type](r):m(r);o&&(e.addShape(o,a),t.addFilterShape(o),x())}else m(r);n&&n.isActive()||e.enableInteractions()}return t.addFilterShape=function(t){t.on(["changed:geom","changed:xform","changed:visibility"],w),w()},t.deleteFilterShape=function(t){t.off(["changed"],w),w()},t.addDrawControl=function(){if(e)return t;var i=t.root().node(),a=t.x(),s=t.y();a&&s||(t._updateXAndYScales(t.getDataRenderBounds()),a=t.x(),s=t.y()),c=a.domain(),d=s.domain();var l=[Math.abs(c[1]-c[0]),Math.abs(d[1]-d[0])],h={enableInteractions:!0,projectionDimensions:l,cameraPosition:[c[0]+.5*l[0],Math.min(d[0],d[1])+.5*l[1]],flipY:!0,selectStyle:v,xformStyle:{fillColor:"white",strokeColor:"#555555",strokeWidth:1}},f=null;function g(){var n=t.getDataRenderBounds();c=[n[0][0],n[1][0]],d=[n[0][1],n[2][1]],"function"==typeof t.useLonLat&&t.useLonLat()&&(c[0]=r.conv4326To900913X(c[0]),c[1]=r.conv4326To900913X(c[1]),d[0]=r.conv4326To900913Y(d[0]),d[1]=r.conv4326To900913Y(d[1]));var i=[Math.abs(c[1]-c[0]),Math.abs(d[1]-d[0])];e.projectionDimensions=i,e.cameraPosition=[c[0]+.5*i[0],Math.min(d[0],d[1])+.5*i[1]]}return"function"==typeof t.margins&&(f=t.margins(),h.margins=f),e=new u.ShapeBuilder(i,h),n=new o.default(i,t,e,y,v),t.map().on("render",g),t.map().on("resize",(function(r){n.deactivateButtons();var o="function"==typeof t.effectiveWidth?t.effectiveWidth():i.offsetWidth,a="function"==typeof t.effectiveHeight?t.effectiveHeight():i.offsetHeight;e.viewport=[0,0,o,a],g()})),m=t.filter,_=t.filterAll,t.filter=L,t.nonDrawFilters=t.filters,t.filters=M,t.filterAll=function(){_(),t.getLayerNames().forEach((function(e){var n=t.getLayer(e);n.hasOwnProperty("filterAll")&&n.filterAll(t)})),p&&p.forEach((function(e){if(e.coordFilter&&"spatialRelAndMeas"in e.shapeFilters){e.coordFilter.filterSpatial();var n=t.map().getBounds();e.coordFilter.filterST_Min_ST_Max({lonMin:n._sw.lng,lonMax:n._ne.lng,latMin:n._sw.lat,latMax:n._ne.lat})}else e.coordFilter.filter();e.shapeFilters=[]}));var n=e.sortedShapes;return e.deleteAllShapes(),m(Symbol.for("clear")),n.forEach((function(e){t.deleteFilterShape(e)})),"function"==typeof t.useLonLat&&t.setFilterBounds(t.map().getBounds()),t},t},t.coordFilter=function(t){},t};var r=d(n(5263)),i=n(8826),o=c(i),a=c(n(9187)),s=d(n(6486)),u=d(n(6154)),l=n(6253);function c(t){return t&&t.__esModule?t:{default:t}}function d(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function h(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];function a(t,e){return o?"((CAST("+r+" AS FLOAT)-("+e[0]+"))*("+(t[1]-e[1])+") - ("+(t[0]-e[0])+")*(CAST("+i+" AS FLOAT)-("+e[1]+")) < 0.0)":"(("+r+"-("+e[0]+"))*("+(t[1]-e[1])+") - ("+(t[0]-e[0])+")*("+i+"-("+e[1]+")) < 0.0)"}var s=a(t,e),u=a(e,n),l=a(n,t);return"("+s+" = "+u+") AND ("+u+" = "+l+")"}function f(t,e,n,i){var o=t.aabox,a=o[u.AABox2d.MINX],s=o[u.AABox2d.MAXX],l=o[u.AABox2d.MINY],c=o[u.AABox2d.MAXY],d=!0;return i&&(a=r.conv900913To4326X(a),s=r.conv900913To4326X(s),l=r.conv900913To4326Y(l),c=r.conv900913To4326Y(c),d=!1),d?"UNLIKELY(CAST("+e+" AS FLOAT) >= "+a+" AND CAST("+e+" AS FLOAT) <= "+s+" AND CAST("+n+" AS FLOAT) >= "+l+" AND CAST("+n+" AS FLOAT) <= "+c+")":"UNLIKELY("+e+" >= "+a+" AND "+e+" <= "+s+" AND "+n+" >= "+l+" AND "+n+" <= "+c+")"}},4830:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e={};function n(t){var n=t.width,r=t.neLat,i=t.zoom,a="manual"===e.encoding.size.type?e.encoding.size.value:function(t,e,n){return Math.max(30/(o*Math.cos(t*Math.PI/180)/(e*Math.pow(2,n))),1)}(r,n,i),s=n/Math.round(n/a);return{markWidth:s,markHeight:function(t,e){switch(t){case"hex":return 2*e/Math.sqrt(3);default:return e}}(e.mark,s)}}function s(t){return"heat_color"+t}function u(){return"auto"===e.encoding.color.scale.domain}return t.type="heatmap",t.crossfilter=(0,r.createRasterLayerGetterSetter)(t,null),t.xDim=(0,r.createRasterLayerGetterSetter)(t,null),t.yDim=(0,r.createRasterLayerGetterSetter)(t,null),t.dynamicSize=(0,r.createRasterLayerGetterSetter)(t,null),t.dynamicBinning=(0,r.createRasterLayerGetterSetter)(t,null),t.colorDomain=(0,r.createRasterLayerGetterSetter)(t,null),t._mandatoryAttributes([]),t.setState=function(t){e="function"==typeof t?t(e):t},t.getState=function(){return JSON.parse(JSON.stringify(e))},t.genSQL=function(t){var r=t.table,o=t.width,a=t.height,s=t.min,u=t.max,l=t.filter,c=t.globalFilter,d=n({width:o,neLat:t.neLat,zoom:t.zoom}),h=d.markWidth,f=d.markHeight,p=[];return"string"==typeof l&&l.length&&p.push({type:"filter",expr:l}),"string"==typeof c&&c.length&&p.push({type:"filter",expr:c}),i.parser.writeSQL({type:"root",source:r,transform:[].concat(p,[{type:"pixel_bin",width:o,height:a,mark:{shape:e.mark,width:h,height:f},x:{field:"conv_4326_900913_x("+e.encoding.x.field+")",domain:[s[0],u[0]]},y:{field:"conv_4326_900913_y("+e.encoding.y.field+")",domain:[s[1],u[1]]},aggregate:e.encoding.color.aggregate}])})},t._updateFromMetadata=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(u()&&Array.isArray(e.scales)){var r=s(n),i=!0,o=!1,a=void 0;try{for(var l,c=e.scales[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var d=l.value;d.name===r&&t.colorDomain(d.domain)}}catch(t){o=!0,a=t}finally{try{!i&&c.return&&c.return()}finally{if(o)throw a}}}},t._genVega=function(i){var o=i.table,l=i.width,c=i.height,d=i.min,h=i.max,f=i.filter,p=i.globalFilter,m=i.neLat,_=i.zoom,y=i.layerName,v=void 0===y?"":y,g=n({width:l,neLat:m,zoom:_}),x=g.markWidth,b=g.markHeight,w="heatmap_query"+v,M=u(),L=function(){return w+"_stats"},k={width:l,height:c};k.data=[{name:w,sql:t.genSQL({table:o,width:l,height:c,min:d,max:h,filter:f,globalFilter:p,neLat:m,zoom:_})}],M&&k.data.push({name:L(),source:w,transform:[{type:"aggregate",fields:["color","color","color","color"],ops:["min","max","avg","stddev"],as:["minimum","maximum","mean","deviation"]},{type:"formula",expr:"max(minimum, mean-2*deviation)",as:"mincolor"},{type:"formula",expr:"min(maximum, mean+2*deviation)",as:"maxcolor"}]});var T=s(v);return k.scales=[{name:T,type:e.encoding.color.type,domain:M?{data:L(),fields:["mincolor","maxcolor"]}:e.encoding.color.scale.domain,range:e.encoding.color.scale.range.map((function(t){return(0,r.adjustOpacity)(t,e.encoding.color.scale.opacity)})),default:(0,r.adjustOpacity)(e.encoding.color.scale.default,e.encoding.color.scale.opacity),nullValue:(0,r.adjustOpacity)(e.encoding.color.scale.nullValue,e.encoding.color.scale.opacity)}],k.marks=[{type:"symbol",from:{data:w},properties:{shape:a(e.mark),xc:{field:"xy"},yc:{field:"xy"},width:x,height:b,fillColor:{scale:T,field:"color"}}}],k},t._destroyLayer=function(){var e=t.xDim();e&&e.dispose();var n=t.yDim();n&&n.dispose()},t};var r=n(3001),i=n(5209),o=40075e3;function a(t){switch(t){case"hex":return"hexagon-horiz";default:return t}}},9304:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default=function(t){var e=null;function n(){return"auto"===e.encoding.color.domain}t.colorDomain=(0,o.createRasterLayerGetterSetter)(t,null),t.sizeDomain=(0,o.createRasterLayerGetterSetter)(t,null),t.setState=function(n){return(e="function"==typeof n?n(e):n).hasOwnProperty("transform")||(e.transform={}),t},t.getState=function(){return e},t.getTransforms=function(t,e,n,r,o,a){var u=[],l=r.transform,c=r.encoding,d=c.size,h=c.color,f=c.geocol,p=c.geoTable,m=w()?r.data[1].table:r.data[0].table,_=[],y=[],v=[],g=r.transform.groupby?r.transform.groupby.map((function(t,e){return{type:"project",expr:(a&&0===e?"/*+ cpu_mode */ ":"")+r.data[0].table+"."+t,as:"key"+e}})):[],x=w()?[{type:"project",expr:r.data[0].table+"."+r.data[0].attr,as:"key0"}]:g,b=x.length&&"quantitative"===h.type?s.parser.parseExpression(h.aggregate):"SAMPLE("+m+"."+h.field+")";function w(){return r.data.length>1}if(x.length>0?(u.push({type:"aggregate",fields:_,ops:v,as:y,groupby:x}),u.push({type:"project",expr:"LAST_SAMPLE("+m+".rowid)",as:"rowid"}),u.push({type:"project",expr:"SAMPLE("+p+"."+f+")",as:"sampled_geo"})):u.push({type:"project",expr:(a?"/*+ cpu_mode */ ":"")+p+"."+f}),"object"!==(void 0===d?"undefined":i(d))||"quantitative"!==d.type&&"custom"!==d.type||(x.length>0&&"quantitative"===d.type?(_.push(r.data[0].table+"."+d.field),y.push("strokeWidth"),v.push(d.aggregate)):u.push({type:"project",expr:d.field,as:"strokeWidth"})),"object"===(void 0===h?"undefined":i(h))&&("quantitative"===h.type||"ordinal"===h.type))if(x.length>0&&"Custom"!==h.colorMeasureAggType)_.push(b),y.push("strokeColor"),v.push(null);else{var M=h.field||h.aggregate;u.push({type:"project",expr:M,as:"strokeColor"})}return w()&&u.push({type:"filter",expr:r.data[0].table+"."+r.data[0].attr+" = "+r.data[1].table+"."+r.data[1].attr}),"number"==typeof l.limit&&(l.sample&&!w()?u.push({type:"sample",method:"multiplicative",size:o||l.tableSize,limit:l.limit,sampleTable:p}):u.push({type:"limit",row:l.limit})),"string"==typeof e&&e.length&&u.push({type:"filter",expr:e}),"string"==typeof n&&n.length&&u.push({type:"filter",expr:n}),u},t.getProjections=function(){return t.getTransforms("","","",e,(0,a.lastFilteredSize)(t.crossfilter().getId())).filter((function(t){return"project"===t.type&&t.hasOwnProperty("as")})).map((function(t){return s.parser.parseTransform({select:[]},t)})).map((function(t){return t.select[0]}))},t._updateFromMetadata=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(n()&&Array.isArray(e.scales)){var i=(0,o.getColorScaleName)(r),a=!0,s=!1,u=void 0;try{for(var l,c=e.scales[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var d=l.value;d.name===i&&t.colorDomain(d.domain)}}catch(t){s=!0,u=t}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}}},t.__genVega=function(r){var a=r.table,m=r.filter,_=r.lastFilteredSize,y=r.globalFilter,v=r.pixelRatio,g=r.layerName,x=r.useProjection,b=n(),w=function(){return g+"_stats"},M=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments[3],a=arguments[4];if("number"==typeof t)return t;if("object"!==(void 0===t?"undefined":i(t))||"quantitative"!==t.type&&"custom"!==t.type){if("auto"===t){var s=Math.min(n,e),l=u.scale.sqrt().domain(c).range(s>f?h:d).clamp(!0);return Math.round(l(s)*r)}return null}return{scale:(0,o.getSizeScaleName)(a),field:"strokeWidth"}}(e.encoding.size,e.transform&&e.transform.limit,_,v,g),L=[{name:g,format:"lines",sql:s.parser.writeSQL({type:"root",source:[].concat(l(new Set(e.data.map((function(t){return t.table}))))).join(", "),transform:t.getTransforms(a,m,y,e,_)}),enableHitTesting:e.enableHitTesting}],k={};b&&(function(t,n,r){var i={type:"aggregate",fields:[],ops:[],as:[]},o=[i];"quantitative"===e.encoding.color.type?(i.fields=i.fields.concat(["strokeColor","strokeColor","strokeColor","strokeColor"]),i.ops=i.ops.concat(["min","max","avg","stddev"]),i.as=i.as.concat(["mincol","maxcol","avgcol","stdcol"]),o.push({type:"formula",expr:"max(mincol, avgcol-2*stdcol)",as:"mincolor"},{type:"formula",expr:"min(maxcol, avgcol+2*stdcol)",as:"maxcolor"})):"ordinal"===e.encoding.color.type&&(i.fields.push("color"),i.ops.push("distinct"),i.as.push("distinctcolor")),t.push({name:r,source:n,transform:o})}(L,g,w()),"quantitative"===e.encoding.color.type?k.color=["mincolor","maxcolor"]:"ordinal"===e.encoding.color.type&&(k.color=["distinctcolor"]));var T=(0,o.getScales)(e.encoding,g,k,w()),S=[{type:"lines",from:{data:g},properties:Object.assign({},{x:{field:"x"},y:{field:"y"},strokeColor:p(e.encoding.color,g),strokeWidth:M,lineJoin:"object"===i(e.mark)?e.mark.lineJoin:"bevel"})}];return x?S[0].transform={projection:"mercator_map_projection"}:(S[0].properties.x.scale="x",S[0].properties.y.scale="y"),{data:L,scales:T,marks:S}},t.viewBoxDim=(0,o.createRasterLayerGetterSetter)(t,null),(0,o.createVegaAttrMixin)(t,"size",3,1,!0);var m=null,_=null;t.crossfilter=function(e){return arguments.length?(_=e,t):_},t._requiresCap=function(){return!1},t._genVega=function(e,n,r,i){return t.viewBoxDim()&&t.viewBoxDim().groupAll().valueAsync().then((function(e){(0,a.setLastFilteredSize)(t.crossfilter().getId(),e)})),m=t.__genVega({layerName:n,table:t.crossfilter().getTable()[0],filter:t.crossfilter().getFilterString(n),globalFilter:t.crossfilter().getGlobalFilterString(),lastFilteredSize:(0,a.lastFilteredSize)(t.crossfilter().getId()),pixelRatio:e._getPixelRatio(),useProjection:e._useGeoTypes})},t._addRenderAttrsToPopupColumnSet=function(n,r){n._useGeoTypes&&(e.encoding.geocol&&e.transform.groupby&&e.transform.groupby.length?r.add("sampled_geo"):r.add(e.encoding.geocol)),m&&Array.isArray(m.marks)&&m.marks.length>0&&m.marks[0].properties&&o.renderAttributes.forEach((function(e){"x"!==e&&"y"!==e&&t._addQueryDrivenRenderPropToSet(r,m.marks[0].properties,e)}))},t._areResultsValidForPopup=function(t){return Boolean(e.encoding.geocol&&(t[e.encoding.geocol]||t.sampled_geo))},t._displayPopup=function(n){return(0,o.__displayPopup)(r({},n,{_vega:m,_layer:t,state:e}))};var y={};return t._hidePopup=function(t,e){var n=t.select(".map-polyline");n&&(y[t]?n.classed("removePoly",!0):n.classed("fadeOutPoly",!0),e&&n.on("animationend",(function(){e(t)})),delete y[t])},t._destroyLayer=function(e){var n=t.viewBoxDim();n&&n.dispose()},t};var o=n(3001),a=n(6253),s=n(5209),u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(5680));function l(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var c=[1e5,1e3],d=[1,3],h=[1,1],f=1e5;function p(t,e){return"object"===(void 0===t?"undefined":i(t))&&"density"===t.type?{scale:(0,o.getColorScaleName)(e),value:0}:"object"!==(void 0===t?"undefined":i(t))||"ordinal"!==t.type&&"quantitative"!==t.type?"object"===(void 0===t?"undefined":i(t))?(0,o.adjustOpacity)(t.value,t.opacity):t:{scale:(0,o.getColorScaleName)(e),field:"strokeColor"}}},8033:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default=function(t){var e=null;function n(){return"auto"===e.encoding.color.domain}function _(){return"auto"===e.encoding.size.domain}t.colorDomain=(0,o.createRasterLayerGetterSetter)(t,null),t.sizeDomain=(0,o.createRasterLayerGetterSetter)(t,null),t.setState=function(n){return(e="function"==typeof n?n(e):n).hasOwnProperty("transform")||(e.transform={}),t},t.getState=function(){return e},t.getTransforms=function(t,e,n,i,o,a){var s=i.transform,u=i.encoding,l=u.x,c=u.y,d=u.size,h=u.color,p=i.postFilters,m=[];if("object"===(void 0===s?"undefined":r(s))&&"object"===r(s.groupby)&&s.groupby.length){var _=a?[]:[l.field,c.field],y=a?[]:["x","y"],v=a?[]:[l.aggregate,c.aggregate];"object"===(void 0===d?"undefined":r(d))&&"quantitative"===d.type&&(_.push(d.field),y.push("size"),v.push(d.aggregate)),"object"!==(void 0===h?"undefined":r(h))||"quantitative"!==h.type&&"ordinal"!==h.type||(_.push(h.field),y.push("color"),v.push(h.aggregate)),m.push({type:"aggregate",fields:_,ops:v,as:y,groupby:s.groupby.map((function(t,e){return{type:"project",expr:(a&&0===e?"/*+ cpu_mode */ ":"")+t,as:"key"+e}}))}),a&&m.push({type:"project",expr:"ST_SetSRID(ST_Point("+f[l.aggregate]+"("+l.field+"), "+f[c.aggregate]+"("+c.field+")), 4326)"})}else a?m.push({type:"project",expr:"/*+ cpu_mode */ ST_SetSRID(ST_Point("+l.field+", "+c.field+"), 4326)"}):(m.push({type:"project",expr:l.field,as:"x"}),m.push({type:"project",expr:c.field,as:"y"})),"number"==typeof s.limit&&(m.push({type:"limit",row:s.limit}),s.sample&&m.push({type:"sample",method:"multiplicative",size:o||s.tableSize,limit:s.limit,sampleTable:t})),"object"===(void 0===d?"undefined":r(d))&&"quantitative"===d.type&&m.push({type:"project",expr:d.field,as:"size"}),"object"!==(void 0===h?"undefined":r(h))||"quantitative"!==h.type&&"ordinal"!==h.type||m.push({type:"project",expr:h.field,as:"color"});"string"==typeof e&&e.length&&m.push({type:"filter",expr:e});var g=p?p[0]:null;return g&&function(t){var e=t.operator,n=t.min,r=t.max,i=t.aggType,o=t.value,a=t.custom;return!(!o||!i&&!a||("not between"!==e&&"between"!==e||"number"!=typeof n||isNaN(n)||"number"!=typeof r||isNaN(r))&&("equals"!==e&&"not equals"!==e&&"greater than or equals"!==e||"number"!=typeof n||isNaN(n))&&("less than or equals"!==e||"number"!=typeof r||isNaN(r))&&"null"!==e&&"not null"!==e)}(g)&&m.push({type:"postFilter",table:g.table||null,aggType:g.aggType,custom:g.custom,fields:[g.value],ops:g.operator,min:g.min,max:g.max}),"string"==typeof n&&n.length&&m.push({type:"filter",expr:n}),m},t.getProjections=function(){return t.getTransforms("","","",e,(0,i.lastFilteredSize)(t.crossfilter().getId())).filter((function(t){return"project"===t.type&&t.hasOwnProperty("as")})).map((function(t){return a.parser.parseTransform({select:[]},t)})).map((function(t){return t.select[0]}))},t._updateFromMetadata=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=n(),a=_();if((i||a)&&Array.isArray(e.scales)){var s=(0,o.getColorScaleName)(r),u=(0,o.getSizeScaleName)(r),l=!0,c=!1,d=void 0;try{for(var h,f=e.scales[Symbol.iterator]();!(l=(h=f.next()).done);l=!0){var p=h.value;i&&p.name===s?t.colorDomain(p.domain):a&&p.name===u&&t.sizeDomain(p.domain)}}catch(t){c=!0,d=t}finally{try{!l&&f.return&&f.return()}finally{if(c)throw d}}}},t.__genVega=function(i){var u=i.table,f=i.filter,y=i.lastFilteredSize,v=i.globalFilter,g=i.pixelRatio,x=i.layerName,b=n(),w=_(),M=function(){return x+"_stats"},L=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,i=arguments[3],a=arguments[4];if("number"==typeof t)return t;if("object"===(void 0===t?"undefined":r(t))&&"quantitative"===t.type)return{scale:(0,o.getSizeScaleName)(a),field:"size"};if("auto"===t){var u=Math.min(n,e),f=s.scale.sqrt().domain(l).range(u>h?d:c).clamp(!0);return Math.round(f(u)*i)}return null}(e.encoding.size,e.transform&&e.transform.limit,y,g,x),k=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{point:{}};return p(t.point.shape)?t.point.shape:"circle"}(e.config),T=[{name:x,sql:a.parser.writeSQL({type:"root",source:u,transform:t.getTransforms(u,f,v,e,y)}),enableHitTesting:e.enableHitTesting}],S={};if(b||w){var E={type:"aggregate",fields:[],ops:[],as:[]},A=[E];if(b){var D=function(t){var n={transforms:[],fields:[]};if("quantitative"===e.encoding.color.type){var r="mincolor",i="maxcolor";t.fields=t.fields.concat(["color","color","color","color"]),t.ops=t.ops.concat(["min","max","avg","stddev"]),t.as=t.as.concat(["mincol","maxcol","avgcol","stdcol"]),n.transforms.push({type:"formula",expr:"max(mincol, avgcol-2*stdcol)",as:r},{type:"formula",expr:"min(maxcol, avgcol+2*stdcol)",as:i}),n.fields=[r,i]}else if("ordinal"===e.encoding.color.type){var o="distinctcolor";t.fields.push("color"),t.ops.push("distinct"),t.as.push(o),n.fields.push(o)}return n}(E);S.color=D.fields,A=A.concat(D.transforms)}if(w){var C=function(t){var e="minsize",n="maxsize";return t.fields.push("size","size","size","size"),t.ops.push("min","max","avg","stddev"),t.as.push("minsz","maxsz","avgsz","stdsz"),{transforms:[{type:"formula",expr:"max(minsz, avgsz-2*stdsz)",as:e},{type:"formula",expr:"min(maxsz, avgsz+2*stdsz)",as:n}],fields:[e,n]}}(E);S.size=C.fields,A=A.concat(C.transforms)}T.push({name:M(),source:x,transform:A})}return{data:T,scales:(0,o.getScales)(e.encoding,x,S,M()),marks:[{type:"symbol",from:{data:x},properties:Object.assign({},{xc:{scale:"x",field:"x"},yc:{scale:"y",field:"y"},fillColor:m(e.encoding.color,x)},{shape:k,width:L,height:L})}]}},t.xDim=(0,o.createRasterLayerGetterSetter)(t,null),t.yDim=(0,o.createRasterLayerGetterSetter)(t,null),(0,o.createVegaAttrMixin)(t,"size",3,1,!0),t.dynamicSize=(0,o.createRasterLayerGetterSetter)(t,null),t.xAttr=(0,o.createRasterLayerGetterSetter)(t,null),t.yAttr=(0,o.createRasterLayerGetterSetter)(t,null);var y=null,v={},g={},x=null;t.crossfilter=function(e){return arguments.length?(x=e,t):x},t._requiresCap=function(){return!1},t.xRangeFilter=function(e){if(!t.xDim())throw new Error("Must set layer's xDim before invoking xRange");var n=t.xDim().value()[0];return arguments.length?(g[n]=e,t):g[n]},t.yRangeFilter=function(e){if(!t.yDim())throw new Error("Must set layer's yDim before invoking yRange");var n=t.yDim().value()[0];return arguments.length?(g[n]=e,t):g[n]},t._genVega=function(e,n,r,o){return t.yDim()&&t.yDim().groupAll().valueAsync(!1,!1,!1,n).then((function(e){(0,i.setLastFilteredSize)(t.crossfilter().getId(),e)})),y=t.__genVega({layerName:n,table:t.crossfilter().getTable()[0],filter:t.crossfilter().getFilterString(n),globalFilter:t.crossfilter().getGlobalFilterString(),lastFilteredSize:(0,i.lastFilteredSize)(t.crossfilter().getId()),pixelRatio:e._getPixelRatio()})};var b=["xc","yc","width","height","fillColor"];return t._addRenderAttrsToPopupColumnSet=function(e,n){y&&Array.isArray(y.marks)&&y.marks.length>0&&y.marks[0].properties&&b.forEach((function(e){t._addQueryDrivenRenderPropToSet(n,y.marks[0].properties,e)}))},t._areResultsValidForPopup=function(t){return void 0!==t.x&&void 0!==t.y},t._displayPopup=function(e){var n=e.chart,i=e.parentElem,o=e.data,a=e.height,s=e.margins,l=e.xscale,c=e.yscale,d=e.minPopupArea,h=e.animate,f={};if(y&&Array.isArray(y.marks)&&y.marks.length>0&&y.marks[0].properties){var p=y.marks[0].properties;b.forEach((function(t){"object"===r(p[t])&&p[t].field&&"string"==typeof p[t].field&&(f[t]=p[t].field)}))}var m=u.Point2d.create(l(o[f.xc||f.x])+s.left,a-c(o[f.yc||f.y])+s.top),_=o[f.size||f.width||f.height];_=Math.max(_,1);var g=t.getSizeVal(_),x=d/(g*g),w=x>1;w&&(g*=Math.sqrt(x));var M=t.popupStyle(),L=t.getFillColorVal(o[f.fillColor]),k=void 0,T=void 0;"object"!==(void 0===M?"undefined":r(M))||w||(L=M.fillColor||L,k=M.strokeColor,T=M.strokeWidth);var S=i.append("div").attr("class","map-point-wrap").append("div").attr("class","map-point-new").style({left:m[0]+"px",top:m[1]+"px"});h&&(w?S.classed("popupPoint",!0):S.classed("fadeInPoint",!0)),v[n]=w;var E=S.append("div").attr("class","map-point-gfx").style("background",L).style("width",g+"px").style("height",g+"px");return k&&E.style("border-color",k),"number"==typeof T&&E.style("border-width",T),u.AABox2d.initCenterExtents(u.AABox2d.create(),m,[g/2,g/2])},t._hidePopup=function(t,e){var n=t.select(".map-point-new");n&&(v[t]?n.classed("removePoint",!0):n.classed("fadeOutPoint",!0),e&&n.on("animationend",(function(){e(t)})),delete v[t])},t._destroyLayer=function(e){var n=t.xDim();n&&n.dispose();var r=t.yDim();r&&r.dispose()},t};var i=n(6253),o=n(3001),a=n(5209),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(5680)),u=n(6154),l=[1e5,0],c=[2,5],d=[1,1],h=15e5,f={average:"AVG",count:"COUNT",min:"MIN",max:"MAX",sum:"SUM"};function p(t){switch(t){case"circle":case"cross":case"diamond":case"hexagon":case"square":case"triangle-down":case"triangle-left":case"triangle-right":case"triangle-up":case"hexagon-vert":case"hexagon-horiz":return!0;default:return!1}}function m(t,e){return"object"===(void 0===t?"undefined":r(t))&&"density"===t.type?{scale:(0,o.getColorScaleName)(e),value:0}:"object"!==(void 0===t?"undefined":r(t))||"ordinal"!==t.type&&"quantitative"!==t.type?"object"===(void 0===t?"undefined":r(t))?(0,o.adjustOpacity)(t.value,t.opacity):t:{scale:(0,o.getColorScaleName)(e),field:"color"}}},4558:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default=function(t){t.crossfilter=(0,o.createRasterLayerGetterSetter)(t,null),t.filtersInverse=(0,o.createRasterLayerGetterSetter)(t,!1),t.colorDomain=(0,o.createRasterLayerGetterSetter)(t,null);var e="colors";(0,o.createVegaAttrMixin)(t,"lineJoin",p[0],p[0],!1,{preDefault:y,preNull:y}),(0,o.createVegaAttrMixin)(t,"miterLimit",10,10,!1,{preDefault:v,preNull:v});var n=null,d=null,g={};function x(){return n.data.length>1}function b(t){return t+"_fillColor"}function w(){return"auto"===n.encoding.color.domain}t.setState=function(e){return(n="function"==typeof e?e(n):e).hasOwnProperty("transform")||(n.transform={}),t},t.getState=function(){return n},t.getProjections=function(){return t.getTransforms({bboxFilter:"",filter:"",globalFilter:"",layerFilter:t.filters(),filtersInverse:t.filtersInverse(),state:n,lastFilteredSize:t.filters().length?t.getState().bboxCount:(0,l.lastFilteredSize)(t.crossfilter().getId())}).filter((function(t){return"project"===t.type&&t.hasOwnProperty("as")&&"key0"!==t.as})).map((function(t){return u.parser.parseTransform({select:[]},t)})).map((function(t){return t.select[0]}))},t.getTransforms=function(t){var n=t.bboxFilter,r=t.filter,i=t.globalFilter,o=t.layerFilter,a=t.filtersInverse,s=t.state,l=t.lastFilteredSize,d=t.isDataExport,h=s.encoding,f=h.color,p=h.geocol,m=h.geoTable,_=[];if(_.push({type:"project",expr:(d&&!x()?"/*+ cpu_mode */ ":"")+m+"."+p,as:p}),x()){var y=["quantitative"===f.type?u.parser.parseExpression(f.aggregate):"SAMPLE("+f.field+")"],v=["color"],g="colors.color";if("string"==typeof f.aggregate){var b=(0,c.default)(s.data[0].table,e,f.aggregate);y=b.factProjections,v=b.factAliases,g=b.expression}var w=[],M={type:"project",expr:s.data[0].table+"."+s.data[0].attr,as:"key0"};_.push({type:"filter",expr:s.data[1].table+"."+s.data[1].attr+" = colors.key0"},{type:"project",expr:"colors.key0",as:"key0"}),"string"==typeof n&&n.length&&_.push({type:"filter",expr:n}),"solid"!==f.type?(w.push({type:"aggregate",fields:y,ops:[null],as:v,groupby:M}),o.length||_.push({type:"project",expr:g,as:"color"})):w.push({type:"aggregate",fields:[],ops:[null],as:[],groupby:M}),o.length&&!d?_.push({type:"aggregate",fields:[u.parser.parseExpression({type:"case",cond:[[{type:a?"not in":"in",expr:"colors.key0",set:o},"solid"===f.type?1:g]],else:null})],ops:[null],as:["color"],groupby:{}}):o.length&&d&&_.push({type:"filter",expr:u.parser.parseExpression({type:a?"not in":"in",expr:"colors.key0",set:o})}),"string"==typeof r&&r.length&&w.push({type:"filter",expr:r}),"string"==typeof i&&i.length&&w.push({type:"filter",expr:i}),_.push({type:"with",expr:"colors",fields:{source:""+s.data[0].table,type:"root",transform:w}})}else{var L="quantitative"===f.type&&"string"==typeof f.aggregate?f.aggregate:f.field;"solid"===f.type||o.length||_.push({type:"project",expr:L,as:"color"}),o.length&&!d?_.push({type:"project",expr:u.parser.parseExpression({type:"case",cond:[[{type:a?"not in":"in",expr:"rowid",set:o},"solid"===f.type?1:L]],else:null}),as:"color"}):o.length&&d&&_.push({type:"filter",expr:u.parser.parseExpression({type:a?"not in":"in",expr:"rowid",set:o})}),"string"==typeof r&&_.push({type:"filter",expr:""!==r?n+" AND "+r:n}),"string"==typeof i&&i.length&&_.push({type:"filter",expr:i})}if("number"==typeof s.transform.limit){var k=s.transform.sample,T=o.length;k&&T?_.push({type:"sample",method:"multiplicativeRowid",expr:o,field:x()?"colors.key0":s.data[0].table+"."+s.data[0].attr,size:l||s.transform.tableSize,limit:s.transform.limit,sampleTable:m}):k&&_.push({type:"sample",method:"multiplicative",expr:o,size:l||s.transform.tableSize,limit:s.transform.limit,sampleTable:m})}return _},t._updateFromMetadata=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(w()&&Array.isArray(e.scales)){var r=b(n),i=!0,o=!1,a=void 0;try{for(var s,u=e.scales[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;l.name===r&&t.colorDomain(l.domain)}}catch(t){o=!0,a=t}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}}},t.__genVega=function(r){var a=r.bboxFilter,s=r.filter,l=r.globalFilter,c=r.layerFilter,d=void 0===c?[]:c,p=r.lastFilteredSize,m=r.filtersInverse,_=r.layerName,y=r.useProjection,v=w(),g=function(){return _+"_stats"},M=[{name:_,format:"polys",sql:u.parser.writeSQL({type:"root",source:x()?n.data[1].table+", "+e:""+n.data[0].table,transform:t.getTransforms({bboxFilter:a,filter:s,globalFilter:l,layerFilter:d,filtersInverse:m,state:n,lastFilteredSize:p})}),enableHitTesting:!0}];v&&M.push({name:g(),source:_,transform:[{type:"aggregate",fields:["color","color","color","color"],ops:["min","max","avg","stddev"],as:["mincol","maxcol","avgcol","stdcol"]},{type:"formula",expr:"max(mincol, avgcol-2*stdcol)",as:"mincolor"},{type:"formula",expr:"min(maxcol, avgcol+2*stdcol)",as:"maxcolor"}]});var L=[],k={},T=!("solid"===n.encoding.color.type);if(d.length&&!T){var S=b(_);L.push({name:S,type:"ordinal",domain:[1],range:[(0,o.adjustOpacity)(n.encoding.color.value,n.encoding.color.opacity)],nullValue:(0,o.adjustOpacity)(f,n.encoding.color.opacity||.65),default:h}),k={scale:S,field:"color"}}else if(T){var E=n.encoding.color.range.map((function(t){return(0,o.adjustOpacity)(t,n.encoding.color.opacity)})),A=b(_);"quantitative"===n.encoding.color.type?L.push({name:A,type:"quantize",domain:v?{data:g(),fields:["mincolor","maxcolor"]}:n.encoding.color.domain,range:E,nullValue:(0,o.adjustOpacity)(f,n.encoding.color.opacity||.65),default:h}):L.push({name:A,type:"ordinal",domain:n.encoding.color.domain,range:E,nullValue:(0,o.adjustOpacity)(f,n.encoding.color.opacity||.65),default:E[E.length-1]||n.encoding.color.default}),k={scale:A,field:"color"}}else k={value:(0,o.adjustOpacity)(n.encoding.color.value,n.encoding.color.opacity)};var D="object"===i(n.mark)?n.mark:{strokeColor:"white",lineJoin:"miter",miterLimit:10,strokeWidth:0},C=[{type:"polys",from:{data:_},properties:{x:{field:"x"},y:{field:"y"},fillColor:k,strokeColor:"fillColor"===D.strokeColor?k:D.strokeColor,strokeWidth:D.strokeWidth,lineJoin:D.lineJoin,miterLimit:D.miterLimit}}];return y?C[0].transform={projection:"mercator_map_projection"}:(C[0].properties.x.scale="x",C[0].properties.y.scale="y"),{data:M,scales:L,marks:C}},t._requiresCap=function(){return!1},t.viewBoxDim=(0,o.createRasterLayerGetterSetter)(t,null),t._genVega=function(e,n,r){var i=e.map().getBounds(),o=t.getState().encoding.geoTable+"."+t.getState().encoding.geocol,a="ST_XMax("+o+") >= "+i._sw.lng+" AND ST_XMin("+o+") <= "+i._ne.lng+" AND ST_YMax("+o+") >= "+i._sw.lat+" AND ST_YMin("+o+") <= "+i._ne.lat,s=t.crossfilter().getFilter(n).filter((function(e,n){return n!==t.dimension().getDimensionIndex()&&""!==e&&null!=e})),u="",l=!0;return s.forEach((function(t){l||(u+=" AND "),l=!1,u+=t})),d=t.__genVega({layerName:n,bboxFilter:a,filter:u,globalFilter:t.crossfilter().getGlobalFilterString(),layerFilter:t.filters(),lastFilteredSize:t.getState().bboxCount,filtersInverse:t.filtersInverse(),useProjection:e._useGeoTypes})},t._addRenderAttrsToPopupColumnSet=function(e,r){e._useGeoTypes?n.encoding.geocol&&r.add(n.encoding.geocol):(r.add(m),r.add(_)),d&&Array.isArray(d.marks)&&d.marks.length>0&&d.marks[0].properties&&o.renderAttributes.forEach((function(e){"x"!==e&&"y"!==e&&t._addQueryDrivenRenderPropToSet(r,d.marks[0].properties,e)}))},t._areResultsValidForPopup=function(t){return!!(n.encoding.geocol&&t[n.encoding.geocol]||t[m]&&t[_])};var M=[],L=a.default.dispatch.apply(a.default,["filtered"]);return t.filter=function(e,n,r,i){n!==t.filtersInverse()&&(t.filterAll(i),t.filtersInverse(n)),M=M.includes(e)?M.filter((function(t){return t!==e})):[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(M),[e]),"key0"===r&&t.getState().data.length>1&&(r=t.getState().data[0].table+"."+t.getState().data[0].attr),1===M.length&&r&&(t.dimension().set((function(){return[r]})),t.viewBoxDim(null)),M.length&&r?t.dimension().filterMulti(M,void 0,n):t.filterAll(i)},t.filters=function(){return M},t.filterAll=function(e){M=[],t.dimension().filterAll();var n=t.getState().encoding.geoTable+"."+t.getState().encoding.geocol;if(t&&t.getState().data&&t.getState().data.length<2){var r=t.dimension().set((function(){return[n]})),i=e.map().getBounds();t.viewBoxDim(r),t.viewBoxDim().filterST_Min_ST_Max({lonMin:i._sw.lng,lonMax:i._ne.lng,latMin:i._sw.lat,latMax:i._ne.lat})}L.filtered(t,M)},t.on=function(e,n){return L.on(e,n),t},t._displayPopup=function(e){return(0,o.__displayPopup)(r({},e,{_vega:d,_layer:t,state:n}))},t.onClick=function(e,n,r){if(n&&("master"!==t.getState().currentLayer||!function(t){return(t&&t.getAllLayers().length?t.getAllLayers().filter((function(t){return"polys"===t.layerType()})):[]).length>1}(e))){var i=Boolean(r&&(r.metaKey||r.ctrlKey)),o=Object.keys(n).find((function(t){return"rowid"===t||"key0"===t}));e.hidePopup(),s.events.trigger((function(){new Promise((function(r){t.filter(n[o],i,o,e),L.filtered(t,M),e.filter(n[o],i),r("filtered")})).then((function(){e.redrawGroup()}))}))}},t._hidePopup=function(t,e){var n=t.select(".map-poly");n&&(g[t]?n.classed("removePoly",!0):n.classed("fadeOutPoly",!0),e&&n.on("animationend",(function(){e(t)})),delete g[t])},t._destroyLayer=function(e){t.on("filtered",null);var n=t.viewBoxDim(),r=t.dimension();n&&n.dispose(),r&&r.dispose()},t};var o=n(3001),a=d(n(5680)),s=n(7467),u=n(5209),l=n(6253),c=d(n(5769));function d(t){return t&&t.__esModule?t:{default:t}}var h="rgba(214, 215, 214, 0.65)",f="#d6d7d6",p=["miter","round","bevel"],m="mapd_geo_coords",_="mapd_geo_linedrawinfo";function y(t,e){if("string"!=typeof t)throw new Error("Line join must be a string and must be one of "+p.join(", "));var n=t.toLowerCase();if(p.indexOf(n)<0)throw new Error("Line join must be a string and must be one of "+p.join(", "));return n}function v(t,e){if("number"!=typeof t)throw new Error("Miter limit must be a number.");if(t<0)throw new Error("Miter limit must be >= 0")}},2345:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default=function(t){var e=t,n=null,f=null,m=[],_=(0,o.default)({setDataAsync:function(t){},data:function(t){},filter:function(){},_mandatoryAttributes:function(t){return arguments.length?(m=t,_):m}});if(_.othersGrouper(!1),"points"===t)_=(0,a.default)(_);else if("polys"===t)_=(0,s.default)(_);else if(/heat/.test(t))_=(0,u.default)(_);else{if("lines"!==t)throw new Error('"'+t+'" is not a valid layer type. The valid layer types are: '+p.join(", "));_=(0,l.default)(_)}var y=1;(0,c.createVegaAttrMixin)(_,"fillColor","#22A7F0","#CACACA",!0),(0,c.createVegaAttrMixin)(_,"strokeColor","white","white",!0),(0,c.createVegaAttrMixin)(_,"strokeWidth",0,0,!0),_.popupColumns=(0,c.createRasterLayerGetterSetter)(_,[]),_.popupColumnsMapped=(0,c.createRasterLayerGetterSetter)(_,{}),_.popupFunction=(0,c.createRasterLayerGetterSetter)(_,null),_.popupStyle=(0,c.createRasterLayerGetterSetter)(_,{}),_.densityAccumulatorEnabled=(0,c.createRasterLayerGetterSetter)(_,!1);var v={};function g(t){return"x"===t||"y"===t||"color"===t||"size"===t||"strokeColor"===t||"strokeWidth"===t}function x(t,e){var n=_.group()||_.dimension();if(n||"points"===_.layerType()||"lines"===_.layerType()||"polys"===_.layerType())for(var r="points"===_.layerType()||"lines"===_.layerType()||"polys"===_.layerType()||""===_.layerType()?_.getProjections():n.getProjectOn(!0),i=/^\s*(.*?)\s+as\s+(\S+)/i,o=/^\s*(\S+\s*\(.*\))\s+as\s+(\S+)/i,a=0;a<r.length;++a){var s=r[a],u=s.match(i);if(u){if(u[2]===t){if(g(t)){var l=_.getMeasureLabel(u);e.delete(u[1]),e.delete(l)}else e.delete(t);t=s;break}}else{if((u=s.match(o))&&u[2]===t){e.delete(t),t=s;break}if(s&&s.replace(/^\s+|\s+$/g,"")===t)break}}return e.add(t)}return _.layerType=function(){return e},_.dimension=function(t){return arguments.length?(n=t,_):n},_.group=function(t,e){return arguments.length?(f=t,_._groupName=e,_):f},_.opacity=function(t){return arguments.length?(y=t,_):y},_.genVega=function(t,e){var n=_.cap(),r=_.group()||{},o="";return"dimension"===r.type?o=r.writeTopQuery(n,void 0,!0):"group"===r.type&&(o=r.writeTopQuery(n,void 0,!1,!0)),o.length,"heatmap"===_.type?_._genVega(i({},function(t,e){return{table:_.crossfilter().getTable()[0],width:Math.round(t.width()*t._getPixelRatio()),height:Math.round(t.height()*t._getPixelRatio()),min:t.conv4326To900913(t._minCoord),max:t.conv4326To900913(t._maxCoord),filter:_.crossfilter().getFilterString(e),globalFilter:_.crossfilter().getGlobalFilterString(),neLat:t._maxCoord[1],zoom:t.zoom()}}(t,e),{layerName:e})):_._genVega(t,e,r,o)},_.hasPopupColumns=function(){var t=_.popupColumns();return Boolean(t&&t instanceof Array&&t.length>0)},_.getMeasureLabel=function(t){var e=null;return"color"===t[2]||"strokeColor"===t[2]?e=_.getState().encoding.color:"size"===t[2]||"strokeWidth"===t[2]?e=_.getState().encoding.size:"x"!==t[2]&&"y"!==t[2]||(e=_.getState().encoding[t[2]]),e&&e.field===t[1]?e.label:e},_.getPopupAndRenderColumns=function(t){var e=new Set,n=_.popupColumns();n&&n.forEach((function(t){x(t,e)})),_._addRenderAttrsToPopupColumnSet(t,e);var r=[];return e.forEach((function(t){r.push(t)})),r},_.areResultsValidForPopup=function(t){return!!t&&_._areResultsValidForPopup(t[0])},_.displayPopup=function(t,e,n,r,i){var o=n.row_set[0],a=_.popupColumns(),s=_.popupColumnsMapped(),u=function(t,e,n){var r={},i=new Set(e);for(var o in t)if(i.has(o))r[o]=t[o],t[o]instanceof Date?(0,h.default)(t[o]).utc():t[o],"function"==typeof n.useLonLat&&n.useLonLat()&&("x"===o?r[o]=n.conv900913To4326X(t[o]):"y"===o&&(r[o]=n.conv900913To4326Y(t[o])));else for(var a=_.group()||_.dimension(),s="points"===_.layerType()||"lines"===_.layerType()||"polys"===_.layerType()||""===_.layerType()?_.getProjections():a.getProjectOn(!0),u=/^\s*(.*?)\s+as\s+(\S+)/i,l=0;l<s.length;++l){var c=s[l].match(u),d=_.getMeasureLabel(c);i.has(d)&&(r[d]=t[c[2]])}return r}(o,a,t),l="function"==typeof t.effectiveWidth?t.effectiveWidth():t.width(),c="function"==typeof t.effectiveHeight?t.effectiveHeight():t.height(),f="function"==typeof t.margins?t.margins():{left:0,right:0,top:0,bottom:0},p=t.x(),m=t.y(),y=p.range(),g=m.range();p.range([0,l]),m.range([0,c]);var x={chart:t,parentElem:e,data:o,width:l,height:c,margins:f,xscale:p,yscale:m,minPopupArea:r,animate:i},b=_._displayPopup(x);p.range(y),m.range(g);var w=d.AABox2d.getCenter(d.Point2d.create(),b),M=d.AABox2d.create(0,0,l,c);if(d.AABox2d.intersection(M,M,b),d.AABox2d.isEmpty(M))throw new Error("Found a non-overlapping bounds for a pop-up shape and its parent div");var L=d.AABox2d.getSize(d.Point2d.create(),M),k=d.AABox2d.getCenter(d.Point2d.create(),M),T=0,S=e.append("div").attr("class","map-popup-wrap-new").style({left:w[0]+"px",top:w[1]+"px"}),E=S.append("div").attr("class","map-popup-box-new").html(_.popupFunction()?_.popupFunction(u,a,s):function(t,e,n,r){var i="";return e.forEach((function(e){if(void 0!==t[e]){var o=n&&n[e]?n[e]:e,a=o.replace(/.*\((.*)\).*/,"$1");i=i+'<div class="map-popup-item"><span class="popup-item-key">'+o+':</span><span class="popup-item-val"> '+r(t[e],a)+"</span></div>"}})),i}(u,a,s,t.measureValue)).style("left",(function(){var t=d3.select(this).node().getBoundingClientRect(),e=t.width,n=e/2,r=t.height,i=r/2,o=0,a=0,s=0;if(L[0]>=e||w[0]+n<l&&w[0]-n>=0){if(o=w[0]-k[0],(a=M[d.AABox2d.MINY]-r)>=0)return T=-(w[1]-M[d.AABox2d.MINY]+Math.min(6,a)+i),o+"px";if((a=M[d.AABox2d.MAXY]+r)<c)return T=M[d.AABox2d.MAXY]-w[1]+Math.min(6,a)+i,o+"px"}if(L[1]>=r||w[1]+i<c&&w[1]-i>=0){if(T=k[1]-w[1],(s=M[d.AABox2d.MINX]-e)>=0)return(o=-(w[0]-M[d.AABox2d.MINX]+Math.min(6,s)+n))+"px";if((s=M[d.AABox2d.MAXX]+e)<l)return(o=M[d.AABox2d.MAXX]-w[0]+Math.min(6,s)+n)+"px"}return l-L[0]>=e&&c-L[1]>=r?Math.abs(r-L[1])<Math.abs(e-L[0])?(a=c-L[1]-r,T=M[d.AABox2d.MINY]<c-M[d.AABox2d.MAXY]?Math.min(6,a)+i-w[1]:c-Math.min(6,a)-i-w[1],(s=M[d.AABox2d.MINX]-e)>=0?o=-(w[0]-M[d.AABox2d.MINX]+Math.min(6,s)+n):(s=M[d.AABox2d.MAXX]+e,o=M[d.AABox2d.MAXX]-w[0]+Math.min(6,s)+n),o+"px"):(s=l-L[0]-e,o=M[d.AABox2d.MINX]<l-M[d.AABox2d.MAXX]?Math.min(6,s)+n-w[0]:l-Math.min(6,s)-n-w[0],(a=M[d.AABox2d.MINY]-r)>=0?T=-(w[1]-M[d.AABox2d.MINY]+Math.min(6,a)+i):(a=M[d.AABox2d.MAXY]+r,T=M[d.AABox2d.MAXY]-w[1]+Math.min(6,a)+i),o+"px"):(e*r<L[0]*L[1]?(T=k[1]-w[1],o=k[0]-w[0]):(T=c/2-w[1],o=l/2-w[0]),o+"px")})).style("top",(function(){return T+"px"}));v[t]=E,i&&S.classed("showPopup",!0)},_.isPopupDisplayed=function(t){return void 0!==v[t]},_.hidePopup=function(t,e){if(v[t]){var n=t.select(".map-popup-wrap-new");n&&n.classed("removePopup",!0).on("animationend",(function(){delete v[t],e(t)})),_._hidePopup(t)}},_.destroyLayer=function(t){_._destroyLayer(t)},_._addQueryDrivenRenderPropToSet=function(t,e,n){if("object"===r(e[n])&&"string"==typeof e[n].field)return x(e[n].field,t),t},_};var o=f(n(6733)),a=f(n(8033)),s=f(n(4558)),u=f(n(4830)),l=f(n(9304)),c=n(3001),d=n(6154),h=f(n(381));function f(t){return t&&t.__esModule?t:{default:t}}var p=["points","polys","heat","lines"]},8302:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=window.hasOwnProperty("con")?con:null,n=!1,r=null,u=[],l={},c=2,d=null,h=null,f=null,p={},m=null,_=["preData"],y=s.default.dispatch.apply(s.default,_),v=t.on.bind(t),g=!0;return t.popupDisplayable=function(t){g=Boolean(t)},t.on=function(e,n){return-1===_.indexOf(e)?v(e,n):y.on(e,n),t},t._invokePreDataListener=function(e){"undefined"!==e&&y.preData(t,e)},t.getMinMax=function(e){return p[e]?Promise.resolve(p[e]):t.crossfilter().groupAll().reduce([{expression:e,agg_mode:"min",name:"minimum"},{expression:e,agg_mode:"max",name:"maximum"}]).valuesAsync(!0).then((function(t){return p[e]=[t.minimum,t.maximum],p[e]}))},t.getTopValues=function(e){return p[e]?Promise.resolve(p[e]):t.crossfilter().dimension(e).order("val").group().reduceCount(e).topAsync(10,0,null,!0).then((function(t){return t.map((function(t){return t.key0}))}))},t.crossfilter=function(e){return arguments.length?(m=e,t):m},t.xRangeFilter=function(e){if(!t.xDim())throw new Error("Must set xDim before invoking xRange");var n=t.xDim().value()[0];return arguments.length?(p[n]=e,t):p[n]},t.yRangeFilter=function(e){if(!t.yDim())throw new Error("Must set yDim before invoking yRange");var n=t.yDim().value()[0];return arguments.length?(p[n]=e,t):p[n]},t.popupSearchRadius=function(e){return arguments.length?(c=e,t):c},t._resetVegaSpec=function(){var e=this._getPixelRatio();t._vegaSpec.width=Math.round(t.width()*e),t._vegaSpec.height=Math.round(t.height()*e),t._vegaSpec.data=[{name:"table",sql:"select x, y from tweets;"}],r&&(t._vegaSpec.data[0].dbTableName=r),t._vegaSpec.scales=[],t._vegaSpec.marks=[]},t.con=function(n){return arguments.length?(e=n,t):e},t.popupColumns=function(e){return arguments.length?(u=e,t):u},t.popupColumnsMapped=function(e){return arguments.length?(l=e,t):l},t.tableName=function(e){return arguments.length?(r=e,t):r},t.popupFunction=function(e){return arguments.length?(d=e,t):d},t.sampling=function(e){return arguments.length?(e&&!n?(0,i.incrementSampledCount)():!e&&n&&(0,i.decrementSampledCount)(),!1===(n=e)&&t.dimension().samplingRatio(null),t):n},t.setSample=function(){if(n){var e=t.dimension().getCrossfilterId(),r=(0,o.lastFilteredSize)(e);null==r?t.dimension().samplingRatio(null):t.dimension().samplingRatio(Math.min(t.cap()/r,1))}},t._determineScaleType=function(t){return void 0!==t.rangeBand?"ordinal":void 0!==t.exponent?"power":void 0!==t.base?"log":void 0!==t.quantiles?"quantiles":void 0!==t.interpolate?"linear":"quantize"},t.vegaSpec=function(e){return arguments.length?(t._vegaSpec=e,t):t._vegaSpec},t.colorBy=function(e){return arguments.length?(h=e,t):h},t.sizeBy=function(e){return arguments.length?(f=e,t):f},t.getClosestResult=function(e,n){if(!(t.drawMode&&t.drawMode()||!t.popupColumns().length)){var r="function"==typeof t.effectiveHeight?t.effectiveHeight():t.height(),i=t._getPixelRatio()||1,o=new TPixel({x:Math.round(e.x*i),y:Math.round((r-e.y)*i)}),a=t.tableName(),s=function(){var e=t.popupColumns().slice();return"function"==typeof t.useLonLat&&t.useLonLat()?(e.push("conv_4326_900913_x("+t._xDimName+") AS xPoint"),e.push("conv_4326_900913_y("+t._yDimName+") AS yPoint")):(e.push(t._xDimName+" AS xPoint"),e.push(t._yDimName+" AS yPoint")),t.colorBy()&&-1===e.indexOf(t.colorBy().value)&&e.push(t.colorBy().value),e}();e&&a&&s.length&&(3!==s.length||!x())&&t.con().getResultRowForPixelAsync(t.__dcFlag__,o,{table:s},c*i).then((function(t){return n(t[0])}))}},t.displayPopup=function(e){if(g&&e&&e.row_set&&e.row_set.length&&t.select(".map-popup").empty()){var n=e.row_set[0],r=function(t,e){var n={};for(var r in t)n[e[r]||r]=t[r];return n}(n,l);if(2===Object.keys(r).length)return;var i=0,o="function"==typeof t.effectiveWidth?t.effectiveWidth():t.width(),u="function"==typeof t.effectiveHeight?t.effectiveHeight():t.height(),c="function"==typeof t.margins?t.margins():{left:0,right:0,top:0,bottom:0},h=t.x(),f=t.y(),p=h.range(),m=f.range();h.range([0,o]),f.range([0,u]);var _=h(n.xPoint)+c.left,y=u-f(n.yPoint)+c.top;h.range(p),f.range(m);var v=t.root().append("div").attr("class","map-popup");v.on("wheel",(function(){t.select(".map-popup").remove()})),v.append("div").attr("class","map-point-wrap").append("div").attr("class","map-point").style({left:_+"px",top:y+"px"}).append("div").attr("class","map-point-gfx").style("background",function(e){if(t.colors().domain&&t.colorBy()){if(isNaN(t.colors().domain()[0])){var n=t.colors().domain().indexOf(e[t.colorBy().value]);return-1!==n?t.colors().range()[n]:t.defaultColor()}return t.colors()(e[t.colorBy().value])}return t.defaultColor()}(e.row_set[0])),v.append("div").attr("class","map-popup-wrap").style({left:_+"px",top:y+"px"}).append("div").attr("class","map-popup-box").html(t.popupFunction()?d(r):function(e){var n="";for(var r in e)"xPoint"===r||"yPoint"===r||t.colorBy()&&r===t.colorBy().value&&x()||(n=n+'<div class="map-popup-item"><span class="popup-item-key">'+r+':</span><span class="popup-item-val"> '+a.utils.formatValue(e[r])+"</span></div>");return n}(r)).style("left",(function(){var e=s.default.select(this).node().getBoundingClientRect().width,n=t.width()-(_+e/2)<0?t.width()-(_+e/2)-6:_-e/2<0?6-(_-e/2):0;return i=e/2-n,n+"px"})).classed("pop-down",(function(){var t=s.default.select(this).node().getBoundingClientRect().height;return y-(t+12)<8})).append("div").attr("class","map-popup-bridge").style("left",(function(){return i+"px"}))}},t.hidePopup=function(){t.select(".map-popup").empty()||(t.select(".map-popup-wrap").classed("removePopup",!0).on("animationend",(function(){t.select(".map-popup").remove()})),t.select(".map-point").classed("removePoint",!0))},t._vegaSpec={},t;function x(){return t.colorBy()&&-1===t.popupColumns().indexOf(t.colorBy().value)}};var r,i=n(791),o=n(6253),a=n(5209),s=(r=n(5680))&&r.__esModule?r:{default:r}},5811:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e="undefined"==typeof mapboxgl?e:mapboxgl,t._xDimName=null,t._yDimName=null;var a=null,s=null,u=null,l=null,c={remove:function(){t._destroyScatterPlot()},resize:function(){}};function d(t,e,n){if(t){e.push(t);var r=t.getFilter();null!==r&&r.forEach((function(t){n.push(t)}))}}function h(e){var n=[],r=[],i=[],o=[];d(e.xDim(),n,i),d(e.yDim(),r,o),"function"==typeof e.getLayers&&t.getLayers().forEach((function(t){"function"==typeof t.xDim&&d(t.xDim(),n,i),"function"==typeof t.yDim&&d(t.yDim(),r,o)}));var a=e.y&&e.y()&&e.y().domain(),s=e.x&&e.x()&&e.x().domain(),u=e.elasticY()&&o.length?o:a&&a.length&&!a.some((function(t){return null===t}))?[a]:o,l=e.elasticX()&&i.length?i:s&&s.length&&!s.some((function(t){return null===t}))?[s]:i;return{xDims:n,yDims:r,xRanges:l,yRanges:u}}return o(c,e.Evented.prototype),t.map=function(){return c},t.getDataRenderBounds=function(){var e=h(t),n=e.xRanges,i=e.yRanges;if(n.length){if(u=n.reduce((function(t,e){return[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}),[Number.MAX_VALUE,-Number.MAX_VALUE]),t.elasticX()){var o=t.xAxisPadding();u[0]=r.utils.subtract(u[0],o)||0,u[1]=r.utils.add(u[1],o)||0}}else u=[0,1];if(i.length){if(l=i.reduce((function(t,e){return[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}),[Number.MAX_VALUE,-Number.MAX_VALUE]),t.elasticY()){var a=t.yAxisPadding();l[0]=r.utils.subtract(l[0],a)||0,l[1]=r.utils.add(l[1],a)||0}}else l=[0,1];var s=t._fitToMaxBounds([[u[0],l[0]],[u[1],l[1]]]);return u[0]=s[0][0],u[1]=s[1][0],l[0]=s[0][1],l[1]=s[1][1],[[u[0],l[1]],[u[1],l[1]],[u[1],l[0]],[u[0],l[0]]]},t.xRange=function(){return u},t.yRange=function(){return l},t.xDim=function(e){return arguments.length?((a=e)&&(t._xDimName=a.value()[0]),u=null,t):a},t.yDim=function(e){return arguments.length?((s=e)&&(t._yDimName=s.value()[0]),l=null,t):s},t._setOverlay=function(e){var n=e.data,i=e.bounds,o=e.nonce,a=e.browser,s=e.redraw;if(void 0!==i){var u=null;if(n)if(a.isSafari||a.isIE||a.isEdge){u=r.utils.b64toBlob(n,"image/png");var l=URL.createObjectURL(u)}else l="data:image/png;base64,"+n;t._drawScatterPlot(!s,l,i,o)}},t.isLoaded=function(){return u&&l},n&&(t=(0,i.rasterDrawMixin)(t)),t};var r=n(5209),i=n(3411);function o(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}},1706:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setCursorSpinner=e.areAnySpinnersShowing=void 0,e.default=function(t){var e=a.SPINNER_DELAY,n=null,r=!1;t.isSpinnerShowing=function(){return r};var i=function(){var e=t.anchor(),n=o.default.select(e);n.classed("chart-loading-overlay",!0),n.append("div").classed("loading-widget-dc",!0).append("div").classed("main-loading-icon",!0)},l=function(){var e=t.anchor(),n=o.default.select(e);n.classed("chart-loading-overlay",!1),n.selectAll((function(){return[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(this.childNodes)).filter((function(t){return"loading-widget-dc"===t.className}))})).remove(),o.default.select("body").classed("waiting",s())};function c(){r&&(r=!1,l(),u()),window.clearTimeout(n)}return t.spinnerDelay=function(n){return arguments.length?(e=n,t):e},t.dataFetchSuccessfulCallback=function(e){return arguments.length?(l=e,t):l},t.dataFetchRequestCallback=function(e){return arguments.length?(i=e,t):i},t.on("dataFetch.spinner",(function(){n&&window.clearTimeout(n),n=window.setTimeout((function(){r=!0,i(),u()}),e)})),t.on("postRedraw.spinner",c),t.on("postRender.spinner",c),t.on("dataError.spinner",(function(){console.log(t.__dcFlag__,": error"),c()})),t};var r,i=n(791),o=(r=n(5680))&&r.__esModule?r:{default:r},a=n(1320),s=e.areAnySpinnersShowing=function(){return i.chartRegistry.list().some((function(t){return t.isSpinnerShowing()}))},u=e.setCursorSpinner=function(){return o.default.select("body").classed("waiting",s())}},9825:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=a.default.layout.stack().values((function(e,n){var r=e.accessor||t.valueAccessor();e.name=String(e.name||"series_"+(n+1)),e.layer=e.name,e.idx=n;var i=null!=t.dataCache?t.dataCache:e.group.all();return e.values=i.map((function(i,o){return{x:t.keyAccessor()(i,o),y:e.hidden?null:r(i,o)||0,idx:n,data:i,layer:e.name,hidden:e.hidden}})),e.values=e.values.filter(t.x()?t.isOrdinal()||t.elasticX()?function(){return!0}:function(t){return!0}:a.default.functor(!0)),e.values})),n=[],r={},l=!1,c=!1;function d(t){var e=n.map((0,o.pluck)("name")).indexOf(t);return n[e]}function h(){var e=t.data().map((function(t){return t.values}));return Array.prototype.concat.apply([],e)}function f(t){return!t.hidden}return t.stack=function(e,r,i){if(!arguments.length)return n;arguments.length<=2&&(i=r);var o={group:e};return"string"==typeof r&&(o.name=r),"function"==typeof i&&(o.accessor=i),n.push(o),t},(0,s.override)(t,"group",(function(e,i,o){return arguments.length?(n=[],r={},t.stack(e,i),o&&t.valueAccessor(o),t._group(e,i)):t._group()})),t.hidableStacks=function(e){return arguments.length?(l=e,t):l},t.hideStack=function(e){var n=d(e);return n&&(n.hidden=!0),t},t.showStack=function(e){var n=d(e);return n&&(n.hidden=!1),t},t.getValueAccessorByIndex=function(e){return n[e].accessor||t.valueAccessor()},t.yAxisMin=function(){var e=a.default.min(h(),(function(e){return void 0===t.renderArea||t.renderArea()?e.y+e.y0<e.y0?e.y+e.y0:e.y0:e.y}));return o.utils.subtract(e,t.yAxisPadding())},t.yAxisMax=function(){var e=a.default.max(h(),(function(e){return void 0===t.renderArea||t.renderArea()?e.y+e.y0:e.y}));return o.utils.add(e,t.yAxisPadding())},t.xAxisMin=function(){return o.utils.subtract(a.default.min(h(),o.minVal),t.xAxisPadding())},t.xAxisMax=function(){return o.utils.add(a.default.max(h(),o.maxVal),t.xAxisPadding())},(0,s.override)(t,"title",(function(e,n){return e?"function"==typeof e?t._title(e):e===t._groupName&&"function"==typeof n?t._title(n):"function"!=typeof n?r[e]||t._title():(r[e]=n,t):t._title()})),t.stackLayout=function(n){return arguments.length?(e=n,t):e},t.data((function(){var e=n.filter(f);return e.length?t.stackLayout()(e):[]})),t._ordinalXDomain=function(){var e=h().map((0,o.pluck)("data"));return t._computeOrderedGroups(e).map(t.keyAccessor())},t.colorByLayerId=function(e){return arguments.length?(c=e,t):c},t.colorAccessor((function(t){return c?this.idx:this.layer||this.name||t.name||t.layer})),t.legendables=function(){return n.map((function(e,n){return{chart:t,name:e.name,hidden:e.hidden||!1,color:t.getColor.call(e,e.values,n)}}))},t.isLegendableHidden=function(t){var e=d(t.name);return!!e&&e.hidden},t.legendToggle=function(e){l&&(t.isLegendableHidden(e)?t.showStack(e.name):t.hideStack(e.name),t.renderGroup())},(0,s.override)(t,"binParams",(function(e){if(!arguments.length)return t.group().binParams();var n=(e=Array.isArray(e)?e:[e]).map((function(t){if(t){var e=t.timeBin,n=void 0===e?"auto":e,r=t.binBounds,o=t.numBins,a=(t.auto,t.extract||!1);if(r[0]instanceof Date&&n&&!a){var s=r.map((function(t){return t.getTime()}));return Object.assign({},t,{extract:a,timeBin:(0,i.checkIfTimeBinInRange)(s,n,o),binBounds:r.slice()})}return t}return null}));return(0,i.createBinParams)(t,n)})),t.keyAccessor(u.multipleKeysAccessorForStack),t};var r,i=n(2814),o=n(5209),a=(r=n(5680))&&r.__esModule?r:{default:r},s=n(791),u=n(2446)},9353:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();e.default=function(t,e,n,r,i,o,a,s,u,l){var d=t.map(),h=null,_=null;function y(n){var r=new u.Point(0,0);c(t,e,n,r)&&E("mouseout",n,r)}function v(n){var r=new u.Point(0,0);c(t,e,n,r)&&(h=r,E("mousedown",n,r))}function g(t){E("mouseup",t,new u.Point(0,0))}function x(n){var r=new u.Point(0,0);if(c(t,e,n,r)){if(d.dragPan&&d.dragPan.isActive())return;for(var i=n.toElement||n.target;i&&i!==e;)i=i.parentNode;if(i!==e)return;E("mousemove",n,r)}}function b(n){if(c(t,e,n)){if(d.dragPan&&d.dragPan.isActive()||d.bozZoom&&d.boxZoom.isActive())return;if(A("touchstart",n),!n.touches||n.touches.length>1)return;_?(clearTimeout(_),_=null,E("dblclick",n)):_=setTimeout(k,300)}}function w(n){c(t,e,n)&&A("touchmove",n)}function M(n){c(t,e,n)&&A("touchend",n)}function L(n){c(t,e,n)&&A("touchcancel",n)}function k(){_=null}function T(n){var r=new u.Point(0,0);c(t,e,n,r)&&r.equals(h)&&E("click",n,r)}function S(n){var r=new u.Point(0,0);c(t,e,n,r)&&(E("dblclick",n,r),n.preventDefault())}function E(e,n,r){return d.fire(e,{dataCoord:t.unproject(r),point:r,originalEvent:n})}function A(n,r){var i=function(e,n){for(var r=e.getBoundingClientRect(),i=[],o=t.margins(),a=0;a<n.touches.length;a+=1)i.push(new u.Point(n.touches[a].clientX-o.left-r.left-e.clientLeft,n.touches[a].clientY-o.top-r.top-e.clientTop));return i}(e,r),o=i.reduce((function(t,e,n,r){return t.add(e.div(r.length))}),new u.Point(0,0));return d.fire(n,{dataCoord:t.unproject(o),point:o,dataCoords:i.map((function(e){return t.unproject(e)}),this),points:i,originalEvent:r})}function D(){d.dragPan.disable(),d.boxZoom.disable(),d.scrollZoom.disable()}d.scrollZoom=new p(t,e,n,r,i,o,a,u,s),d.boxZoom=new f(t,e,n,r,i,o,a,u),d.dragPan=new m(t,e,n,r,i,o,a,u),e.addEventListener("mouseout",y,!1),e.addEventListener("mousedown",v,!1),e.addEventListener("mouseup",g,!1),e.addEventListener("mousemove",x,!1),e.addEventListener("touchstart",b,!1),e.addEventListener("touchend",M,!1),e.addEventListener("touchmove",w,!1),e.addEventListener("touchcancel",L,!1),e.addEventListener("click",T,!1),e.addEventListener("dblclick",S,!1);var C={enableInteractions:function(t){!function(t){d.scrollZoom.enable(),t||d.boxZoom.enable(),d.dragPan.enable()}(t)},disableInteractions:function(){D()},destroy:function(){e.removeEventListener("mouseout",y),e.removeEventListener("mousedown",v),e.removeEventListener("mouseup",g),e.removeEventListener("mousemove",x),e.removeEventListener("touchstart",b),e.removeEventListener("touchend",M),e.removeEventListener("touchmove",w),e.removeEventListener("touchcancel",L),e.removeEventListener("click",T),e.removeEventListener("dblclick",S),D()},getInteractionPropNames:function(t){return t.shiftToZoom()?["scrollZoom","dragPan"]:["scrollZoom","boxZoom","dragPan"]}};return l&&C.enableInteractions(t.shiftToZoom()),C};var i=n(6253),o=n(3878);function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){t.forEach((function(t){e[t]&&(e[t]=e[t].bind(e))}))}function c(t,e,n,r){var i=t.effectiveWidth(),o=t.effectiveHeight(),a=t.margins(),s=a.left,u=a.top,l=e.getBoundingClientRect(),c=(n=n.touches?n.touches[0]:n).clientX-s-l.left-e.clientLeft,d=n.clientY-u-l.top-e.clientTop;return r&&(r.x=c,r.y=d),c>=0&&c<i&&d>=0&&d<o}var d=function(){function t(e,n,r,i,o,a,s,l){u(this,t),this._chart=e,this._map=e.map(),this._container=n,this._currDataBounds=r,this._scale=i,this._offset=o,this._filterDimensionCB=a,this._chartRedrawCB=s,this._mapboxglModule=l}return r(t,[{key:"isEnabled",value:function(){return Boolean(this._enabled)}},{key:"isActive",value:function(){return Boolean(this._active)}},{key:"enable",value:function(){this.isEnabled()||(this._enable(),this._enabled=!0)}},{key:"disable",value:function(){this.isEnabled()&&(this._disable(),this._enabled=!1)}},{key:"_fireEvent",value:function(t,e,n){return n||(n={}),n.originalEvent=e,this._map.fire(t,n)}}]),t}();function h(t,e){for(var n=0;n<t.length;n+=1)if(t[n]in e)return t[n]}var f=function(t){function e(t,n,r,i,o,s,c,d){u(this,e);var f=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r,i,o,s,c,d));f._startBoxZoomPos=null,f._boxZoomBox=null;var p=document.documentElement.style;return f._selectProp=h(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"],p),f._transformProp=h(["transform","WebkitTransform"],p),l(["onBoxZoom","onMouseMove","onMouseUp","onKeyDown"],f),f}return s(e,t),r(e,[{key:"_enable",value:function(){this._container.addEventListener("mousedown",this.onBoxZoom)}},{key:"_disable",value:function(){this._active&&(this._finish(),this._fireEvent("boxzoomcancel",{})),this._container.removeEventListener("mousedown",this.onBoxZoom)}},{key:"_enableDrag",value:function(){this._selectProp&&(document.documentElement.style[this._selectProp]=this._userSelect)}},{key:"_disableDrag",value:function(){this._selectProp&&(this._userSelect=document.documentElement.style[this._selectProp],document.documentElement.style[this._selectProp]="none")}},{key:"onBoxZoom",value:function(t){var e=new this._mapboxglModule.Point(0,0);c(this._chart,this._container,t,e)&&t.shiftKey&&0===t.button&&(document.addEventListener("mousemove",this.onMouseMove,!1),document.addEventListener("keydown",this.onKeyDown,!1),document.addEventListener("mouseup",this.onMouseUp,!1),this._disableDrag(),this._startBoxZoomPos=e,this._active=!0)}},{key:"onMouseMove",value:function(t){var e=this._startBoxZoomPos,n=new this._mapboxglModule.Point(0,0);if(c(this._chart,this._container,t,n)||this._active){if(!this._boxZoomBox){var r=this._chart.root().node();this._boxZoomBox=("div",i="mapboxgl-boxzoom",o=r,(a=document.createElement("div")).className=i,o&&o.appendChild(a),a),r.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t)}var i,o,a,s=Math.min(e.x,n.x),u=Math.max(e.x,n.x),l=Math.min(e.y,n.y),d=Math.max(e.y,n.y),h=this._chart.margins();this._boxZoomBox.style[this._transformProp]="translate("+(s+h.left)+"px,"+(l+h.top)+"px)",this._boxZoomBox.style.width=u-s+"px",this._boxZoomBox.style.height=d-l+"px"}}},{key:"onMouseUp",value:function(t){var e=this;if(0===t.button){var n=this._startBoxZoomPos,r=new this._mapboxglModule.Point(0,0);if(c(this._chart,this._container,t,r)||this._active)if(this._finish(),n.x===r.x&&n.y===r.y)this._fireEvent("boxzoomcancel",t);else{var i=this._chart.unproject(n),a=this._chart.unproject(r),s=Math.min(i.x,a.x),u=Math.max(i.x,a.x),l=Math.min(i.y,a.y),d=Math.max(i.y,a.y),h=this._chart._fitToMaxBounds([[s,l],[u,d]],!0);s=h[0][0],u=h[1][0],l=h[0][1],d=h[1][1],this._fireEvent("movestart",t),this._fireEvent("zoomstart",t);var f=this._currDataBounds[0][0],p=this._currDataBounds[0][1],m=s,_=u,y=this._currDataBounds[1][0],v=this._currDataBounds[1][1],g=m-f,x=_-p,b=l-y,w=d-v;this._active=!0;var M=(0,o.bezier)(.25,.1,.25,1);(0,o.timed)((function(n){e._perFrameFunc(t,M(n),f,g,p,x,y,b,v,w),1===n&&e._boxZoomFinished(t,s,u,l,d)}),500)}}}},{key:"onKeyDown",value:function(t){27===t.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",t))}},{key:"_boxZoomFinished",value:function(t,e,n,r,o){this._fireEvent("zoomend",t),this._fireEvent("moveend",t),this._filterDimensionCB([e,n],[r,o]);var a=[[e,o],[n,o],[n,r],[e,r]];(0,i.redrawAllAsync)(this._chart.chartGroup()),this._active=!1,this._fireEvent("boxzoomend",t,{boxZoomBounds:a})}},{key:"_perFrameFunc",value:function(t,e,n,r,i,o,a,s,u,l){var c=[n+e*r,i+e*o],d=[a+e*s,u+e*l],h=c[1]-c[0],f=d[1]-d[0],p=this._currDataBounds[0][1]-this._currDataBounds[0][0],m=this._currDataBounds[1][1]-this._currDataBounds[1][0],_=h/p,y=f/m;this._scale[0]=_,this._scale[1]=y,this._offset[0]=(c[0]-this._currDataBounds[0][0])/p,this._offset[1]=(d[0]-this._currDataBounds[1][0])/m,this._filterDimensionCB(c,d),this._chart._updateXAndYScales(this._chart.getDataRenderBounds()),this._chartRedrawCB(),this._fireEvent("move",t)}},{key:"_finish",value:function(){this._active=!1,document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("keydown",this.onKeyDown,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),this._chart.root().node().classList.remove("mapboxgl-crosshair"),this._boxZoomBox&&(this._boxZoomBox.parentNode.removeChild(this._boxZoomBox),this._boxZoomBox=null),this._enableDrag()}}]),e}(d),p=function(t){function e(t,n,r,i,o,s,c,d,h){u(this,e);var f=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r,i,o,s,c,d));return f._startWheelPos=null,f._wheelType=null,f._lastWheelVal=0,f._singularWheelTimeout=null,f._wheelTimeout=null,f._browser=h,l(["_onSingularWheelTimeout","_onWheelTimeout","onWheel"],f),f}return s(e,t),r(e,[{key:"_onSingularWheelTimeout",value:function(){this._wheelType="wheel",this._wheelZoom(!0,-this._lastWheelVal)}},{key:"_onWheelTimeout",value:function(){this._wheelZoom(!0,-this._lastWheelVal)}},{key:"_enable",value:function(){this._container.addEventListener("wheel",this.onWheel),this._container.addEventListener("mousewheel",this.onWheel)}},{key:"_disable",value:function(){this._container.removeEventListener("wheel",this.onWheel),this._container.removeEventListener("mousewheel",this.onWheel)}},{key:"onWheel",value:function(t){var e=0,n=new this._mapboxglModule.Point(0,0);if(c(this._chart,this._container,t,n)){"wheel"===t.type?(e=Math.abs(t.deltaX)>Math.abs(t.deltaY)?t.deltaX:t.deltaY,this._browser.isFirefox&&t.deltaMode===window.WheelEvent.DOM_DELTA_PIXEL&&(e/=window.devicePixelRatio||1),t.deltaMode===window.WheelEvent.DOM_DELTA_LINE&&(e*=40)):"mousewheel"===t.type&&(e=-(Math.abs(t.wheelDeltaX)>Math.abs(t.wheelDeltaY)?t.wheelDeltaX:t.wheelDeltaY),this._browser.isSafari&&(e/=3));var r=Date.now(),i=r-(this._time||0);this._startWheelPos=n,this._time=r,0!==e&&e%4.000244140625==0?(this._wheelType="wheel",e=Math.floor(e/4)):0!==e&&Math.abs(e)<4?this._wheelType="trackpad":i>400?(this._wheelType=null,this._lastWheelVal=e,this._singularWheelTimeout=setTimeout(this._onSingularWheelTimeout,40)):this._wheelType||(this._wheelType=Math.abs(i*e)<200?"trackpad":"wheel"),t.shiftKey&&e&&(e/=4),this._wheelType&&(this._singularWheelTimeout&&(clearTimeout(this._singularWheelTimeout),this._singularWheelTimeout=null,e+=this._lastWheelVal),this._lastWheelVal=e,this._wheelTimeout&&(clearTimeout(this._wheelTimeout),this._wheelTimeout=null),this._wheelTimeout=setTimeout(this._onWheelTimeout,50),this._wheelZoom(!1,-e,t)),t.preventDefault()}}},{key:"_wheelZoom",value:function(t,e,n){if((!this._chart.shiftToZoom()||n&&n.shiftKey)&&(t||0!==e)&&this._chart.elasticX()&&this._chart.elasticY()){if(0!==e){var r=2/(1+Math.exp(-Math.abs(e/100)));e<0&&0!==r&&(r=1/r),r=1/r;var o=this._chart.xRange(),a=this._chart.yRange();null===o&&(o=[0,0]),null===a&&(a=[0,0]);var s=this._chart.unproject(this._startWheelPos),u=r*(o[1]-o[0]),l=r*(a[1]-a[0]),c=this._chart.effectiveWidth(),d=this._chart.effectiveHeight(),h=s.x-u*(this._startWheelPos.x/c),f=h+u,p=s.y-l*((d-this._startWheelPos.y-1)/d),m=p+l,_=this._chart._fitToMaxBounds([[h,p],[f,m]],!0);h=_[0][0],p=_[0][1],u=(f=_[1][0])-h,l=(m=_[1][1])-p;var y=this._currDataBounds[0][1]-this._currDataBounds[0][0],v=this._currDataBounds[1][1]-this._currDataBounds[1][0],g=u/y,x=l/v;this._scale[0]=g,this._scale[1]=x,this._offset[0]=(h-this._currDataBounds[0][0])/y,this._offset[1]=(p-this._currDataBounds[1][0])/v,this._filterDimensionCB([h,f],[p,m]),this._fireEvent("zoom",n),this._fireEvent("move",n)}t?(0,i.redrawAllAsync)(this._chart.chartGroup()):(this._chart._updateXAndYScales(this._chart.getDataRenderBounds()),this._chartRedrawCB())}}}]),e}(d),m=function(t){function e(t,n,r,i,o,s,c,d){u(this,e);var h=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r,i,o,s,c,d));return h._dragInertia=[],h._startDragPos=null,h._dragPos=null,l(["onDrag","onMove","onTouchEnd","onMouseUp"],h),h}return s(e,t),r(e,[{key:"_enable",value:function(){this._container.addEventListener("mousedown",this.onDrag),this._container.addEventListener("touchstart",this.onDrag)}},{key:"_disable",value:function(){this._container.removeEventListener("mousedown",this.onDrag),this._container.removeEventListener("touchstart",this.onDrag),document.removeEventListener("touchmove",this.onMove),document.removeEventListener("touchend",this.onTouchEnd),document.removeEventListener("mousemove",this.onMove),document.removeEventListener("mouseup",this.onMouseUp),this._active&&(this._active=!1,this._fireEvent("dragend",{}),this._fireEvent("moveend",{}))}},{key:"onDrag",value:function(t){if(!this._ignoreEvent(t)){var e=new this._mapboxglModule.Point(0,0);c(this._chart,this._container,t,e)&&(this._active||(t.touches?(document.addEventListener("touchmove",this.onMove),document.addEventListener("touchend",this.onTouchEnd)):(document.addEventListener("mousemove",this.onMove),document.addEventListener("mouseup",this.onMouseUp)),this._active=!1,this._startDragPos=this._dragPos=e,this._dragInertia=[[Date.now(),this._dragPos]]))}}},{key:"onMove",value:function(t){if(!this._ignoreEvent(t)){var e=new this._mapboxglModule.Point(0,0);if(this._chart.elasticX()&&this._chart.elasticY()&&(c(this._chart,this._container,t,e)||this._active)){this._active||(this._active=!0,this._fireEvent("dragstart",t),this._fireEvent("movestart",t)),this._drainInertiaBuffer(),this._dragInertia.push([Date.now(),e]);var n=this._chart.xRange();null===n&&(n=[0,0]);var r=this._chart.yRange();null===r&&(r=[0,0]);var i=this._chart.unproject(this._dragPos),o=this._chart.unproject(e),a=o.x-i.x,s=o.y-i.y,u=n[0]-a,l=n[1]-a,d=r[0]-s,h=r[1]-s,f=this._chart._fitToMaxBounds([[u,d],[l,h]],!0);a+=u-f[0][0],s+=d-f[0][1],u=f[0][0],d=f[0][1],l=f[1][0],h=f[1][1];var p=this._currDataBounds[0][1]-this._currDataBounds[0][0],m=this._currDataBounds[1][1]-this._currDataBounds[1][0];this._offset[0]-=a/p,this._offset[1]-=s/m,this._filterDimensionCB([u,l],[d,h]),this._chart._updateXAndYScales(this._chart.getDataRenderBounds()),this._chartRedrawCB(),this._fireEvent("drag",t),this._fireEvent("move",t),this._dragPos=e,t.preventDefault()}}}},{key:"_onUp",value:function(t){var e=this;if(this._active){this._active=!1,this._fireEvent("dragend",t),this._drainInertiaBuffer();var n=function(){(0,i.redrawAllAsync)(e._chart.chartGroup()),e._fireEvent("moveend",t)},r=this._dragInertia;if(r.length<2)n();else{var o=r[r.length-1],a=r[0],s=o[1].sub(a[1]),u=(o[0]-a[0])/1e3;if(0===u||o[1].equals(a[1]))n();else{var l=s.mult(.3/u),c=l.mag();c>1400&&(c=1400,l._unit()._mult(c));var d=c/750;l.mult(-d/2),n()}}}}},{key:"onTouchEnd",value:function(t){this._ignoreEvent(t)||(this._onUp(t),document.removeEventListener("touchmove",this.onMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"onMouseUp",value:function(t){this._ignoreEvent(t)||(this._onUp(t),document.removeEventListener("mousemove",this.onMove),document.removeEventListener("mouseup",this.onMouseUp))}},{key:"_ignoreEvent",value:function(t){if(this._chart.shiftToZoom()&&t&&!t.shiftKey)return!0;var e=this._chart.map();return!(!e.boxZoom||!e.boxZoom.isActive())||(t.touches?t.touches.length>1:!!t.ctrlKey||("mousemove"===t.type?!1&t.buttons:0!==t.button))}},{key:"_drainInertiaBuffer",value:function(){var t=Date.now();if(this._dragInertia)for(;this._dragInertia.length>0&&t-this._dragInertia[0][0]>160;)this._dragInertia.shift()}}]),e}(d)},8826:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0};e.getLatLonCircleClass=m;var o,a=c(n(5263)),s=c(n(6154)),u=(o=n(6479))&&o.__esModule?o:{default:o},l=n(5357);function c(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var p=null;function m(){return p||(p=function(t){function e(t){d(this,e);var n=h(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._mercatorPts=[],n._geomDirty=!0,n._initialRadius=n._radius,n}return f(e,t),r(e,[{key:"setScale",value:function(t){this.radius=this._initialRadius*Math.min(t[0],t[1])}},{key:"resetInitialRadius",value:function(){this._initialRadius=this.radius}},{key:"_updateGeom",value:function(){if(this._geomDirty||this._boundsOutOfDate){var t=[0,0],e=[0,0],n=this.globalXform;s.Mat2d.svd(t,[0,0],null,n);var r=Math.floor(60),i=this._radius/6372.797560856;a.conv900913To4326(e,t);var o=e[1]*s.Math.DEG_TO_RAD,u=e[0]*s.Math.DEG_TO_RAD;s.AABox2d.initEmpty(this._aabox),this._mercatorPts=[];for(var l=0;l<r;l+=1){var c=6*l*Math.PI/180,d=Math.asin(Math.sin(o)*Math.cos(i)+Math.cos(o)*Math.sin(i)*Math.cos(c)),h=u+Math.atan2(Math.sin(c)*Math.sin(i)*Math.cos(o),Math.cos(i)-Math.sin(o)*Math.sin(d)),f=180*d/Math.PI,p=180*h/Math.PI,m=s.Point2d.create(p,f);a.conv4326To900913(m,m),s.AABox2d.encapsulatePt(this._aabox,this._aabox,m),this._mercatorPts.push(m)}var _=s.Point2d.create(0,0);s.AABox2d.getCenter(_,this._aabox),s.Point2d.sub(_,_,t),this.pivot=_,this._geomDirty=!1,this._boundsOutOfDate=!1}}},{key:"getDimensions",value:function(){return[this.width,this.height]}},{key:"_updateAABox",value:function(){this._updateGeom()}},{key:"_draw",value:function(t){var e=s.Mat2d.clone(this.globalXform);if(s.Mat2d.invert(e,e),s.Mat2d.multiply(e,this._fullXform,e),t.setTransform(e[0],e[1],e[2],e[3],e[4],e[5]),this._updateGeom(),this._mercatorPts.length){t.moveTo(this._mercatorPts[0][0],this._mercatorPts[0][1]);for(var n=1;n<this._mercatorPts.length;n+=1)t.lineTo(this._mercatorPts[n][0],this._mercatorPts[n][1]);t.closePath()}}},{key:"toJSON",value:function(){return Object.assign(i(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"toJSON",this).call(this),{type:"LatLonCircle"})}},{key:"initialRadius",set:function(t){this.radius=t,this._initialRadius=t}},{key:"width",get:function(){return this._updateAABox(),this._aabox[2]-this._aabox[0]}},{key:"height",get:function(){return this._updateAABox(),this._aabox[3]-this._aabox[1]}}]),e}(s.Circle)),p}var _=function(){function t(e,n,r,i,o,a,s){d(this,t),this.parent=e,this.drawEngine=n,this.canvas=n.getCanvas(),this.chart=r,this.baseMap=r.map(),this.buttonGroup=i,this.buttonId=o,this.defaultStyle=a,this.defaultSelectStyle=s,this.mousedownCB=this.mousedownCB.bind(this),this.mouseupCB=this.mouseupCB.bind(this),this.mousemoveCB=this.mousemoveCB.bind(this),this.mouseoverCB=this.mouseoverCB.bind(this),this.clickCB=this.clickCB.bind(this),this.dblclickCB=this.dblclickCB.bind(this),this.keydownCB=this.keydownCB.bind(this),this.active=!1}return r(t,[{key:"disableBasemapEvents",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.chart.hidePopup(!0),this.chart.enableInteractions(!1,t)}},{key:"enableBasemapEvents",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.chart.enableInteractions(!0,t)}},{key:"addShape",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.drawEngine.addShape(t,e),this.drawEngine.moveShapeToTop(t)}},{key:"setupFinalShape",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.buttonGroup.deactivateButton(this.buttonId),this.drawEngine.hasShape(t)?this.drawEngine.selectShape(t):(this.drawEngine.addShape(t,e,!0),this.drawEngine.moveShapeToTop(t)),this.chart.addFilterShape(t),this.canvas.focus()}},{key:"mousedownCB",value:function(t){}},{key:"mouseupCB",value:function(t){}},{key:"mousemoveCB",value:function(t){}},{key:"mouseoverCB",value:function(t){}},{key:"clickCB",value:function(t){}},{key:"dblclickCB",value:function(t){}},{key:"keydownCB",value:function(t){}},{key:"isMouseEventInCanvas",value:function(t){var e=this.canvas.offsetWidth,n=this.canvas.offsetHeight,r=this.canvas.getBoundingClientRect(),i=t.clientX-r.left-this.canvas.clientLeft,o=t.clientY-r.top-this.canvas.clientTop;return i>=0&&i<e&&o>=0&&o<n}},{key:"getRelativeMousePosFromEvent",value:function(t){this.canvas.offsetWidth,this.canvas.offsetHeight;var e=this.canvas.getBoundingClientRect(),n=t.clientX-e.left-this.canvas.clientLeft,r=t.clientY-e.top-this.canvas.clientTop;return s.Point2d.create(n,r)}},{key:"activate",value:function(){this.active||(document.addEventListener("mousedown",this.mousedownCB),document.addEventListener("mouseup",this.mouseupCB),document.addEventListener("mousemove",this.mousemoveCB),document.addEventListener("mouseover",this.mouseoverCB),document.addEventListener("click",this.clickCB),document.addEventListener("dblclick",this.dblclickCB),this.canvas.addEventListener("keydown",this.keydownCB),this.canvas.focus(),this.active=!0)}},{key:"deactivate",value:function(){this.active&&(this.destroy(),document.removeEventListener("mousedown",this.mousedownCB),document.removeEventListener("mouseup",this.mouseupCB),document.removeEventListener("mousemove",this.mousemoveCB),document.removeEventListener("mouseover",this.mouseoverCB),document.removeEventListener("click",this.clickCB),document.removeEventListener("dblclick",this.dblclickCB),this.canvas.removeEventListener("keydown",this.keydownCB),this.canvas.blur(),this.active=!1)}}]),t}(),y=function(t){function e(t,n,r,i,o,a,u){d(this,e);var l=h(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r,i,o,a,u));return l.startmousepos=s.Point2d.create(0,0),l.startmouseworldpos=s.Point2d.create(0,0),l.useLonLat="function"==typeof l.chart.useLonLat&&l.chart.useLonLat(),l.useLonLat&&(l.startmouselatlonpos=s.Point2d.create(0,0)),l.activeshape=null,l.timer=null,l}return f(e,t),r(e,[{key:"deactivateShape",value:function(){if(this.activeShape){var t=this.activeShape;if(performance.now()-this.timer<500){var e=this.chart.getDataRenderBounds(),n=[e[0][0],e[1][0]],r=[e[0][1],e[2][1]],i=[.1*Math.abs(n[1]-n[0]),.1*Math.abs(r[1]-r[0])];if(this.useLonLat){var o=t.getPosition();a.conv900913To4326(o,o),i[0]=a.distance_in_meters(o[0],o[1],o[0]+i[0],o[1])/1e3,i[1]=a.distance_in_meters(o[0],o[1],o[0],o[1]+i[1])/1e3,t.initialRadius=Math.min(i[0],i[1])}else t.radius=Math.min(i[0],i[1])}this.activeShape=null,t.setStyle(this.defaultStyle),this.setupFinalShape(t)}}},{key:"destroy",value:function(){this.activeShape&&(this.drawEngine.deleteShape(this.activeShape),this.activeShape=null)}},{key:"mousedownCB",value:function(t){if(this.isMouseEventInCanvas(t)){this.disableBasemapEvents(),s.Point2d.copy(this.startmousepos,this.getRelativeMousePosFromEvent(t)),this.drawEngine.project(this.startmouseworldpos,this.startmousepos),this.timer=performance.now();var e={};if(this.useLonLat){a.conv900913To4326(this.startmouselatlonpos,this.startmouseworldpos);var n=m();this.activeShape=new n(Object.assign({position:this.startmouseworldpos,radius:0},this.defaultSelectStyle)),e.uniformScaleOnly=!0,e.centerScaleOnly=!0,e.rotatable=!1}else this.activeShape=new s.Circle(Object.assign({position:this.startmouseworldpos,radius:0},this.defaultSelectStyle));this.canvas.focus(),this.addShape(this.activeShape,e),t.stopImmediatePropagation(),t.preventDefault()}}},{key:"mouseupCB",value:function(t){this.deactivateShape()}},{key:"mousemoveCB",value:function(t){if(this.activeShape){var e=this.getRelativeMousePosFromEvent(t),n=s.Point2d.create(0,0);if(this.drawEngine.project(n,e),this.useLonLat){a.conv900913To4326(n,n);var r=a.distance_in_meters(this.startmouselatlonpos[0],this.startmouselatlonpos[1],n[0],n[1]);this.activeShape.initialRadius=r/1e3}else{var i=s.Point2d.distance(this.startmouseworldpos,n);this.activeShape.radius=i}t.stopImmediatePropagation(),t.preventDefault()}}},{key:"clickCB",value:function(t){this.deactivateShape()}},{key:"keydownCB",value:function(t){"Escape"!==t.key&&"Escape"!==t.code&&27!==t.keyCode||(this.destroy(),this.enableBasemapEvents())}}]),e}(_),v=function(t){function e(t,n,r,i,o,a,u){d(this,e);var l=h(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r,i,o,a,u));return l.activeShape=null,l.startVert=null,l.lastVert=null,l.lineShape=null,l.prevVertPos=null,l.activeIdx=-1,l.startPosAABox=s.AABox2d.create(),l.timer=null,l.enableBasemapDebounceFunc=r.debounce((function(){l.active&&l.enableBasemapEvents()}),100),l}return f(e,t),r(e,[{key:"destroy",value:function(){this.startVert&&this.drawEngine.deleteShape(this.startVert),this.lastVert&&this.drawEngine.deleteShape(this.lastVert),this.lineShape&&this.drawEngine.deleteShape(this.lineShape),this.startVert=this.lastVert=this.lineShape=this.activeShape=this.prevVertPos=null,s.AABox2d.initEmpty(this.startPosAABox),this.activeIdx=-1}},{key:"appendVertex",value:function(t,e){return this.lineShape&&(!this.prevVertPos||Math.abs(t[0]-this.prevVertPos[0])>2||Math.abs(t[1]-this.prevVertPos[1])>2)?(this.prevVertPos=t,this.lineShape.appendVert(e)):-1}},{key:"finishShape",value:function(){var t=this.lineShape?this.lineShape.vertsRef:[],e=t.length>1&&!s.Point2d.equals(t[0],t[t.length-1])&&this.lastVert&&!s.Point2d.equals(t[t.length-1],this.lastVert.getPositionRef());if(t.length>2&&(!e||t.length>3)){e&&t.pop();var n=new s.Poly(Object.assign({verts:t},this.defaultStyle));this.setupFinalShape(n),this.destroy()}else this.destroy(),this.enableBasemapEvents()}},{key:"mousedownCB",value:function(t){this.isMouseEventInCanvas(t)?this.timer=performance.now():this.timer=null}},{key:"mouseupCB",value:function(t){if(this.timer&&performance.now()-this.timer<500){this.disableBasemapEvents();var e=!1,n=this.getRelativeMousePosFromEvent(t),r=s.Point2d.create(0,0);if(this.drawEngine.project(r,n),this.startVert){if(!this.lastVert&&this.lineShape.numVerts>1){var i=this.lineShape.vertsRef;this.lastVert=new s.Point({position:i[1],size:5}),this.addShape(this.lastVert),this.activeShape=this.lastVert,this.activeIdx=1}else if(this.lastVert){var o=this.startVert.getPosition();if(this.drawEngine.unproject(o,o),s.AABox2d.initCenterExtents(this.startPosAABox,o,[10,10]),s.AABox2d.containsPt(this.startPosAABox,n))this.finishShape(),e=!0;else{var a=this.lineShape.vertsRef;this.lastVert.setPosition(a[a.length-1]),this.activeShape=this.lastVert}}}else this.lineShape=new s.PolyLine(Object.assign({verts:[r]},this.defaultSelectStyle)),this.addShape(this.lineShape),this.startVert=new s.Point({position:r,size:5}),this.addShape(this.startVert),this.activeShape=this.startVert,this.prevVertPos=n,this.activeIdx=0;e||(this.enableBasemapDebounceFunc(),this.canvas.focus(),this.activeShape=null,this.activeIdx=-1),t.preventDefault()}}},{key:"mousemoveCB",value:function(t){if(this.startVert&&this.lineShape&&this.activeIdx<0){var e=this.getRelativeMousePosFromEvent(t),n=s.Point2d.create(0,0);this.drawEngine.project(n,e),this.activeIdx=this.appendVertex(e,n)}if(this.activeShape||this.activeIdx>=0){var r=this.getRelativeMousePosFromEvent(t),i=s.Point2d.create(0,0);if(this.drawEngine.project(i,r),t.shiftKey)if(1===this.activeIdx){var o=[0,0],a=[0,0],u=this.lineShape.vertsRef;this.drawEngine.unproject(a,u[0]),s.Point2d.sub(o,r,a);var l=Math.atan2(o[1],o[0]);l=s.Math.round(l/s.Math.QUATER_PI)*s.Math.QUATER_PI;var c=[Math.cos(l),Math.sin(l)];s.Vec2d.scale(o,c,s.Vec2d.dot(o,c)),s.Point2d.addVec2(r,a,o),this.drawEngine.project(i,r)}else if(this.activeIdx>1){var d=this.lineShape.vertsRef,h=[0,0];this.drawEngine.unproject(h,d[this.activeIdx-2]);var f=[0,0];this.drawEngine.unproject(f,d[this.activeIdx-1]);var p=[0,0];s.Point2d.sub(p,f,h),s.Vec2d.normalize(p,p);var m=[0,0];s.Point2d.sub(m,r,f);var _=s.Vec2d.angle(p,m);_=s.Math.round(_/s.Math.QUATER_PI)*s.Math.QUATER_PI;var y=s.Mat2.create();s.Mat2.fromRotation(y,_);var v=[0,0];s.Vec2d.transformMat2(v,p,y),s.Vec2d.scale(v,v,s.Vec2d.dot(m,v)),s.Point2d.addVec2(r,f,v),this.drawEngine.project(i,r)}this.activeShape&&this.activeShape.setPosition(i),this.activeIdx>=0&&(this.lineShape.setVertPosition(this.activeIdx,i),this.canvas.focus()),t.preventDefault()}}},{key:"dblclickCB",value:function(t){this.isMouseEventInCanvas(t)&&this.finishShape()}},{key:"keydownCB",value:function(t){"Escape"===t.key||"Escape"===t.code||27===t.keyCode?(this.destroy(),this.enableBasemapEvents()):"Enter"!==t.key&&"Enter"!==t.code&&"NumpadEnter"!==t.code&&13!==t.keyCode||this.finishShape()}}]),e}(_),g=function(t){function e(t,n,r,i,o,a,s){d(this,e);var u=h(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r,i,o,a,s));return u.activeShape=null,u.lastPos=null,u.lastWorldPos=null,u}return f(e,t),r(e,[{key:"destroy",value:function(){this.activeShape&&(this.drawEngine.deleteShape(this.activeShape),this.activeShape=null),this.lastPos=this.lastWorldPos=null}},{key:"mousedownCB",value:function(t){this.isMouseEventInCanvas(t)&&(this.disableBasemapEvents(),this.activeShape=null,this.lastPos=this.getRelativeMousePosFromEvent(t),this.lastWorldPos=s.Point2d.create(0,0),this.drawEngine.project(this.lastWorldPos,this.lastPos),t.preventDefault())}},{key:"mousemoveCB",value:function(t){if(this.isMouseEventInCanvas(t)){if(this.lastPos){var e=this.getRelativeMousePosFromEvent(t),n=s.Point2d.create(0,0);this.drawEngine.project(n,e),s.Point2d.equals(e,this.lastPos)||(this.activeShape?this.activeShape.appendVert(n):(this.activeShape=new s.PolyLine(Object.assign({verts:[this.lastWorldPos,n]},this.defaultSelectStyle)),this.addShape(this.activeShape)),s.Point2d.copy(this.lastPos,e),s.Point2d.copy(this.lastWorldPos,n),this.canvas.focus()),t.preventDefault()}}else this.activeShape&&(this.drawEngine.deleteShape(this.activeShape),this.activeShape=null,this.lastPos=null,this.lastWorldPos=null,this.enableBasemapEvents())}},{key:"mouseupCB",value:function(t){var e=this;if(this.activeShape){var n=this.activeShape.vertsRef,r=s.Point2d.create(0,0),i=s.Point2d.create(0,0),o=n.map((function(t){return e.drawEngine.unproject(r,t),{x:r[0],y:r[1]}})),a=(o=(0,u.default)(o,4,!0)).map((function(t){return s.Point2d.set(r,t.x,t.y),e.drawEngine.project(i,r),s.Point2d.clone(i)}));if(a.length<3)l.logger.warn("The resulting lasso shape is a point or a straight line. Cannot build a polygon from it. Please try again"),this.drawEngine.deleteShape(this.activeShape),this.activeShape=null;else{var c=new s.Poly(Object.assign({verts:a},this.defaultStyle));this.drawEngine.deleteShape(this.activeShape),this.setupFinalShape(c),t.preventDefault()}}this.lastPos=null,this.lastWorldPos=null}},{key:"keydownCB",value:function(t){"Escape"!==t.key&&"Escape"!==t.code&&27!==t.keyCode||(this.destroy(),this.enableBasemapEvents())}}]),e}(_),x=function(){function t(e,n,r,i,o){d(this,t),this._container=e,this._chart=n,this._drawEngine=r,this._buttonElements={},this._activeButton=null,this._activeShape=null,this._selectionchangedCB=this._selectionchangedCB.bind(this),this._dragbeginCB=this._dragbeginCB.bind(this),this._dragendCB=this._dragendCB.bind(this),this._keyboardCB=this._keyboardCB.bind(this),this._initControls(i,o)}return r(t,[{key:"destroy",value:function(){this._controlsInitted&&(this._drawEngine.getCanvas().removeEventListener("keydown",this._keyboardCB),this._circleHandler.deactivate(),this._polylineHandler.deactivate(),this._lassoHandler.deactivate(),this._drawEngine.off(s.ShapeBuilder.EventConstants.DRAG_END,this._dragendCB),this._drawEngine.off(s.ShapeBuilder.EventConstants.DRAG_END,this._dragbeginCB),this._drawEngine.off(s.ShapeBuilder.EventConstants.SELECTION_CHANGED,this._selectionchangedCB),this._controlContainer.removeChild(this._controlGroup),this._container.removeChild(this._controlContainer))}},{key:"_createControlButton",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=document.createElement("button");return r.className="mapd-draw-button "+n.className,r.setAttribute("title",n.title),this._controlGroup.appendChild(r),r.addEventListener("click",(function(r){r.preventDefault(),r.stopPropagation();var i=r.target;if(e._activeButton&&e._activeButton.button===i)return e.deactivateButtons(),void(n.onDeactivate&&n.onDeactivate());e.setActiveButton(t,n),n.onActivate()}),!0),r.addEventListener("mousedown",(function(t){e._chart.hidePopup(!0),t.stopPropagation(),t.preventDefault()})),r.addEventListener("mouseover",(function(t){e._chart.hidePopup(!0),e._chart.popupDisplayable(!1),e._drawEngine.disableInteractions(!1)})),r.addEventListener("mouseout",(function(t){e._activeShape||e._activeButton||(e._chart.popupDisplayable(!0),e._drawEngine.enableInteractions())})),r.addEventListener("mousemove",(function(t){t.stopImmediatePropagation(),t.preventDefault()})),r}},{key:"_createButtonControl",value:function(t,e,n,r){var i=this,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=new e(this._container,this._drawEngine,this._chart,this,t,n,r);return this._buttonElements[t]=this._createControlButton(t,{className:"mapd-draw-button-"+t,title:"Create a "+t+(o?" ["+o+"]":""),onActivate:function(){i._drawEngine.disableInteractions(),i._activeShape=a,i._activeShape.activate()},onDeactivate:function(){i._drawEngine.enableInteractions()}}),a}},{key:"isActive",value:function(){return Boolean(this._activeButton)}},{key:"deactivateButton",value:function(t){return!(!this._activeButton||this._buttonElements[t]!==this._activeButton.button||(this.deactivateButtons(),0))}},{key:"deactivateButtons",value:function(){this._activeButton&&(this._activeButton.button.classList.remove("mapd-draw-active-button"),this._activeButton.options&&this._activeButton.options.onDeactivate&&this._activeButton.options.onDeactivate(),this._activeButton=null),this._activeShape&&(this._activeShape.deactivate(),this._activeShape=null)}},{key:"setActiveButton",value:function(t,e){var n=this._buttonElements[t];n&&(n&&"trash"!==t&&(this.deactivateButtons(),n.classList.add("mapd-draw-active-button"),this._activeButton={button:n,id:t,options:e}),this._chart.popupDisplayable(!1))}},{key:"_selectionchangedCB",value:function(t){if(!this._activeShape&&!this._activeButton){var e=this._drawEngine.getCanvas();t.selectedShapes&&t.selectedShapes.length?(this._chart.hidePopup(!0),this._chart.popupDisplayable(!1),this._chart.enableInteractions(!1,{scrollZoom:!0}),e.focus()):(this._chart.popupDisplayable(!0),this._chart.enableInteractions(!0),e.blur())}}},{key:"_dragbeginCB",value:function(t){this._activeShape||this._activeButton||this._drawEngine.getCanvas().focus()}},{key:"_dragendCB",value:function(t){var e=m();t.shapes.forEach((function(t){t instanceof e&&t.resetInitialRadius()}))}},{key:"_keyboardCB",value:function(t){var e=this;if(("Backspace"===t.key||"Backspace"===t.code||8===t.keyCode)&&this._drawEngine){var n=this._drawEngine.selectedShapes;n.length&&(this._drawEngine.deleteSelectedShapes(),n.forEach((function(t){e._chart.deleteFilterShape(t)}))),t.preventDefault()}}},{key:"_initControls",value:function(t,e){var n=null;"function"==typeof this._chart.margins&&(n=this._chart.margins()),this._controlContainer=document.createElement("div"),this._controlContainer.style.top=(n&&n.top?n.top:0)+"px",this._controlContainer.style.left=(n&&n.left?n.left:0)+"px",this._controlContainer.style.position="absolute",this._controlContainer.className="mapd-draw-button-container",this._container.appendChild(this._controlContainer);var r=this._drawEngine.getCanvas();r.setAttribute("tabindex",-1),r.style.outline="none",this._controlGroup=document.createElement("div"),this._controlGroup.className="mapd-draw-button-control-group",this._controlContainer.appendChild(this._controlGroup),this._drawEngine.on(s.ShapeBuilder.EventConstants.SELECTION_CHANGED,this._selectionchangedCB),this._drawEngine.on(s.ShapeBuilder.EventConstants.DRAG_BEGIN,this._dragbeginCB),this._drawEngine.on(s.ShapeBuilder.EventConstants.DRAG_END,this._dragendCB),this._circleHandler=this._createButtonControl("circle",y,t,e),this._polylineHandler=this._createButtonControl("polyline",v,t,e),this._lassoHandler=this._createButtonControl("lasso",g,t,e),r.addEventListener("keydown",this._keyboardCB),this._controlsInitted=!0}}]),t}();e.default=x},2814:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.autoBinParams=o,e.checkIfTimeBinInRange=function(t,e,n){var i=[.001*t[0],.001*t[1]],a=i[1]-i[0],s=r;return a/s[e]>n?o(t,n):a/s[e]<2?o(t,n,!0):e};var n=e.DEFAULT_EXTRACT_INTERVAL="isodow",r=e.TIME_LABEL_TO_SECS={millisecond:.001,second:1,minute:60,hour:3600,day:86400,week:604800,month:2592e3,quarter:10368e3,year:31536e3,decade:31536e4},i=e.TIME_SPANS=["millisecond","second","minute","hour","day","week","month","quarter","year","decade"].map((function(t){return{label:t,numSeconds:r[t]}}));function o(t,e,n){var r=[.001*t[0],.001*t[1]],o=r[1]-r[0];if(0===o)return"day";for(var a=n?i.slice().reverse():i,s=0;s<a.length;s++)if(o/a[s].numSeconds<e)return a[s].label;return"century"}e.BIN_INPUT_OPTIONS=[{val:"auto",label:"auto",numSeconds:null},{val:"century",label:"1c",numSeconds:31536e5},{val:"decade",label:"10y",numSeconds:31536e4},{val:"year",label:"1y",numSeconds:31536e3},{val:"quarter",label:"1q",numSeconds:10368e3},{val:"month",label:"1mo",numSeconds:2592e3},{val:"week",label:"1w",numSeconds:604800},{val:"day",label:"1d",numSeconds:86400},{val:"hour",label:"1h",numSeconds:3600},{val:"minute",label:"1m",numSeconds:60},{val:"second",label:"1s",numSeconds:1},{val:"millisecond",label:"1ms",numSeconds:.001}],e.createBinParams=function(t,e){if(t.group()&&t.group().binParams){var r=(e=Array.isArray(e)?e:[e]).map((function(t){if(t){var e=t.timeBin,r=void 0===e?"auto":e,i=t.binBounds,a=t.numBins,s=t.extract||!1;if(i[0]instanceof Date&&"auto"===r){var u=i.map((function(t){return t.getTime()}));return Object.assign({},t,{extract:s,timeBin:s?n:o(u,a),binBounds:i.slice(),auto:!0})}return Object.assign({},t,{extract:s,timeBin:r,binBounds:i.slice()})}return t}));return t.group().binParams(r),t}},e.getFirstNonNullDatumForAxis=function(t,e){return t&&Array.isArray(t)&&t.find((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t["key"+("x"===e?"0":"1")],r=Array.isArray(n)?n[0]:n;return null!==r}))}},5769:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();e.default=function(t,e,n){var r=[],i=[],o=n,a=function(t){var e=ft.tokenize(t);pt.input=e.tokens;var n=pt.expression();return 0===pt.errors.length?mt.visit(n):null}(n);if(a){gt(t,a);var s=[];xt(a,r,i,s,n),o=function(t,e,n){return n.sort((function(t,e){return e.start-t.start})).forEach((function(n){t=""+t.substring(0,n.start)+e+"."+n.alias+t.substring(n.end)})),t}(n,e,s)}return{factProjections:r,factAliases:i,expression:o}};var o=n(3650);function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var l=(0,o.createToken)({name:"Whitespace",pattern:/\s+/,group:o.Lexer.SKIPPED}),c=(0,o.createToken)({name:"Identifier",pattern:o.Lexer.NA}),d=(0,o.createToken)({name:"UnquotedIdentifier",pattern:/[a-zA-Z_]\w*/,categories:[c]}),h=(0,o.createToken)({name:"QuotedIdentifier",pattern:/"(?:[^"]|"")+"/,categories:[c]}),f=(0,o.createToken)({name:"Keyword",pattern:o.Lexer.NA}),p=(0,o.createToken)({name:"All",pattern:/all/i,categories:[f],longer_alt:d}),m=(0,o.createToken)({name:"Distinct",pattern:/distinct/i,categories:[f],longer_alt:d}),_=(0,o.createToken)({name:"OrderBy",pattern:/order by/i,categories:[f]}),y=(0,o.createToken)({name:"Ascending",pattern:/asc/i,categories:[f],longer_alt:d}),v=(0,o.createToken)({name:"Descending",pattern:/desc/i,categories:[f],longer_alt:d}),g=(0,o.createToken)({name:"Cast",pattern:/cast/i,categories:[f],longer_alt:d}),x=(0,o.createToken)({name:"As",pattern:/as/i,categories:[f],longer_alt:d}),b=(0,o.createToken)({name:"Case",pattern:/case/i,categories:[f],longer_alt:d}),w=(0,o.createToken)({name:"When",pattern:/when/i,categories:[f],longer_alt:d}),M=(0,o.createToken)({name:"Then",pattern:/then/i,categories:[f],longer_alt:d}),L=(0,o.createToken)({name:"Else",pattern:/else/i,categories:[f],longer_alt:d}),k=(0,o.createToken)({name:"End",pattern:/end/i,categories:[f],longer_alt:d}),T=(0,o.createToken)({name:"Constant",pattern:o.Lexer.NA}),S=(0,o.createToken)({name:"StringConstant",pattern:/'(?:[^']|'')*'(?:\s*\n\s*'(?:[^']|'')*')*/,categories:[T],line_breaks:!0}),E=(0,o.createToken)({name:"NumericConstant",pattern:/(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?/,categories:[T]}),A=(0,o.createToken)({name:"BooleanConstant",pattern:/(?:true|false)/i,categories:[T]}),D=(0,o.createToken)({name:"Operator",pattern:o.Lexer.NA}),C=(0,o.createToken)({name:"AllColumns",pattern:o.Lexer.NA}),P=(0,o.createToken)({name:"PrefixOperator",pattern:o.Lexer.NA,categories:[D]}),I=(0,o.createToken)({name:"BinaryOperator",pattern:o.Lexer.NA,categories:[D]}),O=(0,o.createToken)({name:"ExponentOperator",pattern:/\^/,categories:[I]}),R=(0,o.createToken)({name:"MultiplicativeOperator",pattern:o.Lexer.NA,categories:[I]}),Y=(0,o.createToken)({name:"MultiplicationOperator",pattern:/\*/,categories:[R,C]}),F=(0,o.createToken)({name:"DivisionOperator",pattern:/\//,categories:[R]}),j=(0,o.createToken)({name:"ModuloOperator",pattern:/%/,categories:[R]}),z=(0,o.createToken)({name:"AdditiveOperator",pattern:o.Lexer.NA,categories:[I,P]}),N=(0,o.createToken)({name:"AdditionOperator",pattern:/\+/,categories:[z]}),B=(0,o.createToken)({name:"SubtractionOperator",pattern:/-/,categories:[z]}),U=(0,o.createToken)({name:"MembershipOperator",pattern:o.Lexer.NA,categories:[I]}),H=(0,o.createToken)({name:"BetweenOperator",pattern:/between/i,categories:[U],longer_alt:d}),V=(0,o.createToken)({name:"InOperator",pattern:/in/i,categories:[U],longer_alt:d}),W=(0,o.createToken)({name:"LikeOperator",pattern:/i?like/i,categories:[U],longer_alt:d}),G=(0,o.createToken)({name:"ComparisonOperator",pattern:o.Lexer.NA,categories:[I]}),q=(0,o.createToken)({name:"EqualityOperator",pattern:"=",categories:[G]}),X=(0,o.createToken)({name:"InequalityOperator",pattern:/(?:<>|!=)/,categories:[G]}),Z=(0,o.createToken)({name:"LessThanOperator",pattern:"<",categories:[G]}),K=(0,o.createToken)({name:"LessThanEqualOperator",pattern:"<=",categories:[G]}),J=(0,o.createToken)({name:"GreaterThanOperator",pattern:">",categories:[G]}),$=(0,o.createToken)({name:"GreaterThanEqualOperator",pattern:">=",categories:[G]}),Q=(0,o.createToken)({name:"IsOperator",pattern:/is/i,categories:[I],longer_alt:d}),tt=(0,o.createToken)({name:"IsPredicate",pattern:o.Lexer.NA}),et=(0,o.createToken)({name:"Not",pattern:/not/i,categories:[P,f],longer_alt:d}),nt=(0,o.createToken)({name:"Null",pattern:/null/i,categories:[tt,f],longer_alt:d}),rt=(0,o.createToken)({name:"True",pattern:/true/i,categories:[tt,f],longer_alt:d}),it=(0,o.createToken)({name:"False",pattern:/false/i,categories:[tt,f],longer_alt:d}),ot=(0,o.createToken)({name:"And",pattern:/and/i,categories:[I,f],longer_alt:d}),at=(0,o.createToken)({name:"Or",pattern:/or/i,categories:[I,f],longer_alt:d}),st=(0,o.createToken)({name:"Punctuation",pattern:o.Lexer.NA}),ut=(0,o.createToken)({name:"OpenParenthesis",pattern:/\(/,categories:[st]}),lt=(0,o.createToken)({name:"CloseParenthesis",pattern:/\)/,categories:[st]}),ct=(0,o.createToken)({name:"Comma",pattern:/,/,categories:[st]}),dt=(0,o.createToken)({name:"Dot",pattern:/\./,categories:[st]}),ht=[l,p,m,_,y,v,g,x,b,w,M,L,k,U,H,V,W,Q,tt,et,nt,rt,it,ot,at,c,d,h,T,S,E,A,D,P,I,O,R,Y,F,j,z,N,B,G,q,X,Z,K,J,$,ut,lt,ct,dt],ft=new o.Lexer(ht),pt=new(function(t){function e(){a(this,e);var t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,ht));return t.RULE("expression",(function(){t.SUBRULE(t.disjunctiveExpression)})),t.RULE("disjunctiveExpression",(function(){t.SUBRULE(t.conjunctiveExpression,{LABEL:"lhs"}),t.MANY((function(){t.CONSUME(at,{LABEL:"operator"}),t.SUBRULE2(t.conjunctiveExpression,{LABEL:"rhs"})}))})),t.RULE("conjunctiveExpression",(function(){t.SUBRULE(t.negationExpression,{LABEL:"lhs"}),t.MANY((function(){t.CONSUME(ot,{LABEL:"operator"}),t.SUBRULE2(t.negationExpression,{LABEL:"rhs"})}))})),t.RULE("negationExpression",(function(){t.OPTION((function(){return t.CONSUME(et)})),t.SUBRULE(t.isExpression)})),t.RULE("isExpression",(function(){t.SUBRULE(t.comparisonExpression,{LABEL:"expression"}),t.OPTION((function(){t.CONSUME(Q),t.OPTION2((function(){return t.CONSUME(et)})),t.CONSUME(tt)}))})),t.RULE("comparisonExpression",(function(){t.SUBRULE(t.membershipExpression,{LABEL:"lhs"}),t.OPTION((function(){t.CONSUME(G,{LABEL:"operator"}),t.SUBRULE2(t.membershipExpression,{LABEL:"rhs"})}))})),t.RULE("membershipExpression",(function(){t.SUBRULE(t.additiveExpression,{LABEL:"lhs"}),t.OPTION((function(){t.OPTION2((function(){return t.CONSUME(et)})),t.OR([{ALT:function(){t.CONSUME(H,{LABEL:"betweenOperator"}),t.SUBRULE2(t.additiveExpression,{LABEL:"lowerBound"}),t.CONSUME(ot),t.SUBRULE3(t.additiveExpression,{LABEL:"upperBound"})}},{ALT:function(){t.CONSUME(V,{LABEL:"inOperator"}),t.CONSUME(ut),t.AT_LEAST_ONE_SEP({SEP:ct,DEF:function(){return t.SUBRULE(t.expression,{LABEL:"set"})}}),t.CONSUME(lt)}},{ALT:function(){t.CONSUME(W,{LABEL:"likeOperator"}),t.SUBRULE4(t.additiveExpression,{LABEL:"rhs"})}}])}))})),t.RULE("additiveExpression",(function(){t.SUBRULE(t.multiplicativeExpression,{LABEL:"lhs"}),t.MANY((function(){t.CONSUME(z,{LABEL:"operator"}),t.SUBRULE2(t.multiplicativeExpression,{LABEL:"rhs"})}))})),t.RULE("multiplicativeExpression",(function(){t.SUBRULE(t.exponentiationExpression,{LABEL:"lhs"}),t.MANY((function(){t.CONSUME(R,{LABEL:"operator"}),t.SUBRULE2(t.exponentiationExpression,{LABEL:"rhs"})}))})),t.RULE("exponentiationExpression",(function(){t.SUBRULE(t.atomicExpression,{LABEL:"lhs"}),t.MANY((function(){t.CONSUME(O,{LABEL:"operator"}),t.SUBRULE2(t.atomicExpression,{LABEL:"rhs"})}))})),t.RULE("atomicExpression",(function(){t.OR([{ALT:function(){return t.SUBRULE(t.parenthesesExpression)}},{ALT:function(){return t.SUBRULE(t.caseExpression)}},{ALT:function(){return t.SUBRULE(t.castExpression)}},{ALT:function(){return t.SUBRULE(t.functionExpression)}},{ALT:function(){return t.SUBRULE(t.prefixExpression)}},{ALT:function(){return t.SUBRULE(t.columnExpression)}},{ALT:function(){return t.CONSUME(T)}}])})),t.RULE("parenthesesExpression",(function(){t.CONSUME(ut),t.SUBRULE(t.expression),t.CONSUME(lt)})),t.RULE("caseExpression",(function(){t.CONSUME(b),t.OPTION((function(){return t.SUBRULE(t.expression)})),t.AT_LEAST_ONE((function(){t.CONSUME(w),t.SUBRULE2(t.expression,{LABEL:"condition"}),t.CONSUME(M),t.SUBRULE3(t.expression,{LABEL:"result"})})),t.OPTION2((function(){t.CONSUME(L),t.SUBRULE4(t.expression,{LABEL:"else"})})),t.CONSUME(k)})),t.RULE("castExpression",(function(){t.CONSUME(g),t.CONSUME(ut),t.SUBRULE(t.expression),t.CONSUME(x),t.CONSUME(d,{LABEL:"castTo"}),t.CONSUME(lt)})),t.RULE("orderByExpression",(function(){t.SUBRULE(t.expression),t.OPTION((function(){t.OR([{ALT:function(){return t.CONSUME(y,{LABEL:"asc"})}},{ALT:function(){return t.CONSUME(v,{LABEL:"desc"})}}])}))})),t.RULE("orderBy",(function(){t.CONSUME(_),t.AT_LEAST_ONE_SEP({SEP:ct,DEF:function(){t.SUBRULE(t.orderByExpression)}})})),t.RULE("functionExpression",(function(){t.CONSUME(d,{LABEL:"function"}),t.CONSUME(ut),t.OR1([{ALT:function(){return t.CONSUME(C)}},{ALT:function(){t.OPTION1((function(){t.OR2([{ALT:function(){return t.CONSUME(p)}},{ALT:function(){return t.CONSUME(m)}}])})),t.AT_LEAST_ONE_SEP({SEP:ct,DEF:function(){t.SUBRULE(t.expression)}}),t.OPTION2((function(){t.SUBRULE(t.orderBy)}))}}]),t.CONSUME(lt)})),t.RULE("prefixExpression",(function(){t.CONSUME(P,{LABEL:"operator"}),t.SUBRULE(t.expression)})),t.RULE("columnExpression",(function(){t.OPTION((function(){t.CONSUME1(c,{LABEL:"table"}),t.CONSUME(dt)})),t.CONSUME2(c,{LABEL:"column"})})),t.performSelfAnalysis(),t}return u(e,t),e}(o.CstParser)),mt=new(function(t){function e(){a(this,e);var t=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.validateVisitor(),t}return u(e,t),i(e,[{key:"expression",value:function(t){return this.visit(t.disjunctiveExpression)}},{key:"disjunctiveExpression",value:function(t){var e=this,n=this.visit(t.lhs);return t.rhs&&t.rhs.forEach((function(r,i){var o=e.visit(r);n={type:"BinaryExpression",operator:t.operator[i].image,lhs:n,rhs:o,start:n.start,end:o.end}})),n}},{key:"conjunctiveExpression",value:function(t){var e=this,n=this.visit(t.lhs);return t.rhs&&t.rhs.forEach((function(r,i){var o=e.visit(r);n={type:"BinaryExpression",operator:t.operator[i].image,lhs:n,rhs:o,start:n.start,end:o.end}})),n}},{key:"negationExpression",value:function(t){var e=this.visit(t.isExpression);return t.Not&&(e=r({},e,{negated:!e.negated,start:t.Not[0].startOffset})),e}},{key:"isExpression",value:function(t){var e=this.visit(t.expression);return t.IsOperator&&(e={type:"IsExpression",expression:e,negated:Boolean(t.Not),is:t.IsPredicate[0].image,start:e.start,end:t.IsPredicate[0].endOffset}),e}},{key:"comparisonExpression",value:function(t){var e=this.visit(t.lhs);if(t.rhs){var n=this.visit(t.rhs);e={type:"BinaryExpression",operator:t.operator[0].image,lhs:e,rhs:n,start:e.start,end:n.end}}return e}},{key:"membershipExpression",value:function(t){var e=this,n=this.visit(t.lhs),r=Boolean(t.Not);if(t.betweenOperator){var i=this.visit(t.lowerBound),o=this.visit(t.upperBound);n={type:"BetweenExpression",lhs:n,lowerBound:i,upperBound:o,negated:r,start:n.start,end:o.end}}else if(t.inOperator)n={type:"InExpression",lhs:n,in:t.set.map((function(t){return e.visit(t)})),negated:r,start:n.start,end:t.CloseParen[0].endOffset};else if(t.likeOperator){var a=this.visit(t.rhs);n={type:"BinaryExpression",lhs:n,rhs:a,negated:r,start:n.start,end:a.end}}return n}},{key:"additiveExpression",value:function(t){var e=this,n=this.visit(t.lhs);return t.rhs&&t.rhs.forEach((function(r,i){var o=e.visit(r);n={type:"BinaryExpression",operator:t.operator[i].image,lhs:n,rhs:o,start:n.start,end:o.end}})),n}},{key:"multiplicativeExpression",value:function(t){var e=this,n=this.visit(t.lhs);return t.rhs&&t.rhs.forEach((function(r,i){var o=e.visit(r);n={type:"BinaryExpression",operator:t.operator[i].image,lhs:n,rhs:o,start:n.start,end:o.end}})),n}},{key:"exponentiationExpression",value:function(t){var e=this,n=this.visit(t.lhs);return t.rhs&&t.rhs.forEach((function(r,i){var o=e.visit(r);n={type:"BinaryExpression",operator:t.operator[i].image,lhs:n,rhs:o,start:n.start,end:o.end}})),n}},{key:"atomicExpression",value:function(t){return t.parenthesesExpression?this.visit(t.parenthesesExpression):t.caseExpression?this.visit(t.caseExpression):t.castExpression?this.visit(t.castExpression):t.functionExpression?this.visit(t.functionExpression):t.prefixExpression?this.visit(t.prefixExpression):t.columnExpression?this.visit(t.columnExpression):{type:"ConstantExpression",value:t.Constant[0].image,start:t.Constant[0].startOffset,end:t.Constant[0].endOffset}}},{key:"parenthesesExpression",value:function(t){return{type:"ParenthesesExpression",expression:this.visit(t.expression),start:t.OpenParenthesis[0].startOffset,end:t.CloseParenthesis[0].endOffset}}},{key:"caseExpression",value:function(t){var e=this;return{type:"CaseExpression",expression:t.expression&&this.visit(t.expression)||null,branches:t.condition.map((function(n,r){return{condition:e.visit(n),result:e.visit(t.result[r])}})),else:t.else&&this.visit(t.else)||null,start:t.Case[0].startOffset,end:t.End[0].endOffset}}},{key:"castExpression",value:function(t){return{type:"CastExpression",expression:this.visit(t.expression),castTo:t.castTo[0].image,start:t.Cast[0].startOffset,end:t.CloseParenthesis[0].endOffset}}},{key:"orderByExpression",value:function(t){var e=this.visit(t.expression[0]),n=t.asc?t.asc[0].endOffset:t.desc?t.desc[0].endOffset:e.end;return{type:"OrderByExpression",expression:e,desc:Boolean(t.desc),start:e.start,end:n}}},{key:"orderBy",value:function(t){var e=this,n=t.orderByExpression.map((function(t){return e.visit(t)}));return{type:"OrderBy",expressions:n,start:t.OrderBy[0].startOffset,end:n[n.length-1].end}}},{key:"functionExpression",value:function(t){var e=this,n={type:"FunctionExpression",function:t.function[0].image,start:t.function[0].startOffset,end:t.CloseParenthesis[0].endOffset};return t.AllColumns?n.star=!0:(t.All?n.all=!0:t.Distinct&&(n.distinct=!0),n.params=t.expression.map((function(t){return e.visit(t)})),t.orderBy&&(n.orderBy=this.visit(t.orderBy))),n}},{key:"prefixExpression",value:function(t){var e=this.visit(t.expression);return{type:"PrefixExpression",operator:t.operator[0].image,expression:e,start:t.operator[0].startOffset,end:e.end}}},{key:"columnExpression",value:function(t){return{type:"ColumnExpression",table:t.table&&t.table[0].image||null,column:t.column[0].image,start:t.table?t.table[0].startOffset:t.column[0].startOffset,end:t.column[0].endOffset}}}]),e}(pt.getBaseCstVisitorConstructor())),_t="safe",yt="unsafe",vt="neutral";function gt(t,e){var n=vt;switch(e.type){case"BinaryExpression":var r=gt(t,e.lhs),i=gt(t,e.rhs);r===yt||i===yt?n=yt:r!==_t&&i!==_t||(n=_t);break;case"ColumnExpression":n=null===e.table||e.table.toLowerCase()===t.toLowerCase()||e.table.toLowerCase()==='"'+t.toLowerCase()+'"'?_t:yt;break;case"OrderBy":n=e.expressions.reduce((function(e,n){var r=gt(t,n);return r===yt?yt:r===_t&&e===vt?_t:e}),vt);break;case"FunctionExpression":n=e.params.reduce((function(e,n){var r=gt(t,n);return r===yt?yt:r===_t&&e===vt?_t:e}),vt);break;case"CaseExpression":var o=e.expression?gt(t,e.expression):vt,a=e.branches.reduce((function(e,n){var r=n.condition,i=n.result,o=gt(t,r),a=gt(t,i);return o===yt||a===yt?yt:e!==vt||o!==_t&&a!==_t?e:_t}),vt),s=e.else?gt(t,e.else):vt;o===yt||a===yt||s===yt?n=yt:o!==_t&&a!==_t&&s!==_t||(n=_t);break;case"BetweenExpression":var u=gt(t,e.lhs),l=gt(t,e.lowerBound),c=gt(t,e.upperBound);u===yt||l===yt||c===yt?n=yt:u!==_t&&l!==_t&&c!==_t||(n=_t);break;case"InExpression":n=e.in.reduce((function(e,n){var r=gt(t,n);return r===yt?yt:r===_t&&e===vt?_t:e}),gt(t,e.expression));break;case"IsExpression":case"CastExpression":case"OrderByExpression":case"PrefixExpression":case"ParenthesesExpression":n=gt(t,e.expression)}return e.paint=n,n}function xt(t,e,n,r,i){if(t.paint===_t){var o="color"+e.length,a=t.start,s=t.end+1;return e.push(i.substring(a,s)),n.push(o),void r.push({alias:o,start:a,end:s})}switch(t.type){case"BinaryExpression":xt(t.lhs,e,n,r,i),xt(t.rhs,e,n,r,i);break;case"OrderBy":t.expressions.forEach((function(t){return xt(t,e,n,r,i)}));break;case"FunctionExpression":t.params.forEach((function(t){return xt(t,e,n,r,i)}));break;case"CaseExpression":t.expression&&xt(t.expression,e,n,r,i),t.branches.forEach((function(t){var o=t.condition,a=t.result;xt(o,e,n,r,i),xt(a,e,n,r,i)})),t.else&&xt(t.else,e,n,r,i);break;case"BetweenExpression":xt(t.lhs,e,n,r,i),xt(t.lowerBound,e,n,r,i),xt(t.upperBound,e,n,r,i);break;case"InExpression":xt(t.expression,e,n,r,i),t.in.forEach((function(t){return xt(t,e,n,r,i)}));break;case"IsExpression":case"CastExpression":case"OrderByExpression":case"PrefixExpression":case"ParenthesesExpression":xt(t.expression,e,n,r,i)}}},7038:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.normalizeArrayByValue=e.isArrayOfObjects=e.hasAllObjects=e.isPlainObject=e.genericDateTimeFormat=e.momentUTCFormat=e.nullLabelHtml=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.formatDataValue=_,e.maybeFormatInfinity=function(t){return t.map((function(t){return"-Infinity"!==t.val&&"Infinity"!==t.val||(t.label=t.val,t.val=0),t}))},e.formatNumber=y,e.formatPercentage=function(t,e){var n=t/e;return n<.01?g(n):v(n)},e.formatArrayValue=x,e.formatTimeBinValue=b,e.formatExtractValue=w,e.normalizeFiltersArray=function(t){return t.map((function(t){return p(t)?m(t):t}))},e.formatCache=function(t){var e=t,n=!1;function r(t,r){if(!1===t)return null;r||!1!==n||(n=e.tickFormat()),e.tickFormat(t),r&&(n=!1)}return{setTickFormat:r,setTickFormatFromCache:function(){r(n,!0)}}};var i=n(7100),o=s(n(5680)),a=s(n(381));function s(t){return t&&t.__esModule?t:{default:t}}var u=o.default.format(","),l=e.nullLabelHtml='<tspan class="null-value"> NULL </tspan>',c=e.momentUTCFormat=function(t,e){return a.default.utc(t).locale("en").format(e)},d=e.genericDateTimeFormat=function(t){return 0===t.getMilliseconds()?c(t,"MMM D, YYYY")+" "+c(t,"HH:mm:ss"):c(t,"MMM D, YYYY")+" "+c(t,"HH:mm:ss.SSS")},h=e.isPlainObject=function(t){return!(Array.isArray(t)||"object"!==(void 0===t?"undefined":r(t))||t instanceof Date)},f=e.hasAllObjects=function(t){return t.reduce((function(t,e){return h(e)&&t}),!0)},p=e.isArrayOfObjects=function(t){return Array.isArray(t)&&f(t)},m=e.normalizeArrayByValue=function(t){return p(t)?t.map((function(t){return t.value})):t};function _(t){return"number"==typeof t?y(t):Array.isArray(t)?x(t):t instanceof Date?d(t):null===t?l:t}function y(t){return"number"!=typeof t?t:t.toString().match(/e/)?t.toPrecision(2):u(parseFloat(t.toFixed(2)))}var v=o.default.format(".0%"),g=o.default.format(".1%");function x(t){return"object"!==r(t[0])||t[0]instanceof Date?t.map((function(t){return _(t)})).join("  "):t[0].isExtract?w(t[0].value,t[0].extractUnit):b(t)}function b(t){var e=t[0],n=t[1];switch(e.timeBin){case"decade":return c(e.value,"YYYY")+"  "+c(n.value,"YYYY");case"year":return c(e.value,"YYYY");case"quarter":return a.default.utc(e.value).locale("en").quarter()+"Q "+c(e.value,"YYYY");case"month":return c(e.value,"MMM YYYY");case"week":return c(e.value,"MMM D")+"  "+c(n.value,"MMM D, YYYY");case"day":return c(e.value,"MMM D, YYYY");case"hour":case"minute":return c(e.value,"MMM D, YYYY")+" "+c(e.value,"HH:mm");case"second":return""+c(e.value,"HH:mm:ss");case"millisecond":return""+c(e.value,"HH:mm:ss.SSS");default:return d(e.value)}}function w(t,e){switch(e){case"isodow":return i.DAYS[t-1];case"month":return i.MONTHS[t-1];case"quarter":return i.QUARTERS[t-1];case"hour":return i.HOURS[t];case"minute":return t+1;default:return t}}},5357:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=e.logger={};n.enableDebugLog=!1,n.warn=function(t){return console&&(console.warn?console.warn(t):console.log&&console.log(t)),n},n.debug=function(t){return n.enableDebugLog&&console&&(console.debug?console.debug(t):console.log&&console.log(t)),n},n.deprecate=function(t,e){var r=!1;return function(){return r||(n.warn(e),r=!0),t.apply(this,arguments)}}},3878:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.timed=void 0,e.bezier=function(t,e,n,r){var o=new i.default(t,e,n,r);return function(t){return o.solve(t)}};var r,i=(r=n(9874))&&r.__esModule?r:{default:r},o=window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now.bind(Date),a=function(t){return(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame)(t)};e.timed=function(t,e,n){if(!e)return t.call(n,1),null;var r=!1,i=o();return a((function s(u){r||((u=o())>=i+e?t.call(n,1):(t.call(n,(u-i)/e),a(s)))})),function(){r=!0}}},2446:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multipleKeysAccessorForStack=e.multipleKeysAccessorForCap=void 0;var r=n(7038),i=function(t){return t};function o(t){return(0,r.isArrayOfObjects)(t)?t.map((function(t){return t.value})):t}function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return function(e){var n=[];for(var r in e)e.hasOwnProperty(r)&&r.indexOf("key")>-1&&n.push(t(o(e[r])));return 1===n.length&&(n=n[0]),n}}e.multipleKeysAccessorForCap=a(),e.multipleKeysAccessorForStack=a((function(t){return Array.isArray(t)?t[0]:t}))},5263:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.distance_in_meters=function(t,e,n,i){var o=(e-i)*r.Math.DEG_TO_RAD,a=(t-n)*r.Math.DEG_TO_RAD,s=Math.sin(.5*o);s*=s;var u=Math.sin(.5*a);u*=u;var l=Math.cos(e*r.Math.DEG_TO_RAD)*Math.cos(i*r.Math.DEG_TO_RAD);return 2*Math.asin(Math.sqrt(s+l*u))*6372797.560856},e.conv900913To4326X=i,e.conv900913To4326Y=o,e.conv900913To4326=function(t,e){return r.Point2d.set(t,i(e[0]),o(e[1]))},e.conv4326To900913X=a,e.conv4326To900913Y=s,e.conv4326To900913=function(t,e){return r.Point2d.set(t,a(e[0]),s(e[1]))};var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(6154));function i(t){return t/111319.490778}function o(t){return 57.295779513*(2*Math.atan(Math.exp(t/6378136.99911))-1.570796327)}function a(t){return 111319.490778*t}function s(t){return 6378136.99911*Math.log(Math.tan(.00872664626*t+.785398163397))}},3001:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.renderAttributes=e.GeoSvgFormatter=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();e.notNull=h,e.adjustOpacity=f,e.adjustRGBAOpacity=p,e.createVegaAttrMixin=function(t,e,n,r,i,o){var a="",s="",u=e.charAt(0).toUpperCase()+e.slice(1),l="default"+u,c="null"+u;t[l]=g(t,n,o?o.preDefault:null,o?o.postDefault:null),t[c]=g(t,r,o?o.preNull:null,o?o.postNull:null),i&&(s=e+"Attr",t[a=e+"Scale"]=g(t,null,o?o.preScale:null,o?o.postScale:null),t[s]=g(t,null,o?o.preField:null,o?o.postField:null),t["_build"+u+"Scale"]=function(n,r){var i=t[a]();if(i&&i.domain&&i.domain().length&&i.range().length&&"fillColorScale"===a){var o={name:r+"_"+e,type:n._determineScaleType(i),domain:i.domain().filter(h),range:i.range(),default:t[l](),nullValue:t[c]()};return i.clamp&&(o.clamp=i.clamp()),o}if(t.densityAccumulatorEnabled()){var s=r+"_"+e,u=t.defaultFillColor(),d=100/(u.length-1);return{name:s,type:"linear",domain:u.map((function(t,e){return e*d/100})),range:u.map((function(t,e,n){var r=e/(n.length-1),i=Math.min(r/.65,1);return i=.375*i+.625,convertHexToRGBA(t,100*i)})),accumulator:"density",minDensityCnt:"-2ndStdDev",maxDensityCnt:"2ndStdDev",clamp:!0}}}),t["get"+u+"Val"]=function(n){var r=t[l]();if(null===n)r=t[c]();else if(void 0!==n&&i){var o=v[u],a=t.getState().encoding[o];if(a&&a.domain&&a.domain.length&&a.range.length){var s=a.domain;if("auto"===s){var d=o+"Domain";if("function"!=typeof t[d])throw new Error("Looking for a "+d+" function on for attr "+e);s=t[d]()}"ordinal"===a.type?(m.domain(s).range(a.range),r=-1===s.indexOf(n)?m("Other"):m(n)):Array.isArray(s)&&s[0]===s[1]?(y.domain(s).range(a.range),r=Math.round(y(n))):(_.domain(s).range(a.range),r=_(n))}}return r}},e.createRasterLayerGetterSetter=g,e.__displayPopup=function(t){var e=t.chart,n=t.parentElem,i=t.data,a=t.width,u=t.height,l=t.margins,c=t.xscale,d=t.yscale,h=t.minPopupArea,f=t.animate,p=t._vega,m=t._layer,_=t.state,y=m.layerType(),v=null;if(e._useGeoTypes){if(!_.encoding.geocol)throw new Error("No poly/multipolygon column specified. Cannot build poly outline popup.");var g=_.transform.groupby&&_.transform.groupby.length&&"lines"===_.mark.type?"sampled_geo":_.encoding.geocol;v=new M(g)}else{if(e._useGeoTypes||"polys"!==y)throw new Error("Cannot build outline popup.");v=new w}var x=v.getBounds(i,a,u,l,c,d),b=s.AABox2d.getSize(s.Point2d.create(),x);isFinite(b[0])&&0!==b[0]||(x[s.AABox2d.MINX]=0,x[s.AABox2d.MAXX]=a,b[0]=a),isFinite(b[1])&&0!==b[1]||(x[s.AABox2d.MINY]=0,x[s.AABox2d.MAXY]=u,b[1]=u);var T={};if(p&&Array.isArray(p.marks)&&p.marks.length>0&&p.marks[0].properties){var S=p.marks[0].properties;L.forEach((function(t){"object"===r(S[t])&&S[t].field&&"string"==typeof S[t].field&&(T[t]=S[t].field)}))}var E=1,A=h/s.AABox2d.area(x),D=A>1;D&&(E=Math.sqrt(A));var C=m.popupStyle(),P=m.getFillColorVal(i[T.fillColor]),I=m.getStrokeColorVal(i[T.strokeColor]),O=1;"object"!==(void 0===C?"undefined":r(C))||D||(P=C.fillColor||P,I=C.strokeColor||I,O=C.strokeWidth);var R=n.append("svg").attr("width",a).attr("height",u),Y=s.AABox2d.getCenter(s.Point2d.create(),x),F=R.append("g").attr("class","polys"===y?"map-poly-xform":"map-polyline").attr("transform","translate("+(E*x[s.AABox2d.MINX]-(E-1)*Y[0])+", "+(E*(x[s.AABox2d.MINY]+1)-(E-1)*(Y[1]+1))+")").append("g").attr("class","polys"===y?"map-poly":"map-polyline").attr("transform-origin",b[0]/2+" "+b[1]/2);if(f&&(D?F.classed("popupPoly",!0):F.classed("fadeInPoly",!0)),"number"==typeof O&&F.style("stroke-width",O),"lines"===y){var j=F.append("defs").append("filter").attr("id","drop-shadow").attr("width","200%").attr("height","200%");j.append("feOffset").attr("in","SourceAlpha").attr("result","offOut").attr("dx","2").attr("dy","2"),j.append("feGaussianBlur").attr("in","offOut").attr("stdDeviation",2).attr("result","blurOut"),j.append("feBlend").attr("in","SourceGraphic").attr("in2","blurOut").attr("mode","normal")}return F.append("path").attr("d",v.getSvgPath(s.Point2d.create(x[s.AABox2d.MINX],x[s.AABox2d.MINY]),E)).attr("class","polys"===y?"map-polygon-shape":"map-polyline").attr("fill","polys"===y?P:"none").attr("fill-rule","evenodd").attr("stroke-width",O).attr("stroke",I).style("filter","polys"===y?"none":"url(#drop-shadow)").on("click",(function(){return"polys"===y?m.onClick(e,i,o.default.event):null})),k[e]=D,x},e.getSizeScaleName=T,e.getColorScaleName=S,e.getScales=function(t,e,n,i){var o=t.size,a=t.color,s=[];return"object"!==(void 0===o?"undefined":r(o))||"quantitative"!==o.type&&"custom"!==o.type||s.push({name:T(e),type:"linear",domain:"auto"===o.domain?{data:i,fields:n.size}:o.domain,range:o.range,clamp:!0}),"object"===(void 0===a?"undefined":r(a))&&"density"===a.type&&s.push({name:S(e),type:"linear",domain:a.range.map((function(t,e){return 100*e/(a.range.length-1)/100})),range:a.range.map((function(t){return f(t,a.opacity)})).map((function(t,e,n){var r=e/(n.length-1),i=Math.min(r/.65,1);return p(t,i=.375*i+.625)})),accumulator:"density",minDensityCnt:"-2ndStdDev",maxDensityCnt:"2ndStdDev",clamp:!0}),"object"===(void 0===a?"undefined":r(a))&&"ordinal"===a.type&&s.push({name:S(e),type:"ordinal",domain:"auto"===a.domain?{data:i,fields:n.color}:a.domain,range:a.range.map((function(t){return f(t,a.opacity)})),default:f(a.range[a.range.length-1],a.opacity),nullValue:f("#CACACA",a.opacity)}),"object"===(void 0===a?"undefined":r(a))&&"quantitative"===a.type&&s.push({name:S(e),type:"quantize",domain:"auto"===a.domain?{data:i,fields:n.color}:a.domain,range:a.range.map((function(t){return f(t,a.opacity)}))}),s};var o=u(n(5680)),a=u(n(1545)),s=n(6154);function u(t){return t&&t.__esModule?t:{default:t}}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t){return null!=t}function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!/#/.test(t))return t;var n=t.replace("#",""),r=parseInt(n.substring(0,2),16),i=parseInt(n.substring(2,4),16),o=parseInt(n.substring(4,6),16);return"rgba("+r+","+i+","+o+","+e+")"}function p(t,e){var n=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(t.split("(")[1].split(")")[0].split(","),4),r=n[0],i=n[1],o=n[2],a=n[3];if(a){var s=parseFloat(a)-(1-e);a=""+(s>0?s:.01)}else a=e;return"rgba("+r+","+i+","+o+","+a+")"}var m=o.default.scale.ordinal(),_=o.default.scale.quantize(),y=o.default.scale.linear(),v={FillColor:"color",Size:"size"};function g(t,e,n,r){return function(i){return arguments.length?(n&&void 0!==(o=n(i,e))&&(i=o),e=i,r&&void 0!==(o=r(e))&&(e=o),t):e;var o}}function x(t,e){var n=[0,0];return n[0]=111319.49077777778*t,n[1]=6378136.999112157*Math.log(Math.tan(.00872664625997*(90+e))),n}var b=function(){function t(){d(this,t)}return i(t,[{key:"getBounds",value:function(t,e,n,r,i,o){throw new Error("This must be overridden")}},{key:"getSvgPath",value:function(t,e){throw new Error("This must be overridden")}}]),t}(),w=function(t){function e(){d(this,e);var t=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t._polys=[],t}return c(e,t),i(e,[{key:"getBounds",value:function(t,e,n,r,i,o){for(var a=t[polyTableGeomColumns.verts_LEGACY],u=t[polyTableGeomColumns.linedrawinfo_LEGACY],l=u.length?u[2]:0,c=s.AABox2d.create(),d=s.Point2d.create(),h=0;h<u.length;h+=4){for(var f=[],p=2*(u[h]-3),m=2*(u[h+2]-l),_=m+p,y=m;y<_;y+=2)a[y]<=-1e37?(f.pop(),f.pop(),f.pop(),this._polys.push(f),f=[]):(s.Point2d.set(d,i(a[y])+r.left,n-o(a[y+1])-1+r.top),d[0]>=0&&d[0]<=e&&d[1]>=0&&d[1]<=n&&s.AABox2d.encapsulatePt(c,c,d),f.push(d[0]),f.push(d[1]));this._polys.push(f)}return c}},{key:"getSvgPath",value:function(t,e){var n="";return this._polys.forEach((function(r){if(r){for(var i="",o=0;o<r.length;o+=2)isNaN(r[o])||isNaN(r[o+1])||(i+=(i.length?"L":"M")+e*(r[o]-t[0])+","+e*(r[o+1]-t[1]));i.length&&(i+="Z"),n+=i}})),n}}]),e}(b),M=e.GeoSvgFormatter=function(t){function e(t){d(this,e);var n=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n._geojson=null,n._projector=null,n._d3projector=null,n._geocol=t,n}return c(e,t),i(e,[{key:"getBounds",value:function(t,e,n,i,u,l){var c=t[this._geocol];if("string"!=typeof c)throw new Error('Cannot create SVG from geo polygon column "'+this._geocol+'". The data returned is not a WKT string. It is of type: '+(void 0===c?"undefined":r(c)));this._geojson=a.default.parse(c),this._projector=function(t,e,n,r,i){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[0,0],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,u=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],l=o.default.geo.transform({point:function(o,l){var c=x(o,l),d=[s*(r(c[0])+n.left-a[0]),s*(e-i(c[1])-1+n.top-a[1])];return u?d[0]>=0&&d[0]<t&&d[1]>=0&&d[1]<e?this.stream.point(d[0],d[1]):void 0:this.stream.point(d[0],d[1])}});return l.setTransforms=function(t,e){a=t,s=e},l.setClamp=function(t){u=Boolean(t)},l}(e,n,i,u,l,!0),this._d3projector=o.default.geo.path().projection(this._projector);var d=this._d3projector.bounds(this._geojson);return s.AABox2d.create(d[0][0],d[0][1],d[1][0],d[1][1])}},{key:"getSvgPath",value:function(t,e){return this._projector.setTransforms(t,e),this._projector.setClamp(!1),this._d3projector(this._geojson)}}]),e}(b),L=e.renderAttributes=["x","y","fillColor","strokeColor","strokeWidth","lineJoin","miterLimit","opacity"],k={};function T(t){return"linemap"===t?t+"_strokeWidth":t+"_size"}function S(t){return"linemap"===t?t+"_strokeColor":t+"_fillColor"}},5209:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.utils=e.pluck=e.maxVal=e.minVal=e.printers=e.customTimeFormat=e.TIME_UNITS=e.deepClone=e.deepEquals=e.dateFormat=e.parser=void 0,e.extractTickFormat=p,e.xDomain=function(t,e,n,r){if(!t)return[e,n];switch(r){case"year":return[e.getFullYear(),n.getFullYear()];case"quarter":return[1,4];case"isodow":return[1,7];case"month":return[1,12];case"day":return[1,31];case"hour":return[0,23];case"minute":return[0,59];default:return[1,7]}},e.xScale=function(t,e){return t||!e?u.default.scale.linear():u.default.time.scale.utc()},e.xAxisTickFormat=function(t,e){var n=t.extract,r=t.timeBin;return n?y.extractTickFormat(r):e?f:u.default.format(".2s")};var r=n(2307),i=n(7038),o=n(7100),a=c(n(4063)),s=c(n(381)),u=c(n(5680)),l=n(791);function c(t){return t&&t.__esModule?t:{default:t}}var d=e.parser=(0,r.createParser)();d.registerParser({meta:"transform",type:"pixel_bin"},(function(t,e,n){switch(e.mark.shape){case"hex":return function(t,e,n){var r=e.width,i=e.height,o=e.mark,a=e.x,s=e.y,u=e.aggregate,l=a.domain[0],c=a.domain[1],d=s.domain[0],h=s.domain[1],f=n.parseExpression(a.field)+","+l+","+c+","+n.parseExpression(s.field)+","+d+","+h+","+o.width+","+o.height+",0,0,"+r+","+i;return t.select.push("reg_"+o.shape+"_horiz_pixel_bin_packed("+f+") AS xy"),t.select.push(n.parseExpression(u)+" AS color"),t.groupby.push("xy"),t}(t,e,n);case"square":return function(t,e,n){var r=e.width,i=e.height,o=e.mark,a=e.x,s=e.y,u=e.aggregate;return t.select.push("rect_pixel_bin_packed("+n.parseExpression(a.field)+", "+a.domain[0]+", "+a.domain[1]+", "+n.parseExpression(s.field)+", "+s.domain[0]+", "+s.domain[1]+", "+o.width+", "+o.height+", 0, 0, "+r+", "+i+") AS xy"),t.select.push(n.parseExpression(u)+" AS color"),t.groupby.push("xy"),t}(t,e,n);default:return t}})),d.registerParser({meta:"transform",type:"rowid"},(function(t,e){var n=e.table+".rowid";return t.select.push(n),t.groupby.push(n),t}));var h=e.dateFormat=u.default.time.format.utc("%m/%d/%Y"),f=(e.deepEquals=n(4063),e.deepClone=function(t){return JSON.parse(JSON.stringify(t))},e.TIME_UNITS={DATE:!0,TIMESTAMP:!0,date:!0,datetime:!0,timestamp:!0,"timestamp without timezone":!0,TIME:!0},e.customTimeFormat=u.default.time.format.utc.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%b",function(t){return t.getUTCMonth()}],["%Y",function(){return!0}]]));function p(t){return function(e){switch(t){case"year":return Math.ceil(e);case"isodow":return o.DAYS[e-1];case"month":return o.MONTHS[e-1];case"quarter":return o.QUARTERS[e-1];case"hour":case"minute":return e+1;default:return e}}}var m=e.printers={};m.filters=function(t){for(var e="",n=0;n<t.length;++n)n>0&&(e+=", "),e+=m.filter(t[n]);return e},m.filter=function(t){var e="";return null!=t&&(t instanceof Array?t.length>=2?e="["+y.printSingleValue(t[0])+" -> "+y.printSingleValue(t[1])+"]":t.length>=1&&(e=y.printSingleValue(t[0])):e=y.printSingleValue(t)),e};var _=function(t){return Object.keys(t).filter((function(t){return 0===t.indexOf("key")})).reduce((function(e,n){return e.concat(Array.isArray(t[n])?t[n].map((function(t){return"number"==typeof t?t:t.value})):[t[n]])}),[])},y=(e.minVal=function(t){var e=t.data;return u.default.min(_(e))},e.maxVal=function(t){var e=t.data;return u.default.max(_(e))},e.pluck=function(t,e){return e?function(n,r){return e.call(n,n[t],r)}:function(e){return e[t]}},e.utils={});y.printSingleValue=function(t){var e=String(t);return t instanceof Date?e=h(t):"string"==typeof t?e=t:y.isFloat(t)?e=y.printSingleValue.fformat(t):y.isInteger(t)&&(e=Math.round(t)),e},y.printSingleValue.fformat=u.default.format(".2f"),y.add=function(t,e,n){if("string"==typeof e&&(e=e.replace("%","")),t instanceof Date){"string"==typeof e&&(e=Number(e));var r=new Date;return r.setTime(t.getTime()),r.setDate(t.getDate()+e),r}return"string"==typeof e?t+n*(Number(e)/100):t+e},y.subtract=function(t,e,n){if("string"==typeof e&&(e=e.replace("%","")),t instanceof Date){"string"==typeof e&&(e=Number(e));var r=new Date;return r.setTime(t.getTime()),r.setDate(t.getDate()-e),r}return"string"==typeof e?t-n*(Number(e)/100):t-e},y.isNumber=function(t){return t===Number(t)},y.isFloat=function(t){return t===Number(t)&&t!==(0|t)},y.isInteger=function(t){return t===Number(t)&&t===(0|t)},y.isNegligible=function(t){return!y.isNumber(t)||t<l.constants.NEGLIGIBLE_NUMBER&&t>-l.constants.NEGLIGIBLE_NUMBER},y.clamp=function(t,e,n){return t<e?e:t>n?n:t},y.uniqueId=function(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER)},y.nameToId=function(t){return parseFloat(t)?t:t.toLowerCase().replace(/[\s]/g,"_").replace(/[\.']/g,"")},y.appendOrSelect=function(t,e,n){n=n||e;var r=t.select(e);return r.empty()&&(r=t.append(n)),r},y.safeNumber=function(t){return y.isNumber(Number(t))?Number(t):0},y.b64toBlob=function(t,e,n){e=e||"",n=n||512;for(var r=atob(t),i=[],o=0;o<r.length;o+=n){for(var a=r.slice(o,o+n),s=new Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);var l=new Uint8Array(s);i.push(l)}return new Blob(i,{type:e})},y.getFontSizeFromWidth=function(t,e,n){var r=u.default.select("body").append("span").attr("class","tmp-text").style("font-size","12px").style("position","absolute").style("opacity",0).style("margin-right",1e4).html(t),i=r.node(),o=null,a=null;if(i.getBoundingClientRect){var s=i.getBoundingClientRect();o=s.width,a=s.height}r.remove();var l=12*e/o,c=12*n/a;return Math.max(Math.min(l,c),4)},y.isOrdinal=function(t){return t in Object.assign({},{varchar:!0,text:!0,STR:!0},{BOOL:!0})},y.isQuantitative=function(t){return t in Object.assign({},{int2:!0,int4:!0,int8:!0,SMALLINT:!0,INT:!0,BIGINT:!0},{FLOAT:!0,DOUBLE:!0,DECIMAL:!0})},y.deepEquals=a.default,y.customTimeFormat=f,y.extractTickFormat=p,y.formatValue=i.formatDataValue,y.maybeFormatInfinity=i.maybeFormatInfinity,y.nullsFirst=function(t){return function(e,n){return null===e?-1:null===n?1:t(e,n)}},y.nullsLast=function(t){return function(e,n){return null===e?1:null===n?-1:t(e,n)}},y.compareDates=function(t){return function(e,n){var r="mm, dd, YYYY  hh:mm:ss",i=(0,s.default)(e,r,!0).toDate(),o=(0,s.default)(n,r,!0).toDate();return"Invalid date"!==i&&"Invalid date"!==o?t(i.getTime(),o.getTime()):t(e,n)}}},3650:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Alternation:()=>_t,CstParser:()=>Tn,EMPTY_ALT:()=>Ln,EOF:()=>rt,EarlyExitException:()=>Be,EmbeddedActionsParser:()=>Sn,Flat:()=>ct,GAstVisitor:()=>wt,Lexer:()=>$,LexerDefinitionErrorType:()=>Z,MismatchedTokenException:()=>je,NoViableAltException:()=>ze,NonTerminal:()=>ut,NotAllInputParsedException:()=>Ne,Option:()=>dt,Parser:()=>kn,ParserDefinitionErrorType:()=>bn,Repetition:()=>pt,RepetitionMandatory:()=>ht,RepetitionMandatoryWithSeparator:()=>ft,RepetitionWithSeparator:()=>mt,Rule:()=>lt,Terminal:()=>yt,VERSION:()=>r,assignOccurrenceIndices:()=>Ce,clearCache:()=>jn,createSyntaxDiagramsCode:()=>En,createToken:()=>nt,createTokenInstance:()=>it,defaultGrammarResolverErrorProvider:()=>ke,defaultGrammarValidatorErrorProvider:()=>Te,defaultLexerErrorProvider:()=>K,defaultParserErrorProvider:()=>Le,generateParserFactory:()=>Yn,generateParserModule:()=>Fn,isRecognitionException:()=>Fe,resolveGrammar:()=>Ae,serializeGrammar:()=>vt,serializeProduction:()=>gt,tokenLabel:()=>Q,tokenMatcher:()=>ot,tokenName:()=>tt,validateGrammar:()=>De});var r="6.5.0",i=n(5465),o=n(4556),a={},s=new o.RegExpParser;function u(t){var e=t.toString();if(a.hasOwnProperty(e))return a[e];var n=s.pattern(e);return a[e]=n,n}var l,c=(l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),d="Complement Sets are not supported for first char optimization",h='Unable to use "first char" lexer optimizations:\n';function f(t,e){void 0===e&&(e=!1);try{var n=u(t);return p(n.value,{},n.flags.ignoreCase)}catch(n){if(n.message===d)e&&(0,i.rr)(h+"\tUnable to optimize: < "+t.toString()+" >\n\tComplement Sets cannot be automatically optimized.\n\tThis will disable the lexer's first char optimizations.\n\tSee: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.");else{var r="";e&&(r="\n\tThis will disable the lexer's first char optimizations.\n\tSee: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details."),(0,i.WB)(h+"\n\tFailed parsing: < "+t.toString()+" >\n\tUsing the regexp-to-ast library version: "+o.VERSION+"\n\tPlease open an issue at: https://github.com/bd82/regexp-to-ast/issues"+r)}}return[]}function p(t,e,n){switch(t.type){case"Disjunction":for(var r=0;r<t.value.length;r++)p(t.value[r],e,n);break;case"Alternative":var o=t.value;for(r=0;r<o.length;r++){var a=o[r];switch(a.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}var s=a;switch(s.type){case"Character":m(s.value,e,n);break;case"Set":if(!0===s.complement)throw Error(d);(0,i.Ed)(s.value,(function(t){if("number"==typeof t)m(t,e,n);else{var r=t;if(!0===n)for(var i=r.from;i<=r.to;i++)m(i,e,n);else{for(i=r.from;i<=r.to&&i<F;i++)m(i,e,n);if(r.to>=F)for(var o=r.from>=F?r.from:F,a=r.to,s=j(o),u=j(a),l=s;l<=u;l++)e[l]=l}}}));break;case"Group":p(s.value,e,n);break;default:throw Error("Non Exhaustive Match")}var u=void 0!==s.quantifier&&0===s.quantifier.atLeast;if("Group"===s.type&&!1===y(s)||"Group"!==s.type&&!1===u)break}break;default:throw Error("non exhaustive match!")}return(0,i.VO)(e)}function m(t,e,n){var r=j(t);e[r]=r,!0===n&&function(t,e){var n=String.fromCharCode(t),r=n.toUpperCase();if(r!==n)e[i=j(r.charCodeAt(0))]=i;else{var i,o=n.toLowerCase();o!==n&&(e[i=j(o.charCodeAt(0))]=i)}}(t,e)}function _(t,e){return(0,i.sE)(t.value,(function(t){if("number"==typeof t)return(0,i.r3)(e,t);var n=t;return void 0!==(0,i.sE)(e,(function(t){return n.from<=t&&t<=n.to}))}))}function y(t){return!(!t.quantifier||0!==t.quantifier.atLeast)||!!t.value&&((0,i.kJ)(t.value)?(0,i.yW)(t.value,y):y(t.value))}var v=function(t){function e(e){var n=t.call(this)||this;return n.targetCharCodes=e,n.found=!1,n}return c(e,t),e.prototype.visitChildren=function(e){if(!0!==this.found){switch(e.type){case"Lookahead":return void this.visitLookahead(e);case"NegativeLookahead":return void this.visitNegativeLookahead(e)}t.prototype.visitChildren.call(this,e)}},e.prototype.visitCharacter=function(t){(0,i.r3)(this.targetCharCodes,t.value)&&(this.found=!0)},e.prototype.visitSet=function(t){t.complement?void 0===_(t,this.targetCharCodes)&&(this.found=!0):void 0!==_(t,this.targetCharCodes)&&(this.found=!0)},e}(o.BaseRegExpVisitor);function g(t,e){if(e instanceof RegExp){var n=u(e),r=new v(t);return r.visit(n),r.found}return void 0!==(0,i.sE)(e,(function(e){return(0,i.r3)(t,e.charCodeAt(0))}))}var x=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),b="defaultMode",w="modes",M="boolean"==typeof new RegExp("(?:)").sticky;function L(t,e){var n,r=(e=(0,i.ce)(e,{useSticky:M,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r","\n"],tracer:function(t,e){return e()}})).tracer;r("initCharCodeToOptimizedIndexMap",(function(){!function(){if((0,i.xb)(z)){z=new Array(65536);for(var t=0;t<65536;t++)z[t]=t>255?255+~~(t/255):t}}()})),r("Reject Lexer.NA",(function(){n=(0,i.d1)(t,(function(t){return t.PATTERN===$.NA}))}));var o,a,s,u,l,c,d,p,m,_,y,v=!1;r("Transform Patterns",(function(){v=!1,o=(0,i.UI)(n,(function(t){var n=t.PATTERN;if((0,i.Kj)(n)){var r=n.source;return 1===r.length&&"^"!==r&&"$"!==r&&"."!==r?r:2!==r.length||"\\"!==r[0]||(0,i.r3)(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],r[1])?e.useSticky?A(n):E(n):r[1]}if((0,i.mf)(n))return v=!0,{exec:n};if((0,i.e$)(n,"exec"))return v=!0,n;if("string"==typeof n){if(1===n.length)return n;var o=n.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),a=new RegExp(o);return e.useSticky?A(a):E(a)}throw Error("non exhaustive match")}))})),r("misc mapping",(function(){a=(0,i.UI)(n,(function(t){return t.tokenTypeIdx})),s=(0,i.UI)(n,(function(t){var e=t.GROUP;if(e!==$.SKIPPED){if((0,i.HD)(e))return e;if((0,i.o8)(e))return!1;throw Error("non exhaustive match")}})),u=(0,i.UI)(n,(function(t){var e=t.LONGER_ALT;if(e)return(0,i.cq)(n,e)})),l=(0,i.UI)(n,(function(t){return t.PUSH_MODE})),c=(0,i.UI)(n,(function(t){return(0,i.e$)(t,"POP_MODE")}))})),r("Line Terminator Handling",(function(){var t=R(e.lineTerminatorCharacters);d=(0,i.UI)(n,(function(t){return!1})),"onlyOffset"!==e.positionTracking&&(d=(0,i.UI)(n,(function(e){return(0,i.e$)(e,"LINE_BREAKS")?e.LINE_BREAKS:!1===O(e,t)?g(t,e.PATTERN):void 0})))})),r("Misc Mapping #2",(function(){p=(0,i.UI)(n,C),m=(0,i.UI)(o,P),_=(0,i.u4)(n,(function(t,e){var n=e.GROUP;return(0,i.HD)(n)&&n!==$.SKIPPED&&(t[n]=[]),t}),{}),y=(0,i.UI)(o,(function(t,e){return{pattern:o[e],longerAlt:u[e],canLineTerminator:d[e],isCustom:p[e],short:m[e],group:s[e],push:l[e],pop:c[e],tokenTypeIdx:a[e],tokenType:n[e]}}))}));var x=!0,b=[];return e.safeMode||r("First Char Optimization",(function(){b=(0,i.u4)(n,(function(t,n,r){if("string"==typeof n.PATTERN){var o=j(n.PATTERN.charCodeAt(0));Y(t,o,y[r])}else if((0,i.kJ)(n.START_CHARS_HINT)){var a;(0,i.Ed)(n.START_CHARS_HINT,(function(e){var n=j("string"==typeof e?e.charCodeAt(0):e);a!==n&&(a=n,Y(t,n,y[r]))}))}else if((0,i.Kj)(n.PATTERN))if(n.PATTERN.unicode)x=!1,e.ensureOptimizations&&(0,i.WB)(h+"\tUnable to analyze < "+n.PATTERN.toString()+" > pattern.\n\tThe regexp unicode flag is not currently supported by the regexp-to-ast library.\n\tThis will disable the lexer's first char optimizations.\n\tFor details See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE");else{var s=f(n.PATTERN,e.ensureOptimizations);(0,i.xb)(s)&&(x=!1),(0,i.Ed)(s,(function(e){Y(t,e,y[r])}))}else e.ensureOptimizations&&(0,i.WB)(h+"\tTokenType: <"+n.name+"> is using a custom token pattern without providing <start_chars_hint> parameter.\n\tThis will disable the lexer's first char optimizations.\n\tFor details See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE"),x=!1;return t}),[])})),r("ArrayPacking",(function(){b=(0,i.X0)(b)})),{emptyGroups:_,patternIdxToConfig:y,charCodeToPatternIdxToConfig:b,hasCustom:v,canBeOptimized:x}}function k(t,e){var n=[],r=function(t){var e=(0,i.hX)(t,(function(t){return!(0,i.e$)(t,"PATTERN")}));return{errors:(0,i.UI)(e,(function(t){return{message:"Token Type: ->"+t.name+"<- missing static 'PATTERN' property",type:Z.MISSING_PATTERN,tokenTypes:[t]}})),valid:(0,i.e5)(t,e)}}(t);n=n.concat(r.errors);var a=function(t){var e=(0,i.hX)(t,(function(t){var e=t.PATTERN;return!((0,i.Kj)(e)||(0,i.mf)(e)||(0,i.e$)(e,"exec")||(0,i.HD)(e))}));return{errors:(0,i.UI)(e,(function(t){return{message:"Token Type: ->"+t.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:Z.INVALID_PATTERN,tokenTypes:[t]}})),valid:(0,i.e5)(t,e)}}(r.valid),s=a.valid;return(n=(n=(n=(n=n.concat(a.errors)).concat(function(t){var e=[],n=(0,i.hX)(t,(function(t){return(0,i.Kj)(t.PATTERN)}));return(e=(e=(e=(e=e.concat(function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.found=!1,e}return x(e,t),e.prototype.visitEndAnchor=function(t){this.found=!0},e}(o.BaseRegExpVisitor),n=(0,i.hX)(t,(function(t){var n=t.PATTERN;try{var r=u(n),i=new e;return i.visit(r),i.found}catch(t){return T.test(n.source)}}));return(0,i.UI)(n,(function(t){return{message:"Unexpected RegExp Anchor Error:\n\tToken Type: ->"+t.name+"<- static 'PATTERN' cannot contain end of input anchor '$'\n\tSee sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#ANCHORS\tfor details.",type:Z.EOI_ANCHOR_FOUND,tokenTypes:[t]}}))}(n))).concat(function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.found=!1,e}return x(e,t),e.prototype.visitStartAnchor=function(t){this.found=!0},e}(o.BaseRegExpVisitor),n=(0,i.hX)(t,(function(t){var n=t.PATTERN;try{var r=u(n),i=new e;return i.visit(r),i.found}catch(t){return S.test(n.source)}}));return(0,i.UI)(n,(function(t){return{message:"Unexpected RegExp Anchor Error:\n\tToken Type: ->"+t.name+"<- static 'PATTERN' cannot contain start of input anchor '^'\n\tSee https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#ANCHORS\tfor details.",type:Z.SOI_ANCHOR_FOUND,tokenTypes:[t]}}))}(n))).concat(function(t){var e=(0,i.hX)(t,(function(t){var e=t.PATTERN;return e instanceof RegExp&&(e.multiline||e.global)}));return(0,i.UI)(e,(function(t){return{message:"Token Type: ->"+t.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:Z.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[t]}}))}(n))).concat(function(t){var e=[],n=(0,i.UI)(t,(function(n){return(0,i.u4)(t,(function(t,r){return n.PATTERN.source!==r.PATTERN.source||(0,i.r3)(e,r)||r.PATTERN===$.NA||(e.push(r),t.push(r)),t}),[])}));n=(0,i.oA)(n);var r=(0,i.hX)(n,(function(t){return t.length>1}));return(0,i.UI)(r,(function(t){var e=(0,i.UI)(t,(function(t){return t.name}));return{message:"The same RegExp pattern ->"+(0,i.Ps)(t).PATTERN+"<-has been used in all of the following Token Types: "+e.join(", ")+" <-",type:Z.DUPLICATE_PATTERNS_FOUND,tokenTypes:t}}))}(n))).concat(function(t){var e=(0,i.hX)(t,(function(t){return t.PATTERN.test("")}));return(0,i.UI)(e,(function(t){return{message:"Token Type: ->"+t.name+"<- static 'PATTERN' must not match an empty string",type:Z.EMPTY_MATCH_PATTERN,tokenTypes:[t]}}))}(n))}(s))).concat(function(t){var e=(0,i.hX)(t,(function(t){if(!(0,i.e$)(t,"GROUP"))return!1;var e=t.GROUP;return e!==$.SKIPPED&&e!==$.NA&&!(0,i.HD)(e)}));return(0,i.UI)(e,(function(t){return{message:"Token Type: ->"+t.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:Z.INVALID_GROUP_TYPE_FOUND,tokenTypes:[t]}}))}(s))).concat(function(t,e){var n=(0,i.hX)(t,(function(t){return void 0!==t.PUSH_MODE&&!(0,i.r3)(e,t.PUSH_MODE)}));return(0,i.UI)(n,(function(t){return{message:"Token Type: ->"+t.name+"<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->"+t.PUSH_MODE+"<-which does not exist",type:Z.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[t]}}))}(s,e))).concat(function(t){var e=[],n=(0,i.u4)(t,(function(t,e,n){var r,o,a=e.PATTERN;return a===$.NA||((0,i.HD)(a)?t.push({str:a,idx:n,tokenType:e}):(0,i.Kj)(a)&&(r=a,o=[".","\\","[","]","|","^","$","(",")","?","*","+","{"],void 0===(0,i.sE)(o,(function(t){return-1!==r.source.indexOf(t)})))&&t.push({str:a.source,idx:n,tokenType:e})),t}),[]);return(0,i.Ed)(t,(function(t,r){(0,i.Ed)(n,(function(n){var o=n.str,a=n.idx,s=n.tokenType;if(r<a&&function(t,e){if((0,i.Kj)(e)){var n=e.exec(t);return null!==n&&0===n.index}if((0,i.mf)(e))return e(t,0,[],{});if((0,i.e$)(e,"exec"))return e.exec(t,0,[],{});if("string"==typeof e)return e===t;throw Error("non exhaustive match")}(o,t.PATTERN)){var u="Token: ->"+s.name+"<- can never be matched.\nBecause it appears AFTER the Token Type ->"+t.name+"<-in the lexer's definition.\nSee https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#UNREACHABLE";e.push({message:u,type:Z.UNREACHABLE_PATTERN,tokenTypes:[t,s]})}}))})),e}(s))}var T=/[^\\][\$]/,S=/[^\\[][\^]|^\^/;function E(t){var e=t.ignoreCase?"i":"";return new RegExp("^(?:"+t.source+")",e)}function A(t){var e=t.ignoreCase?"iy":"y";return new RegExp(""+t.source,e)}function D(t,e,n){var r=[],o=!1,a=(0,i.oA)((0,i.xH)((0,i.Q8)(t.modes,(function(t){return t})))),s=(0,i.d1)(a,(function(t){return t.PATTERN===$.NA})),u=R(n);return e&&(0,i.Ed)(s,(function(t){var e=O(t,u);if(!1!==e){var n={message:function(t,e){if(e.issue===Z.IDENTIFY_TERMINATOR)return"Warning: unable to identify line terminator usage in pattern.\n\tThe problem is in the <"+t.name+"> Token Type\n\t Root cause: "+e.errMsg+".\n\tFor details See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR";if(e.issue===Z.CUSTOM_LINE_BREAK)return"Warning: A Custom Token Pattern should specify the <line_breaks> option.\n\tThe problem is in the <"+t.name+"> Token Type\n\tFor details See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK";throw Error("non exhaustive match")}(t,e),type:e.issue,tokenType:t};r.push(n)}else(0,i.e$)(t,"LINE_BREAKS")?!0===t.LINE_BREAKS&&(o=!0):g(u,t.PATTERN)&&(o=!0)})),e&&!o&&r.push({message:"Warning: No LINE_BREAKS Found.\n\tThis Lexer has been defined to track line and column information,\n\tBut none of the Token Types can be identified as matching a line terminator.\n\tSee https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#LINE_BREAKS \n\tfor details.",type:Z.NO_LINE_BREAKS_FLAGS}),r}function C(t){var e=t.PATTERN;if((0,i.Kj)(e))return!1;if((0,i.mf)(e))return!0;if((0,i.e$)(e,"exec"))return!0;if((0,i.HD)(e))return!1;throw Error("non exhaustive match")}function P(t){return!(!(0,i.HD)(t)||1!==t.length)&&t.charCodeAt(0)}var I={test:function(t){for(var e=t.length,n=this.lastIndex;n<e;n++){var r=t.charCodeAt(n);if(10===r)return this.lastIndex=n+1,!0;if(13===r)return 10===t.charCodeAt(n+1)?this.lastIndex=n+2:this.lastIndex=n+1,!0}return!1},lastIndex:0};function O(t,e){if((0,i.e$)(t,"LINE_BREAKS"))return!1;if((0,i.Kj)(t.PATTERN)){try{g(e,t.PATTERN)}catch(t){return{issue:Z.IDENTIFY_TERMINATOR,errMsg:t.message}}return!1}if((0,i.HD)(t.PATTERN))return!1;if(C(t))return{issue:Z.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}function R(t){return(0,i.UI)(t,(function(t){return(0,i.HD)(t)&&t.length>0?t.charCodeAt(0):t}))}function Y(t,e,n){void 0===t[e]?t[e]=[n]:t[e].push(n)}var F=256;function j(t){return t<F?t:z[t]}var z=[];function N(t,e){var n=t.tokenTypeIdx;return n===e.tokenTypeIdx||!0===e.isParent&&!0===e.categoryMatchesMap[n]}function B(t,e){return t.tokenTypeIdx===e.tokenTypeIdx}var U=1,H={};function V(t){var e=function(t){for(var e=(0,i.Qw)(t),n=t,r=!0;r;){n=(0,i.oA)((0,i.xH)((0,i.UI)(n,(function(t){return t.CATEGORIES}))));var o=(0,i.e5)(n,e);e=e.concat(o),(0,i.xb)(o)?r=!1:n=o}return e}(t);!function(t){(0,i.Ed)(t,(function(t){var e;G(t)||(H[U]=t,t.tokenTypeIdx=U++),q(t)&&!(0,i.kJ)(t.CATEGORIES)&&(t.CATEGORIES=[t.CATEGORIES]),q(t)||(t.CATEGORIES=[]),e=t,(0,i.e$)(e,"categoryMatches")||(t.categoryMatches=[]),function(t){return(0,i.e$)(t,"categoryMatchesMap")}(t)||(t.categoryMatchesMap={})}))}(e),function(t){(0,i.Ed)(t,(function(t){W([],t)}))}(e),function(t){(0,i.Ed)(t,(function(t){t.categoryMatches=[],(0,i.Ed)(t.categoryMatchesMap,(function(e,n){t.categoryMatches.push(H[n].tokenTypeIdx)}))}))}(e),(0,i.Ed)(e,(function(t){t.isParent=t.categoryMatches.length>0}))}function W(t,e){(0,i.Ed)(t,(function(t){e.categoryMatchesMap[t.tokenTypeIdx]=!0})),(0,i.Ed)(e.CATEGORIES,(function(n){var r=t.concat(e);(0,i.r3)(r,n)||W(r,n)}))}function G(t){return(0,i.e$)(t,"tokenTypeIdx")}function q(t){return(0,i.e$)(t,"CATEGORIES")}function X(t){return(0,i.e$)(t,"tokenTypeIdx")}var Z,K={buildUnableToPopLexerModeMessage:function(t){return"Unable to pop Lexer Mode after encountering Token ->"+t.image+"<- The Mode Stack is empty"},buildUnexpectedCharactersMessage:function(t,e,n,r,i){return"unexpected character: ->"+t.charAt(e)+"<- at offset: "+e+", skipped "+n+" characters."}};!function(t){t[t.MISSING_PATTERN=0]="MISSING_PATTERN",t[t.INVALID_PATTERN=1]="INVALID_PATTERN",t[t.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",t[t.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",t[t.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",t[t.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",t[t.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",t[t.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",t[t.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",t[t.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",t[t.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",t[t.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",t[t.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",t[t.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",t[t.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",t[t.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",t[t.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK"}(Z||(Z={}));var J={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:["\n","\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:K,traceInitPerf:!1,skipValidations:!1};Object.freeze(J);var $=function(){function t(t,e){var n=this;if(void 0===e&&(e=J),this.lexerDefinition=t,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.config=void 0,this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},"boolean"==typeof e)throw Error("The second argument to the Lexer constructor is now an ILexerConfig Object.\na boolean 2nd argument is no longer supported");this.config=(0,i.TS)(J,e);var r=this.config.traceInitPerf;!0===r?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):"number"==typeof r&&(this.traceInitMaxIdent=r,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",(function(){var r,o=!0;n.TRACE_INIT("Lexer Config handling",(function(){if(n.config.lineTerminatorsPattern===J.lineTerminatorsPattern)n.config.lineTerminatorsPattern=I;else if(n.config.lineTerminatorCharacters===J.lineTerminatorCharacters)throw Error("Error: Missing <lineTerminatorCharacters> property on the Lexer config.\n\tFor details See: https://sap.github.io/chevrotain/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS");if(e.safeMode&&e.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');n.trackStartLines=/full|onlyStart/i.test(n.config.positionTracking),n.trackEndLines=/full/i.test(n.config.positionTracking),(0,i.kJ)(t)?((r={modes:{}}).modes.defaultMode=(0,i.Qw)(t),r.defaultMode=b):(o=!1,r=(0,i.Cl)(t))})),!1===n.config.skipValidations&&(n.TRACE_INIT("performRuntimeChecks",(function(){n.lexerDefinitionErrors=n.lexerDefinitionErrors.concat(function(t,e,n){var r=[];return(0,i.e$)(t,b)||r.push({message:"A MultiMode Lexer cannot be initialized without a <defaultMode> property in its definition\n",type:Z.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),(0,i.e$)(t,w)||r.push({message:"A MultiMode Lexer cannot be initialized without a <modes> property in its definition\n",type:Z.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),(0,i.e$)(t,w)&&(0,i.e$)(t,b)&&!(0,i.e$)(t.modes,t.defaultMode)&&r.push({message:"A MultiMode Lexer cannot be initialized with a defaultMode: <"+t.defaultMode+">which does not exist\n",type:Z.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),(0,i.e$)(t,w)&&(0,i.Ed)(t.modes,(function(t,e){(0,i.Ed)(t,(function(t,n){(0,i.o8)(t)&&r.push({message:"A Lexer cannot be initialized using an undefined Token Type. Mode:<"+e+"> at index: <"+n+">\n",type:Z.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED})}))})),r}(r,n.trackStartLines,n.config.lineTerminatorCharacters))})),n.TRACE_INIT("performWarningRuntimeChecks",(function(){n.lexerDefinitionWarning=n.lexerDefinitionWarning.concat(D(r,n.trackStartLines,n.config.lineTerminatorCharacters))}))),r.modes=r.modes?r.modes:{},(0,i.Ed)(r.modes,(function(t,e){r.modes[e]=(0,i.d1)(t,(function(t){return(0,i.o8)(t)}))}));var s=(0,i.XP)(r.modes);if((0,i.Ed)(r.modes,(function(t,r){n.TRACE_INIT("Mode: <"+r+"> processing",(function(){var o;n.modes.push(r),!1===n.config.skipValidations&&n.TRACE_INIT("validatePatterns",(function(){n.lexerDefinitionErrors=n.lexerDefinitionErrors.concat(k(t,s))})),(0,i.xb)(n.lexerDefinitionErrors)&&(V(t),n.TRACE_INIT("analyzeTokenTypes",(function(){o=L(t,{lineTerminatorCharacters:n.config.lineTerminatorCharacters,positionTracking:e.positionTracking,ensureOptimizations:e.ensureOptimizations,safeMode:e.safeMode,tracer:n.TRACE_INIT.bind(n)})})),n.patternIdxToConfig[r]=o.patternIdxToConfig,n.charCodeToPatternIdxToConfig[r]=o.charCodeToPatternIdxToConfig,n.emptyGroups=(0,i.TS)(n.emptyGroups,o.emptyGroups),n.hasCustom=o.hasCustom||n.hasCustom,n.canModeBeOptimized[r]=o.canBeOptimized)}))})),n.defaultMode=r.defaultMode,!(0,i.xb)(n.lexerDefinitionErrors)&&!n.config.deferDefinitionErrorsHandling){var u=(0,i.UI)(n.lexerDefinitionErrors,(function(t){return t.message})).join("-----------------------\n");throw new Error("Errors detected in definition of Lexer:\n"+u)}(0,i.Ed)(n.lexerDefinitionWarning,(function(t){(0,i.rr)(t.message)})),n.TRACE_INIT("Choosing sub-methods implementations",(function(){if(M?(n.chopInput=i.Wd,n.match=n.matchWithTest):(n.updateLastIndex=i.dG,n.match=n.matchWithExec),o&&(n.handleModes=i.dG),!1===n.trackStartLines&&(n.computeNewColumn=i.Wd),!1===n.trackEndLines&&(n.updateTokenEndLineColumnLocation=i.dG),/full/i.test(n.config.positionTracking))n.createTokenInstance=n.createFullToken;else if(/onlyStart/i.test(n.config.positionTracking))n.createTokenInstance=n.createStartOnlyToken;else{if(!/onlyOffset/i.test(n.config.positionTracking))throw Error('Invalid <positionTracking> config option: "'+n.config.positionTracking+'"');n.createTokenInstance=n.createOffsetOnlyToken}n.hasCustom?(n.addToken=n.addTokenUsingPush,n.handlePayload=n.handlePayloadWithCustom):(n.addToken=n.addTokenUsingMemberAccess,n.handlePayload=n.handlePayloadNoCustom)})),n.TRACE_INIT("Failed Optimization Warnings",(function(){var t=(0,i.u4)(n.canModeBeOptimized,(function(t,e,n){return!1===e&&t.push(n),t}),[]);if(e.ensureOptimizations&&!(0,i.xb)(t))throw Error("Lexer Modes: < "+t.join(", ")+' > cannot be optimized.\n\t Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.\n\t Or inspect the console log for details on how to resolve these issues.')})),n.TRACE_INIT("clearRegExpParserCache",(function(){a={}})),n.TRACE_INIT("toFastProperties",(function(){(0,i.SV)(n)}))}))}return t.prototype.tokenize=function(t,e){if(void 0===e&&(e=this.defaultMode),!(0,i.xb)(this.lexerDefinitionErrors)){var n=(0,i.UI)(this.lexerDefinitionErrors,(function(t){return t.message})).join("-----------------------\n");throw new Error("Unable to Tokenize because Errors detected in definition of Lexer:\n"+n)}return this.tokenizeInternal(t,e)},t.prototype.tokenizeInternal=function(t,e){var n,r,o,a,s,u,l,c,d,h,f,p,m,_,y,v,g,x=this,b=t,w=b.length,M=0,L=0,k=this.hasCustom?0:Math.floor(t.length/10),T=new Array(k),S=[],E=this.trackStartLines?1:void 0,A=this.trackStartLines?1:void 0,D=(y=this.emptyGroups,v={},g=(0,i.XP)(y),(0,i.Ed)(g,(function(t){var e=y[t];if(!(0,i.kJ)(e))throw Error("non exhaustive match");v[t]=[]})),v),C=this.trackStartLines,P=this.config.lineTerminatorsPattern,I=0,O=[],R=[],Y=[],F=[];Object.freeze(F);var z=void 0;function N(){return O}function B(t){var e=j(t),n=R[e];return void 0===n?F:n}var U,H=function(t){if(1===Y.length&&void 0===t.tokenType.PUSH_MODE){var e=x.config.errorMessageProvider.buildUnableToPopLexerModeMessage(t);S.push({offset:t.startOffset,line:void 0!==t.startLine?t.startLine:void 0,column:void 0!==t.startColumn?t.startColumn:void 0,length:t.image.length,message:e})}else{Y.pop();var n=(0,i.Z$)(Y);O=x.patternIdxToConfig[n],R=x.charCodeToPatternIdxToConfig[n],I=O.length;var r=x.canModeBeOptimized[n]&&!1===x.config.safeMode;z=R&&r?B:N}};function V(t){Y.push(t),R=this.charCodeToPatternIdxToConfig[t],O=this.patternIdxToConfig[t],I=O.length,I=O.length;var e=this.canModeBeOptimized[t]&&!1===this.config.safeMode;z=R&&e?B:N}for(V.call(this,e);M<w;){s=null;var W=b.charCodeAt(M),G=z(W),q=G.length;for(n=0;n<q;n++){var X=(U=G[n]).pattern;if(u=null,!1!==(it=U.short)?W===it&&(s=X):!0===U.isCustom?null!==(_=X.exec(b,M,T,D))?(s=_[0],void 0!==_.payload&&(u=_.payload)):s=null:(this.updateLastIndex(X,M),s=this.match(X,t,M)),null!==s){if(void 0!==(a=U.longerAlt)){var Z=O[a],K=Z.pattern;l=null,!0===Z.isCustom?null!==(_=K.exec(b,M,T,D))?(o=_[0],void 0!==_.payload&&(l=_.payload)):o=null:(this.updateLastIndex(K,M),o=this.match(K,t,M)),o&&o.length>s.length&&(s=o,u=l,U=Z)}break}}if(null!==s){if(c=s.length,void 0!==(d=U.group)&&(h=U.tokenTypeIdx,f=this.createTokenInstance(s,M,h,U.tokenType,E,A,c),this.handlePayload(f,u),!1===d?L=this.addToken(T,L,f):D[d].push(f)),t=this.chopInput(t,c),M+=c,A=this.computeNewColumn(A,c),!0===C&&!0===U.canLineTerminator){var J=0,$=void 0,Q=void 0;P.lastIndex=0;do{!0===($=P.test(s))&&(Q=P.lastIndex-1,J++)}while(!0===$);0!==J&&(E+=J,A=c-Q,this.updateTokenEndLineColumnLocation(f,d,Q,J,E,A,c))}this.handleModes(U,H,V,f)}else{for(var tt=M,et=E,nt=A,rt=!1;!rt&&M<w;)for(b.charCodeAt(M),t=this.chopInput(t,1),M++,r=0;r<I;r++){var it,ot=O[r];if(X=ot.pattern,!1!==(it=ot.short)?b.charCodeAt(M)===it&&(rt=!0):!0===ot.isCustom?rt=null!==X.exec(b,M,T,D):(this.updateLastIndex(X,M),rt=null!==X.exec(t)),!0===rt)break}p=M-tt,m=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(b,tt,p,et,nt),S.push({offset:tt,line:et,column:nt,length:p,message:m})}}return this.hasCustom||(T.length=L),{tokens:T,groups:D,errors:S}},t.prototype.handleModes=function(t,e,n,r){if(!0===t.pop){var i=t.push;e(r),void 0!==i&&n.call(this,i)}else void 0!==t.push&&n.call(this,t.push)},t.prototype.chopInput=function(t,e){return t.substring(e)},t.prototype.updateLastIndex=function(t,e){t.lastIndex=e},t.prototype.updateTokenEndLineColumnLocation=function(t,e,n,r,i,o,a){var s,u;void 0!==e&&(u=(s=n===a-1)?-1:0,1===r&&!0===s||(t.endLine=i+u,t.endColumn=o-1-u))},t.prototype.computeNewColumn=function(t,e){return t+e},t.prototype.createTokenInstance=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return null},t.prototype.createOffsetOnlyToken=function(t,e,n,r){return{image:t,startOffset:e,tokenTypeIdx:n,tokenType:r}},t.prototype.createStartOnlyToken=function(t,e,n,r,i,o){return{image:t,startOffset:e,startLine:i,startColumn:o,tokenTypeIdx:n,tokenType:r}},t.prototype.createFullToken=function(t,e,n,r,i,o,a){return{image:t,startOffset:e,endOffset:e+a-1,startLine:i,endLine:i,startColumn:o,endColumn:o+a-1,tokenTypeIdx:n,tokenType:r}},t.prototype.addToken=function(t,e,n){return 666},t.prototype.addTokenUsingPush=function(t,e,n){return t.push(n),e},t.prototype.addTokenUsingMemberAccess=function(t,e,n){return t[e]=n,++e},t.prototype.handlePayload=function(t,e){},t.prototype.handlePayloadNoCustom=function(t,e){},t.prototype.handlePayloadWithCustom=function(t,e){null!==e&&(t.payload=e)},t.prototype.match=function(t,e,n){return null},t.prototype.matchWithTest=function(t,e,n){return!0===t.test(e)?e.substring(n,t.lastIndex):null},t.prototype.matchWithExec=function(t,e){var n=t.exec(e);return null!==n?n[0]:n},t.prototype.TRACE_INIT=function(t,e){if(!0===this.traceInitPerf){this.traceInitIndent++;var n=new Array(this.traceInitIndent+1).join("\t");this.traceInitIndent<this.traceInitMaxIdent&&console.log(n+"--\x3e <"+t+">");var r=(0,i.HT)(e),o=r.time,a=r.value,s=o>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&s(n+"<-- <"+t+"> time: "+o+"ms"),this.traceInitIndent--,a}return e()},t.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.",t.NA=/NOT_APPLICABLE/,t}();function Q(t){return et(t)?t.LABEL:t.name}function tt(t){return t.name}function et(t){return(0,i.HD)(t.LABEL)&&""!==t.LABEL}function nt(t){return function(t){var e=t.pattern,n={};if(n.name=t.name,(0,i.o8)(e)||(n.PATTERN=e),(0,i.e$)(t,"parent"))throw"The parent property is no longer supported.\nSee: https://github.com/SAP/chevrotain/issues/564#issuecomment-349062346 for details.";return(0,i.e$)(t,"categories")&&(n.CATEGORIES=t.categories),V([n]),(0,i.e$)(t,"label")&&(n.LABEL=t.label),(0,i.e$)(t,"group")&&(n.GROUP=t.group),(0,i.e$)(t,"pop_mode")&&(n.POP_MODE=t.pop_mode),(0,i.e$)(t,"push_mode")&&(n.PUSH_MODE=t.push_mode),(0,i.e$)(t,"longer_alt")&&(n.LONGER_ALT=t.longer_alt),(0,i.e$)(t,"line_breaks")&&(n.LINE_BREAKS=t.line_breaks),(0,i.e$)(t,"start_chars_hint")&&(n.START_CHARS_HINT=t.start_chars_hint),n}(t)}var rt=nt({name:"EOF",pattern:$.NA});function it(t,e,n,r,i,o,a,s){return{image:e,startOffset:n,endOffset:r,startLine:i,endLine:o,startColumn:a,endColumn:s,tokenTypeIdx:t.tokenTypeIdx,tokenType:t}}function ot(t,e){return N(t,e)}V([rt]);var at=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),st=function(){function t(t){this.definition=t}return t.prototype.accept=function(t){t.visit(this),(0,i.Ed)(this.definition,(function(e){e.accept(t)}))},t}(),ut=function(t){function e(e){var n=t.call(this,[])||this;return n.idx=1,(0,i.f0)(n,(0,i.ei)(e,(function(t){return void 0!==t}))),n}return at(e,t),Object.defineProperty(e.prototype,"definition",{get:function(){return void 0!==this.referencedRule?this.referencedRule.definition:[]},set:function(t){},enumerable:!0,configurable:!0}),e.prototype.accept=function(t){t.visit(this)},e}(st),lt=function(t){function e(e){var n=t.call(this,e.definition)||this;return n.orgText="",(0,i.f0)(n,(0,i.ei)(e,(function(t){return void 0!==t}))),n}return at(e,t),e}(st),ct=function(t){function e(e){var n=t.call(this,e.definition)||this;return n.ignoreAmbiguities=!1,(0,i.f0)(n,(0,i.ei)(e,(function(t){return void 0!==t}))),n}return at(e,t),e}(st),dt=function(t){function e(e){var n=t.call(this,e.definition)||this;return n.idx=1,(0,i.f0)(n,(0,i.ei)(e,(function(t){return void 0!==t}))),n}return at(e,t),e}(st),ht=function(t){function e(e){var n=t.call(this,e.definition)||this;return n.idx=1,(0,i.f0)(n,(0,i.ei)(e,(function(t){return void 0!==t}))),n}return at(e,t),e}(st),ft=function(t){function e(e){var n=t.call(this,e.definition)||this;return n.idx=1,(0,i.f0)(n,(0,i.ei)(e,(function(t){return void 0!==t}))),n}return at(e,t),e}(st),pt=function(t){function e(e){var n=t.call(this,e.definition)||this;return n.idx=1,(0,i.f0)(n,(0,i.ei)(e,(function(t){return void 0!==t}))),n}return at(e,t),e}(st),mt=function(t){function e(e){var n=t.call(this,e.definition)||this;return n.idx=1,(0,i.f0)(n,(0,i.ei)(e,(function(t){return void 0!==t}))),n}return at(e,t),e}(st),_t=function(t){function e(e){var n=t.call(this,e.definition)||this;return n.idx=1,n.ignoreAmbiguities=!1,n.hasPredicates=!1,(0,i.f0)(n,(0,i.ei)(e,(function(t){return void 0!==t}))),n}return at(e,t),e}(st),yt=function(){function t(t){this.idx=1,(0,i.f0)(this,(0,i.ei)(t,(function(t){return void 0!==t})))}return t.prototype.accept=function(t){t.visit(this)},t}();function vt(t){return(0,i.UI)(t,gt)}function gt(t){function e(t){return(0,i.UI)(t,gt)}if(t instanceof ut)return{type:"NonTerminal",name:t.nonTerminalName,idx:t.idx};if(t instanceof ct)return{type:"Flat",definition:e(t.definition)};if(t instanceof dt)return{type:"Option",idx:t.idx,definition:e(t.definition)};if(t instanceof ht)return{type:"RepetitionMandatory",name:t.name,idx:t.idx,definition:e(t.definition)};if(t instanceof ft)return{type:"RepetitionMandatoryWithSeparator",name:t.name,idx:t.idx,separator:gt(new yt({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof mt)return{type:"RepetitionWithSeparator",name:t.name,idx:t.idx,separator:gt(new yt({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof pt)return{type:"Repetition",name:t.name,idx:t.idx,definition:e(t.definition)};if(t instanceof _t)return{type:"Alternation",name:t.name,idx:t.idx,definition:e(t.definition)};if(t instanceof yt){var n={type:"Terminal",name:t.terminalType.name,label:Q(t.terminalType),idx:t.idx},r=t.terminalType.PATTERN;return t.terminalType.PATTERN&&(n.pattern=(0,i.Kj)(r)?r.source:r),n}if(t instanceof lt)return{type:"Rule",name:t.name,orgText:t.orgText,definition:e(t.definition)};throw Error("non exhaustive match")}var xt=function(){function t(){}return t.prototype.walk=function(t,e){var n=this;void 0===e&&(e=[]),(0,i.Ed)(t.definition,(function(r,o){var a=(0,i.Cw)(t.definition,o+1);if(r instanceof ut)n.walkProdRef(r,a,e);else if(r instanceof yt)n.walkTerminal(r,a,e);else if(r instanceof ct)n.walkFlat(r,a,e);else if(r instanceof dt)n.walkOption(r,a,e);else if(r instanceof ht)n.walkAtLeastOne(r,a,e);else if(r instanceof ft)n.walkAtLeastOneSep(r,a,e);else if(r instanceof mt)n.walkManySep(r,a,e);else if(r instanceof pt)n.walkMany(r,a,e);else{if(!(r instanceof _t))throw Error("non exhaustive match");n.walkOr(r,a,e)}}))},t.prototype.walkTerminal=function(t,e,n){},t.prototype.walkProdRef=function(t,e,n){},t.prototype.walkFlat=function(t,e,n){var r=e.concat(n);this.walk(t,r)},t.prototype.walkOption=function(t,e,n){var r=e.concat(n);this.walk(t,r)},t.prototype.walkAtLeastOne=function(t,e,n){var r=[new dt({definition:t.definition})].concat(e,n);this.walk(t,r)},t.prototype.walkAtLeastOneSep=function(t,e,n){var r=bt(t,e,n);this.walk(t,r)},t.prototype.walkMany=function(t,e,n){var r=[new dt({definition:t.definition})].concat(e,n);this.walk(t,r)},t.prototype.walkManySep=function(t,e,n){var r=bt(t,e,n);this.walk(t,r)},t.prototype.walkOr=function(t,e,n){var r=this,o=e.concat(n);(0,i.Ed)(t.definition,(function(t){var e=new ct({definition:[t]});r.walk(e,o)}))},t}();function bt(t,e,n){return[new dt({definition:[new yt({terminalType:t.separator})].concat(t.definition)})].concat(e,n)}var wt=function(){function t(){}return t.prototype.visit=function(t){var e=t;switch(e.constructor){case ut:return this.visitNonTerminal(e);case ct:return this.visitFlat(e);case dt:return this.visitOption(e);case ht:return this.visitRepetitionMandatory(e);case ft:return this.visitRepetitionMandatoryWithSeparator(e);case mt:return this.visitRepetitionWithSeparator(e);case pt:return this.visitRepetition(e);case _t:return this.visitAlternation(e);case yt:return this.visitTerminal(e);case lt:return this.visitRule(e);default:throw Error("non exhaustive match")}},t.prototype.visitNonTerminal=function(t){},t.prototype.visitFlat=function(t){},t.prototype.visitOption=function(t){},t.prototype.visitRepetition=function(t){},t.prototype.visitRepetitionMandatory=function(t){},t.prototype.visitRepetitionMandatoryWithSeparator=function(t){},t.prototype.visitRepetitionWithSeparator=function(t){},t.prototype.visitAlternation=function(t){},t.prototype.visitTerminal=function(t){},t.prototype.visitRule=function(t){},t}(),Mt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function Lt(t,e){return void 0===e&&(e=[]),!!(t instanceof dt||t instanceof pt||t instanceof mt)||(t instanceof _t?(0,i.G)(t.definition,(function(t){return Lt(t,e)})):!(t instanceof ut&&(0,i.r3)(e,t))&&t instanceof st&&(t instanceof ut&&e.push(t),(0,i.yW)(t.definition,(function(t){return Lt(t,e)}))))}function kt(t){if(t instanceof ut)return"SUBRULE";if(t instanceof dt)return"OPTION";if(t instanceof _t)return"OR";if(t instanceof ht)return"AT_LEAST_ONE";if(t instanceof ft)return"AT_LEAST_ONE_SEP";if(t instanceof mt)return"MANY_SEP";if(t instanceof pt)return"MANY";if(t instanceof yt)return"CONSUME";throw Error("non exhaustive match")}var Tt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.separator="-",e.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]},e}return Mt(e,t),e.prototype.reset=function(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}},e.prototype.visitTerminal=function(t){var e=t.terminalType.name+this.separator+"Terminal";(0,i.e$)(this.dslMethods,e)||(this.dslMethods[e]=[]),this.dslMethods[e].push(t)},e.prototype.visitNonTerminal=function(t){var e=t.nonTerminalName+this.separator+"Terminal";(0,i.e$)(this.dslMethods,e)||(this.dslMethods[e]=[]),this.dslMethods[e].push(t)},e.prototype.visitOption=function(t){this.dslMethods.option.push(t)},e.prototype.visitRepetitionWithSeparator=function(t){this.dslMethods.repetitionWithSeparator.push(t)},e.prototype.visitRepetitionMandatory=function(t){this.dslMethods.repetitionMandatory.push(t)},e.prototype.visitRepetitionMandatoryWithSeparator=function(t){this.dslMethods.repetitionMandatoryWithSeparator.push(t)},e.prototype.visitRepetition=function(t){this.dslMethods.repetition.push(t)},e.prototype.visitAlternation=function(t){this.dslMethods.alternation.push(t)},e}(wt),St=new Tt;function Et(t){if(t instanceof ut)return Et(t.referencedRule);if(t instanceof yt)return[t.terminalType];if(function(t){return t instanceof ct||t instanceof dt||t instanceof pt||t instanceof ht||t instanceof ft||t instanceof mt||t instanceof yt||t instanceof lt}(t))return function(t){for(var e,n=[],r=t.definition,o=0,a=r.length>o,s=!0;a&&s;)s=Lt(e=r[o]),n=n.concat(Et(e)),o+=1,a=r.length>o;return(0,i.jj)(n)}(t);if(function(t){return t instanceof _t}(t))return function(t){var e=(0,i.UI)(t.definition,(function(t){return Et(t)}));return(0,i.jj)((0,i.xH)(e))}(t);throw Error("non exhaustive match")}var At="_~IN~_",Dt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ct=function(t){function e(e){var n=t.call(this)||this;return n.topProd=e,n.follows={},n}return Dt(e,t),e.prototype.startWalking=function(){return this.walk(this.topProd),this.follows},e.prototype.walkTerminal=function(t,e,n){},e.prototype.walkProdRef=function(t,e,n){var r,i,o=(r=t.referencedRule,i=t.idx,r.name+i+At+this.topProd.name),a=e.concat(n),s=Et(new ct({definition:a}));this.follows[o]=s},e}(xt),Pt=256,It=512,Ot=768,Rt=1024,Yt=1280,Ft=1536;function jt(t,e,n){return n|e|t}function zt(t,e,n,r){var i=r+1<<24;return jt(t,e,n)|i}var Nt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function Bt(t,e){!0===isNaN(t.startOffset)?(t.startOffset=e.startOffset,t.endOffset=e.endOffset):t.endOffset<e.endOffset==1&&(t.endOffset=e.endOffset)}function Ut(t,e){!0===isNaN(t.startOffset)?(t.startOffset=e.startOffset,t.startColumn=e.startColumn,t.startLine=e.startLine,t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine):t.endOffset<e.endOffset==1&&(t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine)}function Ht(t,e,n){void 0===t.children[e]?t.children[e]=[n]:t.children[e].push(n)}var Vt=function(t){function e(e){var n=t.call(this)||this;return n.result=[],n.ruleIdx=e,n}return Nt(e,t),e.prototype.collectNamedDSLMethod=function(t,e,n){if(!(0,i.o8)(t.name)){var r=void 0;if(t instanceof dt||t instanceof pt||t instanceof ht||t instanceof _t)r=new e({definition:t.definition,idx:t.idx});else{if(!(t instanceof ft||t instanceof mt))throw Error("non exhaustive match");r=new e({definition:t.definition,idx:t.idx,separator:t.separator})}var o=[r],a=jt(this.ruleIdx,n,t.idx);this.result.push({def:o,key:a,name:t.name,orgProd:t})}},e.prototype.visitOption=function(t){this.collectNamedDSLMethod(t,dt,It)},e.prototype.visitRepetition=function(t){this.collectNamedDSLMethod(t,pt,Ot)},e.prototype.visitRepetitionMandatory=function(t){this.collectNamedDSLMethod(t,ht,Rt)},e.prototype.visitRepetitionMandatoryWithSeparator=function(t){this.collectNamedDSLMethod(t,ft,Ft)},e.prototype.visitRepetitionWithSeparator=function(t){this.collectNamedDSLMethod(t,mt,Yt)},e.prototype.visitAlternation=function(t){var e=this;this.collectNamedDSLMethod(t,_t,Pt);var n=t.definition.length>1;(0,i.Ed)(t.definition,(function(r,o){if(!(0,i.o8)(r.name)){var a=r.definition;a=n?[new dt({definition:r.definition})]:r.definition;var s=zt(e.ruleIdx,Pt,t.idx,o);e.result.push({def:a,key:s,name:r.name,orgProd:r})}}))},e}(wt),Wt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gt=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.path=n,r.nextTerminalName="",r.nextTerminalOccurrence=0,r.nextTerminalName=r.path.lastTok.name,r.nextTerminalOccurrence=r.path.lastTokOccurrence,r}return Wt(e,t),e.prototype.walkTerminal=function(t,e,n){if(this.isAtEndOfPath&&t.terminalType.name===this.nextTerminalName&&t.idx===this.nextTerminalOccurrence&&!this.found){var r=e.concat(n),i=new ct({definition:r});this.possibleTokTypes=Et(i),this.found=!0}},e}(function(t){function e(e,n){var r=t.call(this)||this;return r.topProd=e,r.path=n,r.possibleTokTypes=[],r.nextProductionName="",r.nextProductionOccurrence=0,r.found=!1,r.isAtEndOfPath=!1,r}return Wt(e,t),e.prototype.startWalking=function(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=(0,i.Qw)(this.path.ruleStack).reverse(),this.occurrenceStack=(0,i.Qw)(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes},e.prototype.walk=function(e,n){void 0===n&&(n=[]),this.found||t.prototype.walk.call(this,e,n)},e.prototype.walkProdRef=function(t,e,n){if(t.referencedRule.name===this.nextProductionName&&t.idx===this.nextProductionOccurrence){var r=e.concat(n);this.updateExpectedNext(),this.walk(t.referencedRule,r)}},e.prototype.updateExpectedNext=function(){(0,i.xb)(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())},e}(xt)),qt=function(t){function e(e,n){var r=t.call(this)||this;return r.topRule=e,r.occurrence=n,r.result={token:void 0,occurrence:void 0,isEndOfRule:void 0},r}return Wt(e,t),e.prototype.startWalking=function(){return this.walk(this.topRule),this.result},e}(xt),Xt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Wt(e,t),e.prototype.walkMany=function(e,n,r){if(e.idx===this.occurrence){var o=(0,i.Ps)(n.concat(r));this.result.isEndOfRule=void 0===o,o instanceof yt&&(this.result.token=o.terminalType,this.result.occurrence=o.idx)}else t.prototype.walkMany.call(this,e,n,r)},e}(qt),Zt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Wt(e,t),e.prototype.walkManySep=function(e,n,r){if(e.idx===this.occurrence){var o=(0,i.Ps)(n.concat(r));this.result.isEndOfRule=void 0===o,o instanceof yt&&(this.result.token=o.terminalType,this.result.occurrence=o.idx)}else t.prototype.walkManySep.call(this,e,n,r)},e}(qt),Kt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Wt(e,t),e.prototype.walkAtLeastOne=function(e,n,r){if(e.idx===this.occurrence){var o=(0,i.Ps)(n.concat(r));this.result.isEndOfRule=void 0===o,o instanceof yt&&(this.result.token=o.terminalType,this.result.occurrence=o.idx)}else t.prototype.walkAtLeastOne.call(this,e,n,r)},e}(qt),Jt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Wt(e,t),e.prototype.walkAtLeastOneSep=function(e,n,r){if(e.idx===this.occurrence){var o=(0,i.Ps)(n.concat(r));this.result.isEndOfRule=void 0===o,o instanceof yt&&(this.result.token=o.terminalType,this.result.occurrence=o.idx)}else t.prototype.walkAtLeastOneSep.call(this,e,n,r)},e}(qt);function $t(t,e,n){void 0===n&&(n=[]),n=(0,i.Qw)(n);var r=[],o=0;function a(a){var s=$t(a.concat((0,i.Cw)(t,o+1)),e,n);return r.concat(s)}for(;n.length<e&&o<t.length;){var s=t[o];if(s instanceof ct)return a(s.definition);if(s instanceof ut)return a(s.definition);if(s instanceof dt)r=a(s.definition);else{if(s instanceof ht)return a(u=s.definition.concat([new pt({definition:s.definition})]));if(s instanceof ft)return a(u=[new ct({definition:s.definition}),new pt({definition:[new yt({terminalType:s.separator})].concat(s.definition)})]);if(s instanceof mt){var u=s.definition.concat([new pt({definition:[new yt({terminalType:s.separator})].concat(s.definition)})]);r=a(u)}else if(s instanceof pt)u=s.definition.concat([new pt({definition:s.definition})]),r=a(u);else{if(s instanceof _t)return(0,i.Ed)(s.definition,(function(t){r=a(t.definition)})),r;if(!(s instanceof yt))throw Error("non exhaustive match");n.push(s.terminalType)}}o++}return r.push({partialPath:n,suffixDef:(0,i.Cw)(t,o)}),r}function Qt(t,e,n,r){var o="EXIT_NONE_TERMINAL",a=[o],s="EXIT_ALTERNATIVE",u=!1,l=e.length,c=l-r-1,d=[],h=[];for(h.push({idx:-1,def:t,ruleStack:[],occurrenceStack:[]});!(0,i.xb)(h);){var f=h.pop();if(f!==s){var p=f.def,m=f.idx,_=f.ruleStack,y=f.occurrenceStack;if(!(0,i.xb)(p)){var v=p[0];if(v===o){var g={idx:m,def:(0,i.Cw)(p),ruleStack:(0,i.j7)(_),occurrenceStack:(0,i.j7)(y)};h.push(g)}else if(v instanceof yt)if(m<l-1){var x=m+1;n(e[x],v.terminalType)&&(g={idx:x,def:(0,i.Cw)(p),ruleStack:_,occurrenceStack:y},h.push(g))}else{if(m!==l-1)throw Error("non exhaustive match");d.push({nextTokenType:v.terminalType,nextTokenOccurrence:v.idx,ruleStack:_,occurrenceStack:y}),u=!0}else if(v instanceof ut){var b=(0,i.Qw)(_);b.push(v.nonTerminalName);var w=(0,i.Qw)(y);w.push(v.idx),g={idx:m,def:v.definition.concat(a,(0,i.Cw)(p)),ruleStack:b,occurrenceStack:w},h.push(g)}else if(v instanceof dt){var M={idx:m,def:(0,i.Cw)(p),ruleStack:_,occurrenceStack:y};h.push(M),h.push(s);var L={idx:m,def:v.definition.concat((0,i.Cw)(p)),ruleStack:_,occurrenceStack:y};h.push(L)}else if(v instanceof ht){var k=new pt({definition:v.definition,idx:v.idx});g={idx:m,def:v.definition.concat([k],(0,i.Cw)(p)),ruleStack:_,occurrenceStack:y},h.push(g)}else if(v instanceof ft){var T=new yt({terminalType:v.separator});k=new pt({definition:[T].concat(v.definition),idx:v.idx}),g={idx:m,def:v.definition.concat([k],(0,i.Cw)(p)),ruleStack:_,occurrenceStack:y},h.push(g)}else if(v instanceof mt){M={idx:m,def:(0,i.Cw)(p),ruleStack:_,occurrenceStack:y},h.push(M),h.push(s),T=new yt({terminalType:v.separator});var S=new pt({definition:[T].concat(v.definition),idx:v.idx});L={idx:m,def:v.definition.concat([S],(0,i.Cw)(p)),ruleStack:_,occurrenceStack:y},h.push(L)}else if(v instanceof pt)M={idx:m,def:(0,i.Cw)(p),ruleStack:_,occurrenceStack:y},h.push(M),h.push(s),S=new pt({definition:v.definition,idx:v.idx}),L={idx:m,def:v.definition.concat([S],(0,i.Cw)(p)),ruleStack:_,occurrenceStack:y},h.push(L);else if(v instanceof _t)for(var E=v.definition.length-1;E>=0;E--){var A={idx:m,def:v.definition[E].definition.concat((0,i.Cw)(p)),ruleStack:_,occurrenceStack:y};h.push(A),h.push(s)}else if(v instanceof ct)h.push({idx:m,def:v.definition.concat((0,i.Cw)(p)),ruleStack:_,occurrenceStack:y});else{if(!(v instanceof lt))throw Error("non exhaustive match");h.push(te(v,m,_,y))}}}else u&&(0,i.Z$)(h).idx<=c&&h.pop()}return d}function te(t,e,n,r){var o=(0,i.Qw)(n);o.push(t.name);var a=(0,i.Qw)(r);return a.push(1),{idx:e,def:t.definition,ruleStack:o,occurrenceStack:a}}var ee,ne=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(t){t[t.OPTION=0]="OPTION",t[t.REPETITION=1]="REPETITION",t[t.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",t[t.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",t[t.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",t[t.ALTERNATION=5]="ALTERNATION"}(ee||(ee={}));var re=function(t){function e(e,n,r){var i=t.call(this)||this;return i.topProd=e,i.targetOccurrence=n,i.targetProdType=r,i}return ne(e,t),e.prototype.startWalking=function(){return this.walk(this.topProd),this.restDef},e.prototype.checkIsTarget=function(t,e,n,r){return t.idx===this.targetOccurrence&&this.targetProdType===e&&(this.restDef=n.concat(r),!0)},e.prototype.walkOption=function(e,n,r){this.checkIsTarget(e,ee.OPTION,n,r)||t.prototype.walkOption.call(this,e,n,r)},e.prototype.walkAtLeastOne=function(e,n,r){this.checkIsTarget(e,ee.REPETITION_MANDATORY,n,r)||t.prototype.walkOption.call(this,e,n,r)},e.prototype.walkAtLeastOneSep=function(e,n,r){this.checkIsTarget(e,ee.REPETITION_MANDATORY_WITH_SEPARATOR,n,r)||t.prototype.walkOption.call(this,e,n,r)},e.prototype.walkMany=function(e,n,r){this.checkIsTarget(e,ee.REPETITION,n,r)||t.prototype.walkOption.call(this,e,n,r)},e.prototype.walkManySep=function(e,n,r){this.checkIsTarget(e,ee.REPETITION_WITH_SEPARATOR,n,r)||t.prototype.walkOption.call(this,e,n,r)},e}(xt),ie=function(t){function e(e,n,r){var i=t.call(this)||this;return i.targetOccurrence=e,i.targetProdType=n,i.targetRef=r,i.result=[],i}return ne(e,t),e.prototype.checkIsTarget=function(t,e){t.idx!==this.targetOccurrence||this.targetProdType!==e||void 0!==this.targetRef&&t!==this.targetRef||(this.result=t.definition)},e.prototype.visitOption=function(t){this.checkIsTarget(t,ee.OPTION)},e.prototype.visitRepetition=function(t){this.checkIsTarget(t,ee.REPETITION)},e.prototype.visitRepetitionMandatory=function(t){this.checkIsTarget(t,ee.REPETITION_MANDATORY)},e.prototype.visitRepetitionMandatoryWithSeparator=function(t){this.checkIsTarget(t,ee.REPETITION_MANDATORY_WITH_SEPARATOR)},e.prototype.visitRepetitionWithSeparator=function(t){this.checkIsTarget(t,ee.REPETITION_WITH_SEPARATOR)},e.prototype.visitAlternation=function(t){this.checkIsTarget(t,ee.ALTERNATION)},e}(wt);function oe(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=[];return e}function ae(t){for(var e=[""],n=0;n<t.length;n++){for(var r=t[n],i=[],o=0;o<e.length;o++){var a=e[o];i.push(a+"_"+r.tokenTypeIdx);for(var s=0;s<r.categoryMatches.length;s++){var u="_"+r.categoryMatches[s];i.push(a+u)}}e=i}return e}function se(t,e,n){for(var r=0;r<t.length;r++)if(r!==n)for(var i=t[r],o=0;o<e.length;o++)if(!0===i[e[o]])return!1;return!0}function ue(t,e){for(var n=(0,i.UI)(t,(function(t){return $t([t],1)})),r=oe(n.length),o=(0,i.UI)(n,(function(t){var e={};return(0,i.Ed)(t,(function(t){var n=ae(t.partialPath);(0,i.Ed)(n,(function(t){e[t]=!0}))})),e})),a=n,s=1;s<=e;s++){var u=a;a=oe(u.length);for(var l=function(t){for(var n=u[t],l=0;l<n.length;l++){var c=n[l].partialPath,d=n[l].suffixDef,h=ae(c);if(se(o,h,t)||(0,i.xb)(d)||c.length===e){var f=r[t];if(!1===de(f,c)){f.push(c);for(var p=0;p<h.length;p++){var m=h[p];o[t][m]=!0}}}else{var _=$t(d,s+1,c);a[t]=a[t].concat(_),(0,i.Ed)(_,(function(e){var n=ae(e.partialPath);(0,i.Ed)(n,(function(e){o[t][e]=!0}))}))}}},c=0;c<u.length;c++)l(c)}return r}function le(t,e,n,r){var i=new ie(t,ee.ALTERNATION,r);return e.accept(i),ue(i.result,n)}function ce(t,e,n,r){var i=new ie(t,n);e.accept(i);var o=i.result,a=new re(e,t,n).startWalking();return ue([new ct({definition:o}),new ct({definition:a})],r)}function de(t,e){t:for(var n=0;n<t.length;n++){var r=t[n];if(r.length===e.length){for(var i=0;i<r.length;i++){var o=e[i],a=r[i];if(!1==(o===a||void 0!==a.categoryMatchesMap[o.tokenTypeIdx]))continue t}return!0}}return!1}function he(t){return(0,i.yW)(t,(function(t){return(0,i.yW)(t,(function(t){return(0,i.yW)(t,(function(t){return(0,i.xb)(t.categoryMatches)}))}))}))}var fe=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function pe(t,e,n,r,o,a){var s=i.UI(t,(function(t){return function(t,e){var n=new ye;t.accept(n);var r=n.allProductions,o=i.vM(r,me),a=i.ei(o,(function(t){return t.length>1}));return i.UI(i.VO(a),(function(n){var r=i.Ps(n),o=e.buildDuplicateFoundError(t,n),a=kt(r),s={message:o,type:bn.DUPLICATE_PRODUCTIONS,ruleName:t.name,dslName:a,occurrence:r.idx},u=_e(r);return u&&(s.parameter=u),s}))}(t,o)})),u=i.UI(t,(function(t){return xe(t,t,o)})),l=[],c=[],d=[];(0,i.yW)(u,i.xb)&&(l=(0,i.UI)(t,(function(t){return function(t,e){var n=new we;t.accept(n);var r=n.alternations;return i.u4(r,(function(n,r){var o=i.j7(r.definition),a=i.UI(o,(function(n,o){var a=Qt([n],[],null,1);return i.xb(a)?{message:e.buildEmptyAlternationError({topLevelRule:t,alternation:r,emptyChoiceIdx:o}),type:bn.NONE_LAST_EMPTY_ALT,ruleName:t.name,occurrence:r.idx,alternative:o+1}:null}));return n.concat(i.oA(a))}),[])}(t,o)})),c=(0,i.UI)(t,(function(t){return function(t,e,n,r){var o=new we;t.accept(o);var a=o.alternations,s=n[t.name];return s&&(a=(0,i.d1)(a,(function(t){return s[kt(t)+(0===t.idx?"":t.idx)]}))),a=(0,i.d1)(a,(function(t){return!0===t.ignoreAmbiguities})),i.u4(a,(function(n,o){var a=o.idx,s=o.maxLookahead||e,u=le(a,t,s,o),l=function(t,e,n,r){var o=[],a=(0,i.u4)(t,(function(n,r,a){return!0===e.definition[a].ignoreAmbiguities||(0,i.Ed)(r,(function(r){var s=[a];(0,i.Ed)(t,(function(t,n){a!==n&&de(t,r)&&!0!==e.definition[n].ignoreAmbiguities&&s.push(n)})),s.length>1&&!de(o,r)&&(o.push(r),n.push({alts:s,path:r}))})),n}),[]);return i.UI(a,(function(t){var o=(0,i.UI)(t.alts,(function(t){return t+1}));return{message:r.buildAlternationAmbiguityError({topLevelRule:n,alternation:e,ambiguityIndices:o,prefixPath:t.path}),type:bn.AMBIGUOUS_ALTS,ruleName:n.name,occurrence:e.idx,alternatives:[t.alts]}}))}(u,o,t,r),c=function(t,e,n,r){var o=[],a=(0,i.u4)(t,(function(t,e,n){var r=(0,i.UI)(e,(function(t){return{idx:n,path:t}}));return t.concat(r)}),[]);return(0,i.Ed)(a,(function(t){if(!0!==e.definition[t.idx].ignoreAmbiguities){var s=t.idx,u=t.path,l=(0,i.Oq)(a,(function(t){return!0!==e.definition[t.idx].ignoreAmbiguities&&t.idx<s&&(n=t.path,r=u,n.length<r.length&&(0,i.yW)(n,(function(t,e){var n=r[e];return t===n||n.categoryMatchesMap[t.tokenTypeIdx]})));var n,r})),c=(0,i.UI)(l,(function(t){var i=[t.idx+1,s+1],o=0===e.idx?"":e.idx;return{message:r.buildAlternationPrefixAmbiguityError({topLevelRule:n,alternation:e,ambiguityIndices:i,prefixPath:t.path}),type:bn.AMBIGUOUS_PREFIX_ALTS,ruleName:n.name,occurrence:o,alternatives:i}}));o=o.concat(c)}})),o}(u,o,t,r);return n.concat(l,c)}),[])}(t,e,r,o)})),d=function(t,e,n){var r=[];return(0,i.Ed)(t,(function(t){var o=new Me;t.accept(o);var a=o.allProductions;(0,i.Ed)(a,(function(o){var a=function(t){if(t instanceof dt)return ee.OPTION;if(t instanceof pt)return ee.REPETITION;if(t instanceof ht)return ee.REPETITION_MANDATORY;if(t instanceof ft)return ee.REPETITION_MANDATORY_WITH_SEPARATOR;if(t instanceof mt)return ee.REPETITION_WITH_SEPARATOR;if(t instanceof _t)return ee.ALTERNATION;throw Error("non exhaustive match")}(o),s=o.maxLookahead||e,u=ce(o.idx,t,a,s)[0];if((0,i.xb)((0,i.xH)(u))){var l=n.buildEmptyRepetitionError({topLevelRule:t,repetition:o});r.push({message:l,type:bn.NO_NON_EMPTY_LOOKAHEAD,ruleName:t.name})}}))})),r}(t,e,o));var h=function(t,e,n){var r=[],o=(0,i.UI)(e,(function(t){return t.name}));return(0,i.Ed)(t,(function(t){var e=t.name;if((0,i.r3)(o,e)){var a=n.buildNamespaceConflictError(t);r.push({message:a,type:bn.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:e})}})),r}(t,n,o),f=i.UI(n,(function(t){return function(t,e){var n=[];return t.name.match(ve)||n.push({message:e.buildTokenNameError({tokenType:t,expectedPattern:ve}),type:bn.INVALID_TOKEN_NAME}),n}(t,o)})),p=function(t,e){var n=[];return(0,i.Ed)(t,(function(t){var r=new Vt("");t.accept(r);var o=(0,i.UI)(r.result,(function(t){return t.orgProd}));n.push((0,i.UI)(o,(function(n){return function(t,e,n){var r,i=[];return e.name.match(ge)||(r=n.buildInvalidNestedRuleNameError(t,e),i.push({message:r,type:bn.INVALID_NESTED_RULE_NAME,ruleName:t.name})),i}(t,n,e)})))})),(0,i.xH)(n)}(t,o),m=function(t,e){var n=[];return(0,i.Ed)(t,(function(t){var r=new Vt("");t.accept(r);var o=(0,i.vM)(r.result,(function(t){return t.name})),a=(0,i.ei)(o,(function(t){return t.length>1}));(0,i.Ed)((0,i.VO)(a),(function(r){var o=(0,i.UI)(r,(function(t){return t.orgProd})),a=e.buildDuplicateNestedRuleNameError(t,o);n.push({message:a,type:bn.DUPLICATE_NESTED_NAME,ruleName:t.name})}))})),n}(t,o),_=(0,i.UI)(t,(function(t){return function(t,e){var n=new we;t.accept(n);var r=n.alternations;return i.u4(r,(function(n,r){return r.definition.length>255&&n.push({message:e.buildTooManyAlternativesError({topLevelRule:t,alternation:r}),type:bn.TOO_MANY_ALTS,ruleName:t.name,occurrence:r.idx}),n}),[])}(t,o)})),y=(0,i.UI)(t,(function(t){return function(t,e){var n=[],r=t.name;return r.match(ve)||n.push({message:e.buildInvalidRuleNameError({topLevelRule:t,expectedPattern:ve}),type:bn.INVALID_RULE_NAME,ruleName:r}),n}(t,o)})),v=(0,i.UI)(t,(function(e){return function(t,e,n,r){var o=[];if((0,i.u4)(e,(function(e,n){return n.name===t.name?e+1:e}),0)>1){var a=r.buildDuplicateRuleNameError({topLevelRule:t,grammarName:n});o.push({message:a,type:bn.DUPLICATE_RULE_NAME,ruleName:t.name})}return o}(e,t,a,o)}));return i.xH(s.concat(f,p,m,d,u,l,c,h,_,y,v))}function me(t){return kt(t)+"_#_"+t.idx+"_#_"+_e(t)}function _e(t){return t instanceof yt?t.terminalType.name:t instanceof ut?t.nonTerminalName:""}var ye=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.allProductions=[],e}return fe(e,t),e.prototype.visitNonTerminal=function(t){this.allProductions.push(t)},e.prototype.visitOption=function(t){this.allProductions.push(t)},e.prototype.visitRepetitionWithSeparator=function(t){this.allProductions.push(t)},e.prototype.visitRepetitionMandatory=function(t){this.allProductions.push(t)},e.prototype.visitRepetitionMandatoryWithSeparator=function(t){this.allProductions.push(t)},e.prototype.visitRepetition=function(t){this.allProductions.push(t)},e.prototype.visitAlternation=function(t){this.allProductions.push(t)},e.prototype.visitTerminal=function(t){this.allProductions.push(t)},e}(wt),ve=/^[a-zA-Z_]\w*$/,ge=new RegExp(ve.source.replace("^","^\\$"));function xe(t,e,n,r){void 0===r&&(r=[]);var o=[],a=be(e.definition);if(i.xb(a))return[];var s=t.name;i.r3(a,t)&&o.push({message:n.buildLeftRecursionError({topLevelRule:t,leftRecursionPath:r}),type:bn.LEFT_RECURSION,ruleName:s});var u=i.e5(a,r.concat([t])),l=i.UI(u,(function(e){var o=i.Qw(r);return o.push(e),xe(t,e,n,o)}));return o.concat(i.xH(l))}function be(t){var e=[];if(i.xb(t))return e;var n=i.Ps(t);if(n instanceof ut)e.push(n.referencedRule);else if(n instanceof ct||n instanceof dt||n instanceof ht||n instanceof ft||n instanceof mt||n instanceof pt)e=e.concat(be(n.definition));else if(n instanceof _t)e=i.xH(i.UI(n.definition,(function(t){return be(t.definition)})));else if(!(n instanceof yt))throw Error("non exhaustive match");var r=Lt(n),o=t.length>1;if(r&&o){var a=i.Cw(t);return e.concat(be(a))}return e}var we=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.alternations=[],e}return fe(e,t),e.prototype.visitAlternation=function(t){this.alternations.push(t)},e}(wt),Me=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.allProductions=[],e}return fe(e,t),e.prototype.visitRepetitionWithSeparator=function(t){this.allProductions.push(t)},e.prototype.visitRepetitionMandatory=function(t){this.allProductions.push(t)},e.prototype.visitRepetitionMandatoryWithSeparator=function(t){this.allProductions.push(t)},e.prototype.visitRepetition=function(t){this.allProductions.push(t)},e}(wt),Le={buildMismatchTokenMessage:function(t){var e=t.expected,n=t.actual;return t.previous,t.ruleName,"Expecting "+(et(e)?"--\x3e "+Q(e)+" <--":"token of type --\x3e "+e.name+" <--")+" but found --\x3e '"+n.image+"' <--"},buildNotAllInputParsedMessage:function(t){var e=t.firstRedundant;return t.ruleName,"Redundant input, expecting EOF but found: "+e.image},buildNoViableAltMessage:function(t){var e=t.expectedPathsPerAlt,n=t.actual,r=(t.previous,t.customUserDescription),o=(t.ruleName,"Expecting: "),a="\nbut found: '"+(0,i.Ps)(n).image+"'";if(r)return o+r+a;var s=(0,i.u4)(e,(function(t,e){return t.concat(e)}),[]),u=(0,i.UI)(s,(function(t){return"["+(0,i.UI)(t,(function(t){return Q(t)})).join(", ")+"]"}));return o+"one of these possible Token sequences:\n"+(0,i.UI)(u,(function(t,e){return"  "+(e+1)+". "+t})).join("\n")+a},buildEarlyExitMessage:function(t){var e=t.expectedIterationPaths,n=t.actual,r=t.customUserDescription,o=(t.ruleName,"Expecting: "),a="\nbut found: '"+(0,i.Ps)(n).image+"'";return r?o+r+a:o+"expecting at least one iteration which starts with one of these possible Token sequences::\n  <"+(0,i.UI)(e,(function(t){return"["+(0,i.UI)(t,(function(t){return Q(t)})).join(",")+"]"})).join(" ,")+">"+a}};Object.freeze(Le);var ke={buildRuleNotFoundError:function(t,e){return"Invalid grammar, reference to a rule which is not defined: ->"+e.nonTerminalName+"<-\ninside top level rule: ->"+t.name+"<-"}},Te={buildDuplicateFoundError:function(t,e){var n,r=t.name,o=(0,i.Ps)(e),a=o.idx,s=kt(o),u=(n=o)instanceof yt?n.terminalType.name:n instanceof ut?n.nonTerminalName:"",l="->"+s+(a>0?a:"")+"<- "+(u?"with argument: ->"+u+"<-":"")+"\n                  appears more than once ("+e.length+" times) in the top level rule: ->"+r+"<-.                  \n                  For further details see: https://sap.github.io/chevrotain/docs/FAQ.html#NUMERICAL_SUFFIXES \n                  ";return(l=l.replace(/[ \t]+/g," ")).replace(/\s\s+/g,"\n")},buildInvalidNestedRuleNameError:function(t,e){return"Invalid nested rule name: ->"+e.name+"<- inside rule: ->"+t.name+"<-\nit must match the pattern: ->"+ge.toString()+"<-.\nNote that this means a nested rule name must start with the '$'(dollar) sign."},buildDuplicateNestedRuleNameError:function(t,e){return"Duplicate nested rule name: ->"+(0,i.Ps)(e).name+"<- inside rule: ->"+t.name+"<-\nA nested name must be unique in the scope of a top level grammar rule."},buildNamespaceConflictError:function(t){return"Namespace conflict found in grammar.\nThe grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <"+t.name+">.\nTo resolve this make sure each Terminal and Non-Terminal names are unique\nThis is easy to accomplish by using the convention that Terminal names start with an uppercase letter\nand Non-Terminal names start with a lower case letter."},buildAlternationPrefixAmbiguityError:function(t){var e=(0,i.UI)(t.prefixPath,(function(t){return Q(t)})).join(", "),n=0===t.alternation.idx?"":t.alternation.idx;return"Ambiguous alternatives: <"+t.ambiguityIndices.join(" ,")+"> due to common lookahead prefix\nin <OR"+n+"> inside <"+t.topLevelRule.name+"> Rule,\n<"+e+"> may appears as a prefix path in all these alternatives.\nSee: https://sap.github.io/chevrotain/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX\nFor Further details."},buildAlternationAmbiguityError:function(t){var e=(0,i.UI)(t.prefixPath,(function(t){return Q(t)})).join(", "),n=0===t.alternation.idx?"":t.alternation.idx;return"Ambiguous Alternatives Detected: <"+t.ambiguityIndices.join(" ,")+"> in <OR"+n+"> inside <"+t.topLevelRule.name+"> Rule,\n<"+e+"> may appears as a prefix path in all these alternatives.\n"+"See: https://sap.github.io/chevrotain/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES\nFor Further details."},buildEmptyRepetitionError:function(t){var e=kt(t.repetition);return 0!==t.repetition.idx&&(e+=t.repetition.idx),"The repetition <"+e+"> within Rule <"+t.topLevelRule.name+"> can never consume any tokens.\nThis could lead to an infinite loop."},buildTokenNameError:function(t){return"Invalid Grammar Token name: ->"+t.tokenType.name+"<- it must match the pattern: ->"+t.expectedPattern.toString()+"<-"},buildEmptyAlternationError:function(t){return"Ambiguous empty alternative: <"+(t.emptyChoiceIdx+1)+"> in <OR"+t.alternation.idx+"> inside <"+t.topLevelRule.name+"> Rule.\nOnly the last alternative may be an empty alternative."},buildTooManyAlternativesError:function(t){return"An Alternation cannot have more than 256 alternatives:\n<OR"+t.alternation.idx+"> inside <"+t.topLevelRule.name+"> Rule.\n has "+(t.alternation.definition.length+1)+" alternatives."},buildLeftRecursionError:function(t){var e=t.topLevelRule.name;return"Left Recursion found in grammar.\nrule: <"+e+"> can be invoked from itself (directly or indirectly)\nwithout consuming any Tokens. The grammar path that causes this is: \n "+e+" --\x3e "+i.UI(t.leftRecursionPath,(function(t){return t.name})).concat([e]).join(" --\x3e ")+"\n To fix this refactor your grammar to remove the left recursion.\nsee: https://en.wikipedia.org/wiki/LL_parser#Left_Factoring."},buildInvalidRuleNameError:function(t){return"Invalid grammar rule name: ->"+t.topLevelRule.name+"<- it must match the pattern: ->"+t.expectedPattern.toString()+"<-"},buildDuplicateRuleNameError:function(t){return"Duplicate definition, rule: ->"+(t.topLevelRule instanceof lt?t.topLevelRule.name:t.topLevelRule)+"<- is already defined in the grammar: ->"+t.grammarName+"<-"}},Se=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ee=function(t){function e(e,n){var r=t.call(this)||this;return r.nameToTopRule=e,r.errMsgProvider=n,r.errors=[],r}return Se(e,t),e.prototype.resolveRefs=function(){var t=this;(0,i.Ed)((0,i.VO)(this.nameToTopRule),(function(e){t.currTopLevel=e,e.accept(t)}))},e.prototype.visitNonTerminal=function(t){var e=this.nameToTopRule[t.nonTerminalName];if(e)t.referencedRule=e;else{var n=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,t);this.errors.push({message:n,type:bn.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:t.nonTerminalName})}},e}(wt);function Ae(t){t=(0,i.ce)(t,{errMsgProvider:ke});var e,n,r,o={};return(0,i.Ed)(t.rules,(function(t){o[t.name]=t})),e=o,n=t.errMsgProvider,(r=new Ee(e,n)).resolveRefs(),r.errors}function De(t){return pe((t=(0,i.ce)(t,{errMsgProvider:Te,ignoredIssues:{}})).rules,t.maxLookahead,t.tokenTypes,t.ignoredIssues,t.errMsgProvider,t.grammarName)}function Ce(t){(0,i.Ed)(t.rules,(function(t){var e=new Tt;t.accept(e),(0,i.Ed)(e.dslMethods,(function(t){(0,i.Ed)(t,(function(t,e){t.idx=e+1}))}))}))}var Pe="MismatchedTokenException",Ie="NoViableAltException",Oe="EarlyExitException",Re="NotAllInputParsedException",Ye=[Pe,Ie,Oe,Re];function Fe(t){return(0,i.r3)(Ye,t.name)}function je(t,e,n){this.name=Pe,this.message=t,this.token=e,this.previousToken=n,this.resyncedTokens=[]}function ze(t,e,n){this.name=Ie,this.message=t,this.token=e,this.previousToken=n,this.resyncedTokens=[]}function Ne(t,e){this.name=Re,this.message=t,this.token=e,this.resyncedTokens=[]}function Be(t,e,n){this.name=Oe,this.message=t,this.token=e,this.previousToken=n,this.resyncedTokens=[]}Object.freeze(Ye),je.prototype=Error.prototype,ze.prototype=Error.prototype,Ne.prototype=Error.prototype,Be.prototype=Error.prototype;var Ue={},He="InRuleRecoveryException";function Ve(t){this.name=He,this.message=t}Ve.prototype=Error.prototype;var We=function(){function t(){}return t.prototype.initRecoverable=function(t){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=(0,i.e$)(t,"recoveryEnabled")?t.recoveryEnabled:wn.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=Ge)},t.prototype.getTokenToInsert=function(t){var e=it(t,"",NaN,NaN,NaN,NaN,NaN,NaN);return e.isInsertedInRecovery=!0,e},t.prototype.canTokenTypeBeInsertedInRecovery=function(t){return!0},t.prototype.tryInRepetitionRecovery=function(t,e,n,r){for(var o=this,a=this.findReSyncTokenType(),s=this.exportLexerState(),u=[],l=!1,c=this.LA(1),d=this.LA(1),h=function(){var t=o.LA(0),e=new je(o.errorMessageProvider.buildMismatchTokenMessage({expected:r,actual:c,previous:t,ruleName:o.getCurrRuleFullName()}),c,o.LA(0));e.resyncedTokens=(0,i.j7)(u),o.SAVE_ERROR(e)};!l;){if(this.tokenMatcher(d,r))return void h();if(n.call(this))return h(),void t.apply(this,e);this.tokenMatcher(d,a)?l=!0:(d=this.SKIP_TOKEN(),this.addToResyncTokens(d,u))}this.importLexerState(s)},t.prototype.shouldInRepetitionRecoveryBeTried=function(t,e,n){return!1!==n&&void 0!==t&&void 0!==e&&!this.tokenMatcher(this.LA(1),t)&&!this.isBackTracking()&&!this.canPerformInRuleRecovery(t,this.getFollowsForInRuleRecovery(t,e))},t.prototype.getFollowsForInRuleRecovery=function(t,e){var n=this.getCurrentGrammarPath(t,e);return this.getNextPossibleTokenTypes(n)},t.prototype.tryInRuleRecovery=function(t,e){if(this.canRecoverWithSingleTokenInsertion(t,e))return this.getTokenToInsert(t);if(this.canRecoverWithSingleTokenDeletion(t)){var n=this.SKIP_TOKEN();return this.consumeToken(),n}throw new Ve("sad sad panda")},t.prototype.canPerformInRuleRecovery=function(t,e){return this.canRecoverWithSingleTokenInsertion(t,e)||this.canRecoverWithSingleTokenDeletion(t)},t.prototype.canRecoverWithSingleTokenInsertion=function(t,e){var n=this;if(!this.canTokenTypeBeInsertedInRecovery(t))return!1;if((0,i.xb)(e))return!1;var r=this.LA(1);return void 0!==(0,i.sE)(e,(function(t){return n.tokenMatcher(r,t)}))},t.prototype.canRecoverWithSingleTokenDeletion=function(t){return this.tokenMatcher(this.LA(2),t)},t.prototype.isInCurrentRuleReSyncSet=function(t){var e=this.getCurrFollowKey(),n=this.getFollowSetFromFollowKey(e);return(0,i.r3)(n,t)},t.prototype.findReSyncTokenType=function(){for(var t=this.flattenFollowSet(),e=this.LA(1),n=2;;){var r=e.tokenType;if((0,i.r3)(t,r))return r;e=this.LA(n),n++}},t.prototype.getCurrFollowKey=function(){if(1===this.RULE_STACK.length)return Ue;var t=this.getLastExplicitRuleShortName(),e=this.getLastExplicitRuleOccurrenceIndex(),n=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(t),idxInCallingRule:e,inRule:this.shortRuleNameToFullName(n)}},t.prototype.buildFullFollowKeyStack=function(){var t=this,e=this.RULE_STACK,n=this.RULE_OCCURRENCE_STACK;return(0,i.xb)(this.LAST_EXPLICIT_RULE_STACK)||(e=(0,i.UI)(this.LAST_EXPLICIT_RULE_STACK,(function(e){return t.RULE_STACK[e]})),n=(0,i.UI)(this.LAST_EXPLICIT_RULE_STACK,(function(e){return t.RULE_OCCURRENCE_STACK[e]}))),(0,i.UI)(e,(function(r,i){return 0===i?Ue:{ruleName:t.shortRuleNameToFullName(r),idxInCallingRule:n[i],inRule:t.shortRuleNameToFullName(e[i-1])}}))},t.prototype.flattenFollowSet=function(){var t=this,e=(0,i.UI)(this.buildFullFollowKeyStack(),(function(e){return t.getFollowSetFromFollowKey(e)}));return(0,i.xH)(e)},t.prototype.getFollowSetFromFollowKey=function(t){if(t===Ue)return[rt];var e=t.ruleName+t.idxInCallingRule+At+t.inRule;return this.resyncFollows[e]},t.prototype.addToResyncTokens=function(t,e){return this.tokenMatcher(t,rt)||e.push(t),e},t.prototype.reSyncTo=function(t){for(var e=[],n=this.LA(1);!1===this.tokenMatcher(n,t);)n=this.SKIP_TOKEN(),this.addToResyncTokens(n,e);return(0,i.j7)(e)},t.prototype.attemptInRepetitionRecovery=function(t,e,n,r,i,o,a){},t.prototype.getCurrentGrammarPath=function(t,e){return{ruleStack:this.getHumanReadableRuleStack(),occurrenceStack:(0,i.Qw)(this.RULE_OCCURRENCE_STACK),lastTok:t,lastTokOccurrence:e}},t.prototype.getHumanReadableRuleStack=function(){var t=this;return(0,i.xb)(this.LAST_EXPLICIT_RULE_STACK)?(0,i.UI)(this.RULE_STACK,(function(e){return t.shortRuleNameToFullName(e)})):(0,i.UI)(this.LAST_EXPLICIT_RULE_STACK,(function(e){return t.shortRuleNameToFullName(t.RULE_STACK[e])}))},t}();function Ge(t,e,n,r,i,o,a){var s=this.getKeyForAutomaticLookahead(r,i),u=this.firstAfterRepMap[s];if(void 0===u){var l=this.getCurrRuleFullName();u=new o(this.getGAstProductions()[l],i).startWalking(),this.firstAfterRepMap[s]=u}var c=u.token,d=u.occurrence,h=u.isEndOfRule;1===this.RULE_STACK.length&&h&&void 0===c&&(c=rt,d=1),this.shouldInRepetitionRecoveryBeTried(c,d,a)&&this.tryInRepetitionRecovery(t,e,n,c)}var qe,Xe=function(){function t(){}return t.prototype.initLooksAhead=function(t){this.dynamicTokensEnabled=(0,i.e$)(t,"dynamicTokensEnabled")?t.dynamicTokensEnabled:wn.dynamicTokensEnabled,this.maxLookahead=(0,i.e$)(t,"maxLookahead")?t.maxLookahead:wn.maxLookahead,this.lookAheadFuncsCache=(0,i.dU)()?new Map:[],(0,i.dU)()?(this.getLaFuncFromCache=this.getLaFuncFromMap,this.setLaFuncCache=this.setLaFuncCacheUsingMap):(this.getLaFuncFromCache=this.getLaFuncFromObj,this.setLaFuncCache=this.setLaFuncUsingObj)},t.prototype.preComputeLookaheadFunctions=function(t){var e=this;(0,i.Ed)(t,(function(t){e.TRACE_INIT(t.name+" Rule Lookahead",(function(){var n=function(t){St.reset(),t.accept(St);var e=St.dslMethods;return St.reset(),e}(t),r=n.alternation,o=n.repetition,a=n.option,s=n.repetitionMandatory,u=n.repetitionMandatoryWithSeparator,l=n.repetitionWithSeparator;(0,i.Ed)(r,(function(n){var r=0===n.idx?"":n.idx;e.TRACE_INIT(""+kt(n)+r,(function(){var r,i,o,a,s,u,l=(r=n.idx,i=t,o=n.maxLookahead||e.maxLookahead,a=n.hasPredicates,s=e.dynamicTokensEnabled,(0,e.lookAheadBuilderForAlternatives)(u=le(r,i,o),a,he(u)?B:N,s)),c=jt(e.fullRuleNameToShort[t.name],Pt,n.idx);e.setLaFuncCache(c,l)}))})),(0,i.Ed)(o,(function(n){e.computeLookaheadFunc(t,n.idx,Ot,ee.REPETITION,n.maxLookahead,kt(n))})),(0,i.Ed)(a,(function(n){e.computeLookaheadFunc(t,n.idx,It,ee.OPTION,n.maxLookahead,kt(n))})),(0,i.Ed)(s,(function(n){e.computeLookaheadFunc(t,n.idx,Rt,ee.REPETITION_MANDATORY,n.maxLookahead,kt(n))})),(0,i.Ed)(u,(function(n){e.computeLookaheadFunc(t,n.idx,Ft,ee.REPETITION_MANDATORY_WITH_SEPARATOR,n.maxLookahead,kt(n))})),(0,i.Ed)(l,(function(n){e.computeLookaheadFunc(t,n.idx,Yt,ee.REPETITION_WITH_SEPARATOR,n.maxLookahead,kt(n))}))}))}))},t.prototype.computeLookaheadFunc=function(t,e,n,r,i,o){var a=this;this.TRACE_INIT(""+o+(0===e?"":e),(function(){var o=function(t,e,n,r,i,o){var a=ce(t,e,i,n),s=he(a)?B:N;return o(a[0],s,r)}(e,t,i||a.maxLookahead,a.dynamicTokensEnabled,r,a.lookAheadBuilderForOptional),s=jt(a.fullRuleNameToShort[t.name],n,e);a.setLaFuncCache(s,o)}))},t.prototype.lookAheadBuilderForOptional=function(t,e,n){return function(t,e,n){var r=(0,i.yW)(t,(function(t){return 1===t.length})),o=t.length;if(r&&!n){var a=(0,i.xH)(t);if(1===a.length&&(0,i.xb)(a[0].categoryMatches)){var s=a[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===s}}var u=(0,i.u4)(a,(function(t,e,n){return t[e.tokenTypeIdx]=!0,(0,i.Ed)(e.categoryMatches,(function(e){t[e]=!0})),t}),[]);return function(){var t=this.LA(1);return!0===u[t.tokenTypeIdx]}}return function(){t:for(var n=0;n<o;n++){for(var r=t[n],i=r.length,a=0;a<i;a++){var s=this.LA(a+1);if(!1===e(s,r[a]))continue t}return!0}return!1}}(t,e,n)},t.prototype.lookAheadBuilderForAlternatives=function(t,e,n,r){return function(t,e,n,r){var o=t.length,a=(0,i.yW)(t,(function(t){return(0,i.yW)(t,(function(t){return 1===t.length}))}));if(e)return function(e){for(var r=(0,i.UI)(e,(function(t){return t.GATE})),a=0;a<o;a++){var s=t[a],u=s.length,l=r[a];if(void 0===l||!1!==l.call(this))t:for(var c=0;c<u;c++){for(var d=s[c],h=d.length,f=0;f<h;f++){var p=this.LA(f+1);if(!1===n(p,d[f]))continue t}return a}}};if(a&&!r){var s=(0,i.UI)(t,(function(t){return(0,i.xH)(t)})),u=(0,i.u4)(s,(function(t,e,n){return(0,i.Ed)(e,(function(e){(0,i.e$)(t,e.tokenTypeIdx)||(t[e.tokenTypeIdx]=n),(0,i.Ed)(e.categoryMatches,(function(e){(0,i.e$)(t,e)||(t[e]=n)}))})),t}),[]);return function(){var t=this.LA(1);return u[t.tokenTypeIdx]}}return function(){for(var e=0;e<o;e++){var r=t[e],i=r.length;t:for(var a=0;a<i;a++){for(var s=r[a],u=s.length,l=0;l<u;l++){var c=this.LA(l+1);if(!1===n(c,s[l]))continue t}return e}}}}(t,e,n,r)},t.prototype.getKeyForAutomaticLookahead=function(t,e){return jt(this.getLastExplicitRuleShortName(),t,e)},t.prototype.getLaFuncFromCache=function(t){},t.prototype.getLaFuncFromMap=function(t){return this.lookAheadFuncsCache.get(t)},t.prototype.getLaFuncFromObj=function(t){return this.lookAheadFuncsCache[t]},t.prototype.setLaFuncCache=function(t,e){},t.prototype.setLaFuncCacheUsingMap=function(t,e){this.lookAheadFuncsCache.set(t,e)},t.prototype.setLaFuncUsingObj=function(t,e){this.lookAheadFuncsCache[t]=e},t}(),Ze=/^\s*function\s*(\S*)\s*\(/,Ke="name";function Je(t){return t.name||t.toString().match(Ze)[1]}function $e(t,e){var n=Object.getOwnPropertyDescriptor(t,Ke);return!(!(0,i.o8)(n)&&!n.configurable||(Object.defineProperty(t,Ke,{enumerable:!1,configurable:!0,writable:!1,value:e}),0))}function Qe(t,e){for(var n=(0,i.XP)(t),r=n.length,o=0;o<r;o++)for(var a=t[n[o]],s=a.length,u=0;u<s;u++){var l=a[u];void 0===l.tokenTypeIdx&&(void 0!==l.fullName?this[l.fullName](l.children,e):this[l.name](l.children,e))}}!function(t){t[t.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",t[t.MISSING_METHOD=1]="MISSING_METHOD"}(qe||(qe={}));var tn=["constructor","visit","validateVisitor"],en=function(){function t(){}return t.prototype.initTreeBuilder=function(t){if(this.LAST_EXPLICIT_RULE_STACK=[],this.CST_STACK=[],this.outputCst=(0,i.e$)(t,"outputCst")?t.outputCst:wn.outputCst,this.nodeLocationTracking=(0,i.e$)(t,"nodeLocationTracking")?t.nodeLocationTracking:wn.nodeLocationTracking,this.outputCst)if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Ut,this.setNodeLocationFromNode=Ut,this.cstPostRule=i.dG,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=i.dG,this.setNodeLocationFromNode=i.dG,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Bt,this.setNodeLocationFromNode=Bt,this.cstPostRule=i.dG,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=i.dG,this.setNodeLocationFromNode=i.dG,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else{if(!/none/i.test(this.nodeLocationTracking))throw Error('Invalid <nodeLocationTracking> config option: "'+t.nodeLocationTracking+'"');this.setNodeLocationFromToken=i.dG,this.setNodeLocationFromNode=i.dG,this.cstPostRule=i.dG,this.setInitialNodeLocation=i.dG}else this.cstInvocationStateUpdate=i.dG,this.cstFinallyStateUpdate=i.dG,this.cstPostTerminal=i.dG,this.cstPostNonTerminal=i.dG,this.cstPostRule=i.dG,this.getLastExplicitRuleShortName=this.getLastExplicitRuleShortNameNoCst,this.getPreviousExplicitRuleShortName=this.getPreviousExplicitRuleShortNameNoCst,this.getLastExplicitRuleOccurrenceIndex=this.getLastExplicitRuleOccurrenceIndexNoCst,this.manyInternal=this.manyInternalNoCst,this.orInternal=this.orInternalNoCst,this.optionInternal=this.optionInternalNoCst,this.atLeastOneInternal=this.atLeastOneInternalNoCst,this.manySepFirstInternal=this.manySepFirstInternalNoCst,this.atLeastOneSepFirstInternal=this.atLeastOneSepFirstInternalNoCst},t.prototype.setInitialNodeLocationOnlyOffsetRecovery=function(t){t.location={startOffset:NaN,endOffset:NaN}},t.prototype.setInitialNodeLocationOnlyOffsetRegular=function(t){t.location={startOffset:this.LA(1).startOffset,endOffset:NaN}},t.prototype.setInitialNodeLocationFullRecovery=function(t){t.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}},t.prototype.setInitialNodeLocationFullRegular=function(t){var e=this.LA(1);t.location={startOffset:e.startOffset,startLine:e.startLine,startColumn:e.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}},t.prototype.cstNestedInvocationStateUpdate=function(t,e){var n={name:t,fullName:this.shortRuleNameToFull[this.getLastExplicitRuleShortName()]+t,children:{}};this.setInitialNodeLocation(n),this.CST_STACK.push(n)},t.prototype.cstInvocationStateUpdate=function(t,e){this.LAST_EXPLICIT_RULE_STACK.push(this.RULE_STACK.length-1);var n={name:t,children:{}};this.setInitialNodeLocation(n),this.CST_STACK.push(n)},t.prototype.cstFinallyStateUpdate=function(){this.LAST_EXPLICIT_RULE_STACK.pop(),this.CST_STACK.pop()},t.prototype.cstNestedFinallyStateUpdate=function(){var t=this.CST_STACK.pop();this.cstPostRule(t)},t.prototype.cstPostRuleFull=function(t){var e=this.LA(0),n=t.location;n.startOffset<=e.startOffset==1?(n.endOffset=e.endOffset,n.endLine=e.endLine,n.endColumn=e.endColumn):(n.startOffset=NaN,n.startLine=NaN,n.startColumn=NaN)},t.prototype.cstPostRuleOnlyOffset=function(t){var e=this.LA(0),n=t.location;n.startOffset<=e.startOffset==1?n.endOffset=e.endOffset:n.startOffset=NaN},t.prototype.cstPostTerminal=function(t,e){var n=this.CST_STACK[this.CST_STACK.length-1];!function(t,e,n){void 0===t.children[n]?t.children[n]=[e]:t.children[n].push(e)}(n,e,t),this.setNodeLocationFromToken(n.location,e)},t.prototype.cstPostNonTerminal=function(t,e){if(!0!==this.isBackTracking()){var n=this.CST_STACK[this.CST_STACK.length-1];Ht(n,e,t),this.setNodeLocationFromNode(n.location,t.location)}},t.prototype.getBaseCstVisitorConstructor=function(){if((0,i.o8)(this.baseCstVisitorConstructor)){var t=(e=this.className,n=this.allRuleNames,$e(r=function(){},e+"BaseSemantics"),(r.prototype={visit:function(t,e){if((0,i.kJ)(t)&&(t=t[0]),!(0,i.o8)(t))return void 0!==t.fullName?this[t.fullName](t.children,e):this[t.name](t.children,e)},validateVisitor:function(){var t=function(t,e){var n=function(t,e){var n=(0,i.UI)(e,(function(e){if(!(0,i.mf)(t[e]))return{msg:"Missing visitor method: <"+e+"> on "+Je(t.constructor)+" CST Visitor.",type:qe.MISSING_METHOD,methodName:e}}));return(0,i.oA)(n)}(t,e),r=function(t,e){var n=[];for(var r in t)ve.test(r)&&(0,i.mf)(t[r])&&!(0,i.r3)(tn,r)&&!(0,i.r3)(e,r)&&n.push({msg:"Redundant visitor method: <"+r+"> on "+Je(t.constructor)+" CST Visitor\nThere is no Grammar Rule corresponding to this method's name.\nFor utility methods on visitor classes use methods names that do not match /"+ve.source+"/.",type:qe.REDUNDANT_METHOD,methodName:r});return n}(t,e);return n.concat(r)}(this,n);if(!(0,i.xb)(t)){var e=(0,i.UI)(t,(function(t){return t.msg}));throw Error("Errors Detected in CST Visitor <"+Je(this.constructor)+">:\n\t"+e.join("\n\n").replace(/\n/g,"\n\t"))}}}).constructor=r,r._RULE_NAMES=n,r);return this.baseCstVisitorConstructor=t,t}var e,n,r;return this.baseCstVisitorConstructor},t.prototype.getBaseCstVisitorConstructorWithDefaults=function(){if((0,i.o8)(this.baseCstVisitorWithDefaultsConstructor)){var t=function(t,e,n){var r=function(){};$e(r,t+"BaseSemanticsWithDefaults");var o=Object.create(n.prototype);return(0,i.Ed)(e,(function(t){o[t]=Qe})),(r.prototype=o).constructor=r,r}(this.className,this.allRuleNames,this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=t,t}return this.baseCstVisitorWithDefaultsConstructor},t.prototype.nestedRuleBeforeClause=function(t,e){var n;return void 0!==t.NAME?(n=t.NAME,this.nestedRuleInvocationStateUpdate(n,e),n):void 0},t.prototype.nestedAltBeforeClause=function(t,e,n,r){var i,o=zt(this.getLastExplicitRuleShortName(),n,e,r);return void 0!==t.NAME?(i=t.NAME,this.nestedRuleInvocationStateUpdate(i,o),{shortName:o,nestedName:i}):void 0},t.prototype.nestedRuleFinallyClause=function(t,e){var n=this.CST_STACK,r=n[n.length-1];this.nestedRuleFinallyStateUpdate();var i=n[n.length-1];Ht(i,e,r),this.setNodeLocationFromNode(i.location,r.location)},t.prototype.getLastExplicitRuleShortName=function(){var t=this.LAST_EXPLICIT_RULE_STACK[this.LAST_EXPLICIT_RULE_STACK.length-1];return this.RULE_STACK[t]},t.prototype.getLastExplicitRuleShortNameNoCst=function(){var t=this.RULE_STACK;return t[t.length-1]},t.prototype.getPreviousExplicitRuleShortName=function(){var t=this.LAST_EXPLICIT_RULE_STACK[this.LAST_EXPLICIT_RULE_STACK.length-2];return this.RULE_STACK[t]},t.prototype.getPreviousExplicitRuleShortNameNoCst=function(){var t=this.RULE_STACK;return t[t.length-2]},t.prototype.getLastExplicitRuleOccurrenceIndex=function(){var t=this.LAST_EXPLICIT_RULE_STACK[this.LAST_EXPLICIT_RULE_STACK.length-1];return this.RULE_OCCURRENCE_STACK[t]},t.prototype.getLastExplicitRuleOccurrenceIndexNoCst=function(){var t=this.RULE_OCCURRENCE_STACK;return t[t.length-1]},t.prototype.nestedRuleInvocationStateUpdate=function(t,e){this.RULE_OCCURRENCE_STACK.push(1),this.RULE_STACK.push(e),this.cstNestedInvocationStateUpdate(t,e)},t.prototype.nestedRuleFinallyStateUpdate=function(){this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstNestedFinallyStateUpdate()},t}(),nn=function(){function t(){}return t.prototype.initLexerAdapter=function(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1},Object.defineProperty(t.prototype,"input",{get:function(){return this.tokVector},set:function(t){if(!0!==this.selfAnalysisDone)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=t,this.tokVectorLength=t.length},enumerable:!0,configurable:!0}),t.prototype.SKIP_TOKEN=function(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):xn},t.prototype.LA=function(t){var e=this.currIdx+t;return e<0||this.tokVectorLength<=e?xn:this.tokVector[e]},t.prototype.consumeToken=function(){this.currIdx++},t.prototype.exportLexerState=function(){return this.currIdx},t.prototype.importLexerState=function(t){this.currIdx=t},t.prototype.resetLexerState=function(){this.currIdx=-1},t.prototype.moveToTerminatedState=function(){this.currIdx=this.tokVector.length-1},t.prototype.getLexerPosition=function(){return this.exportLexerState()},t}(),rn=function(){function t(){}return t.prototype.ACTION=function(t){return t.call(this)},t.prototype.consume=function(t,e,n){return this.consumeInternal(e,t,n)},t.prototype.subrule=function(t,e,n){return this.subruleInternal(e,t,n)},t.prototype.option=function(t,e){return this.optionInternal(e,t)},t.prototype.or=function(t,e){return this.orInternal(e,t)},t.prototype.many=function(t,e){return this.manyInternal(t,e)},t.prototype.atLeastOne=function(t,e){return this.atLeastOneInternal(t,e)},t.prototype.CONSUME=function(t,e){return this.consumeInternal(t,0,e)},t.prototype.CONSUME1=function(t,e){return this.consumeInternal(t,1,e)},t.prototype.CONSUME2=function(t,e){return this.consumeInternal(t,2,e)},t.prototype.CONSUME3=function(t,e){return this.consumeInternal(t,3,e)},t.prototype.CONSUME4=function(t,e){return this.consumeInternal(t,4,e)},t.prototype.CONSUME5=function(t,e){return this.consumeInternal(t,5,e)},t.prototype.CONSUME6=function(t,e){return this.consumeInternal(t,6,e)},t.prototype.CONSUME7=function(t,e){return this.consumeInternal(t,7,e)},t.prototype.CONSUME8=function(t,e){return this.consumeInternal(t,8,e)},t.prototype.CONSUME9=function(t,e){return this.consumeInternal(t,9,e)},t.prototype.SUBRULE=function(t,e){return this.subruleInternal(t,0,e)},t.prototype.SUBRULE1=function(t,e){return this.subruleInternal(t,1,e)},t.prototype.SUBRULE2=function(t,e){return this.subruleInternal(t,2,e)},t.prototype.SUBRULE3=function(t,e){return this.subruleInternal(t,3,e)},t.prototype.SUBRULE4=function(t,e){return this.subruleInternal(t,4,e)},t.prototype.SUBRULE5=function(t,e){return this.subruleInternal(t,5,e)},t.prototype.SUBRULE6=function(t,e){return this.subruleInternal(t,6,e)},t.prototype.SUBRULE7=function(t,e){return this.subruleInternal(t,7,e)},t.prototype.SUBRULE8=function(t,e){return this.subruleInternal(t,8,e)},t.prototype.SUBRULE9=function(t,e){return this.subruleInternal(t,9,e)},t.prototype.OPTION=function(t){return this.optionInternal(t,0)},t.prototype.OPTION1=function(t){return this.optionInternal(t,1)},t.prototype.OPTION2=function(t){return this.optionInternal(t,2)},t.prototype.OPTION3=function(t){return this.optionInternal(t,3)},t.prototype.OPTION4=function(t){return this.optionInternal(t,4)},t.prototype.OPTION5=function(t){return this.optionInternal(t,5)},t.prototype.OPTION6=function(t){return this.optionInternal(t,6)},t.prototype.OPTION7=function(t){return this.optionInternal(t,7)},t.prototype.OPTION8=function(t){return this.optionInternal(t,8)},t.prototype.OPTION9=function(t){return this.optionInternal(t,9)},t.prototype.OR=function(t){return this.orInternal(t,0)},t.prototype.OR1=function(t){return this.orInternal(t,1)},t.prototype.OR2=function(t){return this.orInternal(t,2)},t.prototype.OR3=function(t){return this.orInternal(t,3)},t.prototype.OR4=function(t){return this.orInternal(t,4)},t.prototype.OR5=function(t){return this.orInternal(t,5)},t.prototype.OR6=function(t){return this.orInternal(t,6)},t.prototype.OR7=function(t){return this.orInternal(t,7)},t.prototype.OR8=function(t){return this.orInternal(t,8)},t.prototype.OR9=function(t){return this.orInternal(t,9)},t.prototype.MANY=function(t){this.manyInternal(0,t)},t.prototype.MANY1=function(t){this.manyInternal(1,t)},t.prototype.MANY2=function(t){this.manyInternal(2,t)},t.prototype.MANY3=function(t){this.manyInternal(3,t)},t.prototype.MANY4=function(t){this.manyInternal(4,t)},t.prototype.MANY5=function(t){this.manyInternal(5,t)},t.prototype.MANY6=function(t){this.manyInternal(6,t)},t.prototype.MANY7=function(t){this.manyInternal(7,t)},t.prototype.MANY8=function(t){this.manyInternal(8,t)},t.prototype.MANY9=function(t){this.manyInternal(9,t)},t.prototype.MANY_SEP=function(t){this.manySepFirstInternal(0,t)},t.prototype.MANY_SEP1=function(t){this.manySepFirstInternal(1,t)},t.prototype.MANY_SEP2=function(t){this.manySepFirstInternal(2,t)},t.prototype.MANY_SEP3=function(t){this.manySepFirstInternal(3,t)},t.prototype.MANY_SEP4=function(t){this.manySepFirstInternal(4,t)},t.prototype.MANY_SEP5=function(t){this.manySepFirstInternal(5,t)},t.prototype.MANY_SEP6=function(t){this.manySepFirstInternal(6,t)},t.prototype.MANY_SEP7=function(t){this.manySepFirstInternal(7,t)},t.prototype.MANY_SEP8=function(t){this.manySepFirstInternal(8,t)},t.prototype.MANY_SEP9=function(t){this.manySepFirstInternal(9,t)},t.prototype.AT_LEAST_ONE=function(t){this.atLeastOneInternal(0,t)},t.prototype.AT_LEAST_ONE1=function(t){return this.atLeastOneInternal(1,t)},t.prototype.AT_LEAST_ONE2=function(t){this.atLeastOneInternal(2,t)},t.prototype.AT_LEAST_ONE3=function(t){this.atLeastOneInternal(3,t)},t.prototype.AT_LEAST_ONE4=function(t){this.atLeastOneInternal(4,t)},t.prototype.AT_LEAST_ONE5=function(t){this.atLeastOneInternal(5,t)},t.prototype.AT_LEAST_ONE6=function(t){this.atLeastOneInternal(6,t)},t.prototype.AT_LEAST_ONE7=function(t){this.atLeastOneInternal(7,t)},t.prototype.AT_LEAST_ONE8=function(t){this.atLeastOneInternal(8,t)},t.prototype.AT_LEAST_ONE9=function(t){this.atLeastOneInternal(9,t)},t.prototype.AT_LEAST_ONE_SEP=function(t){this.atLeastOneSepFirstInternal(0,t)},t.prototype.AT_LEAST_ONE_SEP1=function(t){this.atLeastOneSepFirstInternal(1,t)},t.prototype.AT_LEAST_ONE_SEP2=function(t){this.atLeastOneSepFirstInternal(2,t)},t.prototype.AT_LEAST_ONE_SEP3=function(t){this.atLeastOneSepFirstInternal(3,t)},t.prototype.AT_LEAST_ONE_SEP4=function(t){this.atLeastOneSepFirstInternal(4,t)},t.prototype.AT_LEAST_ONE_SEP5=function(t){this.atLeastOneSepFirstInternal(5,t)},t.prototype.AT_LEAST_ONE_SEP6=function(t){this.atLeastOneSepFirstInternal(6,t)},t.prototype.AT_LEAST_ONE_SEP7=function(t){this.atLeastOneSepFirstInternal(7,t)},t.prototype.AT_LEAST_ONE_SEP8=function(t){this.atLeastOneSepFirstInternal(8,t)},t.prototype.AT_LEAST_ONE_SEP9=function(t){this.atLeastOneSepFirstInternal(9,t)},t.prototype.RULE=function(t,e,n){if(void 0===n&&(n=Mn),(0,i.r3)(this.definedRulesNames,t)){var r={message:Te.buildDuplicateRuleNameError({topLevelRule:t,grammarName:this.className}),type:bn.DUPLICATE_RULE_NAME,ruleName:t};this.definitionErrors.push(r)}this.definedRulesNames.push(t);var o=this.defineRule(t,e,n);return this[t]=o,o},t.prototype.OVERRIDE_RULE=function(t,e,n){void 0===n&&(n=Mn);var r,o,a,s,u,l=[];l=l.concat((r=t,o=this.definedRulesNames,a=this.className,u=[],i.r3(o,r)||(s="Invalid rule override, rule: ->"+r+"<- cannot be overridden in the grammar: ->"+a+"<-as it is not defined in any of the super grammars ",u.push({message:s,type:bn.INVALID_RULE_OVERRIDE,ruleName:r})),u)),this.definitionErrors.push.apply(this.definitionErrors,l);var c=this.defineRule(t,e,n);return this[t]=c,c},t.prototype.BACKTRACK=function(t,e){return function(){this.isBackTrackingStack.push(1);var n=this.saveRecogState();try{return t.apply(this,e),!0}catch(t){if(Fe(t))return!1;throw t}finally{this.reloadRecogState(n),this.isBackTrackingStack.pop()}}},t.prototype.getGAstProductions=function(){return this.gastProductionsCache},t.prototype.getSerializedGastProductions=function(){return vt((0,i.VO)(this.gastProductionsCache))},t}(),on=function(){function t(){}return t.prototype.initRecognizerEngine=function(t,e){if(this.className=Je(this.constructor),this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=B,this.definedRulesNames=[],this.tokensMap={},this.allRuleNames=[],this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},(0,i.e$)(e,"serializedGrammar"))throw Error("The Parser's configuration can no longer contain a <serializedGrammar> property.\n\tSee: https://sap.github.io/chevrotain/docs/changes/BREAKING_CHANGES.html#_6-0-0\n\tFor Further details.");if((0,i.kJ)(t)){if((0,i.xb)(t))throw Error("A Token Vocabulary cannot be empty.\n\tNote that the first argument for the parser constructor\n\tis no longer a Token vector (since v4.0).");if("number"==typeof t[0].startOffset)throw Error("The Parser constructor no longer accepts a token vector as the first argument.\n\tSee: https://sap.github.io/chevrotain/docs/changes/BREAKING_CHANGES.html#_4-0-0\n\tFor Further details.")}if((0,i.kJ)(t))this.tokensMap=(0,i.u4)(t,(function(t,e){return t[e.name]=e,t}),{});else if((0,i.e$)(t,"modes")&&(0,i.yW)((0,i.xH)((0,i.VO)(t.modes)),X)){var n=(0,i.xH)((0,i.VO)(t.modes)),r=(0,i.jj)(n);this.tokensMap=(0,i.u4)(r,(function(t,e){return t[e.name]=e,t}),{})}else{if(!(0,i.Kn)(t))throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap=(0,i.Cl)(t)}this.tokensMap.EOF=rt;var o=(0,i.yW)((0,i.VO)(t),(function(t){return(0,i.xb)(t.categoryMatches)}));this.tokenMatcher=o?B:N,V((0,i.VO)(this.tokensMap))},t.prototype.defineRule=function(t,e,n){if(this.selfAnalysisDone)throw Error("Grammar rule <"+t+"> may not be defined after the 'performSelfAnalysis' method has been called'\nMake sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.");var r,o=(0,i.e$)(n,"resyncEnabled")?n.resyncEnabled:Mn.resyncEnabled,a=(0,i.e$)(n,"recoveryValueFunc")?n.recoveryValueFunc:Mn.recoveryValueFunc,s=this.ruleShortNameIdx<<12;function u(t){try{if(!0===this.outputCst){e.apply(this,t);var n=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(n),n}return e.apply(this,t)}catch(t){return this.invokeRuleCatch(t,o,a)}finally{this.ruleFinallyStateUpdate()}}return this.ruleShortNameIdx++,this.shortRuleNameToFull[s]=t,this.fullRuleNameToShort[t]=s,(r=function(e,n){return void 0===e&&(e=0),this.ruleInvocationStateUpdate(s,t,e),u.call(this,n)}).ruleName=t,r.originalGrammarAction=e,r},t.prototype.invokeRuleCatch=function(t,e,n){var r=1===this.RULE_STACK.length,i=e&&!this.isBackTracking()&&this.recoveryEnabled;if(Fe(t)){var o=t;if(i){var a,s=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(s))return o.resyncedTokens=this.reSyncTo(s),this.outputCst?((a=this.CST_STACK[this.CST_STACK.length-1]).recoveredNode=!0,a):n();throw this.outputCst&&((a=this.CST_STACK[this.CST_STACK.length-1]).recoveredNode=!0,o.partialCstResult=a),o}if(r)return this.moveToTerminatedState(),n();throw o}throw t},t.prototype.optionInternal=function(t,e){var n=this.getKeyForAutomaticLookahead(It,e),r=this.nestedRuleBeforeClause(t,n);try{return this.optionInternalLogic(t,e,n)}finally{void 0!==r&&this.nestedRuleFinallyClause(n,r)}},t.prototype.optionInternalNoCst=function(t,e){var n=this.getKeyForAutomaticLookahead(It,e);return this.optionInternalLogic(t,e,n)},t.prototype.optionInternalLogic=function(t,e,n){var r,i,o=this,a=this.getLaFuncFromCache(n);if(void 0!==t.DEF){if(r=t.DEF,void 0!==(i=t.GATE)){var s=a;a=function(){return i.call(o)&&s.call(o)}}}else r=t;if(!0===a.call(this))return r.call(this)},t.prototype.atLeastOneInternal=function(t,e){var n=this.getKeyForAutomaticLookahead(Rt,t),r=this.nestedRuleBeforeClause(e,n);try{return this.atLeastOneInternalLogic(t,e,n)}finally{void 0!==r&&this.nestedRuleFinallyClause(n,r)}},t.prototype.atLeastOneInternalNoCst=function(t,e){var n=this.getKeyForAutomaticLookahead(Rt,t);this.atLeastOneInternalLogic(t,e,n)},t.prototype.atLeastOneInternalLogic=function(t,e,n){var r,i,o=this,a=this.getLaFuncFromCache(n);if(void 0!==e.DEF){if(r=e.DEF,void 0!==(i=e.GATE)){var s=a;a=function(){return i.call(o)&&s.call(o)}}}else r=e;if(!0!==a.call(this))throw this.raiseEarlyExitException(t,ee.REPETITION_MANDATORY,e.ERR_MSG);for(var u=this.doSingleRepetition(r);!0===a.call(this)&&!0===u;)u=this.doSingleRepetition(r);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[t,e],a,Rt,t,Kt)},t.prototype.atLeastOneSepFirstInternal=function(t,e){var n=this.getKeyForAutomaticLookahead(Ft,t),r=this.nestedRuleBeforeClause(e,n);try{this.atLeastOneSepFirstInternalLogic(t,e,n)}finally{void 0!==r&&this.nestedRuleFinallyClause(n,r)}},t.prototype.atLeastOneSepFirstInternalNoCst=function(t,e){var n=this.getKeyForAutomaticLookahead(Ft,t);this.atLeastOneSepFirstInternalLogic(t,e,n)},t.prototype.atLeastOneSepFirstInternalLogic=function(t,e,n){var r=this,i=e.DEF,o=e.SEP;if(!0!==this.getLaFuncFromCache(n).call(this))throw this.raiseEarlyExitException(t,ee.REPETITION_MANDATORY_WITH_SEPARATOR,e.ERR_MSG);i.call(this);for(var a=function(){return r.tokenMatcher(r.LA(1),o)};!0===this.tokenMatcher(this.LA(1),o);)this.CONSUME(o),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,o,a,i,Jt],a,Ft,t,Jt)},t.prototype.manyInternal=function(t,e){var n=this.getKeyForAutomaticLookahead(Ot,t),r=this.nestedRuleBeforeClause(e,n);try{return this.manyInternalLogic(t,e,n)}finally{void 0!==r&&this.nestedRuleFinallyClause(n,r)}},t.prototype.manyInternalNoCst=function(t,e){var n=this.getKeyForAutomaticLookahead(Ot,t);return this.manyInternalLogic(t,e,n)},t.prototype.manyInternalLogic=function(t,e,n){var r,i,o=this,a=this.getLaFuncFromCache(n);if(void 0!==e.DEF){if(r=e.DEF,void 0!==(i=e.GATE)){var s=a;a=function(){return i.call(o)&&s.call(o)}}}else r=e;for(var u=!0;!0===a.call(this)&&!0===u;)u=this.doSingleRepetition(r);this.attemptInRepetitionRecovery(this.manyInternal,[t,e],a,Ot,t,Xt,u)},t.prototype.manySepFirstInternal=function(t,e){var n=this.getKeyForAutomaticLookahead(Yt,t),r=this.nestedRuleBeforeClause(e,n);try{this.manySepFirstInternalLogic(t,e,n)}finally{void 0!==r&&this.nestedRuleFinallyClause(n,r)}},t.prototype.manySepFirstInternalNoCst=function(t,e){var n=this.getKeyForAutomaticLookahead(Yt,t);this.manySepFirstInternalLogic(t,e,n)},t.prototype.manySepFirstInternalLogic=function(t,e,n){var r=this,i=e.DEF,o=e.SEP;if(!0===this.getLaFuncFromCache(n).call(this)){i.call(this);for(var a=function(){return r.tokenMatcher(r.LA(1),o)};!0===this.tokenMatcher(this.LA(1),o);)this.CONSUME(o),i.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,o,a,i,Zt],a,Yt,t,Zt)}},t.prototype.repetitionSepSecondInternal=function(t,e,n,r,i){for(;n();)this.CONSUME(e),r.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,e,n,r,i],n,Ft,t,i)},t.prototype.doSingleRepetition=function(t){var e=this.getLexerPosition();return t.call(this),this.getLexerPosition()>e},t.prototype.orInternalNoCst=function(t,e){var n=(0,i.kJ)(t)?t:t.DEF,r=this.getKeyForAutomaticLookahead(Pt,e),o=this.getLaFuncFromCache(r).call(this,n);if(void 0!==o)return n[o].ALT.call(this);this.raiseNoAltException(e,t.ERR_MSG)},t.prototype.orInternal=function(t,e){var n=this.getKeyForAutomaticLookahead(Pt,e),r=this.nestedRuleBeforeClause(t,n);try{var o=(0,i.kJ)(t)?t:t.DEF,a=this.getLaFuncFromCache(n).call(this,o);if(void 0!==a){var s=o[a],u=this.nestedAltBeforeClause(s,e,Pt,a);try{return s.ALT.call(this)}finally{void 0!==u&&this.nestedRuleFinallyClause(u.shortName,u.nestedName)}}this.raiseNoAltException(e,t.ERR_MSG)}finally{void 0!==r&&this.nestedRuleFinallyClause(n,r)}},t.prototype.ruleFinallyStateUpdate=function(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),0===this.RULE_STACK.length&&!1===this.isAtEndOfInput()){var t=this.LA(1),e=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:t,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new Ne(e,t))}},t.prototype.subruleInternal=function(t,e,n){var r;try{var i=void 0!==n?n.ARGS:void 0;return r=t.call(this,e,i),this.cstPostNonTerminal(r,void 0!==n&&void 0!==n.LABEL?n.LABEL:t.ruleName),r}catch(e){this.subruleInternalError(e,n,t.ruleName)}},t.prototype.subruleInternalError=function(t,e,n){throw Fe(t)&&void 0!==t.partialCstResult&&(this.cstPostNonTerminal(t.partialCstResult,void 0!==e&&void 0!==e.LABEL?e.LABEL:n),delete t.partialCstResult),t},t.prototype.consumeInternal=function(t,e,n){var r;try{var i=this.LA(1);!0===this.tokenMatcher(i,t)?(this.consumeToken(),r=i):this.consumeInternalError(t,i,n)}catch(n){r=this.consumeInternalRecovery(t,e,n)}return this.cstPostTerminal(void 0!==n&&void 0!==n.LABEL?n.LABEL:t.name,r),r},t.prototype.consumeInternalError=function(t,e,n){var r,i=this.LA(0);throw r=void 0!==n&&n.ERR_MSG?n.ERR_MSG:this.errorMessageProvider.buildMismatchTokenMessage({expected:t,actual:e,previous:i,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new je(r,e,i))},t.prototype.consumeInternalRecovery=function(t,e,n){if(!this.recoveryEnabled||"MismatchedTokenException"!==n.name||this.isBackTracking())throw n;var r=this.getFollowsForInRuleRecovery(t,e);try{return this.tryInRuleRecovery(t,r)}catch(t){throw t.name===He?n:t}},t.prototype.saveRecogState=function(){var t=this.errors,e=(0,i.Qw)(this.RULE_STACK);return{errors:t,lexerState:this.exportLexerState(),RULE_STACK:e,CST_STACK:this.CST_STACK,LAST_EXPLICIT_RULE_STACK:this.LAST_EXPLICIT_RULE_STACK}},t.prototype.reloadRecogState=function(t){this.errors=t.errors,this.importLexerState(t.lexerState),this.RULE_STACK=t.RULE_STACK},t.prototype.ruleInvocationStateUpdate=function(t,e,n){this.RULE_OCCURRENCE_STACK.push(n),this.RULE_STACK.push(t),this.cstInvocationStateUpdate(e,t)},t.prototype.isBackTracking=function(){return 0!==this.isBackTrackingStack.length},t.prototype.getCurrRuleFullName=function(){var t=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[t]},t.prototype.shortRuleNameToFullName=function(t){return this.shortRuleNameToFull[t]},t.prototype.isAtEndOfInput=function(){return this.tokenMatcher(this.LA(1),rt)},t.prototype.reset=function(){this.resetLexerState(),this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.LAST_EXPLICIT_RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]},t}(),an=function(){function t(){}return t.prototype.initErrorHandler=function(t){this._errors=[],this.errorMessageProvider=(0,i.ce)(t.errorMessageProvider,wn.errorMessageProvider)},t.prototype.SAVE_ERROR=function(t){if(Fe(t))return t.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:(0,i.Qw)(this.RULE_OCCURRENCE_STACK)},this._errors.push(t),t;throw Error("Trying to save an Error which is not a RecognitionException")},Object.defineProperty(t.prototype,"errors",{get:function(){return(0,i.Qw)(this._errors)},set:function(t){this._errors=t},enumerable:!0,configurable:!0}),t.prototype.raiseEarlyExitException=function(t,e,n){for(var r=this.getCurrRuleFullName(),i=ce(t,this.getGAstProductions()[r],e,this.maxLookahead)[0],o=[],a=1;a<=this.maxLookahead;a++)o.push(this.LA(a));var s=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:i,actual:o,previous:this.LA(0),customUserDescription:n,ruleName:r});throw this.SAVE_ERROR(new Be(s,this.LA(1),this.LA(0)))},t.prototype.raiseNoAltException=function(t,e){for(var n=this.getCurrRuleFullName(),r=le(t,this.getGAstProductions()[n],this.maxLookahead),i=[],o=1;o<=this.maxLookahead;o++)i.push(this.LA(o));var a=this.LA(0),s=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:r,actual:i,previous:a,customUserDescription:e,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new ze(s,this.LA(1),a))},t}(),sn=function(){function t(){}return t.prototype.initContentAssist=function(){},t.prototype.computeContentAssist=function(t,e){var n=this.gastProductionsCache[t];if((0,i.o8)(n))throw Error("Rule ->"+t+"<- does not exist in this grammar.");return Qt([n],e,this.tokenMatcher,this.maxLookahead)},t.prototype.getNextPossibleTokenTypes=function(t){var e=(0,i.Ps)(t.ruleStack),n=this.getGAstProductions()[e];return new Gt(n,t).startWalking()},t}(),un={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(un);var ln=Math.pow(2,8)-1,cn=nt({name:"RECORDING_PHASE_TOKEN",pattern:$.NA});V([cn]);var dn=it(cn,"This IToken indicates the Parser is in Recording Phase\n\tSee: https://sap.github.io/chevrotain/docs/guide/internals.html#grammar-recording for details",-1,-1,-1,-1,-1,-1);Object.freeze(dn);var hn={name:"This CSTNode indicates the Parser is in Recording Phase\n\tSee: https://sap.github.io/chevrotain/docs/guide/internals.html#grammar-recording for details",children:{}},fn=function(){function t(){}return t.prototype.initGastRecorder=function(t){this.recordingProdStack=[],this.RECORDING_PHASE=!1},t.prototype.enableRecording=function(){var t=this;this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",(function(){for(var e=function(e){var n=e>0?e:"";t["CONSUME"+n]=function(t,n){return this.consumeInternalRecord(t,e,n)},t["SUBRULE"+n]=function(t,n){return this.subruleInternalRecord(t,e,n)},t["OPTION"+n]=function(t){return this.optionInternalRecord(t,e)},t["OR"+n]=function(t){return this.orInternalRecord(t,e)},t["MANY"+n]=function(t){this.manyInternalRecord(e,t)},t["MANY_SEP"+n]=function(t){this.manySepFirstInternalRecord(e,t)},t["AT_LEAST_ONE"+n]=function(t){this.atLeastOneInternalRecord(e,t)},t["AT_LEAST_ONE_SEP"+n]=function(t){this.atLeastOneSepFirstInternalRecord(e,t)}},n=0;n<10;n++)e(n);t.consume=function(t,e,n){return this.consumeInternalRecord(e,t,n)},t.subrule=function(t,e,n){return this.subruleInternalRecord(e,t,n)},t.option=function(t,e){return this.optionInternalRecord(e,t)},t.or=function(t,e){return this.orInternalRecord(e,t)},t.many=function(t,e){this.manyInternalRecord(t,e)},t.atLeastOne=function(t,e){this.atLeastOneInternalRecord(t,e)},t.ACTION=t.ACTION_RECORD,t.BACKTRACK=t.BACKTRACK_RECORD,t.LA=t.LA_RECORD}))},t.prototype.disableRecording=function(){var t=this;this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",(function(){for(var e=0;e<10;e++){var n=e>0?e:"";delete t["CONSUME"+n],delete t["SUBRULE"+n],delete t["OPTION"+n],delete t["OR"+n],delete t["MANY"+n],delete t["MANY_SEP"+n],delete t["AT_LEAST_ONE"+n],delete t["AT_LEAST_ONE_SEP"+n]}delete t.consume,delete t.subrule,delete t.option,delete t.or,delete t.many,delete t.atLeastOne,delete t.ACTION,delete t.BACKTRACK,delete t.LA}))},t.prototype.ACTION_RECORD=function(t){},t.prototype.BACKTRACK_RECORD=function(t,e){return function(){return!0}},t.prototype.LA_RECORD=function(t){return xn},t.prototype.topLevelRuleRecord=function(t,e){try{var n=new lt({definition:[],name:t});return n.name=t,this.recordingProdStack.push(n),e.call(this),this.recordingProdStack.pop(),n}catch(t){if(!0!==t.KNOWN_RECORDER_ERROR)try{t.message=t.message+'\n\t This error was thrown during the "grammar recording phase" For more info see:\n\thttps://sap.github.io/chevrotain/docs/guide/internals.html#grammar-recording'}catch(e){throw t}throw t}},t.prototype.optionInternalRecord=function(t,e){return pn.call(this,dt,t,e)},t.prototype.atLeastOneInternalRecord=function(t,e){pn.call(this,ht,e,t)},t.prototype.atLeastOneSepFirstInternalRecord=function(t,e){pn.call(this,ft,e,t,!0)},t.prototype.manyInternalRecord=function(t,e){pn.call(this,pt,e,t)},t.prototype.manySepFirstInternalRecord=function(t,e){pn.call(this,mt,e,t,!0)},t.prototype.orInternalRecord=function(t,e){return mn.call(this,t,e)},t.prototype.subruleInternalRecord=function(t,e,n){if(yn(e),!t||!1===(0,i.e$)(t,"ruleName")){var r=new Error("<SUBRULE"+_n(e)+"> argument is invalid expecting a Parser method reference but got: <"+JSON.stringify(t)+">\n inside top level rule: <"+this.recordingProdStack[0].name+">");throw r.KNOWN_RECORDER_ERROR=!0,r}var o=(0,i.fj)(this.recordingProdStack),a=t.ruleName,s=new ut({idx:e,nonTerminalName:a,referencedRule:void 0});return o.definition.push(s),this.outputCst?hn:un},t.prototype.consumeInternalRecord=function(t,e,n){if(yn(e),!G(t)){var r=new Error("<CONSUME"+_n(e)+"> argument is invalid expecting a TokenType reference but got: <"+JSON.stringify(t)+">\n inside top level rule: <"+this.recordingProdStack[0].name+">");throw r.KNOWN_RECORDER_ERROR=!0,r}var o=(0,i.fj)(this.recordingProdStack),a=new yt({idx:e,terminalType:t});return o.definition.push(a),dn},t}();function pn(t,e,n,r){void 0===r&&(r=!1),yn(n);var o=(0,i.fj)(this.recordingProdStack),a=(0,i.mf)(e)?e:e.DEF,s=new t({definition:[],idx:n});return(0,i.e$)(e,"NAME")&&(s.name=e.NAME),r&&(s.separator=e.SEP),(0,i.e$)(e,"MAX_LOOKAHEAD")&&(s.maxLookahead=e.MAX_LOOKAHEAD),this.recordingProdStack.push(s),a.call(this),o.definition.push(s),this.recordingProdStack.pop(),un}function mn(t,e){var n=this;yn(e);var r=(0,i.fj)(this.recordingProdStack),o=!1===(0,i.kJ)(t),a=!1===o?t:t.DEF,s=new _t({definition:[],idx:e,ignoreAmbiguities:o&&!0===t.IGNORE_AMBIGUITIES});(0,i.e$)(t,"NAME")&&(s.name=t.NAME),(0,i.e$)(t,"MAX_LOOKAHEAD")&&(s.maxLookahead=t.MAX_LOOKAHEAD);var u=(0,i.G)(a,(function(t){return(0,i.mf)(t.GATE)}));return s.hasPredicates=u,r.definition.push(s),(0,i.Ed)(a,(function(t){var e=new ct({definition:[]});s.definition.push(e),(0,i.e$)(t,"NAME")&&(e.name=t.NAME),(0,i.e$)(t,"IGNORE_AMBIGUITIES")?e.ignoreAmbiguities=t.IGNORE_AMBIGUITIES:(0,i.e$)(t,"GATE")&&(e.ignoreAmbiguities=!0),n.recordingProdStack.push(e),t.ALT.call(n),n.recordingProdStack.pop()})),un}function _n(t){return 0===t?"":""+t}function yn(t){if(t<0||t>ln){var e=new Error("Invalid DSL Method idx value: <"+t+">\n\tIdx value must be a none negative value smaller than "+(ln+1));throw e.KNOWN_RECORDER_ERROR=!0,e}}var vn=function(){function t(){}return t.prototype.initPerformanceTracer=function(t){if((0,i.e$)(t,"traceInitPerf")){var e=t.traceInitPerf,n="number"==typeof e;this.traceInitMaxIdent=n?e:1/0,this.traceInitPerf=n?e>0:e}else this.traceInitMaxIdent=0,this.traceInitPerf=wn.traceInitPerf;this.traceInitIndent=-1},t.prototype.TRACE_INIT=function(t,e){if(!0===this.traceInitPerf){this.traceInitIndent++;var n=new Array(this.traceInitIndent+1).join("\t");this.traceInitIndent<this.traceInitMaxIdent&&console.log(n+"--\x3e <"+t+">");var r=(0,i.HT)(e),o=r.time,a=r.value,s=o>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&s(n+"<-- <"+t+"> time: "+o+"ms"),this.traceInitIndent--,a}return e()},t}(),gn=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xn=it(rt,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(xn);var bn,wn=Object.freeze({recoveryEnabled:!1,maxLookahead:4,ignoredIssues:{},dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:Le,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),Mn=Object.freeze({recoveryValueFunc:function(){},resyncEnabled:!0});function Ln(t){return void 0===t&&(t=void 0),function(){return t}}!function(t){t[t.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",t[t.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",t[t.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",t[t.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",t[t.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",t[t.LEFT_RECURSION=5]="LEFT_RECURSION",t[t.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",t[t.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",t[t.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",t[t.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",t[t.INVALID_NESTED_RULE_NAME=10]="INVALID_NESTED_RULE_NAME",t[t.DUPLICATE_NESTED_NAME=11]="DUPLICATE_NESTED_NAME",t[t.NO_NON_EMPTY_LOOKAHEAD=12]="NO_NON_EMPTY_LOOKAHEAD",t[t.AMBIGUOUS_PREFIX_ALTS=13]="AMBIGUOUS_PREFIX_ALTS",t[t.TOO_MANY_ALTS=14]="TOO_MANY_ALTS"}(bn||(bn={}));var kn=function(){function t(t,e){void 0===e&&(e=wn),this.ignoredIssues=wn.ignoredIssues,this.definitionErrors=[],this.selfAnalysisDone=!1;var n=this;n.initErrorHandler(e),n.initLexerAdapter(),n.initLooksAhead(e),n.initRecognizerEngine(t,e),n.initRecoverable(e),n.initTreeBuilder(e),n.initContentAssist(),n.initGastRecorder(e),n.initPerformanceTracer(e),(0,i.e$)(e,"ignoredIssues")&&e.ignoredIssues!==wn.ignoredIssues&&(0,i.rr)("The <ignoredIssues> IParserConfig property is soft-deprecated and will be removed in future versions.\n\tPlease use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead."),this.ignoredIssues=(0,i.e$)(e,"ignoredIssues")?e.ignoredIssues:wn.ignoredIssues,this.skipValidations=(0,i.e$)(e,"skipValidations")?e.skipValidations:wn.skipValidations}return t.performSelfAnalysis=function(t){t.performSelfAnalysis()},t.prototype.performSelfAnalysis=function(){var e=this;this.TRACE_INIT("performSelfAnalysis",(function(){var n;e.selfAnalysisDone=!0;var r=e.className;e.TRACE_INIT("toFastProps",(function(){(0,i.SV)(e)})),e.TRACE_INIT("Grammar Recording",(function(){try{e.enableRecording(),(0,i.Ed)(e.definedRulesNames,(function(t){var n=e[t].originalGrammarAction,r=void 0;e.TRACE_INIT(t+" Rule",(function(){r=e.topLevelRuleRecord(t,n)})),e.gastProductionsCache[t]=r}))}finally{e.disableRecording()}}));var o=[];if(e.TRACE_INIT("Grammar Resolving",(function(){o=Ae({rules:(0,i.VO)(e.gastProductionsCache)}),e.definitionErrors.push.apply(e.definitionErrors,o)})),e.TRACE_INIT("Grammar Validations",(function(){if((0,i.xb)(o)&&!1===e.skipValidations){var t=De({rules:(0,i.VO)(e.gastProductionsCache),maxLookahead:e.maxLookahead,tokenTypes:(0,i.VO)(e.tokensMap),ignoredIssues:e.ignoredIssues,errMsgProvider:Te,grammarName:r});e.definitionErrors.push.apply(e.definitionErrors,t)}})),(0,i.xb)(e.definitionErrors)&&(e.recoveryEnabled&&e.TRACE_INIT("computeAllProdsFollows",(function(){var t,n,r=(t=(0,i.VO)(e.gastProductionsCache),n={},(0,i.Ed)(t,(function(t){var e=new Ct(t).startWalking();(0,i.f0)(n,e)})),n);e.resyncFollows=r})),e.TRACE_INIT("ComputeLookaheadFunctions",(function(){e.preComputeLookaheadFunctions((0,i.VO)(e.gastProductionsCache))}))),e.TRACE_INIT("expandAllNestedRuleNames",(function(){var t,n,r,o=(t=(0,i.VO)(e.gastProductionsCache),n=e.fullRuleNameToShort,r={allRuleNames:[]},(0,i.Ed)(t,(function(t){var e=n[t.name];r.allRuleNames.push(t.name);var o=new Vt(e);t.accept(o),(0,i.Ed)(o.result,(function(e){e.def,e.key;var n=e.name;r.allRuleNames.push(t.name+n)}))})),r);e.allRuleNames=o.allRuleNames})),!t.DEFER_DEFINITION_ERRORS_HANDLING&&!(0,i.xb)(e.definitionErrors))throw n=(0,i.UI)(e.definitionErrors,(function(t){return t.message})),new Error("Parser Definition Errors detected:\n "+n.join("\n-------------------------------\n"))}))},t.DEFER_DEFINITION_ERRORS_HANDLING=!1,t}();(0,i.ef)(kn,[We,Xe,en,nn,on,rn,an,sn,fn,vn]);var Tn=function(t){function e(e,n){void 0===n&&(n=wn);var r=(0,i.Cl)(n);return r.outputCst=!0,t.call(this,e,r)||this}return gn(e,t),e}(kn),Sn=function(t){function e(e,n){void 0===n&&(n=wn);var r=(0,i.Cl)(n);return r.outputCst=!1,t.call(this,e,r)||this}return gn(e,t),e}(kn);function En(t,e){var n=void 0===e?{}:e,i=n.resourceBase,o=void 0===i?"https://unpkg.com/chevrotain@"+r+"/diagrams/":i,a=n.css;return"\n\x3c!-- This is a generated file --\x3e\n<!DOCTYPE html>\n<meta charset=\"utf-8\">\n<style>\n  body {\n    background-color: hsl(30, 20%, 95%)\n  }\n</style>\n\n\n<link rel='stylesheet' href='"+(void 0===a?"https://unpkg.com/chevrotain@"+r+"/diagrams/diagrams.css":a)+"'>\n\n<script src='"+o+"vendor/railroad-diagrams.js'><\/script>\n<script src='"+o+"src/diagrams_builder.js'><\/script>\n<script src='"+o+"src/diagrams_behavior.js'><\/script>\n<script src='"+o+'src/main.js\'><\/script>\n\n<div id="diagrams" align="center"></div>    \n\n<script>\n    window.serializedGrammar = '+JSON.stringify(t,null,"  ")+';\n<\/script>\n\n<script>\n    var diagramsDiv = document.getElementById("diagrams");\n    main.drawDiagramsFromSerializedGrammar(serializedGrammar, diagramsDiv);\n<\/script>\n'}var An="\n";function Dn(t){var e;return"\nfunction "+t.name+"(tokenVocabulary, config) {\n    // invoke super constructor\n    // No support for embedded actions currently, so we can 'hardcode'\n    // The use of CstParser.\n    chevrotain.CstParser.call(this, tokenVocabulary, config)\n\n    const $ = this\n\n    "+(e=t.rules,(0,i.UI)(e,(function(t){return n=Rn(1,'$.RULE("'+(e=t).name+'", function() {')+An,(n+=On(e.definition,2))+(Rn(2,"})")+An);var e,n})).join("\n")+"\n\n    // very important to call this after all the rules have been defined.\n    // otherwise the parser may not work correctly as it will lack information\n    // derived during the self analysis phase.\n    this.performSelfAnalysis(this)\n}\n\n// inheritance as implemented in javascript in the previous decade... :(\n")+t.name+".prototype = Object.create(chevrotain.CstParser.prototype)\n"+t.name+".prototype.constructor = "+t.name+"    \n    "}function Cn(t,e){if(t instanceof ut)return function(t,e){return Rn(e,"$.SUBRULE"+t.idx+"($."+t.nonTerminalName+")"+An)}(t,e);if(t instanceof dt)return Pn("OPTION",t,e);if(t instanceof ht)return Pn("AT_LEAST_ONE",t,e);if(t instanceof ft)return Pn("AT_LEAST_ONE_SEP",t,e);if(t instanceof mt)return Pn("MANY_SEP",t,e);if(t instanceof pt)return Pn("MANY",t,e);if(t instanceof _t)return function(t,e){var n=Rn(e,"$.OR"+t.idx+"([")+An,r=(0,i.UI)(t.definition,(function(t){return function(t,e){var n=Rn(e,"{")+An;return t.name&&(n+=Rn(e+1,'NAME: "'+t.name+'",')+An),n+=Rn(e+1,"ALT: function() {")+An,n+=On(t.definition,e+1),(n+=Rn(e+1,"}")+An)+Rn(e,"}")}(t,e+1)}));return(n+=r.join(",\n"))+(An+Rn(e,"])\n"))}(t,e);if(t instanceof yt)return function(t,e){var n=t.terminalType.name;return Rn(e,"$.CONSUME"+t.idx+"(this.tokensMap."+n+")"+An)}(t,e);if(t instanceof ct)return On(t.definition,e);throw Error("non exhaustive match")}function Pn(t,e,n){var r=Rn(n,"$."+(t+e.idx)+"(");return e.name||e.separator?(r+="{\n",e.name&&(r+=Rn(n+1,'NAME: "'+e.name+'"')+","+An),e.separator&&(r+=Rn(n+1,"SEP: this.tokensMap."+e.separator.name)+","+An),r+="DEF: "+In(e.definition,n+2)+An,r+=Rn(n,"}")+An):r+=In(e.definition,n+1),r+(Rn(n,")")+An)}function In(t,e){var n="function() {\n";return(n+=On(t,e))+(Rn(e,"}")+An)}function On(t,e){var n="";return(0,i.Ed)(t,(function(t){n+=Cn(t,e+1)})),n}function Rn(t,e){return Array(4*t+1).join(" ")+e}function Yn(t){var e=function(t){return"    \n"+Dn(t)+"\nreturn new "+t.name+"(tokenVocabulary, config)    \n"}({name:t.name,rules:t.rules}),r=new Function("tokenVocabulary","config","chevrotain",e);return function(e){return r(t.tokenVocabulary,e,n(3650))}}function Fn(t){return function(t){return"\n(function (root, factory) {\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(['chevrotain'], factory);\n    } else if (typeof module === 'object' && module.exports) {\n        // Node. Does not work with strict CommonJS, but\n        // only CommonJS-like environments that support module.exports,\n        // like Node.\n        module.exports = factory(require('chevrotain'));\n    } else {\n        // Browser globals (root is window)\n        root.returnExports = factory(root.b);\n    }\n}(typeof self !== 'undefined' ? self : this, function (chevrotain) {\n\n"+Dn(t)+"\n    \nreturn {\n    "+t.name+": "+t.name+" \n}\n}));\n"}({name:t.name,rules:t.rules})}function jn(){console.warn("The clearCache function was 'soft' removed from the Chevrotain API.\n\t It performs no action other than printing this message.\n\t Please avoid using it as it will be completely removed in the future")}},5465:(t,e,n)=>{"use strict";function r(t){return t&&0===t.length}function i(t){return null==t?[]:Object.keys(t)}function o(t){for(var e=[],n=Object.keys(t),r=0;r<n.length;r++)e.push(t[n[r]]);return e}function a(t,e){for(var n=[],r=i(t),o=0;o<r.length;o++){var a=r[o];n.push(e.call(null,t[a],a))}return n}function s(t,e){for(var n=[],r=0;r<t.length;r++)n.push(e.call(null,t[r],r));return n}function u(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];Array.isArray(r)?e=e.concat(u(r)):e.push(r)}return e}function l(t){return r(t)?void 0:t[0]}function c(t){var e=t&&t.length;return e?t[e-1]:void 0}function d(t,e){if(Array.isArray(t))for(var n=0;n<t.length;n++)e.call(null,t[n],n);else{if(!C(t))throw Error("non exhaustive match");var r=i(t);for(n=0;n<r.length;n++){var o=r[n],a=t[o];e.call(null,a,o)}}}function h(t){return"string"==typeof t}function f(t){return void 0===t}function p(t){return t instanceof Function}function m(t,e){return void 0===e&&(e=1),t.slice(e,t.length)}function _(t,e){return void 0===e&&(e=1),t.slice(0,t.length-e)}function y(t,e){var n=[];if(Array.isArray(t))for(var r=0;r<t.length;r++){var i=t[r];e.call(null,i)&&n.push(i)}return n}function v(t,e){return y(t,(function(t){return!e(t)}))}function g(t,e){for(var n=Object.keys(t),r={},i=0;i<n.length;i++){var o=n[i],a=t[o];e(a)&&(r[o]=a)}return r}function x(t,e){return!!C(t)&&t.hasOwnProperty(e)}function b(t,e){return void 0!==L(t,(function(t){return t===e}))}function w(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n]);return e}function M(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}function L(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(e.call(null,r))return r}}function k(t,e){for(var n=[],r=0;r<t.length;r++){var i=t[r];e.call(null,i)&&n.push(i)}return n}function T(t,e,n){for(var r=Array.isArray(t),a=r?t:o(t),s=r?[]:i(t),u=n,l=0;l<a.length;l++)u=e.call(null,u,a[l],r?l:s[l]);return u}function S(t){return v(t,(function(t){return null==t}))}function E(t,e){void 0===e&&(e=function(t){return t});var n=[];return T(t,(function(t,r){var i=e(r);return b(n,i)?t:(n.push(i),t.concat(r))}),[])}function A(t){return Array.isArray(t)}function D(t){return t instanceof RegExp}function C(t){return t instanceof Object}function P(t,e){for(var n=0;n<t.length;n++)if(!e(t[n],n))return!1;return!0}function I(t,e){return v(t,(function(t){return b(e,t)}))}function O(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}function R(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}function Y(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r++)for(var o=e[r],a=i(o),s=0;s<a.length;s++){var u=a[s];t[u]=o[u]}return t}function F(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r++){var o=e[r];if(!f(o))for(var a=i(o),s=0;s<a.length;s++){var u=a[s];x(t,u)||(t[u]=o[u])}}return t}function j(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return F.apply(null,[{}].concat(t))}function z(t,e){var n={};return d(t,(function(t){var r=e(t),i=n[r];i?i.push(t):n[r]=[t]})),n}function N(t,e){for(var n=M(t),r=i(e),o=0;o<r.length;o++){var a=r[o],s=e[a];n[a]=s}return n}function B(){}function U(t){return t}function H(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];e.push(void 0!==r?r:void 0)}return e}function V(t){console&&console.error&&console.error("Error: "+t)}function W(t){console&&console.warn&&console.warn("Warning: "+t)}function G(){return"function"==typeof Map}function q(t,e){e.forEach((function(e){var n=e.prototype;Object.getOwnPropertyNames(n).forEach((function(r){if("constructor"!==r){var i=Object.getOwnPropertyDescriptor(n,r);i&&(i.get||i.set)?Object.defineProperty(t.prototype,r,i):t.prototype[r]=e.prototype[r]}}))}))}function X(t){function e(){}e.prototype=t;var n=new e;function r(){return typeof n.bar}return r(),r(),t}function Z(t){return t[t.length-1]}function K(t){var e=(new Date).getTime(),n=t();return{time:(new Date).getTime()-e,value:n}}n.d(e,{xb:()=>r,XP:()=>i,VO:()=>o,Q8:()=>a,UI:()=>s,xH:()=>u,Ps:()=>l,Z$:()=>c,Ed:()=>d,HD:()=>h,o8:()=>f,mf:()=>p,Cw:()=>m,j7:()=>_,hX:()=>y,d1:()=>v,ei:()=>g,e$:()=>x,r3:()=>b,Qw:()=>w,Cl:()=>M,sE:()=>L,Oq:()=>k,u4:()=>T,oA:()=>S,jj:()=>E,kJ:()=>A,Kj:()=>D,Kn:()=>C,yW:()=>P,e5:()=>I,G:()=>O,cq:()=>R,f0:()=>Y,ce:()=>j,vM:()=>z,TS:()=>N,dG:()=>B,Wd:()=>U,X0:()=>H,WB:()=>V,rr:()=>W,dU:()=>G,ef:()=>q,SV:()=>X,fj:()=>Z,HT:()=>K})},4594:(t,e,n)=>{"use strict";n.r(e),n.d(e,{dispatch:()=>l});var r={value:function(){}};function i(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new o(r)}function o(t){this._=t}function a(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function s(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function u(t,e,n){for(var i=0,o=t.length;i<o;++i)if(t[i].name===e){t[i]=r,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}o.prototype=i.prototype={constructor:o,on:function(t,e){var n,r=this._,i=a(t+"",r),o=-1,l=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<l;)if(n=(t=i[o]).type)r[n]=u(r[n],t.name,e);else if(null==e)for(n in r)r[n]=u(r[n],t.name,null);return this}for(;++o<l;)if((n=(t=i[o]).type)&&(n=s(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new o(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};const l=i},6722:(t,e,n)=>{"use strict";function r(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function i(t){return(t=r(Math.abs(t)))?t[1]:NaN}n.r(e),n.d(e,{format:()=>f,formatDefaultLocale:()=>y,formatLocale:()=>_,formatPrefix:()=>p,formatSpecifier:()=>s,precisionFixed:()=>v,precisionPrefix:()=>g,precisionRound:()=>x});var o,a=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function s(t){return new u(t)}function u(t){if(!(e=a.exec(t)))throw new Error("invalid format: "+t);var e;this.fill=e[1]||" ",this.align=e[2]||">",this.sign=e[3]||"-",this.symbol=e[4]||"",this.zero=!!e[5],this.width=e[6]&&+e[6],this.comma=!!e[7],this.precision=e[8]&&+e[8].slice(1),this.trim=!!e[9],this.type=e[10]||""}function l(t,e){var n=r(t,e);if(!n)return t+"";var i=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+i:i.length>o+1?i.slice(0,o+1)+"."+i.slice(o+1):i+new Array(o-i.length+2).join("0")}s.prototype=u.prototype,u.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const c={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return l(100*t,e)},r:l,s:function(t,e){var n=r(t,e);if(!n)return t+"";var i=n[0],a=n[1],s=a-(o=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,u=i.length;return s===u?i:s>u?i+new Array(s-u+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+r(t,Math.max(0,e+s-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function d(t){return t}var h,f,p,m=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function _(t){var e,n,r=t.grouping&&t.thousands?(e=t.grouping,n=t.thousands,function(t,r){for(var i=t.length,o=[],a=0,s=e[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(t.substring(i-=s,i+s)),!((u+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(n)}):d,a=t.currency,u=t.decimal,l=t.numerals?function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(t.numerals):d,h=t.percent||"%";function f(t){var e=(t=s(t)).fill,n=t.align,i=t.sign,d=t.symbol,f=t.zero,p=t.width,_=t.comma,y=t.precision,v=t.trim,g=t.type;"n"===g?(_=!0,g="g"):c[g]||(null==y&&(y=12),v=!0,g="g"),(f||"0"===e&&"="===n)&&(f=!0,e="0",n="=");var x="$"===d?a[0]:"#"===d&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",b="$"===d?a[1]:/[%p]/.test(g)?h:"",w=c[g],M=/[defgprs%]/.test(g);function L(t){var a,s,c,d=x,h=b;if("c"===g)h=w(t)+h,t="";else{var L=(t=+t)<0;if(t=w(Math.abs(t),y),v&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(i>0){if(!+t[r])break t;i=0}}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),L&&0==+t&&(L=!1),d=(L?"("===i?i:"-":"-"===i||"("===i?"":i)+d,h=("s"===g?m[8+o/3]:"")+h+(L&&"("===i?")":""),M)for(a=-1,s=t.length;++a<s;)if(48>(c=t.charCodeAt(a))||c>57){h=(46===c?u+t.slice(a+1):t.slice(a))+h,t=t.slice(0,a);break}}_&&!f&&(t=r(t,1/0));var k=d.length+t.length+h.length,T=k<p?new Array(p-k+1).join(e):"";switch(_&&f&&(t=r(T+t,T.length?p-h.length:1/0),T=""),n){case"<":t=d+t+h+T;break;case"=":t=d+T+t+h;break;case"^":t=T.slice(0,k=T.length>>1)+d+t+h+T.slice(k);break;default:t=T+d+t+h}return l(t)}return y=null==y?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y)),L.toString=function(){return t+""},L}return{format:f,formatPrefix:function(t,e){var n=f(((t=s(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(i(e)/3))),o=Math.pow(10,-r),a=m[8+r/3];return function(t){return n(o*t)+a}}}}function y(t){return h=_(t),f=h.format,p=h.formatPrefix,h}function v(t){return Math.max(0,-i(Math.abs(t)))}function g(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(i(e)/3)))-i(Math.abs(t)))}function x(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,i(e)-i(t))+1}y({decimal:".",thousands:",",grouping:[3],currency:["$",""]})},9187:t=>{"use strict";function e(t,e,o){o=o||2;var a,s,u,d,f,p,m,_=e&&e.length,y=_?e[0]*o:t.length,v=n(t,0,y,o,!0),g=[];if(!v||v.next===v.prev)return g;if(_&&(v=function(t,e,i,o){var a,s,u,d=[];for(a=0,s=e.length;a<s;a++)(u=n(t,e[a]*o,a<s-1?e[a+1]*o:t.length,o,!1))===u.next&&(u.steiner=!0),d.push(h(u));for(d.sort(l),a=0;a<d.length;a++)c(d[a],i),i=r(i,i.next);return i}(t,e,v,o)),t.length>80*o){a=u=t[0],s=d=t[1];for(var x=o;x<y;x+=o)(f=t[x])<a&&(a=f),(p=t[x+1])<s&&(s=p),f>u&&(u=f),p>d&&(d=p);m=0!==(m=Math.max(u-a,d-s))?1/m:0}return i(v,g,o,a,s,m),g}function n(t,e,n,r,i){var o,a;if(i===M(t,e,n,r)>0)for(o=e;o<n;o+=r)a=x(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=x(o,t[o],t[o+1],a);return a&&_(a,a.next)&&(b(a),a=a.next),a}function r(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!_(r,r.next)&&0!==m(r.prev,r,r.next))r=r.next;else{if(b(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function i(t,e,n,l,c,h,f){if(t){!f&&h&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=d(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,u,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<l&&(s++,r=r.nextZ);e++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(t,l,c,h);for(var p,m,_=t;t.prev!==t.next;)if(p=t.prev,m=t.next,h?a(t,l,c,h):o(t))e.push(p.i/n),e.push(t.i/n),e.push(m.i/n),b(t),t=m.next,_=m.next;else if((t=m)===_){f?1===f?i(t=s(t,e,n),e,n,l,c,h,2):2===f&&u(t,e,n,l,c,h):i(r(t),e,n,l,c,h,1);break}}}function o(t){var e=t.prev,n=t,r=t.next;if(m(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(f(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&m(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function a(t,e,n,r){var i=t.prev,o=t,a=t.next;if(m(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=d(s,u,e,n,r),p=d(l,c,e,n,r),_=t.prevZ,y=t.nextZ;_&&_.z>=h&&y&&y.z<=p;){if(_!==t.prev&&_!==t.next&&f(i.x,i.y,o.x,o.y,a.x,a.y,_.x,_.y)&&m(_.prev,_,_.next)>=0)return!1;if(_=_.prevZ,y!==t.prev&&y!==t.next&&f(i.x,i.y,o.x,o.y,a.x,a.y,y.x,y.y)&&m(y.prev,y,y.next)>=0)return!1;y=y.nextZ}for(;_&&_.z>=h;){if(_!==t.prev&&_!==t.next&&f(i.x,i.y,o.x,o.y,a.x,a.y,_.x,_.y)&&m(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;y&&y.z<=p;){if(y!==t.prev&&y!==t.next&&f(i.x,i.y,o.x,o.y,a.x,a.y,y.x,y.y)&&m(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function s(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!_(i,o)&&y(i,r,r.next,o)&&v(i,o)&&v(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),b(r),b(r.next),r=t=o),r=r.next}while(r!==t);return r}function u(t,e,n,o,a,s){var u=t;do{for(var l=u.next.next;l!==u.prev;){if(u.i!==l.i&&p(u,l)){var c=g(u,l);return u=r(u,u.next),c=r(c,c.next),i(u,e,n,o,a,s),void i(c,e,n,o,a,s)}l=l.next}u=u.next}while(u!==t)}function l(t,e){return t.x-e.x}function c(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n.prev;var u,l=n,c=n.x,d=n.y,h=1/0;for(r=n.next;r!==l;)i>=r.x&&r.x>=c&&i!==r.x&&f(o<d?i:a,o,c,d,o<d?a:i,o,r.x,r.y)&&((u=Math.abs(o-r.y)/(i-r.x))<h||u===h&&r.x>n.x)&&v(r,t)&&(n=r,h=u),r=r.next;return n}(t,e)){var n=g(e,t);r(n,n.next)}}function d(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function h(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function f(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function p(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&y(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&v(t,e)&&v(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)}function m(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function _(t,e){return t.x===e.x&&t.y===e.y}function y(t,e,n,r){return!!(_(t,e)&&_(n,r)||_(t,r)&&_(n,e))||m(t,e,n)>0!=m(t,e,r)>0&&m(n,r,t)>0!=m(n,r,e)>0}function v(t,e){return m(t.prev,t,t.next)<0?m(t,e,t.next)>=0&&m(t,t.prev,e)>=0:m(t,e,t.prev)<0||m(t,t.next,e)<0}function g(t,e){var n=new w(t.i,t.x,t.y),r=new w(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function x(t,e,n,r){var i=new w(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function b(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function w(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function M(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}t.exports=e,t.exports.default=e,e.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(M(t,0,o,n));if(i)for(var s=0,u=e.length;s<u;s++){var l=e[s]*n,c=s<u-1?e[s+1]*n:t.length;a-=Math.abs(M(t,l,c,n))}var d=0;for(s=0;s<r.length;s+=3){var h=r[s]*n,f=r[s+1]*n,p=r[s+2]*n;d+=Math.abs((t[h]-t[p])*(t[f+1]-t[h+1])-(t[h]-t[f])*(t[p+1]-t[h+1]))}return 0===a&&0===d?0:Math.abs((d-a)/a)},e.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}},4063:t=>{"use strict";var e=Array.isArray,n=Object.keys,r=Object.prototype.hasOwnProperty;t.exports=function t(i,o){if(i===o)return!0;if(i&&o&&"object"==typeof i&&"object"==typeof o){var a,s,u,l=e(i),c=e(o);if(l&&c){if((s=i.length)!=o.length)return!1;for(a=s;0!=a--;)if(!t(i[a],o[a]))return!1;return!0}if(l!=c)return!1;var d=i instanceof Date,h=o instanceof Date;if(d!=h)return!1;if(d&&h)return i.getTime()==o.getTime();var f=i instanceof RegExp,p=o instanceof RegExp;if(f!=p)return!1;if(f&&p)return i.toString()==o.toString();var m=n(i);if((s=m.length)!==n(o).length)return!1;for(a=s;0!=a--;)if(!r.call(o,m[a]))return!1;for(a=s;0!=a--;)if(!t(i[u=m[a]],o[u]))return!1;return!0}return i!=i&&o!=o}},1143:t=>{"use strict";t.exports=function(t,e,n,r,i,o,a,s){if(!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,o,a,s],c=0;(u=new Error(e.replace(/%s/g,(function(){return l[c++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}}},2723:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(6149);e.Legend=r.default},6149:function(t,e,n){"use strict";var r=this&&this.__assign||Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};Object.defineProperty(e,"__esModule",{value:!0});var i=n(1148),o=n(4607),a=n(4594),s=n(6722);function u(t,e){var n=this;return i.default("div.tick",{on:{click:function(){return e.call("open",n,t.index)}}})}function l(t,e){var n=this;return i.default("div.open-toggle",{on:{click:function(){e.call("toggle",n,t)}}})}function c(t,e,n){var r=this;return i.default("div.lock"+(t?".locked":".unlocked"),{on:{click:function(){return n.call("lock",r,{locked:t,index:e})}}},[i.default("svg",{attrs:{viewBox:[0,0,48,48]}},[i.default("g",{style:{stroke:"white"}},[i.default("path",{attrs:{d:t?"M34,20v-4c0-5.5-4.5-10-10-10c-5.5,0-10,4.5-10,10v4H8v20h32V20H34z M18,16c0-3.3,2.7-6,6-6s6,2.7,6,6v4H18V16z":"M18,20v-8c0-3.3,2.7-6,6-6s6,2.7,6,6v2h4v-2c0-5.5-4.5-10-10-10c-5.5,0-10,4.5-10,10v8H8v20h32V20H18z"}})])])])}function d(t,e,n){var r=this;return i.default("input",{hook:{update:function(t,n){n.elm.value=e.value}},props:{value:e.value},on:{focus:function(t){t.target.select()},blur:function(i){var o,a,s=(o=e.value,a=i.target.value,isNaN(parseFloat(a))?parseFloat(o):parseFloat(a)),u=t.domain,l=u[0],c=u[1];n.call("input",r,{index:t.index,domain:0===e.index?[s,c]:[l,s]})},keydown:function(t){"Enter"===t.code&&t.target.blur()}}})}function h(t,e){var n="number"==typeof t.index;return i.default("div.legend.gradient-legend"+(n?".with-header":".legendables")+(t.open?".open":".collapsed")+(t.position?"."+t.position:""),[n?i.default("div.header",[i.default("div.title-text",t.title),u(t,e)]):i.default("div"),t.open?i.default("div.range",t.range.map((function(n,r){var o,a=0===r||r===t.range.length-1,u=Array.isArray(t.domain)?(o=function(t,e,n){if(void 0===n&&(n=9),0===e)return t[0];if(e+1===n)return t[1];var r=(t[1]-t[0])/n;return t[0]+r*e}(t.domain,r,t.range.length),String(o).length<=4?function(t){return"number"==typeof t?s.format(",")(parseFloat(t.toFixed(2))):t}(o):o<1e-4?s.format(".2")(o):s.format(".2s")(o)):null,l=Array.isArray(t.domain)?t.domain:[null,null];return l[0],l[1],i.default("div.block",[i.default("div.color",{style:{background:n}}),i.default("div.text."+(a?"extent":"step"),[i.default("span",""+(l.length>2?l[r]:u))].concat(a?[d(t,{value:2===l.length?l[0===r?0:1]:l[r],index:r},e)]:[]))])})).slice()):i.default("div"),t.open?c(t.locked,t.index,e):i.default("div")])}function f(t,e){var n=this,r="number"==typeof t.index;return i.default("div.legend.nominal-legend"+(r?"":".legendables")+(t.open?".open":".collapsed")+(t.position?"."+t.position:""),[r?i.default("div"):l(t,e),t.title&&i.default("div.header",[i.default("div.title-text",t.title),u(t,e)]),t.open?i.default("div.body",t.domain.map((function(r,o){return i.default("div.legend-row",{on:{click:function(){return e.call("filter",n,r)}}},[i.default("div.color",{style:{background:t.range[o]}}),i.default("div.text",""+r)])}))):i.default("div")])}function p(t,e){return i.default("div.legendables"+(t.open?".open":".collapsed")+(t.list.length>1?".show-ticks":""),{style:{maxHeight:t.maxHeight+"px"}},[l(t,e)].concat(t.list.map((function(t,n){return"gradient"===t.type?h(r({},t,{index:n}),e):"nominal"===t.type?f(r({},t,{index:n}),e):void 0}))))}e.renderGradientLegend=h,e.renderNominalLegend=f,e.renderStackedLegend=p;var m=function(){function t(t){var e=this;this.setState=function(t){var n;return e.state="function"==typeof t?t(e.state):t,n="gradient"===e.state.type?h(e.state,e.dispatch):"nominal"===e.state.type?f(e.state,e.dispatch):"stacked"===e.state.type?p(e.state,e.dispatch):i.default("div"),e.node=o.patch(e.node,n),e.dispatch.call("doneRender",e,t),e.node},this.node=t,this.dispatch=a.dispatch("filter","input","open","lock","toggle","doneRender"),this.state=null}return t.prototype.on=function(t,e){this.dispatch.on(t,e)},t}();e.default=m},4607:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1107),i=n(9169),o=n(8463),a=n(100),s=n(9714),u=n(4789);e.patch=r.init([o.default,a.default,s.default,i.default,u.default])},6486:function(t,e,n){var r;t=n.nmd(t),function(){var i,o="Expected a function",a="__lodash_hash_undefined__",s="__lodash_placeholder__",u=32,l=128,c=1/0,d=9007199254740991,h=NaN,f=4294967295,p=[["ary",l],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",u],["partialRight",64],["rearg",256]],m="[object Arguments]",_="[object Array]",y="[object Boolean]",v="[object Date]",g="[object Error]",x="[object Function]",b="[object GeneratorFunction]",w="[object Map]",M="[object Number]",L="[object Object]",k="[object Promise]",T="[object RegExp]",S="[object Set]",E="[object String]",A="[object Symbol]",D="[object WeakMap]",C="[object ArrayBuffer]",P="[object DataView]",I="[object Float32Array]",O="[object Float64Array]",R="[object Int8Array]",Y="[object Int16Array]",F="[object Int32Array]",j="[object Uint8Array]",z="[object Uint8ClampedArray]",N="[object Uint16Array]",B="[object Uint32Array]",U=/\b__p \+= '';/g,H=/\b(__p \+=) '' \+/g,V=/(__e\(.*?\)|\b__t\)) \+\n'';/g,W=/&(?:amp|lt|gt|quot|#39);/g,G=/[&<>"']/g,q=RegExp(W.source),X=RegExp(G.source),Z=/<%-([\s\S]+?)%>/g,K=/<%([\s\S]+?)%>/g,J=/<%=([\s\S]+?)%>/g,$=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,et=/[\\^$.*+?()[\]{}|]/g,nt=RegExp(et.source),rt=/^\s+|\s+$/g,it=/^\s+/,ot=/\s+$/,at=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,st=/\{\n\/\* \[wrapped with (.+)\] \*/,ut=/,? & /,lt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ct=/\\(\\)?/g,dt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ht=/\w*$/,ft=/^[-+]0x[0-9a-f]+$/i,pt=/^0b[01]+$/i,mt=/^\[object .+?Constructor\]$/,_t=/^0o[0-7]+$/i,yt=/^(?:0|[1-9]\d*)$/,vt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,gt=/($^)/,xt=/['\n\r\u2028\u2029\\]/g,bt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",wt="a-z\\xdf-\\xf6\\xf8-\\xff",Mt="A-Z\\xc0-\\xd6\\xd8-\\xde",Lt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",kt="["+Lt+"]",Tt="["+bt+"]",St="\\d+",Et="["+wt+"]",At="[^\\ud800-\\udfff"+Lt+St+"\\u2700-\\u27bf"+wt+Mt+"]",Dt="\\ud83c[\\udffb-\\udfff]",Ct="[^\\ud800-\\udfff]",Pt="(?:\\ud83c[\\udde6-\\uddff]){2}",It="[\\ud800-\\udbff][\\udc00-\\udfff]",Ot="["+Mt+"]",Rt="(?:"+Et+"|"+At+")",Yt="(?:"+Ot+"|"+At+")",Ft="(?:['](?:d|ll|m|re|s|t|ve))?",jt="(?:['](?:D|LL|M|RE|S|T|VE))?",zt="(?:"+Tt+"|"+Dt+")?",Nt="[\\ufe0e\\ufe0f]?",Bt=Nt+zt+"(?:\\u200d(?:"+[Ct,Pt,It].join("|")+")"+Nt+zt+")*",Ut="(?:"+["[\\u2700-\\u27bf]",Pt,It].join("|")+")"+Bt,Ht="(?:"+[Ct+Tt+"?",Tt,Pt,It,"[\\ud800-\\udfff]"].join("|")+")",Vt=RegExp("[']","g"),Wt=RegExp(Tt,"g"),Gt=RegExp(Dt+"(?="+Dt+")|"+Ht+Bt,"g"),qt=RegExp([Ot+"?"+Et+"+"+Ft+"(?="+[kt,Ot,"$"].join("|")+")",Yt+"+"+jt+"(?="+[kt,Ot+Rt,"$"].join("|")+")",Ot+"?"+Rt+"+"+Ft,Ot+"+"+jt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",St,Ut].join("|"),"g"),Xt=RegExp("[\\u200d\\ud800-\\udfff"+bt+"\\ufe0e\\ufe0f]"),Zt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Kt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Jt=-1,$t={};$t[I]=$t[O]=$t[R]=$t[Y]=$t[F]=$t[j]=$t[z]=$t[N]=$t[B]=!0,$t[m]=$t[_]=$t[C]=$t[y]=$t[P]=$t[v]=$t[g]=$t[x]=$t[w]=$t[M]=$t[L]=$t[T]=$t[S]=$t[E]=$t[D]=!1;var Qt={};Qt[m]=Qt[_]=Qt[C]=Qt[P]=Qt[y]=Qt[v]=Qt[I]=Qt[O]=Qt[R]=Qt[Y]=Qt[F]=Qt[w]=Qt[M]=Qt[L]=Qt[T]=Qt[S]=Qt[E]=Qt[A]=Qt[j]=Qt[z]=Qt[N]=Qt[B]=!0,Qt[g]=Qt[x]=Qt[D]=!1;var te={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ee=parseFloat,ne=parseInt,re="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,ie="object"==typeof self&&self&&self.Object===Object&&self,oe=re||ie||Function("return this")(),ae=e&&!e.nodeType&&e,se=ae&&t&&!t.nodeType&&t,ue=se&&se.exports===ae,le=ue&&re.process,ce=function(){try{return se&&se.require&&se.require("util").types||le&&le.binding&&le.binding("util")}catch(t){}}(),de=ce&&ce.isArrayBuffer,he=ce&&ce.isDate,fe=ce&&ce.isMap,pe=ce&&ce.isRegExp,me=ce&&ce.isSet,_e=ce&&ce.isTypedArray;function ye(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function ve(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function ge(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function xe(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function be(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function we(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function Me(t,e){return!(null==t||!t.length)&&Ie(t,e,0)>-1}function Le(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function ke(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function Te(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function Se(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function Ee(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function Ae(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var De=Fe("length");function Ce(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function Pe(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function Ie(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):Pe(t,Re,n)}function Oe(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function Re(t){return t!=t}function Ye(t,e){var n=null==t?0:t.length;return n?Ne(t,e)/n:h}function Fe(t){return function(e){return null==e?i:e[t]}}function je(t){return function(e){return null==t?i:t[e]}}function ze(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function Ne(t,e){for(var n,r=-1,o=t.length;++r<o;){var a=e(t[r]);a!==i&&(n=n===i?a:n+a)}return n}function Be(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Ue(t){return function(e){return t(e)}}function He(t,e){return ke(e,(function(e){return t[e]}))}function Ve(t,e){return t.has(e)}function We(t,e){for(var n=-1,r=t.length;++n<r&&Ie(e,t[n],0)>-1;);return n}function Ge(t,e){for(var n=t.length;n--&&Ie(e,t[n],0)>-1;);return n}function qe(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}var Xe=je({:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"}),Ze=je({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Ke(t){return"\\"+te[t]}function Je(t){return Xt.test(t)}function $e(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function Qe(t,e){return function(n){return t(e(n))}}function tn(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==s||(t[n]=s,o[i++]=n)}return o}function en(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function nn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function rn(t){return Je(t)?function(t){for(var e=Gt.lastIndex=0;Gt.test(t);)++e;return e}(t):De(t)}function on(t){return Je(t)?function(t){return t.match(Gt)||[]}(t):function(t){return t.split("")}(t)}var an=je({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),sn=function t(e){var n,r=(e=null==e?oe:sn.defaults(oe.Object(),e,sn.pick(oe,Kt))).Array,bt=e.Date,wt=e.Error,Mt=e.Function,Lt=e.Math,kt=e.Object,Tt=e.RegExp,St=e.String,Et=e.TypeError,At=r.prototype,Dt=Mt.prototype,Ct=kt.prototype,Pt=e["__core-js_shared__"],It=Dt.toString,Ot=Ct.hasOwnProperty,Rt=0,Yt=(n=/[^.]+$/.exec(Pt&&Pt.keys&&Pt.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Ft=Ct.toString,jt=It.call(kt),zt=oe._,Nt=Tt("^"+It.call(Ot).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Bt=ue?e.Buffer:i,Ut=e.Symbol,Ht=e.Uint8Array,Gt=Bt?Bt.allocUnsafe:i,Xt=Qe(kt.getPrototypeOf,kt),te=kt.create,re=Ct.propertyIsEnumerable,ie=At.splice,ae=Ut?Ut.isConcatSpreadable:i,se=Ut?Ut.iterator:i,le=Ut?Ut.toStringTag:i,ce=function(){try{var t=uo(kt,"defineProperty");return t({},"",{}),t}catch(t){}}(),De=e.clearTimeout!==oe.clearTimeout&&e.clearTimeout,je=bt&&bt.now!==oe.Date.now&&bt.now,un=e.setTimeout!==oe.setTimeout&&e.setTimeout,ln=Lt.ceil,cn=Lt.floor,dn=kt.getOwnPropertySymbols,hn=Bt?Bt.isBuffer:i,fn=e.isFinite,pn=At.join,mn=Qe(kt.keys,kt),_n=Lt.max,yn=Lt.min,vn=bt.now,gn=e.parseInt,xn=Lt.random,bn=At.reverse,wn=uo(e,"DataView"),Mn=uo(e,"Map"),Ln=uo(e,"Promise"),kn=uo(e,"Set"),Tn=uo(e,"WeakMap"),Sn=uo(kt,"create"),En=Tn&&new Tn,An={},Dn=jo(wn),Cn=jo(Mn),Pn=jo(Ln),In=jo(kn),On=jo(Tn),Rn=Ut?Ut.prototype:i,Yn=Rn?Rn.valueOf:i,Fn=Rn?Rn.toString:i;function jn(t){if(es(t)&&!Va(t)&&!(t instanceof Un)){if(t instanceof Bn)return t;if(Ot.call(t,"__wrapped__"))return zo(t)}return new Bn(t)}var zn=function(){function t(){}return function(e){if(!ts(e))return{};if(te)return te(e);t.prototype=e;var n=new t;return t.prototype=i,n}}();function Nn(){}function Bn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i}function Un(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=f,this.__views__=[]}function Hn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Vn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Wn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Gn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Wn;++e<n;)this.add(t[e])}function qn(t){var e=this.__data__=new Vn(t);this.size=e.size}function Xn(t,e){var n=Va(t),r=!n&&Ha(t),i=!n&&!r&&Xa(t),o=!n&&!r&&!i&&ls(t),a=n||r||i||o,s=a?Be(t.length,St):[],u=s.length;for(var l in t)!e&&!Ot.call(t,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||_o(l,u))||s.push(l);return s}function Zn(t){var e=t.length;return e?t[Wr(0,e-1)]:i}function Kn(t,e){return Io(Ti(t),or(e,0,t.length))}function Jn(t){return Io(Ti(t))}function $n(t,e,n){(n!==i&&!Na(t[e],n)||n===i&&!(e in t))&&rr(t,e,n)}function Qn(t,e,n){var r=t[e];Ot.call(t,e)&&Na(r,n)&&(n!==i||e in t)||rr(t,e,n)}function tr(t,e){for(var n=t.length;n--;)if(Na(t[n][0],e))return n;return-1}function er(t,e,n,r){return cr(t,(function(t,i,o){e(r,t,n(t),o)})),r}function nr(t,e){return t&&Si(e,Cs(e),t)}function rr(t,e,n){"__proto__"==e&&ce?ce(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function ir(t,e){for(var n=-1,o=e.length,a=r(o),s=null==t;++n<o;)a[n]=s?i:Ts(t,e[n]);return a}function or(t,e,n){return t==t&&(n!==i&&(t=t<=n?t:n),e!==i&&(t=t>=e?t:e)),t}function ar(t,e,n,r,o,a){var s,u=1&e,l=2&e,c=4&e;if(n&&(s=o?n(t,r,o,a):n(t)),s!==i)return s;if(!ts(t))return t;var d=Va(t);if(d){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Ot.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!u)return Ti(t,s)}else{var h=ho(t),f=h==x||h==b;if(Xa(t))return xi(t,u);if(h==L||h==m||f&&!o){if(s=l||f?{}:po(t),!u)return l?function(t,e){return Si(t,co(t),e)}(t,function(t,e){return t&&Si(e,Ps(e),t)}(s,t)):function(t,e){return Si(t,lo(t),e)}(t,nr(s,t))}else{if(!Qt[h])return o?t:{};s=function(t,e,n){var r,i=t.constructor;switch(e){case C:return bi(t);case y:case v:return new i(+t);case P:return function(t,e){var n=e?bi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case I:case O:case R:case Y:case F:case j:case z:case N:case B:return wi(t,n);case w:return new i;case M:case E:return new i(t);case T:return function(t){var e=new t.constructor(t.source,ht.exec(t));return e.lastIndex=t.lastIndex,e}(t);case S:return new i;case A:return r=t,Yn?kt(Yn.call(r)):{}}}(t,h,u)}}a||(a=new qn);var p=a.get(t);if(p)return p;a.set(t,s),as(t)?t.forEach((function(r){s.add(ar(r,e,n,r,t,a))})):ns(t)&&t.forEach((function(r,i){s.set(i,ar(r,e,n,i,t,a))}));var _=d?i:(c?l?eo:to:l?Ps:Cs)(t);return ge(_||t,(function(r,i){_&&(r=t[i=r]),Qn(s,i,ar(r,e,n,i,t,a))})),s}function sr(t,e,n){var r=n.length;if(null==t)return!r;for(t=kt(t);r--;){var o=n[r],a=e[o],s=t[o];if(s===i&&!(o in t)||!a(s))return!1}return!0}function ur(t,e,n){if("function"!=typeof t)throw new Et(o);return Ao((function(){t.apply(i,n)}),e)}function lr(t,e,n,r){var i=-1,o=Me,a=!0,s=t.length,u=[],l=e.length;if(!s)return u;n&&(e=ke(e,Ue(n))),r?(o=Le,a=!1):e.length>=200&&(o=Ve,a=!1,e=new Gn(e));t:for(;++i<s;){var c=t[i],d=null==n?c:n(c);if(c=r||0!==c?c:0,a&&d==d){for(var h=l;h--;)if(e[h]===d)continue t;u.push(c)}else o(e,d,r)||u.push(c)}return u}jn.templateSettings={escape:Z,evaluate:K,interpolate:J,variable:"",imports:{_:jn}},jn.prototype=Nn.prototype,jn.prototype.constructor=jn,Bn.prototype=zn(Nn.prototype),Bn.prototype.constructor=Bn,Un.prototype=zn(Nn.prototype),Un.prototype.constructor=Un,Hn.prototype.clear=function(){this.__data__=Sn?Sn(null):{},this.size=0},Hn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Hn.prototype.get=function(t){var e=this.__data__;if(Sn){var n=e[t];return n===a?i:n}return Ot.call(e,t)?e[t]:i},Hn.prototype.has=function(t){var e=this.__data__;return Sn?e[t]!==i:Ot.call(e,t)},Hn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Sn&&e===i?a:e,this},Vn.prototype.clear=function(){this.__data__=[],this.size=0},Vn.prototype.delete=function(t){var e=this.__data__,n=tr(e,t);return!(n<0||(n==e.length-1?e.pop():ie.call(e,n,1),--this.size,0))},Vn.prototype.get=function(t){var e=this.__data__,n=tr(e,t);return n<0?i:e[n][1]},Vn.prototype.has=function(t){return tr(this.__data__,t)>-1},Vn.prototype.set=function(t,e){var n=this.__data__,r=tr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Wn.prototype.clear=function(){this.size=0,this.__data__={hash:new Hn,map:new(Mn||Vn),string:new Hn}},Wn.prototype.delete=function(t){var e=ao(this,t).delete(t);return this.size-=e?1:0,e},Wn.prototype.get=function(t){return ao(this,t).get(t)},Wn.prototype.has=function(t){return ao(this,t).has(t)},Wn.prototype.set=function(t,e){var n=ao(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Gn.prototype.add=Gn.prototype.push=function(t){return this.__data__.set(t,a),this},Gn.prototype.has=function(t){return this.__data__.has(t)},qn.prototype.clear=function(){this.__data__=new Vn,this.size=0},qn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},qn.prototype.get=function(t){return this.__data__.get(t)},qn.prototype.has=function(t){return this.__data__.has(t)},qn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Vn){var r=n.__data__;if(!Mn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Wn(r)}return n.set(t,e),this.size=n.size,this};var cr=Di(vr),dr=Di(gr,!0);function hr(t,e){var n=!0;return cr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function fr(t,e,n){for(var r=-1,o=t.length;++r<o;){var a=t[r],s=e(a);if(null!=s&&(u===i?s==s&&!us(s):n(s,u)))var u=s,l=a}return l}function pr(t,e){var n=[];return cr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function mr(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=mo),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?mr(s,e-1,n,r,i):Te(i,s):r||(i[i.length]=s)}return i}var _r=Ci(),yr=Ci(!0);function vr(t,e){return t&&_r(t,e,Cs)}function gr(t,e){return t&&yr(t,e,Cs)}function xr(t,e){return we(e,(function(e){return Ja(t[e])}))}function br(t,e){for(var n=0,r=(e=_i(e,t)).length;null!=t&&n<r;)t=t[Fo(e[n++])];return n&&n==r?t:i}function wr(t,e,n){var r=e(t);return Va(t)?r:Te(r,n(t))}function Mr(t){return null==t?t===i?"[object Undefined]":"[object Null]":le&&le in kt(t)?function(t){var e=Ot.call(t,le),n=t[le];try{t[le]=i;var r=!0}catch(t){}var o=Ft.call(t);return r&&(e?t[le]=n:delete t[le]),o}(t):function(t){return Ft.call(t)}(t)}function Lr(t,e){return t>e}function kr(t,e){return null!=t&&Ot.call(t,e)}function Tr(t,e){return null!=t&&e in kt(t)}function Sr(t,e,n){for(var o=n?Le:Me,a=t[0].length,s=t.length,u=s,l=r(s),c=1/0,d=[];u--;){var h=t[u];u&&e&&(h=ke(h,Ue(e))),c=yn(h.length,c),l[u]=!n&&(e||a>=120&&h.length>=120)?new Gn(u&&h):i}h=t[0];var f=-1,p=l[0];t:for(;++f<a&&d.length<c;){var m=h[f],_=e?e(m):m;if(m=n||0!==m?m:0,!(p?Ve(p,_):o(d,_,n))){for(u=s;--u;){var y=l[u];if(!(y?Ve(y,_):o(t[u],_,n)))continue t}p&&p.push(_),d.push(m)}}return d}function Er(t,e,n){var r=null==(t=ko(t,e=_i(e,t)))?t:t[Fo(Ko(e))];return null==r?i:ye(r,t,n)}function Ar(t){return es(t)&&Mr(t)==m}function Dr(t,e,n,r,o){return t===e||(null==t||null==e||!es(t)&&!es(e)?t!=t&&e!=e:function(t,e,n,r,o,a){var s=Va(t),u=Va(e),l=s?_:ho(t),c=u?_:ho(e),d=(l=l==m?L:l)==L,h=(c=c==m?L:c)==L,f=l==c;if(f&&Xa(t)){if(!Xa(e))return!1;s=!0,d=!1}if(f&&!d)return a||(a=new qn),s||ls(t)?$i(t,e,n,r,o,a):function(t,e,n,r,i,o,a){switch(n){case P:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case C:return!(t.byteLength!=e.byteLength||!o(new Ht(t),new Ht(e)));case y:case v:case M:return Na(+t,+e);case g:return t.name==e.name&&t.message==e.message;case T:case E:return t==e+"";case w:var s=$e;case S:var u=1&r;if(s||(s=en),t.size!=e.size&&!u)return!1;var l=a.get(t);if(l)return l==e;r|=2,a.set(t,e);var c=$i(s(t),s(e),r,i,o,a);return a.delete(t),c;case A:if(Yn)return Yn.call(t)==Yn.call(e)}return!1}(t,e,l,n,r,o,a);if(!(1&n)){var p=d&&Ot.call(t,"__wrapped__"),x=h&&Ot.call(e,"__wrapped__");if(p||x){var b=p?t.value():t,k=x?e.value():e;return a||(a=new qn),o(b,k,n,r,a)}}return!!f&&(a||(a=new qn),function(t,e,n,r,o,a){var s=1&n,u=to(t),l=u.length;if(l!=to(e).length&&!s)return!1;for(var c=l;c--;){var d=u[c];if(!(s?d in e:Ot.call(e,d)))return!1}var h=a.get(t);if(h&&a.get(e))return h==e;var f=!0;a.set(t,e),a.set(e,t);for(var p=s;++c<l;){var m=t[d=u[c]],_=e[d];if(r)var y=s?r(_,m,d,e,t,a):r(m,_,d,t,e,a);if(!(y===i?m===_||o(m,_,n,r,a):y)){f=!1;break}p||(p="constructor"==d)}if(f&&!p){var v=t.constructor,g=e.constructor;v==g||!("constructor"in t)||!("constructor"in e)||"function"==typeof v&&v instanceof v&&"function"==typeof g&&g instanceof g||(f=!1)}return a.delete(t),a.delete(e),f}(t,e,n,r,o,a))}(t,e,n,r,Dr,o))}function Cr(t,e,n,r){var o=n.length,a=o,s=!r;if(null==t)return!a;for(t=kt(t);o--;){var u=n[o];if(s&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<a;){var l=(u=n[o])[0],c=t[l],d=u[1];if(s&&u[2]){if(c===i&&!(l in t))return!1}else{var h=new qn;if(r)var f=r(c,d,l,t,e,h);if(!(f===i?Dr(d,c,3,r,h):f))return!1}}return!0}function Pr(t){return!(!ts(t)||(e=t,Yt&&Yt in e))&&(Ja(t)?Nt:mt).test(jo(t));var e}function Ir(t){return"function"==typeof t?t:null==t?ru:"object"==typeof t?Va(t)?jr(t[0],t[1]):Fr(t):hu(t)}function Or(t){if(!bo(t))return mn(t);var e=[];for(var n in kt(t))Ot.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Rr(t,e){return t<e}function Yr(t,e){var n=-1,i=Ga(t)?r(t.length):[];return cr(t,(function(t,r,o){i[++n]=e(t,r,o)})),i}function Fr(t){var e=so(t);return 1==e.length&&e[0][2]?Mo(e[0][0],e[0][1]):function(n){return n===t||Cr(n,t,e)}}function jr(t,e){return vo(t)&&wo(e)?Mo(Fo(t),e):function(n){var r=Ts(n,t);return r===i&&r===e?Ss(n,t):Dr(e,r,3)}}function zr(t,e,n,r,o){t!==e&&_r(e,(function(a,s){if(o||(o=new qn),ts(a))!function(t,e,n,r,o,a,s){var u=So(t,n),l=So(e,n),c=s.get(l);if(c)$n(t,n,c);else{var d=a?a(u,l,n+"",t,e,s):i,h=d===i;if(h){var f=Va(l),p=!f&&Xa(l),m=!f&&!p&&ls(l);d=l,f||p||m?Va(u)?d=u:qa(u)?d=Ti(u):p?(h=!1,d=xi(l,!0)):m?(h=!1,d=wi(l,!0)):d=[]:is(l)||Ha(l)?(d=u,Ha(u)?d=ys(u):ts(u)&&!Ja(u)||(d=po(l))):h=!1}h&&(s.set(l,d),o(d,l,r,a,s),s.delete(l)),$n(t,n,d)}}(t,e,s,n,zr,r,o);else{var u=r?r(So(t,s),a,s+"",t,e,o):i;u===i&&(u=a),$n(t,s,u)}}),Ps)}function Nr(t,e){var n=t.length;if(n)return _o(e+=e<0?n:0,n)?t[e]:i}function Br(t,e,n){var r=-1;return e=ke(e.length?e:[ru],Ue(oo())),function(t,e){var r=t.length;for(t.sort((function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var u=Mi(i[r],o[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}));r--;)t[r]=t[r].value;return t}(Yr(t,(function(t,n,i){return{criteria:ke(e,(function(e){return e(t)})),index:++r,value:t}})))}function Ur(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=br(t,a);n(s,a)&&Kr(o,_i(a,t),s)}return o}function Hr(t,e,n,r){var i=r?Oe:Ie,o=-1,a=e.length,s=t;for(t===e&&(e=Ti(e)),n&&(s=ke(t,Ue(n)));++o<a;)for(var u=0,l=e[o],c=n?n(l):l;(u=i(s,c,u,r))>-1;)s!==t&&ie.call(s,u,1),ie.call(t,u,1);return t}function Vr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;_o(i)?ie.call(t,i,1):ui(t,i)}}return t}function Wr(t,e){return t+cn(xn()*(e-t+1))}function Gr(t,e){var n="";if(!t||e<1||e>d)return n;do{e%2&&(n+=t),(e=cn(e/2))&&(t+=t)}while(e);return n}function qr(t,e){return Do(Lo(t,e,ru),t+"")}function Xr(t){return Zn(Ns(t))}function Zr(t,e){var n=Ns(t);return Io(n,or(e,0,n.length))}function Kr(t,e,n,r){if(!ts(t))return t;for(var o=-1,a=(e=_i(e,t)).length,s=a-1,u=t;null!=u&&++o<a;){var l=Fo(e[o]),c=n;if(o!=s){var d=u[l];(c=r?r(d,l,u):i)===i&&(c=ts(d)?d:_o(e[o+1])?[]:{})}Qn(u,l,c),u=u[l]}return t}var Jr=En?function(t,e){return En.set(t,e),t}:ru,$r=ce?function(t,e){return ce(t,"toString",{configurable:!0,enumerable:!1,value:tu(e),writable:!0})}:ru;function Qr(t){return Io(Ns(t))}function ti(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var a=r(o);++i<o;)a[i]=t[i+e];return a}function ei(t,e){var n;return cr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function ni(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!us(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return ri(t,e,ru,n)}function ri(t,e,n,r){e=n(e);for(var o=0,a=null==t?0:t.length,s=e!=e,u=null===e,l=us(e),c=e===i;o<a;){var d=cn((o+a)/2),h=n(t[d]),f=h!==i,p=null===h,m=h==h,_=us(h);if(s)var y=r||m;else y=c?m&&(r||f):u?m&&f&&(r||!p):l?m&&f&&!p&&(r||!_):!p&&!_&&(r?h<=e:h<e);y?o=d+1:a=d}return yn(a,4294967294)}function ii(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!Na(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function oi(t){return"number"==typeof t?t:us(t)?h:+t}function ai(t){if("string"==typeof t)return t;if(Va(t))return ke(t,ai)+"";if(us(t))return Fn?Fn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function si(t,e,n){var r=-1,i=Me,o=t.length,a=!0,s=[],u=s;if(n)a=!1,i=Le;else if(o>=200){var l=e?null:Gi(t);if(l)return en(l);a=!1,i=Ve,u=new Gn}else u=e?[]:s;t:for(;++r<o;){var c=t[r],d=e?e(c):c;if(c=n||0!==c?c:0,a&&d==d){for(var h=u.length;h--;)if(u[h]===d)continue t;e&&u.push(d),s.push(c)}else i(u,d,n)||(u!==s&&u.push(d),s.push(c))}return s}function ui(t,e){return null==(t=ko(t,e=_i(e,t)))||delete t[Fo(Ko(e))]}function li(t,e,n,r){return Kr(t,e,n(br(t,e)),r)}function ci(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?ti(t,r?0:o,r?o+1:i):ti(t,r?o+1:0,r?i:o)}function di(t,e){var n=t;return n instanceof Un&&(n=n.value()),Se(e,(function(t,e){return e.func.apply(e.thisArg,Te([t],e.args))}),n)}function hi(t,e,n){var i=t.length;if(i<2)return i?si(t[0]):[];for(var o=-1,a=r(i);++o<i;)for(var s=t[o],u=-1;++u<i;)u!=o&&(a[o]=lr(a[o]||s,t[u],e,n));return si(mr(a,1),e,n)}function fi(t,e,n){for(var r=-1,o=t.length,a=e.length,s={};++r<o;){var u=r<a?e[r]:i;n(s,t[r],u)}return s}function pi(t){return qa(t)?t:[]}function mi(t){return"function"==typeof t?t:ru}function _i(t,e){return Va(t)?t:vo(t,e)?[t]:Yo(vs(t))}var yi=qr;function vi(t,e,n){var r=t.length;return n=n===i?r:n,!e&&n>=r?t:ti(t,e,n)}var gi=De||function(t){return oe.clearTimeout(t)};function xi(t,e){if(e)return t.slice();var n=t.length,r=Gt?Gt(n):new t.constructor(n);return t.copy(r),r}function bi(t){var e=new t.constructor(t.byteLength);return new Ht(e).set(new Ht(t)),e}function wi(t,e){var n=e?bi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Mi(t,e){if(t!==e){var n=t!==i,r=null===t,o=t==t,a=us(t),s=e!==i,u=null===e,l=e==e,c=us(e);if(!u&&!c&&!a&&t>e||a&&s&&l&&!u&&!c||r&&s&&l||!n&&l||!o)return 1;if(!r&&!a&&!c&&t<e||c&&n&&o&&!r&&!a||u&&n&&o||!s&&o||!l)return-1}return 0}function Li(t,e,n,i){for(var o=-1,a=t.length,s=n.length,u=-1,l=e.length,c=_n(a-s,0),d=r(l+c),h=!i;++u<l;)d[u]=e[u];for(;++o<s;)(h||o<a)&&(d[n[o]]=t[o]);for(;c--;)d[u++]=t[o++];return d}function ki(t,e,n,i){for(var o=-1,a=t.length,s=-1,u=n.length,l=-1,c=e.length,d=_n(a-u,0),h=r(d+c),f=!i;++o<d;)h[o]=t[o];for(var p=o;++l<c;)h[p+l]=e[l];for(;++s<u;)(f||o<a)&&(h[p+n[s]]=t[o++]);return h}function Ti(t,e){var n=-1,i=t.length;for(e||(e=r(i));++n<i;)e[n]=t[n];return e}function Si(t,e,n,r){var o=!n;n||(n={});for(var a=-1,s=e.length;++a<s;){var u=e[a],l=r?r(n[u],t[u],u,n,t):i;l===i&&(l=t[u]),o?rr(n,u,l):Qn(n,u,l)}return n}function Ei(t,e){return function(n,r){var i=Va(n)?ve:er,o=e?e():{};return i(n,t,oo(r,2),o)}}function Ai(t){return qr((function(e,n){var r=-1,o=n.length,a=o>1?n[o-1]:i,s=o>2?n[2]:i;for(a=t.length>3&&"function"==typeof a?(o--,a):i,s&&yo(n[0],n[1],s)&&(a=o<3?i:a,o=1),e=kt(e);++r<o;){var u=n[r];u&&t(e,u,r,a)}return e}))}function Di(t,e){return function(n,r){if(null==n)return n;if(!Ga(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=kt(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Ci(t){return function(e,n,r){for(var i=-1,o=kt(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}function Pi(t){return function(e){var n=Je(e=vs(e))?on(e):i,r=n?n[0]:e.charAt(0),o=n?vi(n,1).join(""):e.slice(1);return r[t]()+o}}function Ii(t){return function(e){return Se(Js(Hs(e).replace(Vt,"")),t,"")}}function Oi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=zn(t.prototype),r=t.apply(n,e);return ts(r)?r:n}}function Ri(t){return function(e,n,r){var o=kt(e);if(!Ga(e)){var a=oo(n,3);e=Cs(e),n=function(t){return a(o[t],t,o)}}var s=t(e,n,r);return s>-1?o[a?e[s]:s]:i}}function Yi(t){return Qi((function(e){var n=e.length,r=n,a=Bn.prototype.thru;for(t&&e.reverse();r--;){var s=e[r];if("function"!=typeof s)throw new Et(o);if(a&&!u&&"wrapper"==ro(s))var u=new Bn([],!0)}for(r=u?r:n;++r<n;){var l=ro(s=e[r]),c="wrapper"==l?no(s):i;u=c&&go(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?u[ro(c[0])].apply(u,c[3]):1==s.length&&go(s)?u[l]():u.thru(s)}return function(){var t=arguments,r=t[0];if(u&&1==t.length&&Va(r))return u.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}}))}function Fi(t,e,n,o,a,s,u,c,d,h){var f=e&l,p=1&e,m=2&e,_=24&e,y=512&e,v=m?i:Oi(t);return function i(){for(var l=arguments.length,g=r(l),x=l;x--;)g[x]=arguments[x];if(_)var b=io(i),w=qe(g,b);if(o&&(g=Li(g,o,a,_)),s&&(g=ki(g,s,u,_)),l-=w,_&&l<h){var M=tn(g,b);return Vi(t,e,Fi,i.placeholder,n,g,M,c,d,h-l)}var L=p?n:this,k=m?L[t]:t;return l=g.length,c?g=To(g,c):y&&l>1&&g.reverse(),f&&d<l&&(g.length=d),this&&this!==oe&&this instanceof i&&(k=v||Oi(k)),k.apply(L,g)}}function ji(t,e){return function(n,r){return function(t,e,n,r){return vr(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}function zi(t,e){return function(n,r){var o;if(n===i&&r===i)return e;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=ai(n),r=ai(r)):(n=oi(n),r=oi(r)),o=t(n,r)}return o}}function Ni(t){return Qi((function(e){return e=ke(e,Ue(oo())),qr((function(n){var r=this;return t(e,(function(t){return ye(t,r,n)}))}))}))}function Bi(t,e){var n=(e=e===i?" ":ai(e)).length;if(n<2)return n?Gr(e,t):e;var r=Gr(e,ln(t/rn(e)));return Je(e)?vi(on(r),0,t).join(""):r.slice(0,t)}function Ui(t){return function(e,n,o){return o&&"number"!=typeof o&&yo(e,n,o)&&(n=o=i),e=fs(e),n===i?(n=e,e=0):n=fs(n),function(t,e,n,i){for(var o=-1,a=_n(ln((e-t)/(n||1)),0),s=r(a);a--;)s[i?a:++o]=t,t+=n;return s}(e,n,o=o===i?e<n?1:-1:fs(o),t)}}function Hi(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=_s(e),n=_s(n)),t(e,n)}}function Vi(t,e,n,r,o,a,s,l,c,d){var h=8&e;e|=h?u:64,4&(e&=~(h?64:u))||(e&=-4);var f=[t,e,o,h?a:i,h?s:i,h?i:a,h?i:s,l,c,d],p=n.apply(i,f);return go(t)&&Eo(p,f),p.placeholder=r,Co(p,t,e)}function Wi(t){var e=Lt[t];return function(t,n){if(t=_s(t),(n=null==n?0:yn(ps(n),292))&&fn(t)){var r=(vs(t)+"e").split("e");return+((r=(vs(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Gi=kn&&1/en(new kn([,-0]))[1]==c?function(t){return new kn(t)}:uu;function qi(t){return function(e){var n=ho(e);return n==w?$e(e):n==S?nn(e):function(t,e){return ke(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Xi(t,e,n,a,c,d,h,f){var p=2&e;if(!p&&"function"!=typeof t)throw new Et(o);var m=a?a.length:0;if(m||(e&=-97,a=c=i),h=h===i?h:_n(ps(h),0),f=f===i?f:ps(f),m-=c?c.length:0,64&e){var _=a,y=c;a=c=i}var v=p?i:no(t),g=[t,e,n,a,c,_,y,d,h,f];if(v&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,a=r==l&&8==n||r==l&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!a)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var u=e[3];if(u){var c=t[3];t[3]=c?Li(c,u,e[4]):u,t[4]=c?tn(t[3],s):e[4]}(u=e[5])&&(c=t[5],t[5]=c?ki(c,u,e[6]):u,t[6]=c?tn(t[5],s):e[6]),(u=e[7])&&(t[7]=u),r&l&&(t[8]=null==t[8]?e[8]:yn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(g,v),t=g[0],e=g[1],n=g[2],a=g[3],c=g[4],!(f=g[9]=g[9]===i?p?0:t.length:_n(g[9]-m,0))&&24&e&&(e&=-25),e&&1!=e)x=8==e||16==e?function(t,e,n){var o=Oi(t);return function a(){for(var s=arguments.length,u=r(s),l=s,c=io(a);l--;)u[l]=arguments[l];var d=s<3&&u[0]!==c&&u[s-1]!==c?[]:tn(u,c);return(s-=d.length)<n?Vi(t,e,Fi,a.placeholder,i,u,d,i,i,n-s):ye(this&&this!==oe&&this instanceof a?o:t,this,u)}}(t,e,f):e!=u&&33!=e||c.length?Fi.apply(i,g):function(t,e,n,i){var o=1&e,a=Oi(t);return function e(){for(var s=-1,u=arguments.length,l=-1,c=i.length,d=r(c+u),h=this&&this!==oe&&this instanceof e?a:t;++l<c;)d[l]=i[l];for(;u--;)d[l++]=arguments[++s];return ye(h,o?n:this,d)}}(t,e,n,a);else var x=function(t,e,n){var r=1&e,i=Oi(t);return function e(){return(this&&this!==oe&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return Co((v?Jr:Eo)(x,g),t,e)}function Zi(t,e,n,r){return t===i||Na(t,Ct[n])&&!Ot.call(r,n)?e:t}function Ki(t,e,n,r,o,a){return ts(t)&&ts(e)&&(a.set(e,t),zr(t,e,i,Ki,a),a.delete(e)),t}function Ji(t){return is(t)?i:t}function $i(t,e,n,r,o,a){var s=1&n,u=t.length,l=e.length;if(u!=l&&!(s&&l>u))return!1;var c=a.get(t);if(c&&a.get(e))return c==e;var d=-1,h=!0,f=2&n?new Gn:i;for(a.set(t,e),a.set(e,t);++d<u;){var p=t[d],m=e[d];if(r)var _=s?r(m,p,d,e,t,a):r(p,m,d,t,e,a);if(_!==i){if(_)continue;h=!1;break}if(f){if(!Ae(e,(function(t,e){if(!Ve(f,e)&&(p===t||o(p,t,n,r,a)))return f.push(e)}))){h=!1;break}}else if(p!==m&&!o(p,m,n,r,a)){h=!1;break}}return a.delete(t),a.delete(e),h}function Qi(t){return Do(Lo(t,i,Wo),t+"")}function to(t){return wr(t,Cs,lo)}function eo(t){return wr(t,Ps,co)}var no=En?function(t){return En.get(t)}:uu;function ro(t){for(var e=t.name+"",n=An[e],r=Ot.call(An,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function io(t){return(Ot.call(jn,"placeholder")?jn:t).placeholder}function oo(){var t=jn.iteratee||iu;return t=t===iu?Ir:t,arguments.length?t(arguments[0],arguments[1]):t}function ao(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function so(t){for(var e=Cs(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,wo(i)]}return e}function uo(t,e){var n=function(t,e){return null==t?i:t[e]}(t,e);return Pr(n)?n:i}var lo=dn?function(t){return null==t?[]:(t=kt(t),we(dn(t),(function(e){return re.call(t,e)})))}:mu,co=dn?function(t){for(var e=[];t;)Te(e,lo(t)),t=Xt(t);return e}:mu,ho=Mr;function fo(t,e,n){for(var r=-1,i=(e=_i(e,t)).length,o=!1;++r<i;){var a=Fo(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Qa(i)&&_o(a,i)&&(Va(t)||Ha(t))}function po(t){return"function"!=typeof t.constructor||bo(t)?{}:zn(Xt(t))}function mo(t){return Va(t)||Ha(t)||!!(ae&&t&&t[ae])}function _o(t,e){var n=typeof t;return!!(e=null==e?d:e)&&("number"==n||"symbol"!=n&&yt.test(t))&&t>-1&&t%1==0&&t<e}function yo(t,e,n){if(!ts(n))return!1;var r=typeof e;return!!("number"==r?Ga(n)&&_o(e,n.length):"string"==r&&e in n)&&Na(n[e],t)}function vo(t,e){if(Va(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!us(t))||Q.test(t)||!$.test(t)||null!=e&&t in kt(e)}function go(t){var e=ro(t),n=jn[e];if("function"!=typeof n||!(e in Un.prototype))return!1;if(t===n)return!0;var r=no(n);return!!r&&t===r[0]}(wn&&ho(new wn(new ArrayBuffer(1)))!=P||Mn&&ho(new Mn)!=w||Ln&&ho(Ln.resolve())!=k||kn&&ho(new kn)!=S||Tn&&ho(new Tn)!=D)&&(ho=function(t){var e=Mr(t),n=e==L?t.constructor:i,r=n?jo(n):"";if(r)switch(r){case Dn:return P;case Cn:return w;case Pn:return k;case In:return S;case On:return D}return e});var xo=Pt?Ja:_u;function bo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Ct)}function wo(t){return t==t&&!ts(t)}function Mo(t,e){return function(n){return null!=n&&n[t]===e&&(e!==i||t in kt(n))}}function Lo(t,e,n){return e=_n(e===i?t.length-1:e,0),function(){for(var i=arguments,o=-1,a=_n(i.length-e,0),s=r(a);++o<a;)s[o]=i[e+o];o=-1;for(var u=r(e+1);++o<e;)u[o]=i[o];return u[e]=n(s),ye(t,this,u)}}function ko(t,e){return e.length<2?t:br(t,ti(e,0,-1))}function To(t,e){for(var n=t.length,r=yn(e.length,n),o=Ti(t);r--;){var a=e[r];t[r]=_o(a,n)?o[a]:i}return t}function So(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Eo=Po(Jr),Ao=un||function(t,e){return oe.setTimeout(t,e)},Do=Po($r);function Co(t,e,n){var r=e+"";return Do(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(at,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return ge(p,(function(n){var r="_."+n[0];e&n[1]&&!Me(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(st);return e?e[1].split(ut):[]}(r),n)))}function Po(t){var e=0,n=0;return function(){var r=vn(),o=16-(r-n);if(n=r,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(i,arguments)}}function Io(t,e){var n=-1,r=t.length,o=r-1;for(e=e===i?r:e;++n<e;){var a=Wr(n,o),s=t[a];t[a]=t[n],t[n]=s}return t.length=e,t}var Oo,Ro,Yo=(Oo=Oa((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(tt,(function(t,n,r,i){e.push(r?i.replace(ct,"$1"):n||t)})),e}),(function(t){return 500===Ro.size&&Ro.clear(),t})),Ro=Oo.cache,Oo);function Fo(t){if("string"==typeof t||us(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function jo(t){if(null!=t){try{return It.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function zo(t){if(t instanceof Un)return t.clone();var e=new Bn(t.__wrapped__,t.__chain__);return e.__actions__=Ti(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var No=qr((function(t,e){return qa(t)?lr(t,mr(e,1,qa,!0)):[]})),Bo=qr((function(t,e){var n=Ko(e);return qa(n)&&(n=i),qa(t)?lr(t,mr(e,1,qa,!0),oo(n,2)):[]})),Uo=qr((function(t,e){var n=Ko(e);return qa(n)&&(n=i),qa(t)?lr(t,mr(e,1,qa,!0),i,n):[]}));function Ho(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ps(n);return i<0&&(i=_n(r+i,0)),Pe(t,oo(e,3),i)}function Vo(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r-1;return n!==i&&(o=ps(n),o=n<0?_n(r+o,0):yn(o,r-1)),Pe(t,oo(e,3),o,!0)}function Wo(t){return null!=t&&t.length?mr(t,1):[]}function Go(t){return t&&t.length?t[0]:i}var qo=qr((function(t){var e=ke(t,pi);return e.length&&e[0]===t[0]?Sr(e):[]})),Xo=qr((function(t){var e=Ko(t),n=ke(t,pi);return e===Ko(n)?e=i:n.pop(),n.length&&n[0]===t[0]?Sr(n,oo(e,2)):[]})),Zo=qr((function(t){var e=Ko(t),n=ke(t,pi);return(e="function"==typeof e?e:i)&&n.pop(),n.length&&n[0]===t[0]?Sr(n,i,e):[]}));function Ko(t){var e=null==t?0:t.length;return e?t[e-1]:i}var Jo=qr($o);function $o(t,e){return t&&t.length&&e&&e.length?Hr(t,e):t}var Qo=Qi((function(t,e){var n=null==t?0:t.length,r=ir(t,e);return Vr(t,ke(e,(function(t){return _o(t,n)?+t:t})).sort(Mi)),r}));function ta(t){return null==t?t:bn.call(t)}var ea=qr((function(t){return si(mr(t,1,qa,!0))})),na=qr((function(t){var e=Ko(t);return qa(e)&&(e=i),si(mr(t,1,qa,!0),oo(e,2))})),ra=qr((function(t){var e=Ko(t);return e="function"==typeof e?e:i,si(mr(t,1,qa,!0),i,e)}));function ia(t){if(!t||!t.length)return[];var e=0;return t=we(t,(function(t){if(qa(t))return e=_n(t.length,e),!0})),Be(e,(function(e){return ke(t,Fe(e))}))}function oa(t,e){if(!t||!t.length)return[];var n=ia(t);return null==e?n:ke(n,(function(t){return ye(e,i,t)}))}var aa=qr((function(t,e){return qa(t)?lr(t,e):[]})),sa=qr((function(t){return hi(we(t,qa))})),ua=qr((function(t){var e=Ko(t);return qa(e)&&(e=i),hi(we(t,qa),oo(e,2))})),la=qr((function(t){var e=Ko(t);return e="function"==typeof e?e:i,hi(we(t,qa),i,e)})),ca=qr(ia),da=qr((function(t){var e=t.length,n=e>1?t[e-1]:i;return n="function"==typeof n?(t.pop(),n):i,oa(t,n)}));function ha(t){var e=jn(t);return e.__chain__=!0,e}function fa(t,e){return e(t)}var pa=Qi((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,o=function(e){return ir(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Un&&_o(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:fa,args:[o],thisArg:i}),new Bn(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(i),t}))):this.thru(o)})),ma=Ei((function(t,e,n){Ot.call(t,n)?++t[n]:rr(t,n,1)})),_a=Ri(Ho),ya=Ri(Vo);function va(t,e){return(Va(t)?ge:cr)(t,oo(e,3))}function ga(t,e){return(Va(t)?xe:dr)(t,oo(e,3))}var xa=Ei((function(t,e,n){Ot.call(t,n)?t[n].push(e):rr(t,n,[e])})),ba=qr((function(t,e,n){var i=-1,o="function"==typeof e,a=Ga(t)?r(t.length):[];return cr(t,(function(t){a[++i]=o?ye(e,t,n):Er(t,e,n)})),a})),wa=Ei((function(t,e,n){rr(t,n,e)}));function Ma(t,e){return(Va(t)?ke:Yr)(t,oo(e,3))}var La=Ei((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),ka=qr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&yo(t,e[0],e[1])?e=[]:n>2&&yo(e[0],e[1],e[2])&&(e=[e[0]]),Br(t,mr(e,1),[])})),Ta=je||function(){return oe.Date.now()};function Sa(t,e,n){return e=n?i:e,e=t&&null==e?t.length:e,Xi(t,l,i,i,i,i,e)}function Ea(t,e){var n;if("function"!=typeof e)throw new Et(o);return t=ps(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=i),n}}var Aa=qr((function(t,e,n){var r=1;if(n.length){var i=tn(n,io(Aa));r|=u}return Xi(t,r,e,n,i)})),Da=qr((function(t,e,n){var r=3;if(n.length){var i=tn(n,io(Da));r|=u}return Xi(e,r,t,n,i)}));function Ca(t,e,n){var r,a,s,u,l,c,d=0,h=!1,f=!1,p=!0;if("function"!=typeof t)throw new Et(o);function m(e){var n=r,o=a;return r=a=i,d=e,u=t.apply(o,n)}function _(t){return d=t,l=Ao(v,e),h?m(t):u}function y(t){var n=t-c;return c===i||n>=e||n<0||f&&t-d>=s}function v(){var t=Ta();if(y(t))return g(t);l=Ao(v,function(t){var n=e-(t-c);return f?yn(n,s-(t-d)):n}(t))}function g(t){return l=i,p&&r?m(t):(r=a=i,u)}function x(){var t=Ta(),n=y(t);if(r=arguments,a=this,c=t,n){if(l===i)return _(c);if(f)return gi(l),l=Ao(v,e),m(c)}return l===i&&(l=Ao(v,e)),u}return e=_s(e)||0,ts(n)&&(h=!!n.leading,s=(f="maxWait"in n)?_n(_s(n.maxWait)||0,e):s,p="trailing"in n?!!n.trailing:p),x.cancel=function(){l!==i&&gi(l),d=0,r=c=a=l=i},x.flush=function(){return l===i?u:g(Ta())},x}var Pa=qr((function(t,e){return ur(t,1,e)})),Ia=qr((function(t,e,n){return ur(t,_s(e)||0,n)}));function Oa(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Et(o);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Oa.Cache||Wn),n}function Ra(t){if("function"!=typeof t)throw new Et(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Oa.Cache=Wn;var Ya=yi((function(t,e){var n=(e=1==e.length&&Va(e[0])?ke(e[0],Ue(oo())):ke(mr(e,1),Ue(oo()))).length;return qr((function(r){for(var i=-1,o=yn(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return ye(t,this,r)}))})),Fa=qr((function(t,e){var n=tn(e,io(Fa));return Xi(t,u,i,e,n)})),ja=qr((function(t,e){var n=tn(e,io(ja));return Xi(t,64,i,e,n)})),za=Qi((function(t,e){return Xi(t,256,i,i,i,e)}));function Na(t,e){return t===e||t!=t&&e!=e}var Ba=Hi(Lr),Ua=Hi((function(t,e){return t>=e})),Ha=Ar(function(){return arguments}())?Ar:function(t){return es(t)&&Ot.call(t,"callee")&&!re.call(t,"callee")},Va=r.isArray,Wa=de?Ue(de):function(t){return es(t)&&Mr(t)==C};function Ga(t){return null!=t&&Qa(t.length)&&!Ja(t)}function qa(t){return es(t)&&Ga(t)}var Xa=hn||_u,Za=he?Ue(he):function(t){return es(t)&&Mr(t)==v};function Ka(t){if(!es(t))return!1;var e=Mr(t);return e==g||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!is(t)}function Ja(t){if(!ts(t))return!1;var e=Mr(t);return e==x||e==b||"[object AsyncFunction]"==e||"[object Proxy]"==e}function $a(t){return"number"==typeof t&&t==ps(t)}function Qa(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=d}function ts(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function es(t){return null!=t&&"object"==typeof t}var ns=fe?Ue(fe):function(t){return es(t)&&ho(t)==w};function rs(t){return"number"==typeof t||es(t)&&Mr(t)==M}function is(t){if(!es(t)||Mr(t)!=L)return!1;var e=Xt(t);if(null===e)return!0;var n=Ot.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&It.call(n)==jt}var os=pe?Ue(pe):function(t){return es(t)&&Mr(t)==T},as=me?Ue(me):function(t){return es(t)&&ho(t)==S};function ss(t){return"string"==typeof t||!Va(t)&&es(t)&&Mr(t)==E}function us(t){return"symbol"==typeof t||es(t)&&Mr(t)==A}var ls=_e?Ue(_e):function(t){return es(t)&&Qa(t.length)&&!!$t[Mr(t)]},cs=Hi(Rr),ds=Hi((function(t,e){return t<=e}));function hs(t){if(!t)return[];if(Ga(t))return ss(t)?on(t):Ti(t);if(se&&t[se])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[se]());var e=ho(t);return(e==w?$e:e==S?en:Ns)(t)}function fs(t){return t?(t=_s(t))===c||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function ps(t){var e=fs(t),n=e%1;return e==e?n?e-n:e:0}function ms(t){return t?or(ps(t),0,f):0}function _s(t){if("number"==typeof t)return t;if(us(t))return h;if(ts(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ts(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(rt,"");var n=pt.test(t);return n||_t.test(t)?ne(t.slice(2),n?2:8):ft.test(t)?h:+t}function ys(t){return Si(t,Ps(t))}function vs(t){return null==t?"":ai(t)}var gs=Ai((function(t,e){if(bo(e)||Ga(e))Si(e,Cs(e),t);else for(var n in e)Ot.call(e,n)&&Qn(t,n,e[n])})),xs=Ai((function(t,e){Si(e,Ps(e),t)})),bs=Ai((function(t,e,n,r){Si(e,Ps(e),t,r)})),ws=Ai((function(t,e,n,r){Si(e,Cs(e),t,r)})),Ms=Qi(ir),Ls=qr((function(t,e){t=kt(t);var n=-1,r=e.length,o=r>2?e[2]:i;for(o&&yo(e[0],e[1],o)&&(r=1);++n<r;)for(var a=e[n],s=Ps(a),u=-1,l=s.length;++u<l;){var c=s[u],d=t[c];(d===i||Na(d,Ct[c])&&!Ot.call(t,c))&&(t[c]=a[c])}return t})),ks=qr((function(t){return t.push(i,Ki),ye(Os,i,t)}));function Ts(t,e,n){var r=null==t?i:br(t,e);return r===i?n:r}function Ss(t,e){return null!=t&&fo(t,e,Tr)}var Es=ji((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Ft.call(e)),t[e]=n}),tu(ru)),As=ji((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Ft.call(e)),Ot.call(t,e)?t[e].push(n):t[e]=[n]}),oo),Ds=qr(Er);function Cs(t){return Ga(t)?Xn(t):Or(t)}function Ps(t){return Ga(t)?Xn(t,!0):function(t){if(!ts(t))return function(t){var e=[];if(null!=t)for(var n in kt(t))e.push(n);return e}(t);var e=bo(t),n=[];for(var r in t)("constructor"!=r||!e&&Ot.call(t,r))&&n.push(r);return n}(t)}var Is=Ai((function(t,e,n){zr(t,e,n)})),Os=Ai((function(t,e,n,r){zr(t,e,n,r)})),Rs=Qi((function(t,e){var n={};if(null==t)return n;var r=!1;e=ke(e,(function(e){return e=_i(e,t),r||(r=e.length>1),e})),Si(t,eo(t),n),r&&(n=ar(n,7,Ji));for(var i=e.length;i--;)ui(n,e[i]);return n})),Ys=Qi((function(t,e){return null==t?{}:function(t,e){return Ur(t,e,(function(e,n){return Ss(t,n)}))}(t,e)}));function Fs(t,e){if(null==t)return{};var n=ke(eo(t),(function(t){return[t]}));return e=oo(e),Ur(t,n,(function(t,n){return e(t,n[0])}))}var js=qi(Cs),zs=qi(Ps);function Ns(t){return null==t?[]:He(t,Cs(t))}var Bs=Ii((function(t,e,n){return e=e.toLowerCase(),t+(n?Us(e):e)}));function Us(t){return Ks(vs(t).toLowerCase())}function Hs(t){return(t=vs(t))&&t.replace(vt,Xe).replace(Wt,"")}var Vs=Ii((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Ws=Ii((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Gs=Pi("toLowerCase"),qs=Ii((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),Xs=Ii((function(t,e,n){return t+(n?" ":"")+Ks(e)})),Zs=Ii((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Ks=Pi("toUpperCase");function Js(t,e,n){return t=vs(t),(e=n?i:e)===i?function(t){return Zt.test(t)}(t)?function(t){return t.match(qt)||[]}(t):function(t){return t.match(lt)||[]}(t):t.match(e)||[]}var $s=qr((function(t,e){try{return ye(t,i,e)}catch(t){return Ka(t)?t:new wt(t)}})),Qs=Qi((function(t,e){return ge(e,(function(e){e=Fo(e),rr(t,e,Aa(t[e],t))})),t}));function tu(t){return function(){return t}}var eu=Yi(),nu=Yi(!0);function ru(t){return t}function iu(t){return Ir("function"==typeof t?t:ar(t,1))}var ou=qr((function(t,e){return function(n){return Er(n,t,e)}})),au=qr((function(t,e){return function(n){return Er(t,n,e)}}));function su(t,e,n){var r=Cs(e),i=xr(e,r);null!=n||ts(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=xr(e,Cs(e)));var o=!(ts(n)&&"chain"in n&&!n.chain),a=Ja(t);return ge(i,(function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=Ti(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Te([this.value()],arguments))})})),t}function uu(){}var lu=Ni(ke),cu=Ni(be),du=Ni(Ae);function hu(t){return vo(t)?Fe(Fo(t)):function(t){return function(e){return br(e,t)}}(t)}var fu=Ui(),pu=Ui(!0);function mu(){return[]}function _u(){return!1}var yu,vu=zi((function(t,e){return t+e}),0),gu=Wi("ceil"),xu=zi((function(t,e){return t/e}),1),bu=Wi("floor"),wu=zi((function(t,e){return t*e}),1),Mu=Wi("round"),Lu=zi((function(t,e){return t-e}),0);return jn.after=function(t,e){if("function"!=typeof e)throw new Et(o);return t=ps(t),function(){if(--t<1)return e.apply(this,arguments)}},jn.ary=Sa,jn.assign=gs,jn.assignIn=xs,jn.assignInWith=bs,jn.assignWith=ws,jn.at=Ms,jn.before=Ea,jn.bind=Aa,jn.bindAll=Qs,jn.bindKey=Da,jn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Va(t)?t:[t]},jn.chain=ha,jn.chunk=function(t,e,n){e=(n?yo(t,e,n):e===i)?1:_n(ps(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var a=0,s=0,u=r(ln(o/e));a<o;)u[s++]=ti(t,a,a+=e);return u},jn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},jn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return Te(Va(n)?Ti(n):[n],mr(e,1))},jn.cond=function(t){var e=null==t?0:t.length,n=oo();return t=e?ke(t,(function(t){if("function"!=typeof t[1])throw new Et(o);return[n(t[0]),t[1]]})):[],qr((function(n){for(var r=-1;++r<e;){var i=t[r];if(ye(i[0],this,n))return ye(i[1],this,n)}}))},jn.conforms=function(t){return function(t){var e=Cs(t);return function(n){return sr(n,t,e)}}(ar(t,1))},jn.constant=tu,jn.countBy=ma,jn.create=function(t,e){var n=zn(t);return null==e?n:nr(n,e)},jn.curry=function t(e,n,r){var o=Xi(e,8,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},jn.curryRight=function t(e,n,r){var o=Xi(e,16,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},jn.debounce=Ca,jn.defaults=Ls,jn.defaultsDeep=ks,jn.defer=Pa,jn.delay=Ia,jn.difference=No,jn.differenceBy=Bo,jn.differenceWith=Uo,jn.drop=function(t,e,n){var r=null==t?0:t.length;return r?ti(t,(e=n||e===i?1:ps(e))<0?0:e,r):[]},jn.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?ti(t,0,(e=r-(e=n||e===i?1:ps(e)))<0?0:e):[]},jn.dropRightWhile=function(t,e){return t&&t.length?ci(t,oo(e,3),!0,!0):[]},jn.dropWhile=function(t,e){return t&&t.length?ci(t,oo(e,3),!0):[]},jn.fill=function(t,e,n,r){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&yo(t,e,n)&&(n=0,r=o),function(t,e,n,r){var o=t.length;for((n=ps(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:ps(r))<0&&(r+=o),r=n>r?0:ms(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},jn.filter=function(t,e){return(Va(t)?we:pr)(t,oo(e,3))},jn.flatMap=function(t,e){return mr(Ma(t,e),1)},jn.flatMapDeep=function(t,e){return mr(Ma(t,e),c)},jn.flatMapDepth=function(t,e,n){return n=n===i?1:ps(n),mr(Ma(t,e),n)},jn.flatten=Wo,jn.flattenDeep=function(t){return null!=t&&t.length?mr(t,c):[]},jn.flattenDepth=function(t,e){return null!=t&&t.length?mr(t,e=e===i?1:ps(e)):[]},jn.flip=function(t){return Xi(t,512)},jn.flow=eu,jn.flowRight=nu,jn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},jn.functions=function(t){return null==t?[]:xr(t,Cs(t))},jn.functionsIn=function(t){return null==t?[]:xr(t,Ps(t))},jn.groupBy=xa,jn.initial=function(t){return null!=t&&t.length?ti(t,0,-1):[]},jn.intersection=qo,jn.intersectionBy=Xo,jn.intersectionWith=Zo,jn.invert=Es,jn.invertBy=As,jn.invokeMap=ba,jn.iteratee=iu,jn.keyBy=wa,jn.keys=Cs,jn.keysIn=Ps,jn.map=Ma,jn.mapKeys=function(t,e){var n={};return e=oo(e,3),vr(t,(function(t,r,i){rr(n,e(t,r,i),t)})),n},jn.mapValues=function(t,e){var n={};return e=oo(e,3),vr(t,(function(t,r,i){rr(n,r,e(t,r,i))})),n},jn.matches=function(t){return Fr(ar(t,1))},jn.matchesProperty=function(t,e){return jr(t,ar(e,1))},jn.memoize=Oa,jn.merge=Is,jn.mergeWith=Os,jn.method=ou,jn.methodOf=au,jn.mixin=su,jn.negate=Ra,jn.nthArg=function(t){return t=ps(t),qr((function(e){return Nr(e,t)}))},jn.omit=Rs,jn.omitBy=function(t,e){return Fs(t,Ra(oo(e)))},jn.once=function(t){return Ea(2,t)},jn.orderBy=function(t,e,n,r){return null==t?[]:(Va(e)||(e=null==e?[]:[e]),Va(n=r?i:n)||(n=null==n?[]:[n]),Br(t,e,n))},jn.over=lu,jn.overArgs=Ya,jn.overEvery=cu,jn.overSome=du,jn.partial=Fa,jn.partialRight=ja,jn.partition=La,jn.pick=Ys,jn.pickBy=Fs,jn.property=hu,jn.propertyOf=function(t){return function(e){return null==t?i:br(t,e)}},jn.pull=Jo,jn.pullAll=$o,jn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Hr(t,e,oo(n,2)):t},jn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Hr(t,e,i,n):t},jn.pullAt=Qo,jn.range=fu,jn.rangeRight=pu,jn.rearg=za,jn.reject=function(t,e){return(Va(t)?we:pr)(t,Ra(oo(e,3)))},jn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=oo(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return Vr(t,i),n},jn.rest=function(t,e){if("function"!=typeof t)throw new Et(o);return qr(t,e=e===i?e:ps(e))},jn.reverse=ta,jn.sampleSize=function(t,e,n){return e=(n?yo(t,e,n):e===i)?1:ps(e),(Va(t)?Kn:Zr)(t,e)},jn.set=function(t,e,n){return null==t?t:Kr(t,e,n)},jn.setWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:Kr(t,e,n,r)},jn.shuffle=function(t){return(Va(t)?Jn:Qr)(t)},jn.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&yo(t,e,n)?(e=0,n=r):(e=null==e?0:ps(e),n=n===i?r:ps(n)),ti(t,e,n)):[]},jn.sortBy=ka,jn.sortedUniq=function(t){return t&&t.length?ii(t):[]},jn.sortedUniqBy=function(t,e){return t&&t.length?ii(t,oo(e,2)):[]},jn.split=function(t,e,n){return n&&"number"!=typeof n&&yo(t,e,n)&&(e=n=i),(n=n===i?f:n>>>0)?(t=vs(t))&&("string"==typeof e||null!=e&&!os(e))&&!(e=ai(e))&&Je(t)?vi(on(t),0,n):t.split(e,n):[]},jn.spread=function(t,e){if("function"!=typeof t)throw new Et(o);return e=null==e?0:_n(ps(e),0),qr((function(n){var r=n[e],i=vi(n,0,e);return r&&Te(i,r),ye(t,this,i)}))},jn.tail=function(t){var e=null==t?0:t.length;return e?ti(t,1,e):[]},jn.take=function(t,e,n){return t&&t.length?ti(t,0,(e=n||e===i?1:ps(e))<0?0:e):[]},jn.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?ti(t,(e=r-(e=n||e===i?1:ps(e)))<0?0:e,r):[]},jn.takeRightWhile=function(t,e){return t&&t.length?ci(t,oo(e,3),!1,!0):[]},jn.takeWhile=function(t,e){return t&&t.length?ci(t,oo(e,3)):[]},jn.tap=function(t,e){return e(t),t},jn.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new Et(o);return ts(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ca(t,e,{leading:r,maxWait:e,trailing:i})},jn.thru=fa,jn.toArray=hs,jn.toPairs=js,jn.toPairsIn=zs,jn.toPath=function(t){return Va(t)?ke(t,Fo):us(t)?[t]:Ti(Yo(vs(t)))},jn.toPlainObject=ys,jn.transform=function(t,e,n){var r=Va(t),i=r||Xa(t)||ls(t);if(e=oo(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:ts(t)&&Ja(o)?zn(Xt(t)):{}}return(i?ge:vr)(t,(function(t,r,i){return e(n,t,r,i)})),n},jn.unary=function(t){return Sa(t,1)},jn.union=ea,jn.unionBy=na,jn.unionWith=ra,jn.uniq=function(t){return t&&t.length?si(t):[]},jn.uniqBy=function(t,e){return t&&t.length?si(t,oo(e,2)):[]},jn.uniqWith=function(t,e){return e="function"==typeof e?e:i,t&&t.length?si(t,i,e):[]},jn.unset=function(t,e){return null==t||ui(t,e)},jn.unzip=ia,jn.unzipWith=oa,jn.update=function(t,e,n){return null==t?t:li(t,e,mi(n))},jn.updateWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:li(t,e,mi(n),r)},jn.values=Ns,jn.valuesIn=function(t){return null==t?[]:He(t,Ps(t))},jn.without=aa,jn.words=Js,jn.wrap=function(t,e){return Fa(mi(e),t)},jn.xor=sa,jn.xorBy=ua,jn.xorWith=la,jn.zip=ca,jn.zipObject=function(t,e){return fi(t||[],e||[],Qn)},jn.zipObjectDeep=function(t,e){return fi(t||[],e||[],Kr)},jn.zipWith=da,jn.entries=js,jn.entriesIn=zs,jn.extend=xs,jn.extendWith=bs,su(jn,jn),jn.add=vu,jn.attempt=$s,jn.camelCase=Bs,jn.capitalize=Us,jn.ceil=gu,jn.clamp=function(t,e,n){return n===i&&(n=e,e=i),n!==i&&(n=(n=_s(n))==n?n:0),e!==i&&(e=(e=_s(e))==e?e:0),or(_s(t),e,n)},jn.clone=function(t){return ar(t,4)},jn.cloneDeep=function(t){return ar(t,5)},jn.cloneDeepWith=function(t,e){return ar(t,5,e="function"==typeof e?e:i)},jn.cloneWith=function(t,e){return ar(t,4,e="function"==typeof e?e:i)},jn.conformsTo=function(t,e){return null==e||sr(t,e,Cs(e))},jn.deburr=Hs,jn.defaultTo=function(t,e){return null==t||t!=t?e:t},jn.divide=xu,jn.endsWith=function(t,e,n){t=vs(t),e=ai(e);var r=t.length,o=n=n===i?r:or(ps(n),0,r);return(n-=e.length)>=0&&t.slice(n,o)==e},jn.eq=Na,jn.escape=function(t){return(t=vs(t))&&X.test(t)?t.replace(G,Ze):t},jn.escapeRegExp=function(t){return(t=vs(t))&&nt.test(t)?t.replace(et,"\\$&"):t},jn.every=function(t,e,n){var r=Va(t)?be:hr;return n&&yo(t,e,n)&&(e=i),r(t,oo(e,3))},jn.find=_a,jn.findIndex=Ho,jn.findKey=function(t,e){return Ce(t,oo(e,3),vr)},jn.findLast=ya,jn.findLastIndex=Vo,jn.findLastKey=function(t,e){return Ce(t,oo(e,3),gr)},jn.floor=bu,jn.forEach=va,jn.forEachRight=ga,jn.forIn=function(t,e){return null==t?t:_r(t,oo(e,3),Ps)},jn.forInRight=function(t,e){return null==t?t:yr(t,oo(e,3),Ps)},jn.forOwn=function(t,e){return t&&vr(t,oo(e,3))},jn.forOwnRight=function(t,e){return t&&gr(t,oo(e,3))},jn.get=Ts,jn.gt=Ba,jn.gte=Ua,jn.has=function(t,e){return null!=t&&fo(t,e,kr)},jn.hasIn=Ss,jn.head=Go,jn.identity=ru,jn.includes=function(t,e,n,r){t=Ga(t)?t:Ns(t),n=n&&!r?ps(n):0;var i=t.length;return n<0&&(n=_n(i+n,0)),ss(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Ie(t,e,n)>-1},jn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ps(n);return i<0&&(i=_n(r+i,0)),Ie(t,e,i)},jn.inRange=function(t,e,n){return e=fs(e),n===i?(n=e,e=0):n=fs(n),function(t,e,n){return t>=yn(e,n)&&t<_n(e,n)}(t=_s(t),e,n)},jn.invoke=Ds,jn.isArguments=Ha,jn.isArray=Va,jn.isArrayBuffer=Wa,jn.isArrayLike=Ga,jn.isArrayLikeObject=qa,jn.isBoolean=function(t){return!0===t||!1===t||es(t)&&Mr(t)==y},jn.isBuffer=Xa,jn.isDate=Za,jn.isElement=function(t){return es(t)&&1===t.nodeType&&!is(t)},jn.isEmpty=function(t){if(null==t)return!0;if(Ga(t)&&(Va(t)||"string"==typeof t||"function"==typeof t.splice||Xa(t)||ls(t)||Ha(t)))return!t.length;var e=ho(t);if(e==w||e==S)return!t.size;if(bo(t))return!Or(t).length;for(var n in t)if(Ot.call(t,n))return!1;return!0},jn.isEqual=function(t,e){return Dr(t,e)},jn.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:i)?n(t,e):i;return r===i?Dr(t,e,i,n):!!r},jn.isError=Ka,jn.isFinite=function(t){return"number"==typeof t&&fn(t)},jn.isFunction=Ja,jn.isInteger=$a,jn.isLength=Qa,jn.isMap=ns,jn.isMatch=function(t,e){return t===e||Cr(t,e,so(e))},jn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:i,Cr(t,e,so(e),n)},jn.isNaN=function(t){return rs(t)&&t!=+t},jn.isNative=function(t){if(xo(t))throw new wt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Pr(t)},jn.isNil=function(t){return null==t},jn.isNull=function(t){return null===t},jn.isNumber=rs,jn.isObject=ts,jn.isObjectLike=es,jn.isPlainObject=is,jn.isRegExp=os,jn.isSafeInteger=function(t){return $a(t)&&t>=-9007199254740991&&t<=d},jn.isSet=as,jn.isString=ss,jn.isSymbol=us,jn.isTypedArray=ls,jn.isUndefined=function(t){return t===i},jn.isWeakMap=function(t){return es(t)&&ho(t)==D},jn.isWeakSet=function(t){return es(t)&&"[object WeakSet]"==Mr(t)},jn.join=function(t,e){return null==t?"":pn.call(t,e)},jn.kebabCase=Vs,jn.last=Ko,jn.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=ps(n))<0?_n(r+o,0):yn(o,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,o):Pe(t,Re,o,!0)},jn.lowerCase=Ws,jn.lowerFirst=Gs,jn.lt=cs,jn.lte=ds,jn.max=function(t){return t&&t.length?fr(t,ru,Lr):i},jn.maxBy=function(t,e){return t&&t.length?fr(t,oo(e,2),Lr):i},jn.mean=function(t){return Ye(t,ru)},jn.meanBy=function(t,e){return Ye(t,oo(e,2))},jn.min=function(t){return t&&t.length?fr(t,ru,Rr):i},jn.minBy=function(t,e){return t&&t.length?fr(t,oo(e,2),Rr):i},jn.stubArray=mu,jn.stubFalse=_u,jn.stubObject=function(){return{}},jn.stubString=function(){return""},jn.stubTrue=function(){return!0},jn.multiply=wu,jn.nth=function(t,e){return t&&t.length?Nr(t,ps(e)):i},jn.noConflict=function(){return oe._===this&&(oe._=zt),this},jn.noop=uu,jn.now=Ta,jn.pad=function(t,e,n){t=vs(t);var r=(e=ps(e))?rn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Bi(cn(i),n)+t+Bi(ln(i),n)},jn.padEnd=function(t,e,n){t=vs(t);var r=(e=ps(e))?rn(t):0;return e&&r<e?t+Bi(e-r,n):t},jn.padStart=function(t,e,n){t=vs(t);var r=(e=ps(e))?rn(t):0;return e&&r<e?Bi(e-r,n)+t:t},jn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),gn(vs(t).replace(it,""),e||0)},jn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&yo(t,e,n)&&(e=n=i),n===i&&("boolean"==typeof e?(n=e,e=i):"boolean"==typeof t&&(n=t,t=i)),t===i&&e===i?(t=0,e=1):(t=fs(t),e===i?(e=t,t=0):e=fs(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var o=xn();return yn(t+o*(e-t+ee("1e-"+((o+"").length-1))),e)}return Wr(t,e)},jn.reduce=function(t,e,n){var r=Va(t)?Se:ze,i=arguments.length<3;return r(t,oo(e,4),n,i,cr)},jn.reduceRight=function(t,e,n){var r=Va(t)?Ee:ze,i=arguments.length<3;return r(t,oo(e,4),n,i,dr)},jn.repeat=function(t,e,n){return e=(n?yo(t,e,n):e===i)?1:ps(e),Gr(vs(t),e)},jn.replace=function(){var t=arguments,e=vs(t[0]);return t.length<3?e:e.replace(t[1],t[2])},jn.result=function(t,e,n){var r=-1,o=(e=_i(e,t)).length;for(o||(o=1,t=i);++r<o;){var a=null==t?i:t[Fo(e[r])];a===i&&(r=o,a=n),t=Ja(a)?a.call(t):a}return t},jn.round=Mu,jn.runInContext=t,jn.sample=function(t){return(Va(t)?Zn:Xr)(t)},jn.size=function(t){if(null==t)return 0;if(Ga(t))return ss(t)?rn(t):t.length;var e=ho(t);return e==w||e==S?t.size:Or(t).length},jn.snakeCase=qs,jn.some=function(t,e,n){var r=Va(t)?Ae:ei;return n&&yo(t,e,n)&&(e=i),r(t,oo(e,3))},jn.sortedIndex=function(t,e){return ni(t,e)},jn.sortedIndexBy=function(t,e,n){return ri(t,e,oo(n,2))},jn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ni(t,e);if(r<n&&Na(t[r],e))return r}return-1},jn.sortedLastIndex=function(t,e){return ni(t,e,!0)},jn.sortedLastIndexBy=function(t,e,n){return ri(t,e,oo(n,2),!0)},jn.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=ni(t,e,!0)-1;if(Na(t[n],e))return n}return-1},jn.startCase=Xs,jn.startsWith=function(t,e,n){return t=vs(t),n=null==n?0:or(ps(n),0,t.length),e=ai(e),t.slice(n,n+e.length)==e},jn.subtract=Lu,jn.sum=function(t){return t&&t.length?Ne(t,ru):0},jn.sumBy=function(t,e){return t&&t.length?Ne(t,oo(e,2)):0},jn.template=function(t,e,n){var r=jn.templateSettings;n&&yo(t,e,n)&&(e=i),t=vs(t),e=bs({},e,r,Zi);var o,a,s=bs({},e.imports,r.imports,Zi),u=Cs(s),l=He(s,u),c=0,d=e.interpolate||gt,h="__p += '",f=Tt((e.escape||gt).source+"|"+d.source+"|"+(d===J?dt:gt).source+"|"+(e.evaluate||gt).source+"|$","g"),p="//# sourceURL="+(Ot.call(e,"sourceURL")?(e.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++Jt+"]")+"\n";t.replace(f,(function(e,n,r,i,s,u){return r||(r=i),h+=t.slice(c,u).replace(xt,Ke),n&&(o=!0,h+="' +\n__e("+n+") +\n'"),s&&(a=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+e.length,e})),h+="';\n";var m=Ot.call(e,"variable")&&e.variable;m||(h="with (obj) {\n"+h+"\n}\n"),h=(a?h.replace(U,""):h).replace(H,"$1").replace(V,"$1;"),h="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var _=$s((function(){return Mt(u,p+"return "+h).apply(i,l)}));if(_.source=h,Ka(_))throw _;return _},jn.times=function(t,e){if((t=ps(t))<1||t>d)return[];var n=f,r=yn(t,f);e=oo(e),t-=f;for(var i=Be(r,e);++n<t;)e(n);return i},jn.toFinite=fs,jn.toInteger=ps,jn.toLength=ms,jn.toLower=function(t){return vs(t).toLowerCase()},jn.toNumber=_s,jn.toSafeInteger=function(t){return t?or(ps(t),-9007199254740991,d):0===t?t:0},jn.toString=vs,jn.toUpper=function(t){return vs(t).toUpperCase()},jn.trim=function(t,e,n){if((t=vs(t))&&(n||e===i))return t.replace(rt,"");if(!t||!(e=ai(e)))return t;var r=on(t),o=on(e);return vi(r,We(r,o),Ge(r,o)+1).join("")},jn.trimEnd=function(t,e,n){if((t=vs(t))&&(n||e===i))return t.replace(ot,"");if(!t||!(e=ai(e)))return t;var r=on(t);return vi(r,0,Ge(r,on(e))+1).join("")},jn.trimStart=function(t,e,n){if((t=vs(t))&&(n||e===i))return t.replace(it,"");if(!t||!(e=ai(e)))return t;var r=on(t);return vi(r,We(r,on(e))).join("")},jn.truncate=function(t,e){var n=30,r="...";if(ts(e)){var o="separator"in e?e.separator:o;n="length"in e?ps(e.length):n,r="omission"in e?ai(e.omission):r}var a=(t=vs(t)).length;if(Je(t)){var s=on(t);a=s.length}if(n>=a)return t;var u=n-rn(r);if(u<1)return r;var l=s?vi(s,0,u).join(""):t.slice(0,u);if(o===i)return l+r;if(s&&(u+=l.length-u),os(o)){if(t.slice(u).search(o)){var c,d=l;for(o.global||(o=Tt(o.source,vs(ht.exec(o))+"g")),o.lastIndex=0;c=o.exec(d);)var h=c.index;l=l.slice(0,h===i?u:h)}}else if(t.indexOf(ai(o),u)!=u){var f=l.lastIndexOf(o);f>-1&&(l=l.slice(0,f))}return l+r},jn.unescape=function(t){return(t=vs(t))&&q.test(t)?t.replace(W,an):t},jn.uniqueId=function(t){var e=++Rt;return vs(t)+e},jn.upperCase=Zs,jn.upperFirst=Ks,jn.each=va,jn.eachRight=ga,jn.first=Go,su(jn,(yu={},vr(jn,(function(t,e){Ot.call(jn.prototype,e)||(yu[e]=t)})),yu),{chain:!1}),jn.VERSION="4.17.15",ge(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){jn[t].placeholder=jn})),ge(["drop","take"],(function(t,e){Un.prototype[t]=function(n){n=n===i?1:_n(ps(n),0);var r=this.__filtered__&&!e?new Un(this):this.clone();return r.__filtered__?r.__takeCount__=yn(n,r.__takeCount__):r.__views__.push({size:yn(n,f),type:t+(r.__dir__<0?"Right":"")}),r},Un.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),ge(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Un.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:oo(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),ge(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Un.prototype[t]=function(){return this[n](1).value()[0]}})),ge(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Un.prototype[t]=function(){return this.__filtered__?new Un(this):this[n](1)}})),Un.prototype.compact=function(){return this.filter(ru)},Un.prototype.find=function(t){return this.filter(t).head()},Un.prototype.findLast=function(t){return this.reverse().find(t)},Un.prototype.invokeMap=qr((function(t,e){return"function"==typeof t?new Un(this):this.map((function(n){return Er(n,t,e)}))})),Un.prototype.reject=function(t){return this.filter(Ra(oo(t)))},Un.prototype.slice=function(t,e){t=ps(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Un(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==i&&(n=(e=ps(e))<0?n.dropRight(-e):n.take(e-t)),n)},Un.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Un.prototype.toArray=function(){return this.take(f)},vr(Un.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),o=jn[r?"take"+("last"==e?"Right":""):e],a=r||/^find/.test(e);o&&(jn.prototype[e]=function(){var e=this.__wrapped__,s=r?[1]:arguments,u=e instanceof Un,l=s[0],c=u||Va(e),d=function(t){var e=o.apply(jn,Te([t],s));return r&&h?e[0]:e};c&&n&&"function"==typeof l&&1!=l.length&&(u=c=!1);var h=this.__chain__,f=!!this.__actions__.length,p=a&&!h,m=u&&!f;if(!a&&c){e=m?e:new Un(this);var _=t.apply(e,s);return _.__actions__.push({func:fa,args:[d],thisArg:i}),new Bn(_,h)}return p&&m?t.apply(this,s):(_=this.thru(d),p?r?_.value()[0]:_.value():_)})})),ge(["pop","push","shift","sort","splice","unshift"],(function(t){var e=At[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);jn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Va(i)?i:[],t)}return this[n]((function(n){return e.apply(Va(n)?n:[],t)}))}})),vr(Un.prototype,(function(t,e){var n=jn[e];if(n){var r=n.name+"";Ot.call(An,r)||(An[r]=[]),An[r].push({name:e,func:n})}})),An[Fi(i,2).name]=[{name:"wrapper",func:i}],Un.prototype.clone=function(){var t=new Un(this.__wrapped__);return t.__actions__=Ti(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Ti(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Ti(this.__views__),t},Un.prototype.reverse=function(){if(this.__filtered__){var t=new Un(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Un.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Va(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=yn(e,t+a);break;case"takeRight":t=_n(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,l=r?s:a-1,c=this.__iteratees__,d=c.length,h=0,f=yn(u,this.__takeCount__);if(!n||!r&&i==u&&f==u)return di(t,this.__actions__);var p=[];t:for(;u--&&h<f;){for(var m=-1,_=t[l+=e];++m<d;){var y=c[m],v=y.iteratee,g=y.type,x=v(_);if(2==g)_=x;else if(!x){if(1==g)continue t;break t}}p[h++]=_}return p},jn.prototype.at=pa,jn.prototype.chain=function(){return ha(this)},jn.prototype.commit=function(){return new Bn(this.value(),this.__chain__)},jn.prototype.next=function(){this.__values__===i&&(this.__values__=hs(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?i:this.__values__[this.__index__++]}},jn.prototype.plant=function(t){for(var e,n=this;n instanceof Nn;){var r=zo(n);r.__index__=0,r.__values__=i,e?o.__wrapped__=r:e=r;var o=r;n=n.__wrapped__}return o.__wrapped__=t,e},jn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Un){var e=t;return this.__actions__.length&&(e=new Un(this)),(e=e.reverse()).__actions__.push({func:fa,args:[ta],thisArg:i}),new Bn(e,this.__chain__)}return this.thru(ta)},jn.prototype.toJSON=jn.prototype.valueOf=jn.prototype.value=function(){return di(this.__wrapped__,this.__actions__)},jn.prototype.first=jn.prototype.head,se&&(jn.prototype[se]=function(){return this}),jn}();oe._=sn,(r=function(){return sn}.call(e,n,e,t))===i||(t.exports=r)}.call(this)},6158:function(t){t.exports=function(){"use strict";var t,e,n;function r(r,i){if(t)if(e){var o="var sharedChunk = {}; ("+t+")(sharedChunk); ("+e+")(sharedChunk);",a={};t(a),(n=i(a)).workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"}))}else e=i;else t=i}return r(0,(function(t){function e(t,e){return t(e={exports:{}},e.exports),e.exports}var n=r;function r(t,e,n,r){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=n,this.p2y=r}r.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},r.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},r.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},r.prototype.solveCurveX=function(t,e){var n,r,i,o,a;for(void 0===e&&(e=1e-6),i=t,a=0;a<8;a++){if(o=this.sampleCurveX(i)-t,Math.abs(o)<e)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if((i=t)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){if(o=this.sampleCurveX(i),Math.abs(o-t)<e)return i;t>o?n=i:r=i,i=.5*(r-n)+n}return i},r.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var i=o;function o(t,e){this.x=t,this.y=e}function a(t,e,r,i){var o=new n(t,e,r,i);return function(t){return o.solve(t)}}o.prototype={clone:function(){return new o(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[2]*this.x+t[3]*this.y;return this.x=t[0]*this.x+t[1]*this.y,this.y=e,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=n*this.x+e*this.y;return this.x=e*this.x-n*this.y,this.y=r,this},_rotateAround:function(t,e){var n=Math.cos(t),r=Math.sin(t),i=e.y+r*(this.x-e.x)+n*(this.y-e.y);return this.x=e.x+n*(this.x-e.x)-r*(this.y-e.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},o.convert=function(t){return t instanceof o?t:Array.isArray(t)?new o(t[0],t[1]):t};var s=a(.25,.1,.25,1);function u(t,e,n){return Math.min(n,Math.max(e,t))}function l(t,e,n){var r=n-e,i=((t-e)%r+r)%r+e;return i===e?n:i}function c(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var r=0,i=e;r<i.length;r+=1){var o=i[r];for(var a in o)t[a]=o[a]}return t}var d=1;function h(){return d++}function f(){return function t(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,t)}()}function p(t){return!!t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)}function m(t,e){t.forEach((function(t){e[t]&&(e[t]=e[t].bind(e))}))}function _(t,e){return-1!==t.indexOf(e,t.length-e.length)}function y(t,e,n){var r={};for(var i in t)r[i]=e.call(n||this,t[i],i,t);return r}function v(t,e,n){var r={};for(var i in t)e.call(n||this,t[i],i,t)&&(r[i]=t[i]);return r}function g(t){return Array.isArray(t)?t.map(g):"object"==typeof t&&t?y(t,g):t}var x={};function b(t){x[t]||("undefined"!=typeof console&&console.warn(t),x[t]=!0)}function w(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)}function M(t){for(var e=0,n=0,r=t.length,i=r-1,o=void 0,a=void 0;n<r;i=n++)e+=((a=t[i]).x-(o=t[n]).x)*(o.y+a.y);return e}function L(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function k(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(t,n,r,i){var o=r||i;return e[n]=!o||o.toLowerCase(),""})),e["max-age"]){var n=parseInt(e["max-age"],10);isNaN(n)?delete e["max-age"]:e["max-age"]=n}return e}var T=null;function S(t){if(null==T){var e=t.navigator?t.navigator.userAgent:null;T=!!t.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return T}function E(t){try{var e=self[t];return e.setItem("_mapbox_test_",1),e.removeItem("_mapbox_test_"),!0}catch(t){return!1}}var A,D,C,P,I=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),O=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,R=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,Y={now:I,frame:function(t){var e=O(t);return{cancel:function(){return R(e)}}},getImageData:function(t,e){void 0===e&&(e=0);var n=self.document.createElement("canvas"),r=n.getContext("2d");if(!r)throw new Error("failed to create canvas 2d context");return n.width=t.width,n.height=t.height,r.drawImage(t,0,0,t.width,t.height),r.getImageData(-e,-e,t.width+2*e,t.height+2*e)},resolveURL:function(t){return A||(A=self.document.createElement("a")),A.href=t,A.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(null==D&&(D=self.matchMedia("(prefers-reduced-motion: reduce)")),D.matches)}},F={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},j={supported:!1,testSupport:function(t){!z&&P&&(N?B(t):C=t)}},z=!1,N=!1;function B(t){var e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);try{if(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,P),t.isContextLost())return;j.supported=!0}catch(t){}t.deleteTexture(e),z=!0}self.document&&((P=self.document.createElement("img")).onload=function(){C&&B(C),C=null,N=!0},P.onerror=function(){z=!0,C=null},P.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var U="01",H=function(t,e){this._transformRequestFn=t,this._customAccessToken=e,this._createSkuToken()};function V(t){return 0===t.indexOf("mapbox:")}H.prototype._createSkuToken=function(){var t=function(){for(var t="",e=0;e<10;e++)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",U,t].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=t.token,this._skuTokenExpiresAt=t.tokenExpiresAt},H.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},H.prototype.transformRequest=function(t,e){return this._transformRequestFn&&this._transformRequestFn(t,e)||{url:t}},H.prototype.normalizeStyleURL=function(t,e){if(!V(t))return t;var n=X(t);return n.path="/styles/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||e)},H.prototype.normalizeGlyphsURL=function(t,e){if(!V(t))return t;var n=X(t);return n.path="/fonts/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||e)},H.prototype.normalizeSourceURL=function(t,e){if(!V(t))return t;var n=X(t);return n.path="/v4/"+n.authority+".json",n.params.push("secure"),this._makeAPIURL(n,this._customAccessToken||e)},H.prototype.normalizeSpriteURL=function(t,e,n,r){var i=X(t);return V(t)?(i.path="/styles/v1"+i.path+"/sprite"+e+n,this._makeAPIURL(i,this._customAccessToken||r)):(i.path+=""+e+n,Z(i))},H.prototype.normalizeTileURL=function(t,e){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!V(t))return t;var n=X(t);n.path=n.path.replace(/(\.(png|jpg)\d*)(?=$)/,(Y.devicePixelRatio>=2||512===e?"@2x":"")+(j.supported?".webp":"$1")),n.path=n.path.replace(/^.+\/v4\//,"/"),n.path="/v4"+n.path;var r=this._customAccessToken||function(t){for(var e=0,n=t;e<n.length;e+=1){var r=n[e].match(/^access_token=(.*)$/);if(r)return r[1]}return null}(n.params)||F.ACCESS_TOKEN;return F.REQUIRE_ACCESS_TOKEN&&r&&this._skuToken&&n.params.push("sku="+this._skuToken),this._makeAPIURL(n,r)},H.prototype.canonicalizeTileURL=function(t,e){var n=X(t);if(!n.path.match(/(^\/v4\/)/)||!n.path.match(/\.[\w]+$/))return t;var r="mapbox://tiles/";r+=n.path.replace("/v4/","");var i=n.params;return e&&(i=i.filter((function(t){return!t.match(/^access_token=/)}))),i.length&&(r+="?"+i.join("&")),r},H.prototype.canonicalizeTileset=function(t,e){for(var n=!!e&&V(e),r=[],i=0,o=t.tiles||[];i<o.length;i+=1){var a=o[i];G(a)?r.push(this.canonicalizeTileURL(a,n)):r.push(a)}return r},H.prototype._makeAPIURL=function(t,e){var n="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",r=X(F.API_URL);if(t.protocol=r.protocol,t.authority=r.authority,"/"!==r.path&&(t.path=""+r.path+t.path),!F.REQUIRE_ACCESS_TOKEN)return Z(t);if(!(e=e||F.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+n);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+n);return t.params=t.params.filter((function(t){return-1===t.indexOf("access_token")})),t.params.push("access_token="+e),Z(t)};var W=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function G(t){return W.test(t)}var q=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function X(t){var e=t.match(q);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function Z(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}function K(t){if(!t)return null;var e=t.split(".");if(!e||3!==e.length)return null;try{return JSON.parse(decodeURIComponent(self.atob(e[1]).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join("")))}catch(t){return null}}var J=function(t){this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};J.prototype.getStorageKey=function(t){var e,n=K(F.ACCESS_TOKEN);return e=n&&n.u?self.btoa(encodeURIComponent(n.u).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode(Number("0x"+e))}))):F.ACCESS_TOKEN||"",t?"mapbox.eventData."+t+":"+e:"mapbox.eventData:"+e},J.prototype.fetchEventData=function(){var t=E("localStorage"),e=this.getStorageKey(),n=this.getStorageKey("uuid");if(t)try{var r=self.localStorage.getItem(e);r&&(this.eventData=JSON.parse(r));var i=self.localStorage.getItem(n);i&&(this.anonId=i)}catch(t){b("Unable to read from LocalStorage")}},J.prototype.saveEventData=function(){var t=E("localStorage"),e=this.getStorageKey(),n=this.getStorageKey("uuid");if(t)try{self.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(e,JSON.stringify(this.eventData))}catch(t){b("Unable to write to LocalStorage")}},J.prototype.processRequests=function(t){},J.prototype.postEvent=function(t,e,n,r){var i=this;if(F.EVENTS_URL){var o=X(F.EVENTS_URL);o.params.push("access_token="+(r||F.ACCESS_TOKEN||""));var a={event:this.type,created:new Date(t).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.9.1",skuId:U,userId:this.anonId},s=e?c(a,e):a,u={url:Z(o),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=xt(u,(function(t){i.pendingRequest=null,n(t),i.saveEventData(),i.processRequests(r)}))}},J.prototype.queueRequest=function(t,e){this.queue.push(t),this.processRequests(e)};var $,Q,tt=function(t){function e(){t.call(this,"map.load"),this.success={},this.skuToken=""}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postMapLoadEvent=function(t,e,n,r){this.skuToken=n,(F.EVENTS_URL&&r||F.ACCESS_TOKEN&&Array.isArray(t)&&t.some((function(t){return V(t)||G(t)})))&&this.queueRequest({id:e,timestamp:Date.now()},r)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){var n=this.queue.shift(),r=n.id,i=n.timestamp;r&&this.success[r]||(this.anonId||this.fetchEventData(),p(this.anonId)||(this.anonId=f()),this.postEvent(i,{skuToken:this.skuToken},(function(t){t||r&&(e.success[r]=!0)}),t))}},e}(J),et=new(function(t){function e(e){t.call(this,"appUserTurnstile"),this._customAccessToken=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.postTurnstileEvent=function(t,e){F.EVENTS_URL&&F.ACCESS_TOKEN&&Array.isArray(t)&&t.some((function(t){return V(t)||G(t)}))&&this.queueRequest(Date.now(),e)},e.prototype.processRequests=function(t){var e=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var n=K(F.ACCESS_TOKEN),r=n?n.u:F.ACCESS_TOKEN,i=r!==this.eventData.tokenU;p(this.anonId)||(this.anonId=f(),i=!0);var o=this.queue.shift();if(this.eventData.lastSuccess){var a=new Date(this.eventData.lastSuccess),s=new Date(o),u=(o-this.eventData.lastSuccess)/864e5;i=i||u>=1||u<-1||a.getDate()!==s.getDate()}else i=!0;if(!i)return this.processRequests();this.postEvent(o,{"enabled.telemetry":!1},(function(t){t||(e.eventData.lastSuccess=o,e.eventData.tokenU=r)}),t)}},e}(J)),nt=et.postTurnstileEvent.bind(et),rt=new tt,it=rt.postMapLoadEvent.bind(rt),ot="mapbox-tiles",at=500,st=50;function ut(){self.caches&&!$&&($=self.caches.open(ot))}function lt(t){var e=t.indexOf("?");return e<0?t:t.slice(0,e)}var ct,dt=1/0;function ht(){return null==ct&&(ct=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof self.createImageBitmap),ct}var ft={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(ft);var pt,mt,_t=function(t){function e(e,n,r){401===n&&G(r)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),t.call(this,e),this.status=n,this.url=r,this.name=this.constructor.name,this.message=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},e}(Error),yt=L()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href},vt=function(t,e){if(!(/^file:/.test(n=t.url)||/^file:/.test(yt())&&!/^\w+:/.test(n))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return function(t,e){var n,r=new self.AbortController,i=new self.Request(t.url,{method:t.method||"GET",body:t.body,credentials:t.credentials,headers:t.headers,referrer:yt(),signal:r.signal}),o=!1,a=!1,s=(n=i.url).indexOf("sku=")>0&&G(n);"json"===t.type&&i.headers.set("Accept","application/json");var u=function(n,r,o){if(!a){if(n&&"SecurityError"!==n.message&&b(n),r&&o)return l(r);var u=Date.now();self.fetch(i).then((function(n){if(n.ok){var r=s?n.clone():null;return l(n,r,u)}return e(new _t(n.statusText,n.status,t.url))})).catch((function(t){20!==t.code&&e(new Error(t.message))}))}},l=function(n,r,s){("arrayBuffer"===t.type?n.arrayBuffer():"json"===t.type?n.json():n.text()).then((function(t){a||(r&&s&&function(t,e,n){if(ut(),$){var r={status:e.status,statusText:e.statusText,headers:new self.Headers};e.headers.forEach((function(t,e){return r.headers.set(e,t)}));var i=k(e.headers.get("Cache-Control")||"");i["no-store"]||(i["max-age"]&&r.headers.set("Expires",new Date(n+1e3*i["max-age"]).toUTCString()),new Date(r.headers.get("Expires")).getTime()-n<42e4||function(t,e){if(void 0===Q)try{new Response(new ReadableStream),Q=!0}catch(t){Q=!1}Q?e(t.body):t.blob().then(e)}(e,(function(e){var n=new self.Response(e,r);ut(),$&&$.then((function(e){return e.put(lt(t.url),n)})).catch((function(t){return b(t.message)}))})))}}(i,r,s),o=!0,e(null,t,n.headers.get("Cache-Control"),n.headers.get("Expires")))})).catch((function(t){a||e(new Error(t.message))}))};return s?function(t,e){if(ut(),!$)return e(null);var n=lt(t.url);$.then((function(t){t.match(n).then((function(r){var i=function(t){if(!t)return!1;var e=new Date(t.headers.get("Expires")||0),n=k(t.headers.get("Cache-Control")||"");return e>Date.now()&&!n["no-cache"]}(r);t.delete(n),i&&t.put(n,r.clone()),e(null,r,i)})).catch(e)})).catch(e)}(i,u):u(null,null),{cancel:function(){a=!0,o||r.abort()}}}(t,e);if(L()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",t,e,void 0,!0)}var n;return function(t,e){var n=new self.XMLHttpRequest;for(var r in n.open(t.method||"GET",t.url,!0),"arrayBuffer"===t.type&&(n.responseType="arraybuffer"),t.headers)n.setRequestHeader(r,t.headers[r]);return"json"===t.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===t.credentials,n.onerror=function(){e(new Error(n.statusText))},n.onload=function(){if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){var r=n.response;if("json"===t.type)try{r=JSON.parse(n.response)}catch(t){return e(t)}e(null,r,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else e(new _t(n.statusText,n.status,t.url))},n.send(t.body),{cancel:function(){return n.abort()}}}(t,e)},gt=function(t,e){return vt(c(t,{type:"arrayBuffer"}),e)},xt=function(t,e){return vt(c(t,{method:"POST"}),e)};pt=[],mt=0;var bt=function(t,e){if(j.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),mt>=F.MAX_PARALLEL_IMAGE_REQUESTS){var n={requestParameters:t,callback:e,cancelled:!1,cancel:function(){this.cancelled=!0}};return pt.push(n),n}mt++;var r=!1,i=function(){if(!r)for(r=!0,mt--;pt.length&&mt<F.MAX_PARALLEL_IMAGE_REQUESTS;){var t=pt.shift();t.cancelled||(t.cancel=bt(t.requestParameters,t.callback).cancel)}},o=gt(t,(function(t,n,r,o){i(),t?e(t):n&&(ht()?function(t,e){var n=new self.Blob([new Uint8Array(t)],{type:"image/png"});self.createImageBitmap(n).then((function(t){e(null,t)})).catch((function(t){e(new Error("Could not load image because of "+t.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))}))}(n,e):function(t,e,n,r){var i=new self.Image,o=self.URL;i.onload=function(){e(null,i),o.revokeObjectURL(i.src)},i.onerror=function(){return e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var a=new self.Blob([new Uint8Array(t)],{type:"image/png"});i.cacheControl=n,i.expires=r,i.src=t.byteLength?o.createObjectURL(a):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(n,e,r,o))}));return{cancel:function(){o.cancel(),i()}}};function wt(t,e,n){n[t]&&-1!==n[t].indexOf(e)||(n[t]=n[t]||[],n[t].push(e))}function Mt(t,e,n){if(n&&n[t]){var r=n[t].indexOf(e);-1!==r&&n[t].splice(r,1)}}var Lt=function(t,e){void 0===e&&(e={}),c(this,e),this.type=t},kt=function(t){function e(e,n){void 0===n&&(n={}),t.call(this,"error",c({error:e},n))}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Lt),Tt=function(){};Tt.prototype.on=function(t,e){return this._listeners=this._listeners||{},wt(t,e,this._listeners),this},Tt.prototype.off=function(t,e){return Mt(t,e,this._listeners),Mt(t,e,this._oneTimeListeners),this},Tt.prototype.once=function(t,e){return this._oneTimeListeners=this._oneTimeListeners||{},wt(t,e,this._oneTimeListeners),this},Tt.prototype.fire=function(t,e){"string"==typeof t&&(t=new Lt(t,e||{}));var n=t.type;if(this.listens(n)){t.target=this;for(var r=0,i=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];r<i.length;r+=1)i[r].call(this,t);for(var o=0,a=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];o<a.length;o+=1){var s=a[o];Mt(n,s,this._oneTimeListeners),s.call(this,t)}var u=this._eventedParent;u&&(c(t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),u.fire(t))}else t instanceof kt&&console.error(t.error);return this},Tt.prototype.listens=function(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)},Tt.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData=e,this};var St={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Et=function(t,e,n,r){this.message=(t?t+": ":"")+n,r&&(this.identifier=r),null!=e&&e.__line__&&(this.line=e.__line__)};function At(t){var e=t.value;return e?[new Et(t.key,e,"constants have been deprecated as of v8")]:[]}function Dt(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];for(var r=0,i=e;r<i.length;r+=1){var o=i[r];for(var a in o)t[a]=o[a]}return t}function Ct(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function Pt(t){if(Array.isArray(t))return t.map(Pt);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var e={};for(var n in t)e[n]=Pt(t[n]);return e}return Ct(t)}var It=function(t){function e(e,n){t.call(this,n),this.message=n,this.key=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Error),Ot=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var n=0,r=e;n<r.length;n+=1){var i=r[n];this.bindings[i[0]]=i[1]}};Ot.prototype.concat=function(t){return new Ot(this,t)},Ot.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},Ot.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var Rt={kind:"null"},Yt={kind:"number"},Ft={kind:"string"},jt={kind:"boolean"},zt={kind:"color"},Nt={kind:"object"},Bt={kind:"value"},Ut={kind:"collator"},Ht={kind:"formatted"},Vt={kind:"resolvedImage"};function Wt(t,e){return{kind:"array",itemType:t,N:e}}function Gt(t){if("array"===t.kind){var e=Gt(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}var qt=[Rt,Yt,Ft,jt,zt,Ht,Nt,Wt(Bt),Vt];function Xt(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!Xt(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var n=0,r=qt;n<r.length;n+=1)if(!Xt(r[n],e))return null}return"Expected "+Gt(t)+" but found "+Gt(e)+" instead."}var Zt=e((function(t,e){var n={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function r(t){return(t=Math.round(t))<0?0:t>255?255:t}function i(t){return r("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function o(t){return(e="%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))<0?0:e>1?1:e;var e}function a(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}try{e.parseCSSColor=function(t){var e,s=t.replace(/ /g,"").toLowerCase();if(s in n)return n[s].slice();if("#"===s[0])return 4===s.length?(e=parseInt(s.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===s.length&&(e=parseInt(s.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var u=s.indexOf("("),l=s.indexOf(")");if(-1!==u&&l+1===s.length){var c=s.substr(0,u),d=s.substr(u+1,l-(u+1)).split(","),h=1;switch(c){case"rgba":if(4!==d.length)return null;h=o(d.pop());case"rgb":return 3!==d.length?null:[i(d[0]),i(d[1]),i(d[2]),h];case"hsla":if(4!==d.length)return null;h=o(d.pop());case"hsl":if(3!==d.length)return null;var f=(parseFloat(d[0])%360+360)%360/360,p=o(d[1]),m=o(d[2]),_=m<=.5?m*(p+1):m+p-m*p,y=2*m-_;return[r(255*a(y,_,f+1/3)),r(255*a(y,_,f)),r(255*a(y,_,f-1/3)),h];default:return null}}return null}}catch(t){}})).parseCSSColor,Kt=function(t,e,n,r){void 0===r&&(r=1),this.r=t,this.g=e,this.b=n,this.a=r};Kt.parse=function(t){if(t){if(t instanceof Kt)return t;if("string"==typeof t){var e=Zt(t);if(e)return new Kt(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},Kt.prototype.toString=function(){var t=this.toArray(),e=t[1],n=t[2],r=t[3];return"rgba("+Math.round(t[0])+","+Math.round(e)+","+Math.round(n)+","+r+")"},Kt.prototype.toArray=function(){var t=this.a;return 0===t?[0,0,0,0]:[255*this.r/t,255*this.g/t,255*this.b/t,t]},Kt.black=new Kt(0,0,0,1),Kt.white=new Kt(1,1,1,1),Kt.transparent=new Kt(0,0,0,0),Kt.red=new Kt(1,0,0,1);var Jt=function(t,e,n){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Jt.prototype.compare=function(t,e){return this.collator.compare(t,e)},Jt.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var $t=function(t,e,n,r,i){this.text=t,this.image=e,this.scale=n,this.fontStack=r,this.textColor=i},Qt=function(t){this.sections=t};Qt.fromString=function(t){return new Qt([new $t(t,null,null,null,null)])},Qt.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some((function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length}))},Qt.factory=function(t){return t instanceof Qt?t:Qt.fromString(t)},Qt.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map((function(t){return t.text})).join("")},Qt.prototype.serialize=function(){for(var t=["format"],e=0,n=this.sections;e<n.length;e+=1){var r=n[e];if(r.image)t.push(["image",r.image.name]);else{t.push(r.text);var i={};r.fontStack&&(i["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(i["font-scale"]=r.scale),r.textColor&&(i["text-color"]=["rgba"].concat(r.textColor.toArray())),t.push(i)}}return t};var te=function(t){this.name=t.name,this.available=t.available};function ee(t,e,n,r){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value ["+[t,e,n,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[t,e,n,r]:[t,e,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function ne(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof Kt)return!0;if(t instanceof Jt)return!0;if(t instanceof Qt)return!0;if(t instanceof te)return!0;if(Array.isArray(t)){for(var e=0,n=t;e<n.length;e+=1)if(!ne(n[e]))return!1;return!0}if("object"==typeof t){for(var r in t)if(!ne(t[r]))return!1;return!0}return!1}function re(t){if(null===t)return Rt;if("string"==typeof t)return Ft;if("boolean"==typeof t)return jt;if("number"==typeof t)return Yt;if(t instanceof Kt)return zt;if(t instanceof Jt)return Ut;if(t instanceof Qt)return Ht;if(t instanceof te)return Vt;if(Array.isArray(t)){for(var e,n=t.length,r=0,i=t;r<i.length;r+=1){var o=re(i[r]);if(e){if(e===o)continue;e=Bt;break}e=o}return Wt(e||Bt,n)}return Nt}function ie(t){var e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Kt||t instanceof Qt||t instanceof te?t.toString():JSON.stringify(t)}te.prototype.toString=function(){return this.name},te.fromString=function(t){return t?new te({name:t,available:!1}):null},te.prototype.serialize=function(){return["image",this.name]};var oe=function(t,e){this.type=t,this.value=e};oe.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!ne(t[1]))return e.error("invalid value");var n=t[1],r=re(n),i=e.expectedType;return"array"!==r.kind||0!==r.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(r=i),new oe(r,n)},oe.prototype.evaluate=function(){return this.value},oe.prototype.eachChild=function(){},oe.prototype.outputDefined=function(){return!0},oe.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Kt?["rgba"].concat(this.value.toArray()):this.value instanceof Qt?this.value.serialize():this.value};var ae=function(t){this.name="ExpressionEvaluationError",this.message=t};ae.prototype.toJSON=function(){return this.message};var se={string:Ft,number:Yt,boolean:jt,object:Nt},ue=function(t,e){this.type=t,this.args=e};ue.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n,r=1,i=t[0];if("array"===i){var o,a;if(t.length>2){var s=t[1];if("string"!=typeof s||!(s in se)||"object"===s)return e.error('The item type argument of "array" must be one of string, number, boolean',1);o=se[s],r++}else o=Bt;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);a=t[2],r++}n=Wt(o,a)}else n=se[i];for(var u=[];r<t.length;r++){var l=e.parse(t[r],r,Bt);if(!l)return null;u.push(l)}return new ue(n,u)},ue.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var n=this.args[e].evaluate(t);if(!Xt(this.type,re(n)))return n;if(e===this.args.length-1)throw new ae("Expected value to be of type "+Gt(this.type)+", but found "+Gt(re(n))+" instead.")}return null},ue.prototype.eachChild=function(t){this.args.forEach(t)},ue.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},ue.prototype.serialize=function(){var t=this.type,e=[t.kind];if("array"===t.kind){var n=t.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){e.push(n.kind);var r=t.N;("number"==typeof r||this.args.length>1)&&e.push(r)}}return e.concat(this.args.map((function(t){return t.serialize()})))};var le=function(t){this.type=Ht,this.sections=t};le.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n=t[1];if(!Array.isArray(n)&&"object"==typeof n)return e.error("First argument must be an image or text section.");for(var r=[],i=!1,o=1;o<=t.length-1;++o){var a=t[o];if(i&&"object"==typeof a&&!Array.isArray(a)){i=!1;var s=null;if(a["font-scale"]&&!(s=e.parse(a["font-scale"],1,Yt)))return null;var u=null;if(a["text-font"]&&!(u=e.parse(a["text-font"],1,Wt(Ft))))return null;var l=null;if(a["text-color"]&&!(l=e.parse(a["text-color"],1,zt)))return null;var c=r[r.length-1];c.scale=s,c.font=u,c.textColor=l}else{var d=e.parse(t[o],1,Bt);if(!d)return null;var h=d.type.kind;if("string"!==h&&"value"!==h&&"null"!==h&&"resolvedImage"!==h)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,r.push({content:d,scale:null,font:null,textColor:null})}}return new le(r)},le.prototype.evaluate=function(t){return new Qt(this.sections.map((function(e){var n=e.content.evaluate(t);return re(n)===Vt?new $t("",n,null,null,null):new $t(ie(n),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))},le.prototype.eachChild=function(t){for(var e=0,n=this.sections;e<n.length;e+=1){var r=n[e];t(r.content),r.scale&&t(r.scale),r.font&&t(r.font),r.textColor&&t(r.textColor)}},le.prototype.outputDefined=function(){return!1},le.prototype.serialize=function(){for(var t=["format"],e=0,n=this.sections;e<n.length;e+=1){var r=n[e];t.push(r.content.serialize());var i={};r.scale&&(i["font-scale"]=r.scale.serialize()),r.font&&(i["text-font"]=r.font.serialize()),r.textColor&&(i["text-color"]=r.textColor.serialize()),t.push(i)}return t};var ce=function(t){this.type=Vt,this.input=t};ce.parse=function(t,e){if(2!==t.length)return e.error("Expected two arguments.");var n=e.parse(t[1],1,Ft);return n?new ce(n):e.error("No image name provided.")},ce.prototype.evaluate=function(t){var e=this.input.evaluate(t),n=te.fromString(e);return n&&t.availableImages&&(n.available=t.availableImages.indexOf(e)>-1),n},ce.prototype.eachChild=function(t){t(this.input)},ce.prototype.outputDefined=function(){return!1},ce.prototype.serialize=function(){return["image",this.input.serialize()]};var de={"to-boolean":jt,"to-color":zt,"to-number":Yt,"to-string":Ft},he=function(t,e){this.type=t,this.args=e};he.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n=t[0];if(("to-boolean"===n||"to-string"===n)&&2!==t.length)return e.error("Expected one argument.");for(var r=de[n],i=[],o=1;o<t.length;o++){var a=e.parse(t[o],o,Bt);if(!a)return null;i.push(a)}return new he(r,i)},he.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var e,n,r=0,i=this.args;r<i.length;r+=1){if(n=null,(e=i[r].evaluate(t))instanceof Kt)return e;if("string"==typeof e){var o=t.parseColor(e);if(o)return o}else if(Array.isArray(e)&&!(n=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":ee(e[0],e[1],e[2],e[3])))return new Kt(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new ae(n||"Could not parse color from value '"+("string"==typeof e?e:String(JSON.stringify(e)))+"'")}if("number"===this.type.kind){for(var a=null,s=0,u=this.args;s<u.length;s+=1){if(null===(a=u[s].evaluate(t)))return 0;var l=Number(a);if(!isNaN(l))return l}throw new ae("Could not convert "+JSON.stringify(a)+" to number.")}return"formatted"===this.type.kind?Qt.fromString(ie(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?te.fromString(ie(this.args[0].evaluate(t))):ie(this.args[0].evaluate(t))},he.prototype.eachChild=function(t){this.args.forEach(t)},he.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},he.prototype.serialize=function(){if("formatted"===this.type.kind)return new le([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new ce(this.args[0]).serialize();var t=["to-"+this.type.kind];return this.eachChild((function(e){t.push(e.serialize())})),t};var fe=["Unknown","Point","LineString","Polygon"],pe=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};pe.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},pe.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?fe[this.feature.type]:this.feature.type:null},pe.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},pe.prototype.canonicalID=function(){return this.canonical},pe.prototype.properties=function(){return this.feature&&this.feature.properties||{}},pe.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Kt.parse(t)),e};var me=function(t,e,n,r){this.name=t,this.type=e,this._evaluate=n,this.args=r};me.prototype.evaluate=function(t){return this._evaluate(t,this.args)},me.prototype.eachChild=function(t){this.args.forEach(t)},me.prototype.outputDefined=function(){return!1},me.prototype.serialize=function(){return[this.name].concat(this.args.map((function(t){return t.serialize()})))},me.parse=function(t,e){var n,r=t[0],i=me.definitions[r];if(!i)return e.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0);for(var o=Array.isArray(i)?i[0]:i.type,a=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,s=a.filter((function(e){var n=e[0];return!Array.isArray(n)||n.length===t.length-1})),u=null,l=0,c=s;l<c.length;l+=1){var d=c[l],h=d[0],f=d[1];u=new Ve(e.registry,e.path,null,e.scope);for(var p=[],m=!1,_=1;_<t.length;_++){var y=t[_],v=Array.isArray(h)?h[_-1]:h.type,g=u.parse(y,1+p.length,v);if(!g){m=!0;break}p.push(g)}if(!m)if(Array.isArray(h)&&h.length!==p.length)u.error("Expected "+h.length+" arguments, but found "+p.length+" instead.");else{for(var x=0;x<p.length;x++){var b=Array.isArray(h)?h[x]:h.type,w=p[x];u.concat(x+1).checkSubtype(b,w.type)}if(0===u.errors.length)return new me(r,o,f,p)}}if(1===s.length)(n=e.errors).push.apply(n,u.errors);else{for(var M=(s.length?s:a).map((function(t){var e;return e=t[0],Array.isArray(e)?"("+e.map(Gt).join(", ")+")":"("+Gt(e.type)+"...)"})).join(" | "),L=[],k=1;k<t.length;k++){var T=e.parse(t[k],1+L.length);if(!T)return null;L.push(Gt(T.type))}e.error("Expected arguments of type "+M+", but found ("+L.join(", ")+") instead.")}return null},me.register=function(t,e){for(var n in me.definitions=e,e)t[n]=me};var _e=function(t,e,n){this.type=Ut,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=e};_e.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var n=t[1];if("object"!=typeof n||Array.isArray(n))return e.error("Collator options argument must be an object.");var r=e.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,jt);if(!r)return null;var i=e.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,jt);if(!i)return null;var o=null;return n.locale&&!(o=e.parse(n.locale,1,Ft))?null:new _e(r,i,o)},_e.prototype.evaluate=function(t){return new Jt(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},_e.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},_e.prototype.outputDefined=function(){return!1},_e.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var ye=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};ye.prototype.setNorthEast=function(t){return this._ne=t instanceof ve?new ve(t.lng,t.lat):ve.convert(t),this},ye.prototype.setSouthWest=function(t){return this._sw=t instanceof ve?new ve(t.lng,t.lat):ve.convert(t),this},ye.prototype.extend=function(t){var e,n,r=this._sw,i=this._ne;if(t instanceof ve)e=t,n=t;else{if(!(t instanceof ye))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(ye.convert(t)):this.extend(ve.convert(t)):this;if(n=t._ne,!(e=t._sw)||!n)return this}return r||i?(r.lng=Math.min(e.lng,r.lng),r.lat=Math.min(e.lat,r.lat),i.lng=Math.max(n.lng,i.lng),i.lat=Math.max(n.lat,i.lat)):(this._sw=new ve(e.lng,e.lat),this._ne=new ve(n.lng,n.lat)),this},ye.prototype.getCenter=function(){return new ve((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},ye.prototype.getSouthWest=function(){return this._sw},ye.prototype.getNorthEast=function(){return this._ne},ye.prototype.getNorthWest=function(){return new ve(this.getWest(),this.getNorth())},ye.prototype.getSouthEast=function(){return new ve(this.getEast(),this.getSouth())},ye.prototype.getWest=function(){return this._sw.lng},ye.prototype.getSouth=function(){return this._sw.lat},ye.prototype.getEast=function(){return this._ne.lng},ye.prototype.getNorth=function(){return this._ne.lat},ye.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},ye.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},ye.prototype.isEmpty=function(){return!(this._sw&&this._ne)},ye.prototype.contains=function(t){var e=ve.convert(t),n=e.lng,r=e.lat,i=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(i=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=r&&r<=this._ne.lat&&i},ye.convert=function(t){return!t||t instanceof ye?t:new ye(t)};var ve=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};ve.prototype.wrap=function(){return new ve(l(this.lng,-180,180),this.lat)},ve.prototype.toArray=function(){return[this.lng,this.lat]},ve.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},ve.prototype.distanceTo=function(t){var e=Math.PI/180,n=this.lat*e,r=t.lat*e,i=Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos((t.lng-this.lng)*e);return 6371008.8*Math.acos(Math.min(i,1))},ve.prototype.toBounds=function(t){void 0===t&&(t=0);var e=360*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return new ye(new ve(this.lng-n,this.lat-e),new ve(this.lng+n,this.lat+e))},ve.convert=function(t){if(t instanceof ve)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new ve(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new ve(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var ge=2*Math.PI*6371008.8;function xe(t){return ge*Math.cos(t*Math.PI/180)}function be(t){return(180+t)/360}function we(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function Me(t,e){return t/xe(e)}function Le(t){return 360/Math.PI*Math.atan(Math.exp((180-360*t)*Math.PI/180))-90}var ke=function(t,e,n){void 0===n&&(n=0),this.x=+t,this.y=+e,this.z=+n};ke.fromLngLat=function(t,e){void 0===e&&(e=0);var n=ve.convert(t);return new ke(be(n.lng),we(n.lat),Me(e,n.lat))},ke.prototype.toLngLat=function(){return new ve(360*this.x-180,Le(this.y))},ke.prototype.toAltitude=function(){return this.z*xe(Le(this.y))},ke.prototype.meterInMercatorCoordinateUnits=function(){return 1/ge*(t=Le(this.y),1/Math.cos(t*Math.PI/180));var t};var Te=8192;function Se(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function Ee(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function Ae(t,e){var n=ke.fromLngLat({lng:t[0],lat:t[1]},0),r=Math.pow(2,e.z);return[Math.round(n.x*r*Te),Math.round(n.y*r*Te)]}function De(t,e,n){return e[1]>t[1]!=n[1]>t[1]&&t[0]<(n[0]-e[0])*(t[1]-e[1])/(n[1]-e[1])+e[0]}function Ce(t,e){for(var n,r,i,o,a,s,u,l=!1,c=0,d=e.length;c<d;c++)for(var h=e[c],f=0,p=h.length;f<p-1;f++){if((o=(n=t)[0]-(r=h[f])[0])*(u=n[1]-(i=h[f+1])[1])-(s=n[0]-i[0])*(a=n[1]-r[1])==0&&o*s<=0&&a*u<=0)return!1;De(t,h[f],h[f+1])&&(l=!l)}return l}function Pe(t,e){for(var n=0;n<e.length;n++)if(Ce(t,e[n]))return!0;return!1}function Ie(t,e,n,r){var i=r[0]-n[0],o=r[1]-n[1];return((t[0]-n[0])*o-i*(t[1]-n[1]))*((e[0]-n[0])*o-i*(e[1]-n[1]))<0}function Oe(t,e,n){for(var r=0,i=n;r<i.length;r+=1)for(var o=i[r],a=0;a<o.length-1;++a)if(0!=(d=[(c=o[a+1])[0]-(l=o[a])[0],c[1]-l[1]])[0]*(h=[(u=e)[0]-(s=t)[0],u[1]-s[1]])[1]-d[1]*h[0]&&Ie(s,u,l,c)&&Ie(l,c,s,u))return!0;var s,u,l,c,d,h;return!1}function Re(t,e){for(var n=0;n<t.length;++n)if(!Ce(t[n],e))return!1;for(var r=0;r<t.length-1;++r)if(Oe(t[r],t[r+1],e))return!1;return!0}function Ye(t,e){for(var n=0;n<e.length;n++)if(Re(t,e[n]))return!0;return!1}function Fe(t,e,n){for(var r=[],i=0;i<t.length;i++){for(var o=[],a=0;a<t[i].length;a++){var s=Ae(t[i][a],n);Se(e,s),o.push(s)}r.push(o)}return r}function je(t,e,n){for(var r=[],i=0;i<t.length;i++){var o=Fe(t[i],e,n);r.push(o)}return r}var ze=function(t,e){this.type=jt,this.geojson=t,this.geometries=e};function Ne(t){if(t instanceof me){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof ze)return!1;var e=!0;return t.eachChild((function(t){e&&!Ne(t)&&(e=!1)})),e}function Be(t){if(t instanceof me&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild((function(t){e&&!Be(t)&&(e=!1)})),e}function Ue(t,e){if(t instanceof me&&e.indexOf(t.name)>=0)return!1;var n=!0;return t.eachChild((function(t){n&&!Ue(t,e)&&(n=!1)})),n}ze.parse=function(t,e){if(2!==t.length)return e.error("'within' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(ne(t[1])){var n=t[1];if("FeatureCollection"===n.type)for(var r=0;r<n.features.length;++r){var i=n.features[r].geometry.type;if("Polygon"===i||"MultiPolygon"===i)return new ze(n,n.features[r].geometry)}else if("Feature"===n.type){var o=n.geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new ze(n,n.geometry)}else if("Polygon"===n.type||"MultiPolygon"===n.type)return new ze(n,n)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")},ze.prototype.evaluate=function(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){for(var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID(),o=[i.x*Te,i.y*Te],a=[],s=0,u=t.geometry();s<u.length;s+=1)for(var l=0,c=u[s];l<c.length;l+=1){var d=c[l],h=[d.x+o[0],d.y+o[1]];Se(n,h),a.push(h)}if("Polygon"===e.type){var f=Fe(e.coordinates,r,i);if(!Ee(n,r))return!1;for(var p=0,m=a;p<m.length;p+=1)if(!Ce(m[p],f))return!1}if("MultiPolygon"===e.type){var _=je(e.coordinates,r,i);if(!Ee(n,r))return!1;for(var y=0,v=a;y<v.length;y+=1)if(!Pe(v[y],_))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){for(var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID(),o=[i.x*Te,i.y*Te],a=[],s=0,u=t.geometry();s<u.length;s+=1){for(var l=[],c=0,d=u[s];c<d.length;c+=1){var h=d[c],f=[h.x+o[0],h.y+o[1]];Se(n,f),l.push(f)}a.push(l)}if("Polygon"===e.type){var p=Fe(e.coordinates,r,i);if(!Ee(n,r))return!1;for(var m=0,_=a;m<_.length;m+=1)if(!Re(_[m],p))return!1}if("MultiPolygon"===e.type){var y=je(e.coordinates,r,i);if(!Ee(n,r))return!1;for(var v=0,g=a;v<g.length;v+=1)if(!Ye(g[v],y))return!1}return!0}(t,this.geometries)}return!1},ze.prototype.eachChild=function(){},ze.prototype.outputDefined=function(){return!0},ze.prototype.serialize=function(){return["within",this.geojson]};var He=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};He.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var n=t[1];return e.scope.has(n)?new He(n,e.scope.get(n)):e.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},He.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},He.prototype.eachChild=function(){},He.prototype.outputDefined=function(){return!1},He.prototype.serialize=function(){return["var",this.name]};var Ve=function(t,e,n,r,i){void 0===e&&(e=[]),void 0===r&&(r=new Ot),void 0===i&&(i=[]),this.registry=t,this.path=e,this.key=e.map((function(t){return"["+t+"]"})).join(""),this.scope=r,this.errors=i,this.expectedType=n};function We(t,e){for(var n,r=t.length-1,i=0,o=r,a=0;i<=o;)if((n=t[a=Math.floor((i+o)/2)])<=e){if(a===r||e<t[a+1])return a;i=a+1}else{if(!(n>e))throw new ae("Input is not a number.");o=a-1}return 0}Ve.prototype.parse=function(t,e,n,r,i){return void 0===i&&(i={}),e?this.concat(e,n,r)._parse(t,i):this._parse(t,i)},Ve.prototype._parse=function(t,e){function n(t,e,n){return"assert"===n?new ue(e,[t]):"coerce"===n?new he(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var r=t[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found "+typeof r+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var i=this.registry[r];if(i){var o=i.parse(t,this);if(!o)return null;if(this.expectedType){var a=this.expectedType,s=o.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==s.kind)if("color"!==a.kind&&"formatted"!==a.kind&&"resolvedImage"!==a.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(a,s))return null}else o=n(o,a,e.typeAnnotation||"coerce");else o=n(o,a,e.typeAnnotation||"assert")}if(!(o instanceof oe)&&"resolvedImage"!==o.type.kind&&function t(e){if(e instanceof He)return t(e.boundExpression);if(e instanceof me&&"error"===e.name)return!1;if(e instanceof _e)return!1;if(e instanceof ze)return!1;var n=e instanceof he||e instanceof ue,r=!0;return e.eachChild((function(e){r=n?r&&t(e):r&&e instanceof oe})),!!r&&Ne(e)&&Ue(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(o)){var u=new pe;try{o=new oe(o.type,o.evaluate(u))}catch(t){return this.error(t.message),null}}return o}return this.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===t?"'undefined' value invalid. Use null instead.":"object"==typeof t?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof t+" instead.")},Ve.prototype.concat=function(t,e,n){var r="number"==typeof t?this.path.concat(t):this.path,i=n?this.scope.concat(n):this.scope;return new Ve(this.registry,r,e||null,i,this.errors)},Ve.prototype.error=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var r=""+this.key+e.map((function(t){return"["+t+"]"})).join("");this.errors.push(new It(r,t))},Ve.prototype.checkSubtype=function(t,e){var n=Xt(t,e);return n&&this.error(n),n};var Ge=function(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var r=0,i=n;r<i.length;r+=1){var o=i[r],a=o[1];this.labels.push(o[0]),this.outputs.push(a)}};Ge.parse=function(t,e){if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");var n=e.parse(t[1],1,Yt);if(!n)return null;var r=[],i=null;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(var o=1;o<t.length;o+=2){var a=1===o?-1/0:t[o],s=t[o+1],u=o,l=o+1;if("number"!=typeof a)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(r.length&&r[r.length-1][0]>=a)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);var c=e.parse(s,l,i);if(!c)return null;i=i||c.type,r.push([a,c])}return new Ge(i,n,r)},Ge.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);var i=e.length;return r>=e[i-1]?n[i-1].evaluate(t):n[We(e,r)].evaluate(t)},Ge.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},Ge.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))},Ge.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var qe=Xe;function Xe(t,e,n,r){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=n,this.p2y=r}function Ze(t,e,n){return t*(1-n)+e*n}Xe.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},Xe.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},Xe.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},Xe.prototype.solveCurveX=function(t,e){var n,r,i,o,a;for(void 0===e&&(e=1e-6),i=t,a=0;a<8;a++){if(o=this.sampleCurveX(i)-t,Math.abs(o)<e)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if((i=t)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){if(o=this.sampleCurveX(i),Math.abs(o-t)<e)return i;t>o?n=i:r=i,i=.5*(r-n)+n}return i},Xe.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var Ke=Object.freeze({__proto__:null,number:Ze,color:function(t,e,n){return new Kt(Ze(t.r,e.r,n),Ze(t.g,e.g,n),Ze(t.b,e.b,n),Ze(t.a,e.a,n))},array:function(t,e,n){return t.map((function(t,r){return Ze(t,e[r],n)}))}}),Je=.95047,$e=1.08883,Qe=4/29,tn=6/29,en=3*tn*tn,nn=Math.PI/180,rn=180/Math.PI;function on(t){return t>.008856451679035631?Math.pow(t,1/3):t/en+Qe}function an(t){return t>tn?t*t*t:en*(t-Qe)}function sn(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function un(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ln(t){var e=un(t.r),n=un(t.g),r=un(t.b),i=on((.4124564*e+.3575761*n+.1804375*r)/Je),o=on((.2126729*e+.7151522*n+.072175*r)/1);return{l:116*o-16,a:500*(i-o),b:200*(o-on((.0193339*e+.119192*n+.9503041*r)/$e)),alpha:t.a}}function cn(t){var e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,r=isNaN(t.b)?e:e-t.b/200;return e=1*an(e),n=Je*an(n),r=$e*an(r),new Kt(sn(3.2404542*n-1.5371385*e-.4985314*r),sn(-.969266*n+1.8760108*e+.041556*r),sn(.0556434*n-.2040259*e+1.0572252*r),t.alpha)}function dn(t,e,n){var r=e-t;return t+n*(r>180||r<-180?r-360*Math.round(r/360):r)}var hn={forward:ln,reverse:cn,interpolate:function(t,e,n){return{l:Ze(t.l,e.l,n),a:Ze(t.a,e.a,n),b:Ze(t.b,e.b,n),alpha:Ze(t.alpha,e.alpha,n)}}},fn={forward:function(t){var e=ln(t),n=e.l,r=e.a,i=e.b,o=Math.atan2(i,r)*rn;return{h:o<0?o+360:o,c:Math.sqrt(r*r+i*i),l:n,alpha:t.a}},reverse:function(t){var e=t.h*nn,n=t.c;return cn({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:dn(t.h,e.h,n),c:Ze(t.c,e.c,n),l:Ze(t.l,e.l,n),alpha:Ze(t.alpha,e.alpha,n)}}},pn=Object.freeze({__proto__:null,lab:hn,hcl:fn}),mn=function(t,e,n,r,i){this.type=t,this.operator=e,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(var o=0,a=i;o<a.length;o+=1){var s=a[o],u=s[1];this.labels.push(s[0]),this.outputs.push(u)}};function _n(t,e,n,r){var i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}mn.interpolationFactor=function(t,e,n,r){var i=0;if("exponential"===t.name)i=_n(e,t.base,n,r);else if("linear"===t.name)i=_n(e,1,n,r);else if("cubic-bezier"===t.name){var o=t.controlPoints;i=new qe(o[0],o[1],o[2],o[3]).solve(_n(e,1,n,r))}return i},mn.parse=function(t,e){var n=t[0],r=t[1],i=t[2],o=t.slice(3);if(!Array.isArray(r)||0===r.length)return e.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){var a=r[1];if("number"!=typeof a)return e.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:a}}else{if("cubic-bezier"!==r[0])return e.error("Unknown interpolation type "+String(r[0]),1,0);var s=r.slice(1);if(4!==s.length||s.some((function(t){return"number"!=typeof t||t<0||t>1})))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:s}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(i=e.parse(i,2,Yt)))return null;var u=[],l=null;"interpolate-hcl"===n||"interpolate-lab"===n?l=zt:e.expectedType&&"value"!==e.expectedType.kind&&(l=e.expectedType);for(var c=0;c<o.length;c+=2){var d=o[c],h=o[c+1],f=c+3,p=c+4;if("number"!=typeof d)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',f);if(u.length&&u[u.length-1][0]>=d)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',f);var m=e.parse(h,p,l);if(!m)return null;l=l||m.type,u.push([d,m])}return"number"===l.kind||"color"===l.kind||"array"===l.kind&&"number"===l.itemType.kind&&"number"==typeof l.N?new mn(l,n,r,i,u):e.error("Type "+Gt(l)+" is not interpolatable.")},mn.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);var i=e.length;if(r>=e[i-1])return n[i-1].evaluate(t);var o=We(e,r),a=mn.interpolationFactor(this.interpolation,r,e[o],e[o+1]),s=n[o].evaluate(t),u=n[o+1].evaluate(t);return"interpolate"===this.operator?Ke[this.type.kind.toLowerCase()](s,u,a):"interpolate-hcl"===this.operator?fn.reverse(fn.interpolate(fn.forward(s),fn.forward(u),a)):hn.reverse(hn.interpolate(hn.forward(s),hn.forward(u),a))},mn.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1)t(n[e])},mn.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))},mn.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],n=0;n<this.labels.length;n++)e.push(this.labels[n],this.outputs[n].serialize());return e};var yn=function(t,e){this.type=t,this.args=e};yn.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var n=null,r=e.expectedType;r&&"value"!==r.kind&&(n=r);for(var i=[],o=0,a=t.slice(1);o<a.length;o+=1){var s=e.parse(a[o],1+i.length,n,void 0,{typeAnnotation:"omit"});if(!s)return null;n=n||s.type,i.push(s)}var u=r&&i.some((function(t){return Xt(r,t.type)}));return new yn(u?Bt:n,i)},yn.prototype.evaluate=function(t){for(var e,n=null,r=0,i=0,o=this.args;i<o.length&&(r++,(n=o[i].evaluate(t))&&n instanceof te&&!n.available&&(e||(e=n.name),n=null,r===this.args.length&&(n=e)),null===n);i+=1);return n},yn.prototype.eachChild=function(t){this.args.forEach(t)},yn.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},yn.prototype.serialize=function(){var t=["coalesce"];return this.eachChild((function(e){t.push(e.serialize())})),t};var vn=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};vn.prototype.evaluate=function(t){return this.result.evaluate(t)},vn.prototype.eachChild=function(t){for(var e=0,n=this.bindings;e<n.length;e+=1)t(n[e][1]);t(this.result)},vn.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var n=[],r=1;r<t.length-1;r+=2){var i=t[r];if("string"!=typeof i)return e.error("Expected string, but found "+typeof i+" instead.",r);if(/[^a-zA-Z0-9_]/.test(i))return e.error("Variable names must contain only alphanumeric characters or '_'.",r);var o=e.parse(t[r+1],r+1);if(!o)return null;n.push([i,o])}var a=e.parse(t[t.length-1],t.length-1,e.expectedType,n);return a?new vn(n,a):null},vn.prototype.outputDefined=function(){return this.result.outputDefined()},vn.prototype.serialize=function(){for(var t=["let"],e=0,n=this.bindings;e<n.length;e+=1){var r=n[e];t.push(r[0],r[1].serialize())}return t.push(this.result.serialize()),t};var gn=function(t,e,n){this.type=t,this.index=e,this.input=n};gn.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,Yt),r=e.parse(t[2],2,Wt(e.expectedType||Bt));return n&&r?new gn(r.type.itemType,n,r):null},gn.prototype.evaluate=function(t){var e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new ae("Array index out of bounds: "+e+" < 0.");if(e>=n.length)throw new ae("Array index out of bounds: "+e+" > "+(n.length-1)+".");if(e!==Math.floor(e))throw new ae("Array index must be an integer, but found "+e+" instead.");return n[e]},gn.prototype.eachChild=function(t){t(this.index),t(this.input)},gn.prototype.outputDefined=function(){return!1},gn.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var xn=function(t,e){this.type=jt,this.needle=t,this.haystack=e};xn.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var n,r=e.parse(t[1],1,Bt),i=e.parse(t[2],2,Bt);return r&&i?"boolean"!==(n=r.type).kind&&"string"!==n.kind&&"number"!==n.kind&&"null"!==n.kind&&"value"!==n.kind?e.error("Expected first argument to be of type boolean, string, number or null, but found "+Gt(r.type)+" instead"):new xn(r,i):null},xn.prototype.evaluate=function(t){var e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(null==e||!n)return!1;if(!function(t){return"boolean"==typeof t||"string"==typeof t||"number"==typeof t}(e))throw new ae("Expected first argument to be of type boolean, string or number, but found "+Gt(re(e))+" instead.");if(!function(t){return Array.isArray(t)||"string"==typeof t}(n))throw new ae("Expected second argument to be of type array or string, but found "+Gt(re(n))+" instead.");return n.indexOf(e)>=0},xn.prototype.eachChild=function(t){t(this.needle),t(this.haystack)},xn.prototype.outputDefined=function(){return!0},xn.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var bn=function(t,e,n,r,i,o){this.inputType=t,this.type=e,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o};bn.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var n,r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var i={},o=[],a=2;a<t.length-1;a+=2){var s=t[a],u=t[a+1];Array.isArray(s)||(s=[s]);var l=e.concat(a);if(0===s.length)return l.error("Expected at least one branch label.");for(var c=0,d=s;c<d.length;c+=1){var h=d[c];if("number"!=typeof h&&"string"!=typeof h)return l.error("Branch labels must be numbers or strings.");if("number"==typeof h&&Math.abs(h)>Number.MAX_SAFE_INTEGER)return l.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof h&&Math.floor(h)!==h)return l.error("Numeric branch labels must be integer values.");if(n){if(l.checkSubtype(n,re(h)))return null}else n=re(h);if(void 0!==i[String(h)])return l.error("Branch labels must be unique.");i[String(h)]=o.length}var f=e.parse(u,a,r);if(!f)return null;r=r||f.type,o.push(f)}var p=e.parse(t[1],1,Bt);if(!p)return null;var m=e.parse(t[t.length-1],t.length-1,r);return m?"value"!==p.type.kind&&e.concat(1).checkSubtype(n,p.type)?null:new bn(n,r,p,i,o,m):null},bn.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(re(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},bn.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},bn.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))&&this.otherwise.outputDefined()},bn.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],n=[],r={},i=0,o=Object.keys(this.cases).sort();i<o.length;i+=1){var a=o[i];void 0===(d=r[this.cases[a]])?(r[this.cases[a]]=n.length,n.push([this.cases[a],[a]])):n[d][1].push(a)}for(var s=function(e){return"number"===t.inputType.kind?Number(e):e},u=0,l=n;u<l.length;u+=1){var c=l[u],d=c[0],h=c[1];e.push(1===h.length?s(h[0]):h.map(s)),e.push(this.outputs[outputIndex$1].serialize())}return e.push(this.otherwise.serialize()),e};var wn=function(t,e,n){this.type=t,this.branches=e,this.otherwise=n};function Mn(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function Ln(t,e,n,r){return 0===r.compare(e,n)}function kn(t,e,n){var r="=="!==t&&"!="!==t;return function(){function i(t,e,n){this.type=jt,this.lhs=t,this.rhs=e,this.collator=n,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return i.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var n=t[0],o=e.parse(t[1],1,Bt);if(!o)return null;if(!Mn(n,o.type))return e.concat(1).error('"'+n+"\" comparisons are not supported for type '"+Gt(o.type)+"'.");var a=e.parse(t[2],2,Bt);if(!a)return null;if(!Mn(n,a.type))return e.concat(2).error('"'+n+"\" comparisons are not supported for type '"+Gt(a.type)+"'.");if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot compare types '"+Gt(o.type)+"' and '"+Gt(a.type)+"'.");r&&("value"===o.type.kind&&"value"!==a.type.kind?o=new ue(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new ue(o.type,[a])));var s=null;if(4===t.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(s=e.parse(t[3],3,Ut)))return null}return new i(o,a,s)},i.prototype.evaluate=function(i){var o=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){var s=re(o),u=re(a);if(s.kind!==u.kind||"string"!==s.kind&&"number"!==s.kind)throw new ae('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+s.kind+", "+u.kind+") instead.")}if(this.collator&&!r&&this.hasUntypedArgument){var l=re(o),c=re(a);if("string"!==l.kind||"string"!==c.kind)return e(i,o,a)}return this.collator?n(i,o,a,this.collator.evaluate(i)):e(i,o,a)},i.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},i.prototype.outputDefined=function(){return!0},i.prototype.serialize=function(){var e=[t];return this.eachChild((function(t){e.push(t.serialize())})),e},i}()}wn.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var r=[],i=1;i<t.length-1;i+=2){var o=e.parse(t[i],i,jt);if(!o)return null;var a=e.parse(t[i+1],i+1,n);if(!a)return null;r.push([o,a]),n=n||a.type}var s=e.parse(t[t.length-1],t.length-1,n);return s?new wn(n,r,s):null},wn.prototype.evaluate=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var r=n[e],i=r[1];if(r[0].evaluate(t))return i.evaluate(t)}return this.otherwise.evaluate(t)},wn.prototype.eachChild=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var r=n[e],i=r[1];t(r[0]),t(i)}t(this.otherwise)},wn.prototype.outputDefined=function(){return this.branches.every((function(t){return t[1].outputDefined()}))&&this.otherwise.outputDefined()},wn.prototype.serialize=function(){var t=["case"];return this.eachChild((function(e){t.push(e.serialize())})),t};var Tn=kn("==",(function(t,e,n){return e===n}),Ln),Sn=kn("!=",(function(t,e,n){return e!==n}),(function(t,e,n,r){return!Ln(0,e,n,r)})),En=kn("<",(function(t,e,n){return e<n}),(function(t,e,n,r){return r.compare(e,n)<0})),An=kn(">",(function(t,e,n){return e>n}),(function(t,e,n,r){return r.compare(e,n)>0})),Dn=kn("<=",(function(t,e,n){return e<=n}),(function(t,e,n,r){return r.compare(e,n)<=0})),Cn=kn(">=",(function(t,e,n){return e>=n}),(function(t,e,n,r){return r.compare(e,n)>=0})),Pn=function(t,e,n,r,i){this.type=Ft,this.number=t,this.locale=e,this.currency=n,this.minFractionDigits=r,this.maxFractionDigits=i};Pn.parse=function(t,e){if(3!==t.length)return e.error("Expected two arguments.");var n=e.parse(t[1],1,Yt);if(!n)return null;var r=t[2];if("object"!=typeof r||Array.isArray(r))return e.error("NumberFormat options argument must be an object.");var i=null;if(r.locale&&!(i=e.parse(r.locale,1,Ft)))return null;var o=null;if(r.currency&&!(o=e.parse(r.currency,1,Ft)))return null;var a=null;if(r["min-fraction-digits"]&&!(a=e.parse(r["min-fraction-digits"],1,Yt)))return null;var s=null;return r["max-fraction-digits"]&&!(s=e.parse(r["max-fraction-digits"],1,Yt))?null:new Pn(n,i,o,a,s)},Pn.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},Pn.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},Pn.prototype.outputDefined=function(){return!1},Pn.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var In=function(t){this.type=Yt,this.input=t};In.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?e.error("Expected argument of type string or array, but found "+Gt(n.type)+" instead."):new In(n):null},In.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new ae("Expected value to be of type string or array, but found "+Gt(re(e))+" instead.")},In.prototype.eachChild=function(t){t(this.input)},In.prototype.outputDefined=function(){return!1},In.prototype.serialize=function(){var t=["length"];return this.eachChild((function(e){t.push(e.serialize())})),t};var On={"==":Tn,"!=":Sn,">":An,"<":En,">=":Cn,"<=":Dn,array:ue,at:gn,boolean:ue,case:wn,coalesce:yn,collator:_e,format:le,image:ce,in:xn,interpolate:mn,"interpolate-hcl":mn,"interpolate-lab":mn,length:In,let:vn,literal:oe,match:bn,number:ue,"number-format":Pn,object:ue,step:Ge,string:ue,"to-boolean":he,"to-color":he,"to-number":he,"to-string":he,var:He,within:ze};function Rn(t,e){var n=e[0],r=e[1],i=e[2],o=e[3];n=n.evaluate(t),r=r.evaluate(t),i=i.evaluate(t);var a=o?o.evaluate(t):1,s=ee(n,r,i,a);if(s)throw new ae(s);return new Kt(n/255*a,r/255*a,i/255*a,a)}function Yn(t,e){return t in e}function Fn(t,e){var n=e[t];return void 0===n?null:n}function jn(t){return{type:t}}function zn(t){return{result:"success",value:t}}function Nn(t){return{result:"error",value:t}}function Bn(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function Un(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function Hn(t){return!!t.expression&&t.expression.interpolated}function Vn(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function Wn(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}function Gn(t){return t}function qn(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function Xn(t,e,n,r,i){return qn(typeof n===i?r[n]:void 0,t.default,e.default)}function Zn(t,e,n){if("number"!==Vn(n))return qn(t.default,e.default);var r=t.stops.length;if(1===r)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[r-1][0])return t.stops[r-1][1];var i=We(t.stops.map((function(t){return t[0]})),n);return t.stops[i][1]}function Kn(t,e,n){var r=void 0!==t.base?t.base:1;if("number"!==Vn(n))return qn(t.default,e.default);var i=t.stops.length;if(1===i)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[i-1][0])return t.stops[i-1][1];var o=We(t.stops.map((function(t){return t[0]})),n),a=function(t,e,n,r){var i=r-n,o=t-n;return 0===i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}(n,r,t.stops[o][0],t.stops[o+1][0]),s=t.stops[o][1],u=t.stops[o+1][1],l=Ke[e.type]||Gn;if(t.colorSpace&&"rgb"!==t.colorSpace){var c=pn[t.colorSpace];l=function(t,e){return c.reverse(c.interpolate(c.forward(t),c.forward(e),a))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=s.evaluate.apply(void 0,t),r=u.evaluate.apply(void 0,t);if(void 0!==n&&void 0!==r)return l(n,r,a)}}:l(s,u,a)}function Jn(t,e,n){return"color"===e.type?n=Kt.parse(n):"formatted"===e.type?n=Qt.fromString(n.toString()):"resolvedImage"===e.type?n=te.fromString(n.toString()):Vn(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0),qn(n,t.default,e.default)}me.register(On,{error:[{kind:"error"},[Ft],function(t,e){throw new ae(e[0].evaluate(t))}],typeof:[Ft,[Bt],function(t,e){return Gt(re(e[0].evaluate(t)))}],"to-rgba":[Wt(Yt,4),[zt],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[zt,[Yt,Yt,Yt],Rn],rgba:[zt,[Yt,Yt,Yt,Yt],Rn],has:{type:jt,overloads:[[[Ft],function(t,e){return Yn(e[0].evaluate(t),t.properties())}],[[Ft,Nt],function(t,e){var n=e[1];return Yn(e[0].evaluate(t),n.evaluate(t))}]]},get:{type:Bt,overloads:[[[Ft],function(t,e){return Fn(e[0].evaluate(t),t.properties())}],[[Ft,Nt],function(t,e){var n=e[1];return Fn(e[0].evaluate(t),n.evaluate(t))}]]},"feature-state":[Bt,[Ft],function(t,e){return Fn(e[0].evaluate(t),t.featureState||{})}],properties:[Nt,[],function(t){return t.properties()}],"geometry-type":[Ft,[],function(t){return t.geometryType()}],id:[Bt,[],function(t){return t.id()}],zoom:[Yt,[],function(t){return t.globals.zoom}],"heatmap-density":[Yt,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[Yt,[],function(t){return t.globals.lineProgress||0}],accumulated:[Bt,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[Yt,jn(Yt),function(t,e){for(var n=0,r=0,i=e;r<i.length;r+=1)n+=i[r].evaluate(t);return n}],"*":[Yt,jn(Yt),function(t,e){for(var n=1,r=0,i=e;r<i.length;r+=1)n*=i[r].evaluate(t);return n}],"-":{type:Yt,overloads:[[[Yt,Yt],function(t,e){var n=e[1];return e[0].evaluate(t)-n.evaluate(t)}],[[Yt],function(t,e){return-e[0].evaluate(t)}]]},"/":[Yt,[Yt,Yt],function(t,e){var n=e[1];return e[0].evaluate(t)/n.evaluate(t)}],"%":[Yt,[Yt,Yt],function(t,e){var n=e[1];return e[0].evaluate(t)%n.evaluate(t)}],ln2:[Yt,[],function(){return Math.LN2}],pi:[Yt,[],function(){return Math.PI}],e:[Yt,[],function(){return Math.E}],"^":[Yt,[Yt,Yt],function(t,e){var n=e[1];return Math.pow(e[0].evaluate(t),n.evaluate(t))}],sqrt:[Yt,[Yt],function(t,e){return Math.sqrt(e[0].evaluate(t))}],log10:[Yt,[Yt],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN10}],ln:[Yt,[Yt],function(t,e){return Math.log(e[0].evaluate(t))}],log2:[Yt,[Yt],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN2}],sin:[Yt,[Yt],function(t,e){return Math.sin(e[0].evaluate(t))}],cos:[Yt,[Yt],function(t,e){return Math.cos(e[0].evaluate(t))}],tan:[Yt,[Yt],function(t,e){return Math.tan(e[0].evaluate(t))}],asin:[Yt,[Yt],function(t,e){return Math.asin(e[0].evaluate(t))}],acos:[Yt,[Yt],function(t,e){return Math.acos(e[0].evaluate(t))}],atan:[Yt,[Yt],function(t,e){return Math.atan(e[0].evaluate(t))}],min:[Yt,jn(Yt),function(t,e){return Math.min.apply(Math,e.map((function(e){return e.evaluate(t)})))}],max:[Yt,jn(Yt),function(t,e){return Math.max.apply(Math,e.map((function(e){return e.evaluate(t)})))}],abs:[Yt,[Yt],function(t,e){return Math.abs(e[0].evaluate(t))}],round:[Yt,[Yt],function(t,e){var n=e[0].evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[Yt,[Yt],function(t,e){return Math.floor(e[0].evaluate(t))}],ceil:[Yt,[Yt],function(t,e){return Math.ceil(e[0].evaluate(t))}],"filter-==":[jt,[Ft,Bt],function(t,e){var n=e[0],r=e[1];return t.properties()[n.value]===r.value}],"filter-id-==":[jt,[Bt],function(t,e){var n=e[0];return t.id()===n.value}],"filter-type-==":[jt,[Ft],function(t,e){var n=e[0];return t.geometryType()===n.value}],"filter-<":[jt,[Ft,Bt],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i<o}],"filter-id-<":[jt,[Bt],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r<i}],"filter->":[jt,[Ft,Bt],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i>o}],"filter-id->":[jt,[Bt],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r>i}],"filter-<=":[jt,[Ft,Bt],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i<=o}],"filter-id-<=":[jt,[Bt],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r<=i}],"filter->=":[jt,[Ft,Bt],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return typeof i==typeof o&&i>=o}],"filter-id->=":[jt,[Bt],function(t,e){var n=e[0],r=t.id(),i=n.value;return typeof r==typeof i&&r>=i}],"filter-has":[jt,[Bt],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[jt,[],function(t){return null!==t.id()&&void 0!==t.id()}],"filter-type-in":[jt,[Wt(Ft)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[jt,[Wt(Bt)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[jt,[Ft,Wt(Bt)],function(t,e){var n=e[0];return e[1].value.indexOf(t.properties()[n.value])>=0}],"filter-in-large":[jt,[Ft,Wt(Bt)],function(t,e){var n=e[0],r=e[1];return function(t,e,n,r){for(;n<=r;){var i=n+r>>1;if(e[i]===t)return!0;e[i]>t?r=i-1:n=i+1}return!1}(t.properties()[n.value],r.value,0,r.value.length-1)}],all:{type:jt,overloads:[[[jt,jt],function(t,e){var n=e[1];return e[0].evaluate(t)&&n.evaluate(t)}],[jn(jt),function(t,e){for(var n=0,r=e;n<r.length;n+=1)if(!r[n].evaluate(t))return!1;return!0}]]},any:{type:jt,overloads:[[[jt,jt],function(t,e){var n=e[1];return e[0].evaluate(t)||n.evaluate(t)}],[jn(jt),function(t,e){for(var n=0,r=e;n<r.length;n+=1)if(r[n].evaluate(t))return!0;return!1}]]},"!":[jt,[jt],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[jt,[Ft],function(t,e){var n=t.globals&&t.globals.isSupportedScript;return!n||n(e[0].evaluate(t))}],upcase:[Ft,[Ft],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[Ft,[Ft],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[Ft,jn(Bt),function(t,e){return e.map((function(e){return ie(e.evaluate(t))})).join("")}],"resolved-locale":[Ft,[Ut],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var $n=function(t,e){this.expression=t,this._warningHistory={},this._evaluator=new pe,this._defaultValue=e?function(t){return"color"===t.type&&Wn(t.default)?new Kt(0,0,0,0):"color"===t.type?Kt.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null};function Qn(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in On}function tr(t,e){var n=new Ve(On,[],e?function(t){var e={color:zt,string:Ft,number:Yt,enum:Ft,boolean:jt,formatted:Ht,resolvedImage:Vt};return"array"===t.type?Wt(e[t.value]||Bt,t.length):e[t.type]}(e):void 0),r=n.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return r?zn(new $n(r,e)):Nn(n.errors)}$n.prototype.evaluateWithoutErrorHandling=function(t,e,n,r,i,o){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)},$n.prototype.evaluate=function(t,e,n,r,i,o){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o||null;try{var a=this.expression.evaluate(this._evaluator);if(null==a||"number"==typeof a&&a!=a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new ae("Expected value to be one of "+Object.keys(this._enumValues).map((function(t){return JSON.stringify(t)})).join(", ")+", but found "+JSON.stringify(a)+" instead.");return a}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var er=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!Be(e.expression)};er.prototype.evaluateWithoutErrorHandling=function(t,e,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,o)},er.prototype.evaluate=function(t,e,n,r,i,o){return this._styleExpression.evaluate(t,e,n,r,i,o)};var nr=function(t,e,n,r){this.kind=t,this.zoomStops=n,this._styleExpression=e,this.isStateDependent="camera"!==t&&!Be(e.expression),this.interpolationType=r};function rr(t,e){if("error"===(t=tr(t,e)).result)return t;var n=t.value.expression,r=Ne(n);if(!r&&!Bn(e))return Nn([new It("","data expressions not supported")]);var i=Ue(n,["zoom"]);if(!i&&!Un(e))return Nn([new It("","zoom expressions not supported")]);var o=function t(e){var n=null;if(e instanceof vn)n=t(e.result);else if(e instanceof yn)for(var r=0,i=e.args;r<i.length&&!(n=t(i[r]));r+=1);else(e instanceof Ge||e instanceof mn)&&e.input instanceof me&&"zoom"===e.input.name&&(n=e);return n instanceof It||e.eachChild((function(e){var r=t(e);r instanceof It?n=r:!n&&r?n=new It("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&r&&n!==r&&(n=new It("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),n}(n);return o||i?o instanceof It?Nn([o]):o instanceof mn&&!Hn(e)?Nn([new It("",'"interpolate" expressions cannot be used with this property')]):zn(o?new nr(r?"camera":"composite",t.value,o.labels,o instanceof mn?o.interpolation:void 0):new er(r?"constant":"source",t.value)):Nn([new It("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}nr.prototype.evaluateWithoutErrorHandling=function(t,e,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,o)},nr.prototype.evaluate=function(t,e,n,r,i,o){return this._styleExpression.evaluate(t,e,n,r,i,o)},nr.prototype.interpolationFactor=function(t,e,n){return this.interpolationType?mn.interpolationFactor(this.interpolationType,t,e,n):0};var ir=function(t,e){this._parameters=t,this._specification=e,Dt(this,function t(e,n){var r,i,o,a="color"===n.type,s=e.stops&&"object"==typeof e.stops[0][0],u=s||!(s||void 0!==e.property),l=e.type||(Hn(n)?"exponential":"interval");if(a&&((e=Dt({},e)).stops&&(e.stops=e.stops.map((function(t){return[t[0],Kt.parse(t[1])]}))),e.default=Kt.parse(e.default?e.default:n.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!pn[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);if("exponential"===l)r=Kn;else if("interval"===l)r=Zn;else if("categorical"===l){r=Xn,i=Object.create(null);for(var c=0,d=e.stops;c<d.length;c+=1){var h=d[c];i[h[0]]=h[1]}o=typeof e.stops[0][0]}else{if("identity"!==l)throw new Error('Unknown function type "'+l+'"');r=Jn}if(s){for(var f={},p=[],m=0;m<e.stops.length;m++){var _=e.stops[m],y=_[0].zoom;void 0===f[y]&&(f[y]={zoom:y,type:e.type,property:e.property,default:e.default,stops:[]},p.push(y)),f[y].stops.push([_[0].value,_[1]])}for(var v=[],g=0,x=p;g<x.length;g+=1){var b=x[g];v.push([f[b].zoom,t(f[b],n)])}var w={name:"linear"};return{kind:"composite",interpolationType:w,interpolationFactor:mn.interpolationFactor.bind(void 0,w),zoomStops:v.map((function(t){return t[0]})),evaluate:function(t,r){var i=t.zoom;return Kn({stops:v,base:e.base},n,i).evaluate(i,r)}}}if(u){var M="exponential"===l?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:M,interpolationFactor:mn.interpolationFactor.bind(void 0,M),zoomStops:e.stops.map((function(t){return t[0]})),evaluate:function(t){return r(e,n,t.zoom,i,o)}}}return{kind:"source",evaluate:function(t,a){var s=a&&a.properties?a.properties[e.property]:void 0;return void 0===s?qn(e.default,n.default):r(e,n,s,i,o)}}}(this._parameters,this._specification))};function or(t){var e=t.key,n=t.value,r=t.valueSpec||{},i=t.objectElementValidators||{},o=t.style,a=t.styleSpec,s=[],u=Vn(n);if("object"!==u)return[new Et(e,n,"object expected, "+u+" found")];for(var l in n){var c=l.split(".")[0],d=r[c]||r["*"],h=void 0;if(i[c])h=i[c];else if(r[c])h=Dr;else if(i["*"])h=i["*"];else{if(!r["*"]){s.push(new Et(e,n[l],'unknown property "'+l+'"'));continue}h=Dr}s=s.concat(h({key:(e?e+".":e)+l,value:n[l],valueSpec:d,style:o,styleSpec:a,object:n,objectKey:l},n))}for(var f in r)i[f]||r[f].required&&void 0===r[f].default&&void 0===n[f]&&s.push(new Et(e,n,'missing required property "'+f+'"'));return s}function ar(t){var e=t.value,n=t.valueSpec,r=t.style,i=t.styleSpec,o=t.key,a=t.arrayElementValidator||Dr;if("array"!==Vn(e))return[new Et(o,e,"array expected, "+Vn(e)+" found")];if(n.length&&e.length!==n.length)return[new Et(o,e,"array length "+n.length+" expected, length "+e.length+" found")];if(n["min-length"]&&e.length<n["min-length"])return[new Et(o,e,"array length at least "+n["min-length"]+" expected, length "+e.length+" found")];var s={type:n.value,values:n.values};i.$version<7&&(s.function=n.function),"object"===Vn(n.value)&&(s=n.value);for(var u=[],l=0;l<e.length;l++)u=u.concat(a({array:e,arrayIndex:l,value:e[l],valueSpec:s,style:r,styleSpec:i,key:o+"["+l+"]"}));return u}function sr(t){var e=t.key,n=t.value,r=t.valueSpec,i=Vn(n);return"number"===i&&n!=n&&(i="NaN"),"number"!==i?[new Et(e,n,"number expected, "+i+" found")]:"minimum"in r&&n<r.minimum?[new Et(e,n,n+" is less than the minimum value "+r.minimum)]:"maximum"in r&&n>r.maximum?[new Et(e,n,n+" is greater than the maximum value "+r.maximum)]:[]}function ur(t){var e,n,r,i=t.valueSpec,o=Ct(t.value.type),a={},s="categorical"!==o&&void 0===t.value.property,u=!s,l="array"===Vn(t.value.stops)&&"array"===Vn(t.value.stops[0])&&"object"===Vn(t.value.stops[0][0]),c=or({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===o)return[new Et(t.key,t.value,'identity function may not have a "stops" property')];var e=[],n=t.value;return e=e.concat(ar({key:t.key,value:n,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:d})),"array"===Vn(n)&&0===n.length&&e.push(new Et(t.key,n,"array must have at least one stop")),e},default:function(t){return Dr({key:t.key,value:t.value,valueSpec:i,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===o&&s&&c.push(new Et(t.key,t.value,'missing required property "property"')),"identity"===o||t.value.stops||c.push(new Et(t.key,t.value,'missing required property "stops"')),"exponential"===o&&t.valueSpec.expression&&!Hn(t.valueSpec)&&c.push(new Et(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(u&&!Bn(t.valueSpec)?c.push(new Et(t.key,t.value,"property functions not supported")):s&&!Un(t.valueSpec)&&c.push(new Et(t.key,t.value,"zoom functions not supported"))),"categorical"!==o&&!l||void 0!==t.value.property||c.push(new Et(t.key,t.value,'"property" property is required')),c;function d(t){var e=[],o=t.value,s=t.key;if("array"!==Vn(o))return[new Et(s,o,"array expected, "+Vn(o)+" found")];if(2!==o.length)return[new Et(s,o,"array length 2 expected, length "+o.length+" found")];if(l){if("object"!==Vn(o[0]))return[new Et(s,o,"object expected, "+Vn(o[0])+" found")];if(void 0===o[0].zoom)return[new Et(s,o,"object stop key must have zoom")];if(void 0===o[0].value)return[new Et(s,o,"object stop key must have value")];if(r&&r>Ct(o[0].zoom))return[new Et(s,o[0].zoom,"stop zoom values must appear in ascending order")];Ct(o[0].zoom)!==r&&(r=Ct(o[0].zoom),n=void 0,a={}),e=e.concat(or({key:s+"[0]",value:o[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:sr,value:h}}))}else e=e.concat(h({key:s+"[0]",value:o[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},o));return Qn(Pt(o[1]))?e.concat([new Et(s+"[1]",o[1],"expressions are not allowed in function stops.")]):e.concat(Dr({key:s+"[1]",value:o[1],valueSpec:i,style:t.style,styleSpec:t.styleSpec}))}function h(t,r){var s=Vn(t.value),u=Ct(t.value),l=null!==t.value?t.value:r;if(e){if(s!==e)return[new Et(t.key,l,s+" stop domain type must match previous stop domain type "+e)]}else e=s;if("number"!==s&&"string"!==s&&"boolean"!==s)return[new Et(t.key,l,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==o){var c="number expected, "+s+" found";return Bn(i)&&void 0===o&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Et(t.key,l,c)]}return"categorical"!==o||"number"!==s||isFinite(u)&&Math.floor(u)===u?"categorical"!==o&&"number"===s&&void 0!==n&&u<n?[new Et(t.key,l,"stop domain values must appear in ascending order")]:(n=u,"categorical"===o&&u in a?[new Et(t.key,l,"stop domain values must be unique")]:(a[u]=!0,[])):[new Et(t.key,l,"integer expected, found "+u)]}}function lr(t){var e=("property"===t.expressionContext?rr:tr)(Pt(t.value),t.valueSpec);if("error"===e.result)return e.value.map((function(e){return new Et(""+t.key+e.key,t.value,e.message)}));var n=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!n.outputDefined())return[new Et(t.key,t.value,'Invalid data expression for "'+t.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===t.expressionContext&&"layout"===t.propertyType&&!Be(n))return[new Et(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!Be(n))return[new Et(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!Ue(n,["zoom","feature-state"]))return[new Et(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!Ne(n))return[new Et(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function cr(t){var e=t.key,n=t.value,r=t.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(Ct(n))&&i.push(new Et(e,n,"expected one of ["+r.values.join(", ")+"], "+JSON.stringify(n)+" found")):-1===Object.keys(r.values).indexOf(Ct(n))&&i.push(new Et(e,n,"expected one of ["+Object.keys(r.values).join(", ")+"], "+JSON.stringify(n)+" found")),i}function dr(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,n=t.slice(1);e<n.length;e+=1){var r=n[e];if(!dr(r)&&"boolean"!=typeof r)return!1}return!0;default:return!0}}ir.deserialize=function(t){return new ir(t._parameters,t._specification)},ir.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}};var hr={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function fr(t){if(null==t)return{filter:function(){return!0},needGeometry:!1};dr(t)||(t=mr(t));var e=tr(t,hr);if("error"===e.result)throw new Error(e.value.map((function(t){return t.key+": "+t.message})).join(", "));return{filter:function(t,n,r){return e.value.evaluate(t,n,{},r)},needGeometry:Array.isArray(t)&&0!==t.length&&"within"===t[0]}}function pr(t,e){return t<e?-1:t>e?1:0}function mr(t){if(!t)return!0;var e,n=t[0];return t.length<=1?"any"!==n:"=="===n?_r(t[1],t[2],"=="):"!="===n?gr(_r(t[1],t[2],"==")):"<"===n||">"===n||"<="===n||">="===n?_r(t[1],t[2],n):"any"===n?(e=t.slice(1),["any"].concat(e.map(mr))):"all"===n?["all"].concat(t.slice(1).map(mr)):"none"===n?["all"].concat(t.slice(1).map(mr).map(gr)):"in"===n?yr(t[1],t.slice(2)):"!in"===n?gr(yr(t[1],t.slice(2))):"has"===n?vr(t[1]):"!has"!==n||gr(vr(t[1]))}function _r(t,e,n){switch(t){case"$type":return["filter-type-"+n,e];case"$id":return["filter-id-"+n,e];default:return["filter-"+n,t,e]}}function yr(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((function(t){return typeof t!=typeof e[0]}))?["filter-in-large",t,["literal",e.sort(pr)]]:["filter-in-small",t,["literal",e]]}}function vr(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function gr(t){return["!",t]}function xr(t){return dr(Pt(t.value))?lr(Dt({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var n=e.value,r=e.key;if("array"!==Vn(n))return[new Et(r,n,"array expected, "+Vn(n)+" found")];var i,o=e.styleSpec,a=[];if(n.length<1)return[new Et(r,n,"filter array must have at least 1 element")];switch(a=a.concat(cr({key:r+"[0]",value:n[0],valueSpec:o.filter_operator,style:e.style,styleSpec:e.styleSpec})),Ct(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&"$type"===Ct(n[1])&&a.push(new Et(r,n,'"$type" cannot be use with operator "'+n[0]+'"'));case"==":case"!=":3!==n.length&&a.push(new Et(r,n,'filter array for operator "'+n[0]+'" must have 3 elements'));case"in":case"!in":n.length>=2&&"string"!==(i=Vn(n[1]))&&a.push(new Et(r+"[1]",n[1],"string expected, "+i+" found"));for(var s=2;s<n.length;s++)i=Vn(n[s]),"$type"===Ct(n[1])?a=a.concat(cr({key:r+"["+s+"]",value:n[s],valueSpec:o.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&a.push(new Et(r+"["+s+"]",n[s],"string, number, or boolean expected, "+i+" found"));break;case"any":case"all":case"none":for(var u=1;u<n.length;u++)a=a.concat(t({key:r+"["+u+"]",value:n[u],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":i=Vn(n[1]),2!==n.length?a.push(new Et(r,n,'filter array for "'+n[0]+'" operator must have 2 elements')):"string"!==i&&a.push(new Et(r+"[1]",n[1],"string expected, "+i+" found"))}return a}(t)}function br(t,e){var n=t.key,r=t.style,i=t.styleSpec,o=t.value,a=t.objectKey,s=i[e+"_"+t.layerType];if(!s)return[];var u=a.match(/^(.*)-transition$/);if("paint"===e&&u&&s[u[1]]&&s[u[1]].transition)return Dr({key:n,value:o,valueSpec:i.transition,style:r,styleSpec:i});var l,c=t.valueSpec||s[a];if(!c)return[new Et(n,o,'unknown property "'+a+'"')];if("string"===Vn(o)&&Bn(c)&&!c.tokens&&(l=/^{([^}]+)}$/.exec(o)))return[new Et(n,o,'"'+a+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(l[1])+" }`.")];var d=[];return"symbol"===t.layerType&&("text-field"===a&&r&&!r.glyphs&&d.push(new Et(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&Wn(Pt(o))&&"identity"===Ct(o.type)&&d.push(new Et(n,o,'"text-font" does not support identity functions'))),d.concat(Dr({key:t.key,value:o,valueSpec:c,style:r,styleSpec:i,expressionContext:"property",propertyType:e,propertyKey:a}))}function wr(t){return br(t,"paint")}function Mr(t){return br(t,"layout")}function Lr(t){var e=[],n=t.value,r=t.key,i=t.style,o=t.styleSpec;n.type||n.ref||e.push(new Et(r,n,'either "type" or "ref" is required'));var a,s=Ct(n.type),u=Ct(n.ref);if(n.id)for(var l=Ct(n.id),c=0;c<t.arrayIndex;c++){var d=i.layers[c];Ct(d.id)===l&&e.push(new Et(r,n.id,'duplicate layer id "'+n.id+'", previously used at line '+d.id.__line__))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach((function(t){t in n&&e.push(new Et(r,n[t],'"'+t+'" is prohibited for ref layers'))})),i.layers.forEach((function(t){Ct(t.id)===u&&(a=t)})),a?a.ref?e.push(new Et(r,n.ref,"ref cannot reference another ref layer")):s=Ct(a.type):e.push(new Et(r,n.ref,'ref layer "'+u+'" not found'));else if("background"!==s)if(n.source){var h=i.sources&&i.sources[n.source],f=h&&Ct(h.type);h?"vector"===f&&"raster"===s?e.push(new Et(r,n.source,'layer "'+n.id+'" requires a raster source')):"raster"===f&&"raster"!==s?e.push(new Et(r,n.source,'layer "'+n.id+'" requires a vector source')):"vector"!==f||n["source-layer"]?"raster-dem"===f&&"hillshade"!==s?e.push(new Et(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!n.paint||!n.paint["line-gradient"]||"geojson"===f&&h.lineMetrics||e.push(new Et(r,n,'layer "'+n.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new Et(r,n,'layer "'+n.id+'" must specify a "source-layer"')):e.push(new Et(r,n.source,'source "'+n.source+'" not found'))}else e.push(new Et(r,n,'missing required property "source"'));return e=e.concat(or({key:r,value:n,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Dr({key:r+".type",value:n.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"})},filter:xr,layout:function(t){return or({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return Mr(Dt({layerType:s},t))}}})},paint:function(t){return or({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return wr(Dt({layerType:s},t))}}})}}}))}function kr(t){var e=t.value,n=t.key,r=Vn(e);return"string"!==r?[new Et(n,e,"string expected, "+r+" found")]:[]}var Tr={promoteId:function(t){var e=t.key,n=t.value;if("string"===Vn(n))return kr({key:e,value:n});var r=[];for(var i in n)r.push.apply(r,kr({key:e+"."+i,value:n[i]}));return r}};function Sr(t){var e=t.value,n=t.key,r=t.styleSpec,i=t.style;if(!e.type)return[new Et(n,e,'"type" is required')];var o,a=Ct(e.type);switch(a){case"vector":case"raster":case"raster-dem":return or({key:n,value:e,valueSpec:r["source_"+a.replace("-","_")],style:t.style,styleSpec:r,objectElementValidators:Tr});case"geojson":if(o=or({key:n,value:e,valueSpec:r.source_geojson,style:i,styleSpec:r,objectElementValidators:Tr}),e.cluster)for(var s in e.clusterProperties){var u=e.clusterProperties[s],l=u[0],c="string"==typeof l?[l,["accumulated"],["get",s]]:l;o.push.apply(o,lr({key:n+"."+s+".map",value:u[1],expressionContext:"cluster-map"})),o.push.apply(o,lr({key:n+"."+s+".reduce",value:c,expressionContext:"cluster-reduce"}))}return o;case"video":return or({key:n,value:e,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return or({key:n,value:e,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new Et(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return cr({key:n+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:r})}}function Er(t){var e=t.value,n=t.styleSpec,r=n.light,i=t.style,o=[],a=Vn(e);if(void 0===e)return o;if("object"!==a)return o.concat([new Et("light",e,"object expected, "+a+" found")]);for(var s in e){var u=s.match(/^(.*)-transition$/);o=o.concat(u&&r[u[1]]&&r[u[1]].transition?Dr({key:s,value:e[s],valueSpec:n.transition,style:i,styleSpec:n}):r[s]?Dr({key:s,value:e[s],valueSpec:r[s],style:i,styleSpec:n}):[new Et(s,e[s],'unknown property "'+s+'"')])}return o}var Ar={"*":function(){return[]},array:ar,boolean:function(t){var e=t.value,n=t.key,r=Vn(e);return"boolean"!==r?[new Et(n,e,"boolean expected, "+r+" found")]:[]},number:sr,color:function(t){var e=t.key,n=t.value,r=Vn(n);return"string"!==r?[new Et(e,n,"color expected, "+r+" found")]:null===Zt(n)?[new Et(e,n,'color expected, "'+n+'" found')]:[]},constants:At,enum:cr,filter:xr,function:ur,layer:Lr,object:or,source:Sr,light:Er,string:kr,formatted:function(t){return 0===kr(t).length?[]:lr(t)},resolvedImage:function(t){return 0===kr(t).length?[]:lr(t)}};function Dr(t){var e=t.value,n=t.valueSpec,r=t.styleSpec;return n.expression&&Wn(Ct(e))?ur(t):n.expression&&Qn(Pt(e))?lr(t):n.type&&Ar[n.type]?Ar[n.type](t):or(Dt({},t,{valueSpec:n.type?r[n.type]:n}))}function Cr(t){var e=t.value,n=t.key,r=kr(t);return r.length||(-1===e.indexOf("{fontstack}")&&r.push(new Et(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&r.push(new Et(n,e,'"glyphs" url must include a "{range}" token'))),r}function Pr(t,e){void 0===e&&(e=St);var n=[];return n=n.concat(Dr({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:Cr,"*":function(){return[]}}})),t.constants&&(n=n.concat(At({key:"constants",value:t.constants,style:t,styleSpec:e}))),Ir(n)}function Ir(t){return[].concat(t).sort((function(t,e){return t.line-e.line}))}function Or(t){return function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return Ir(t.apply(this,e))}}Pr.source=Or(Sr),Pr.light=Or(Er),Pr.layer=Or(Lr),Pr.filter=Or(xr),Pr.paintProperty=Or(wr),Pr.layoutProperty=Or(Mr);var Rr=Pr,Yr=Rr.light,Fr=Rr.paintProperty,jr=Rr.layoutProperty;function zr(t,e){var n=!1;if(e&&e.length)for(var r=0,i=e;r<i.length;r+=1)t.fire(new kt(new Error(i[r].message))),n=!0;return n}var Nr=Br;function Br(t,e,n){var r=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var i=new Int32Array(this.arrayBuffer);t=i[0],this.d=(e=i[1])+2*(n=i[2]);for(var o=0;o<this.d*this.d;o++){var a=i[3+o],s=i[3+o+1];r.push(a===s?null:i.subarray(a,s))}var u=i[3+r.length+1];this.keys=i.subarray(i[3+r.length],u),this.bboxes=i.subarray(u),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var l=0;l<this.d*this.d;l++)r.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var c=n/e*t;this.min=-c,this.max=t+c}Br.prototype.insert=function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},Br.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Br.prototype._insertCell=function(t,e,n,r,i,o){this.cells[i].push(o)},Br.prototype.query=function(t,e,n,r,i){var o=this.min,a=this.max;if(t<=o&&e<=o&&a<=n&&a<=r&&!i)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(t,e,n,r,this._queryCell,s,{},i),s},Br.prototype._queryCell=function(t,e,n,r,i,o,a,s){var u=this.cells[i];if(null!==u)for(var l=this.keys,c=this.bboxes,d=0;d<u.length;d++){var h=u[d];if(void 0===a[h]){var f=4*h;(s?s(c[f+0],c[f+1],c[f+2],c[f+3]):t<=c[f+2]&&e<=c[f+3]&&n>=c[f+0]&&r>=c[f+1])?(a[h]=!0,o.push(l[h])):a[h]=!1}}},Br.prototype._forEachCell=function(t,e,n,r,i,o,a,s){for(var u=this._convertToCellCoord(t),l=this._convertToCellCoord(e),c=this._convertToCellCoord(n),d=this._convertToCellCoord(r),h=u;h<=c;h++)for(var f=l;f<=d;f++){var p=this.d*f+h;if((!s||s(this._convertFromCellCoord(h),this._convertFromCellCoord(f),this._convertFromCellCoord(h+1),this._convertFromCellCoord(f+1)))&&i.call(this,t,e,n,r,p,o,a,s))return}},Br.prototype._convertFromCellCoord=function(t){return(t-this.padding)/this.scale},Br.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},Br.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=3+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(e+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var o=e,a=0;a<t.length;a++){var s=t[a];i[3+a]=o,i.set(s,o),o+=s.length}return i[3+t.length]=o,i.set(this.keys,o),i[3+t.length+1]=o+=this.keys.length,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer};var Ur=self.ImageData,Hr=self.ImageBitmap,Vr={};function Wr(t,e,n){void 0===n&&(n={}),Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),Vr[t]={klass:e,omit:n.omit||[],shallow:n.shallow||[]}}for(var Gr in Wr("Object",Object),Nr.serialize=function(t,e){var n=t.toArrayBuffer();return e&&e.push(n),{buffer:n}},Nr.deserialize=function(t){return new Nr(t.buffer)},Wr("Grid",Nr),Wr("Color",Kt),Wr("Error",Error),Wr("ResolvedImage",te),Wr("StylePropertyFunction",ir),Wr("StyleExpression",$n,{omit:["_evaluator"]}),Wr("ZoomDependentExpression",nr),Wr("ZoomConstantExpression",er),Wr("CompoundExpression",me,{omit:["_evaluate"]}),On)On[Gr]._classRegistryKey||Wr("Expression_"+Gr,On[Gr]);function qr(t){return t&&"undefined"!=typeof ArrayBuffer&&(t instanceof ArrayBuffer||t.constructor&&"ArrayBuffer"===t.constructor.name)}function Xr(t){return Hr&&t instanceof Hr}function Zr(t,e){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp)return t;if(qr(t)||Xr(t))return e&&e.push(t),t;if(ArrayBuffer.isView(t)){var n=t;return e&&e.push(n.buffer),n}if(t instanceof Ur)return e&&e.push(t.data.buffer),t;if(Array.isArray(t)){for(var r=[],i=0,o=t;i<o.length;i+=1)r.push(Zr(o[i],e));return r}if("object"==typeof t){var a=t.constructor,s=a._classRegistryKey;if(!s)throw new Error("can't serialize object of unregistered class");var u=a.serialize?a.serialize(t,e):{};if(!a.serialize){for(var l in t)if(t.hasOwnProperty(l)&&!(Vr[s].omit.indexOf(l)>=0)){var c=t[l];u[l]=Vr[s].shallow.indexOf(l)>=0?c:Zr(c,e)}t instanceof Error&&(u.message=t.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==s&&(u.$name=s),u}throw new Error("can't serialize object of type "+typeof t)}function Kr(t){if(null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||t instanceof Boolean||t instanceof Number||t instanceof String||t instanceof Date||t instanceof RegExp||qr(t)||Xr(t)||ArrayBuffer.isView(t)||t instanceof Ur)return t;if(Array.isArray(t))return t.map(Kr);if("object"==typeof t){var e=t.$name||"Object",n=Vr[e].klass;if(!n)throw new Error("can't deserialize unregistered class "+e);if(n.deserialize)return n.deserialize(t);for(var r=Object.create(n.prototype),i=0,o=Object.keys(t);i<o.length;i+=1){var a=o[i];if("$name"!==a){var s=t[a];r[a]=Vr[e].shallow.indexOf(a)>=0?s:Kr(s)}}return r}throw new Error("can't deserialize object of type "+typeof t)}var Jr=function(){this.first=!0};Jr.prototype.update=function(t,e){var n=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=e):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=e),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=n,!0))};var $r={"Latin-1 Supplement":function(t){return t>=128&&t<=255},Arabic:function(t){return t>=1536&&t<=1791},"Arabic Supplement":function(t){return t>=1872&&t<=1919},"Arabic Extended-A":function(t){return t>=2208&&t<=2303},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},Khmer:function(t){return t>=6016&&t<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Arabic Presentation Forms-A":function(t){return t>=64336&&t<=65023},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Arabic Presentation Forms-B":function(t){return t>=65136&&t<=65279},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}};function Qr(t){for(var e=0,n=t;e<n.length;e+=1)if(ti(n[e].charCodeAt(0)))return!0;return!1}function ti(t){return!(746!==t&&747!==t&&(t<4352||!($r["Bopomofo Extended"](t)||$r.Bopomofo(t)||$r["CJK Compatibility Forms"](t)&&!(t>=65097&&t<=65103)||$r["CJK Compatibility Ideographs"](t)||$r["CJK Compatibility"](t)||$r["CJK Radicals Supplement"](t)||$r["CJK Strokes"](t)||!(!$r["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||$r["CJK Unified Ideographs Extension A"](t)||$r["CJK Unified Ideographs"](t)||$r["Enclosed CJK Letters and Months"](t)||$r["Hangul Compatibility Jamo"](t)||$r["Hangul Jamo Extended-A"](t)||$r["Hangul Jamo Extended-B"](t)||$r["Hangul Jamo"](t)||$r["Hangul Syllables"](t)||$r.Hiragana(t)||$r["Ideographic Description Characters"](t)||$r.Kanbun(t)||$r["Kangxi Radicals"](t)||$r["Katakana Phonetic Extensions"](t)||$r.Katakana(t)&&12540!==t||!(!$r["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||!(!$r["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||$r["Unified Canadian Aboriginal Syllabics"](t)||$r["Unified Canadian Aboriginal Syllabics Extended"](t)||$r["Vertical Forms"](t)||$r["Yijing Hexagram Symbols"](t)||$r["Yi Syllables"](t)||$r["Yi Radicals"](t))))}function ei(t){return!(ti(t)||function(t){return!!($r["Latin-1 Supplement"](t)&&(167===t||169===t||174===t||177===t||188===t||189===t||190===t||215===t||247===t)||$r["General Punctuation"](t)&&(8214===t||8224===t||8225===t||8240===t||8241===t||8251===t||8252===t||8258===t||8263===t||8264===t||8265===t||8273===t)||$r["Letterlike Symbols"](t)||$r["Number Forms"](t)||$r["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215)||$r["Control Pictures"](t)&&9251!==t||$r["Optical Character Recognition"](t)||$r["Enclosed Alphanumerics"](t)||$r["Geometric Shapes"](t)||$r["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||$r["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||$r["CJK Symbols and Punctuation"](t)||$r.Katakana(t)||$r["Private Use Area"](t)||$r["CJK Compatibility Forms"](t)||$r["Small Form Variants"](t)||$r["Halfwidth and Fullwidth Forms"](t)||8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)}(t))}function ni(t){return t>=1424&&t<=2303||$r["Arabic Presentation Forms-A"](t)||$r["Arabic Presentation Forms-B"](t)}function ri(t,e){return!(!e&&ni(t)||t>=2304&&t<=3583||t>=3840&&t<=4255||$r.Khmer(t))}function ii(t){for(var e=0,n=t;e<n.length;e+=1)if(ni(n[e].charCodeAt(0)))return!0;return!1}var oi=null,ai="unavailable",si=null,ui=function(t){oi&&oi(t)};function li(){ci.fire(new Lt("pluginStateChange",{pluginStatus:ai,pluginURL:si}))}var ci=new Tt,di=function(){return ai},hi=function(){if("deferred"!==ai||!si)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ai="loading",li(),si&&gt({url:si},(function(t){t?ui(t):(ai="loaded",li())}))},fi={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return"loaded"===ai||null!=fi.applyArabicShaping},isLoading:function(){return"loading"===ai},setState:function(t){ai=t.pluginStatus,si=t.pluginURL},isParsed:function(){return null!=fi.applyArabicShaping&&null!=fi.processBidirectionalText&&null!=fi.processStyledBidirectionalText},getPluginURL:function(){return si}},pi=function(t,e){this.zoom=t,e?(this.now=e.now,this.fadeDuration=e.fadeDuration,this.zoomHistory=e.zoomHistory,this.transition=e.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Jr,this.transition={})};pi.prototype.isSupportedScript=function(t){return function(t,e){for(var n=0,r=t;n<r.length;n+=1)if(!ri(r[n].charCodeAt(0),e))return!1;return!0}(t,fi.isLoaded())},pi.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},pi.prototype.getCrossfadeParameters=function(){var t=this.zoom,e=t-Math.floor(t),n=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:e+(1-e)*n}:{fromScale:.5,toScale:1,t:1-(1-n)*e}};var mi=function(t,e){this.property=t,this.value=e,this.expression=function(t,e){if(Wn(t))return new ir(t,e);if(Qn(t)){var n=rr(t,e);if("error"===n.result)throw new Error(n.value.map((function(t){return t.key+": "+t.message})).join(", "));return n.value}var r=t;return"string"==typeof t&&"color"===e.type&&(r=Kt.parse(t)),{kind:"constant",evaluate:function(){return r}}}(void 0===e?t.specification.default:e,t.specification)};mi.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},mi.prototype.possiblyEvaluate=function(t,e,n){return this.property.possiblyEvaluate(this,t,e,n)};var _i=function(t){this.property=t,this.value=new mi(t,void 0)};_i.prototype.transitioned=function(t,e){return new vi(this.property,this.value,e,c({},t.transition,this.transition),t.now)},_i.prototype.untransitioned=function(){return new vi(this.property,this.value,null,{},0)};var yi=function(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)};yi.prototype.getValue=function(t){return g(this._values[t].value.value)},yi.prototype.setValue=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new _i(this._values[t].property)),this._values[t].value=new mi(this._values[t].property,null===e?void 0:g(e))},yi.prototype.getTransition=function(t){return g(this._values[t].transition)},yi.prototype.setTransition=function(t,e){this._values.hasOwnProperty(t)||(this._values[t]=new _i(this._values[t].property)),this._values[t].transition=g(e)||void 0},yi.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var r=n[e],i=this.getValue(r);void 0!==i&&(t[r]=i);var o=this.getTransition(r);void 0!==o&&(t[r+"-transition"]=o)}return t},yi.prototype.transitioned=function(t,e){for(var n=new gi(this._properties),r=0,i=Object.keys(this._values);r<i.length;r+=1){var o=i[r];n._values[o]=this._values[o].transitioned(t,e._values[o])}return n},yi.prototype.untransitioned=function(){for(var t=new gi(this._properties),e=0,n=Object.keys(this._values);e<n.length;e+=1){var r=n[e];t._values[r]=this._values[r].untransitioned()}return t};var vi=function(t,e,n,r,i){this.property=t,this.value=e,this.begin=i+r.delay||0,this.end=this.begin+r.duration||0,t.specification.transition&&(r.delay||r.duration)&&(this.prior=n)};vi.prototype.possiblyEvaluate=function(t,e,n){var r=t.now||0,i=this.value.possiblyEvaluate(t,e,n),o=this.prior;if(o){if(r>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(r<this.begin)return o.possiblyEvaluate(t,e,n);var a=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(t,e,n),i,function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}(a))}return i};var gi=function(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)};gi.prototype.possiblyEvaluate=function(t,e){for(var n=new wi(this._properties),r=0,i=Object.keys(this._values);r<i.length;r+=1){var o=i[r];n._values[o]=this._values[o].possiblyEvaluate(t,e)}return n},gi.prototype.hasTransition=function(){for(var t=0,e=Object.keys(this._values);t<e.length;t+=1)if(this._values[e[t]].prior)return!0;return!1};var xi=function(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)};xi.prototype.getValue=function(t){return g(this._values[t].value)},xi.prototype.setValue=function(t,e){this._values[t]=new mi(this._values[t].property,null===e?void 0:g(e))},xi.prototype.serialize=function(){for(var t={},e=0,n=Object.keys(this._values);e<n.length;e+=1){var r=n[e],i=this.getValue(r);void 0!==i&&(t[r]=i)}return t},xi.prototype.possiblyEvaluate=function(t,e){for(var n=new wi(this._properties),r=0,i=Object.keys(this._values);r<i.length;r+=1){var o=i[r];n._values[o]=this._values[o].possiblyEvaluate(t,e)}return n};var bi=function(t,e,n){this.property=t,this.value=e,this.parameters=n};bi.prototype.isConstant=function(){return"constant"===this.value.kind},bi.prototype.constantOr=function(t){return"constant"===this.value.kind?this.value.value:t},bi.prototype.evaluate=function(t,e,n,r){return this.property.evaluate(this.value,this.parameters,t,e,n,r)};var wi=function(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)};wi.prototype.get=function(t){return this._values[t]};var Mi=function(t){this.specification=t};Mi.prototype.possiblyEvaluate=function(t,e){return t.expression.evaluate(e)},Mi.prototype.interpolate=function(t,e,n){var r=Ke[this.specification.type];return r?r(t,e,n):t};var Li=function(t,e){this.specification=t,this.overrides=e};Li.prototype.possiblyEvaluate=function(t,e,n,r){return new bi(this,"constant"===t.expression.kind||"camera"===t.expression.kind?{kind:"constant",value:t.expression.evaluate(e,null,{},n,r)}:t.expression,e)},Li.prototype.interpolate=function(t,e,n){if("constant"!==t.value.kind||"constant"!==e.value.kind)return t;if(void 0===t.value.value||void 0===e.value.value)return new bi(this,{kind:"constant",value:void 0},t.parameters);var r=Ke[this.specification.type];return r?new bi(this,{kind:"constant",value:r(t.value.value,e.value.value,n)},t.parameters):t},Li.prototype.evaluate=function(t,e,n,r,i,o){return"constant"===t.kind?t.value:t.evaluate(e,n,r,i,o)};var ki=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(t,e,n,r){if(void 0===t.value)return new bi(this,{kind:"constant",value:void 0},e);if("constant"===t.expression.kind){var i=t.expression.evaluate(e,null,{},n,r),o="resolvedImage"===t.property.specification.type&&"string"!=typeof i?i.name:i,a=this._calculate(o,o,o,e);return new bi(this,{kind:"constant",value:a},e)}if("camera"===t.expression.kind){var s=this._calculate(t.expression.evaluate({zoom:e.zoom-1}),t.expression.evaluate({zoom:e.zoom}),t.expression.evaluate({zoom:e.zoom+1}),e);return new bi(this,{kind:"constant",value:s},e)}return new bi(this,t.expression,e)},e.prototype.evaluate=function(t,e,n,r,i,o){if("source"===t.kind){var a=t.evaluate(e,n,r,i,o);return this._calculate(a,a,a,e)}return"composite"===t.kind?this._calculate(t.evaluate({zoom:Math.floor(e.zoom)-1},n,r),t.evaluate({zoom:Math.floor(e.zoom)},n,r),t.evaluate({zoom:Math.floor(e.zoom)+1},n,r),e):t.value},e.prototype._calculate=function(t,e,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}},e.prototype.interpolate=function(t){return t},e}(Li),Ti=function(t){this.specification=t};Ti.prototype.possiblyEvaluate=function(t,e,n,r){if(void 0!==t.value){if("constant"===t.expression.kind){var i=t.expression.evaluate(e,null,{},n,r);return this._calculate(i,i,i,e)}return this._calculate(t.expression.evaluate(new pi(Math.floor(e.zoom-1),e)),t.expression.evaluate(new pi(Math.floor(e.zoom),e)),t.expression.evaluate(new pi(Math.floor(e.zoom+1),e)),e)}},Ti.prototype._calculate=function(t,e,n,r){return r.zoom>r.zoomHistory.lastIntegerZoom?{from:t,to:e}:{from:n,to:e}},Ti.prototype.interpolate=function(t){return t};var Si=function(t){this.specification=t};Si.prototype.possiblyEvaluate=function(t,e,n,r){return!!t.expression.evaluate(e,null,{},n,r)},Si.prototype.interpolate=function(){return!1};var Ei=function(t){for(var e in this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],t){var n=t[e];n.specification.overridable&&this.overridableProperties.push(e);var r=this.defaultPropertyValues[e]=new mi(n,void 0),i=this.defaultTransitionablePropertyValues[e]=new _i(n);this.defaultTransitioningPropertyValues[e]=i.untransitioned(),this.defaultPossiblyEvaluatedValues[e]=r.possiblyEvaluate({})}};Wr("DataDrivenProperty",Li),Wr("DataConstantProperty",Mi),Wr("CrossFadedDataDrivenProperty",ki),Wr("CrossFadedProperty",Ti),Wr("ColorRampProperty",Si);var Ai=function(t){function e(e,n){if(t.call(this),this.id=e.id,this.type=e.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==e.type&&(this.metadata=(e=e).metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),n.layout&&(this._unevaluatedLayout=new xi(n.layout)),n.paint)){for(var r in this._transitionablePaint=new yi(n.paint),e.paint)this.setPaintProperty(r,e.paint[r],{validate:!1});for(var i in e.layout)this.setLayoutProperty(i,e.layout[i],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},e.prototype.getLayoutProperty=function(t){return"visibility"===t?this.visibility:this._unevaluatedLayout.getValue(t)},e.prototype.setLayoutProperty=function(t,e,n){void 0===n&&(n={}),null!=e&&this._validate(jr,"layers."+this.id+".layout."+t,t,e,n)||("visibility"!==t?this._unevaluatedLayout.setValue(t,e):this.visibility=e)},e.prototype.getPaintProperty=function(t){return _(t,"-transition")?this._transitionablePaint.getTransition(t.slice(0,-"-transition".length)):this._transitionablePaint.getValue(t)},e.prototype.setPaintProperty=function(t,e,n){if(void 0===n&&(n={}),null!=e&&this._validate(Fr,"layers."+this.id+".paint."+t,t,e,n))return!1;if(_(t,"-transition"))return this._transitionablePaint.setTransition(t.slice(0,-"-transition".length),e||void 0),!1;var r=this._transitionablePaint._values[t],i="cross-faded-data-driven"===r.property.specification["property-type"],o=r.value.isDataDriven(),a=r.value;this._transitionablePaint.setValue(t,e),this._handleSpecialPaintPropertyUpdate(t);var s=this._transitionablePaint._values[t].value;return s.isDataDriven()||o||i||this._handleOverridablePaintPropertyUpdate(t,a,s)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){},e.prototype._handleOverridablePaintPropertyUpdate=function(t,e,n){return!1},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.visibility},e.prototype.updateTransitions=function(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)},e.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},e.prototype.recalculate=function(t,e){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,e)),this.paint=this._transitioningPaint.possiblyEvaluate(t,e)},e.prototype.serialize=function(){var t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),v(t,(function(t,e){return!(void 0===t||"layout"===e&&!Object.keys(t).length||"paint"===e&&!Object.keys(t).length)}))},e.prototype._validate=function(t,e,n,r,i){return void 0===i&&(i={}),(!i||!1!==i.validate)&&zr(this,t.call(Rr,{key:e,layerType:this.type,objectKey:n,value:r,styleSpec:St,style:{glyphs:!0,sprite:!0}}))},e.prototype.is3D=function(){return!1},e.prototype.isTileClipped=function(){return!1},e.prototype.hasOffscreenPass=function(){return!1},e.prototype.resize=function(){},e.prototype.isStateDependent=function(){for(var t in this.paint._values){var e=this.paint.get(t);if(e instanceof bi&&Bn(e.property.specification)&&("source"===e.value.kind||"composite"===e.value.kind)&&e.value.isStateDependent)return!0}return!1},e}(Tt),Di={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Ci=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Pi=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Ii(t,e){void 0===e&&(e=1);var n=0,r=0;return{members:t.map((function(t){var i=Di[t.type].BYTES_PER_ELEMENT,o=n=Oi(n,Math.max(e,i)),a=t.components||1;return r=Math.max(r,i),n+=i*a,{name:t.name,type:t.type,components:a,offset:o}})),size:Oi(n,Math.max(r,e)),alignment:e}}function Oi(t,e){return Math.ceil(t/e)*e}Pi.serialize=function(t,e){return t._trim(),e&&(t.isTransferred=!0,e.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}},Pi.deserialize=function(t){var e=Object.create(this.prototype);return e.arrayBuffer=t.arrayBuffer,e.length=t.length,e.capacity=t.arrayBuffer.byteLength/e.bytesPerElement,e._refreshViews(),e},Pi.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Pi.prototype.clear=function(){this.length=0},Pi.prototype.resize=function(t){this.reserve(t),this.length=t},Pi.prototype.reserve=function(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},Pi.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Ri=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var r=2*t;return this.int16[r+0]=e,this.int16[r+1]=n,t},e}(Pi);Ri.prototype.bytesPerElement=4,Wr("StructArrayLayout2i4",Ri);var Yi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)},e.prototype.emplace=function(t,e,n,r,i){var o=4*t;return this.int16[o+0]=e,this.int16[o+1]=n,this.int16[o+2]=r,this.int16[o+3]=i,t},e}(Pi);Yi.prototype.bytesPerElement=8,Wr("StructArrayLayout4i8",Yi);var Fi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i,o)},e.prototype.emplace=function(t,e,n,r,i,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(Pi);Fi.prototype.bytesPerElement=12,Wr("StructArrayLayout2i4i12",Fi);var ji=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i,o)},e.prototype.emplace=function(t,e,n,r,i,o,a){var s=4*t,u=8*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.uint8[u+4]=r,this.uint8[u+5]=i,this.uint8[u+6]=o,this.uint8[u+7]=a,t},e}(Pi);ji.prototype.bytesPerElement=8,Wr("StructArrayLayout2i4ub8",ji);var zi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u,l){var c=this.length;return this.resize(c+1),this.emplace(c,t,e,n,r,i,o,a,s,u,l)},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u,l,c){var d=9*t,h=18*t;return this.uint16[d+0]=e,this.uint16[d+1]=n,this.uint16[d+2]=r,this.uint16[d+3]=i,this.uint16[d+4]=o,this.uint16[d+5]=a,this.uint16[d+6]=s,this.uint16[d+7]=u,this.uint8[h+16]=l,this.uint8[h+17]=c,t},e}(Pi);zi.prototype.bytesPerElement=18,Wr("StructArrayLayout8ui2ub18",zi);var Ni=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u,l,c,d){var h=this.length;return this.resize(h+1),this.emplace(h,t,e,n,r,i,o,a,s,u,l,c,d)},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u,l,c,d,h){var f=12*t;return this.int16[f+0]=e,this.int16[f+1]=n,this.int16[f+2]=r,this.int16[f+3]=i,this.uint16[f+4]=o,this.uint16[f+5]=a,this.uint16[f+6]=s,this.uint16[f+7]=u,this.int16[f+8]=l,this.int16[f+9]=c,this.int16[f+10]=d,this.int16[f+11]=h,t},e}(Pi);Ni.prototype.bytesPerElement=24,Wr("StructArrayLayout4i4ui4i24",Ni);var Bi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)},e.prototype.emplace=function(t,e,n,r){var i=3*t;return this.float32[i+0]=e,this.float32[i+1]=n,this.float32[i+2]=r,t},e}(Pi);Bi.prototype.bytesPerElement=12,Wr("StructArrayLayout3f12",Bi);var Ui=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint32[1*t+0]=e,t},e}(Pi);Ui.prototype.bytesPerElement=4,Wr("StructArrayLayout1ul4",Ui);var Hi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u,l,c){var d=this.length;return this.resize(d+1),this.emplace(d,t,e,n,r,i,o,a,s,u,l,c)},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u,l,c,d){var h=12*t,f=6*t;return this.int16[h+0]=e,this.int16[h+1]=n,this.int16[h+2]=r,this.int16[h+3]=i,this.int16[h+4]=o,this.int16[h+5]=a,this.uint32[f+3]=s,this.uint16[h+8]=u,this.uint16[h+9]=l,this.int16[h+10]=c,this.int16[h+11]=d,t},e}(Pi);Hi.prototype.bytesPerElement=24,Wr("StructArrayLayout6i1ul2ui2i24",Hi);var Vi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o){var a=this.length;return this.resize(a+1),this.emplace(a,t,e,n,r,i,o)},e.prototype.emplace=function(t,e,n,r,i,o,a){var s=6*t;return this.int16[s+0]=e,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,t},e}(Pi);Vi.prototype.bytesPerElement=12,Wr("StructArrayLayout2i2i2i12",Vi);var Wi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)},e.prototype.emplace=function(t,e,n,r,i){var o=12*t,a=3*t;return this.uint8[o+0]=e,this.uint8[o+1]=n,this.float32[a+1]=r,this.float32[a+2]=i,t},e}(Pi);Wi.prototype.bytesPerElement=12,Wr("StructArrayLayout2ub2f12",Wi);var Gi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u,l,c,d,h,f,p,m,_){var y=this.length;return this.resize(y+1),this.emplace(y,t,e,n,r,i,o,a,s,u,l,c,d,h,f,p,m,_)},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u,l,c,d,h,f,p,m,_,y){var v=24*t,g=12*t,x=48*t;return this.int16[v+0]=e,this.int16[v+1]=n,this.uint16[v+2]=r,this.uint16[v+3]=i,this.uint32[g+2]=o,this.uint32[g+3]=a,this.uint32[g+4]=s,this.uint16[v+10]=u,this.uint16[v+11]=l,this.uint16[v+12]=c,this.float32[g+7]=d,this.float32[g+8]=h,this.uint8[x+36]=f,this.uint8[x+37]=p,this.uint8[x+38]=m,this.uint32[g+10]=_,this.int16[v+22]=y,t},e}(Pi);Gi.prototype.bytesPerElement=48,Wr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Gi);var qi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r,i,o,a,s,u,l,c,d,h,f,p,m,_,y,v,g,x,b,w,M,L,k){var T=this.length;return this.resize(T+1),this.emplace(T,t,e,n,r,i,o,a,s,u,l,c,d,h,f,p,m,_,y,v,g,x,b,w,M,L,k)},e.prototype.emplace=function(t,e,n,r,i,o,a,s,u,l,c,d,h,f,p,m,_,y,v,g,x,b,w,M,L,k,T){var S=30*t,E=15*t;return this.int16[S+0]=e,this.int16[S+1]=n,this.int16[S+2]=r,this.int16[S+3]=i,this.int16[S+4]=o,this.int16[S+5]=a,this.int16[S+6]=s,this.int16[S+7]=u,this.uint16[S+8]=l,this.uint16[S+9]=c,this.uint16[S+10]=d,this.uint16[S+11]=h,this.uint16[S+12]=f,this.uint16[S+13]=p,this.uint16[S+14]=m,this.uint16[S+15]=_,this.uint16[S+16]=y,this.uint16[S+17]=v,this.uint16[S+18]=g,this.uint16[S+19]=x,this.uint16[S+20]=b,this.uint16[S+21]=w,this.uint32[E+11]=M,this.float32[E+12]=L,this.float32[E+13]=k,this.float32[E+14]=T,t},e}(Pi);qi.prototype.bytesPerElement=60,Wr("StructArrayLayout8i14ui1ul3f60",qi);var Xi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.float32[1*t+0]=e,t},e}(Pi);Xi.prototype.bytesPerElement=4,Wr("StructArrayLayout1f4",Xi);var Zi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)},e.prototype.emplace=function(t,e,n,r){var i=3*t;return this.int16[i+0]=e,this.int16[i+1]=n,this.int16[i+2]=r,t},e}(Pi);Zi.prototype.bytesPerElement=6,Wr("StructArrayLayout3i6",Zi);var Ki=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)},e.prototype.emplace=function(t,e,n,r){var i=4*t;return this.uint32[2*t+0]=e,this.uint16[i+2]=n,this.uint16[i+3]=r,t},e}(Pi);Ki.prototype.bytesPerElement=8,Wr("StructArrayLayout1ul2ui8",Ki);var Ji=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n){var r=this.length;return this.resize(r+1),this.emplace(r,t,e,n)},e.prototype.emplace=function(t,e,n,r){var i=3*t;return this.uint16[i+0]=e,this.uint16[i+1]=n,this.uint16[i+2]=r,t},e}(Pi);Ji.prototype.bytesPerElement=6,Wr("StructArrayLayout3ui6",Ji);var $i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var r=2*t;return this.uint16[r+0]=e,this.uint16[r+1]=n,t},e}(Pi);$i.prototype.bytesPerElement=4,Wr("StructArrayLayout2ui4",$i);var Qi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t){var e=this.length;return this.resize(e+1),this.emplace(e,t)},e.prototype.emplace=function(t,e){return this.uint16[1*t+0]=e,t},e}(Pi);Qi.prototype.bytesPerElement=2,Wr("StructArrayLayout1ui2",Qi);var to=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e){var n=this.length;return this.resize(n+1),this.emplace(n,t,e)},e.prototype.emplace=function(t,e,n){var r=2*t;return this.float32[r+0]=e,this.float32[r+1]=n,t},e}(Pi);to.prototype.bytesPerElement=8,Wr("StructArrayLayout2f8",to);var eo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},e.prototype.emplaceBack=function(t,e,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,t,e,n,r)},e.prototype.emplace=function(t,e,n,r,i){var o=4*t;return this.float32[o+0]=e,this.float32[o+1]=n,this.float32[o+2]=r,this.float32[o+3]=i,t},e}(Pi);eo.prototype.bytesPerElement=16,Wr("StructArrayLayout4f16",eo);var no=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},radius:{configurable:!0},signedDistanceFromAnchor:{configurable:!0},anchorPoint:{configurable:!0}};return n.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},n.x1.get=function(){return this._structArray.int16[this._pos2+2]},n.y1.get=function(){return this._structArray.int16[this._pos2+3]},n.x2.get=function(){return this._structArray.int16[this._pos2+4]},n.y2.get=function(){return this._structArray.int16[this._pos2+5]},n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.radius.get=function(){return this._structArray.int16[this._pos2+10]},n.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},n.anchorPoint.get=function(){return new i(this.anchorPointX,this.anchorPointY)},Object.defineProperties(e.prototype,n),e}(Ci);no.prototype.size=24;var ro=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new no(this,t)},e}(Hi);Wr("CollisionBoxArray",ro);var io=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},n.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},n.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},n.segment.get=function(){return this._structArray.uint16[this._pos2+10]},n.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},n.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},n.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},n.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},n.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},n.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},n.placedOrientation.set=function(t){this._structArray.uint8[this._pos1+37]=t},n.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},n.hidden.set=function(t){this._structArray.uint8[this._pos1+38]=t},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},n.crossTileID.set=function(t){this._structArray.uint32[this._pos4+10]=t},n.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(e.prototype,n),e}(Ci);io.prototype.size=48;var oo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new io(this,t)},e}(Gi);Wr("PlacedSymbolArray",oo);var ao=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},n.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},n.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},n.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},n.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},n.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},n.key.get=function(){return this._structArray.uint16[this._pos2+8]},n.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},n.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},n.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},n.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},n.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},n.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},n.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},n.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},n.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},n.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},n.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},n.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},n.crossTileID.get=function(){return this._structArray.uint32[this._pos4+11]},n.crossTileID.set=function(t){this._structArray.uint32[this._pos4+11]=t},n.textBoxScale.get=function(){return this._structArray.float32[this._pos4+12]},n.textOffset0.get=function(){return this._structArray.float32[this._pos4+13]},n.textOffset1.get=function(){return this._structArray.float32[this._pos4+14]},Object.defineProperties(e.prototype,n),e}(Ci);ao.prototype.size=60;var so=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new ao(this,t)},e}(qi);Wr("SymbolInstanceArray",so);var uo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getoffsetX=function(t){return this.float32[1*t+0]},e}(Xi);Wr("GlyphOffsetArray",uo);var lo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getx=function(t){return this.int16[3*t+0]},e.prototype.gety=function(t){return this.int16[3*t+1]},e.prototype.gettileUnitDistanceFromAnchor=function(t){return this.int16[3*t+2]},e}(Zi);Wr("SymbolLineVertexArray",lo);var co=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(e.prototype,n),e}(Ci);co.prototype.size=8;var ho=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.get=function(t){return new co(this,t)},e}(Ki);Wr("FeatureIndexArray",ho);var fo=Ii([{name:"a_pos",components:2,type:"Int16"}],4).members,po=function(t){void 0===t&&(t=[]),this.segments=t};function mo(t,e){return 256*(t=u(Math.floor(t),0,255))+u(Math.floor(e),0,255)}po.prototype.prepareSegment=function(t,e,n,r){var i=this.segments[this.segments.length-1];return t>po.MAX_VERTEX_ARRAY_LENGTH&&b("Max vertices per segment is "+po.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+t),(!i||i.vertexLength+t>po.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==r)&&(i={vertexOffset:e.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==r&&(i.sortKey=r),this.segments.push(i)),i},po.prototype.get=function(){return this.segments},po.prototype.destroy=function(){for(var t=0,e=this.segments;t<e.length;t+=1){var n=e[t];for(var r in n.vaos)n.vaos[r].destroy()}},po.simpleSegment=function(t,e,n,r){return new po([{vertexOffset:t,primitiveOffset:e,vertexLength:n,primitiveLength:r,vaos:{},sortKey:0}])},po.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Wr("SegmentVector",po);var _o=Ii([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),yo=e((function(t){t.exports=function(t,e){var n,r,i,o,a,s,u,l;for(r=t.length-(n=3&t.length),i=e,a=3432918353,s=461845907,l=0;l<r;)u=255&t.charCodeAt(l)|(255&t.charCodeAt(++l))<<8|(255&t.charCodeAt(++l))<<16|(255&t.charCodeAt(++l))<<24,++l,i=27492+(65535&(o=5*(65535&(i=(i^=u=(65535&(u=(u=(65535&u)*a+(((u>>>16)*a&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(u=0,n){case 3:u^=(255&t.charCodeAt(l+2))<<16;case 2:u^=(255&t.charCodeAt(l+1))<<8;case 1:i^=u=(65535&(u=(u=(65535&(u^=255&t.charCodeAt(l)))*a+(((u>>>16)*a&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295}return i^=t.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0}})),vo=e((function(t){t.exports=function(t,e){for(var n,r=t.length,i=e^r,o=0;r>=4;)n=1540483477*(65535&(n=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:i^=(255&t.charCodeAt(o+2))<<16;case 2:i^=(255&t.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&t.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0}})),go=yo,xo=vo;go.murmur3=yo,go.murmur2=xo;var bo=function(){this.ids=[],this.positions=[],this.indexed=!1};bo.prototype.add=function(t,e,n,r){this.ids.push(Mo(t)),this.positions.push(e,n,r)},bo.prototype.getPositions=function(t){for(var e=Mo(t),n=0,r=this.ids.length-1;n<r;){var i=n+r>>1;this.ids[i]>=e?r=i:n=i+1}for(var o=[];this.ids[n]===e;)o.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return o},bo.serialize=function(t,e){var n=new Float64Array(t.ids),r=new Uint32Array(t.positions);return function t(e,n,r,i){if(!(r>=i)){for(var o=e[r+i>>1],a=r-1,s=i+1;;){do{a++}while(e[a]<o);do{s--}while(e[s]>o);if(a>=s)break;Lo(e,a,s),Lo(n,3*a,3*s),Lo(n,3*a+1,3*s+1),Lo(n,3*a+2,3*s+2)}t(e,n,r,s),t(e,n,s+1,i)}}(n,r,0,n.length-1),e&&e.push(n.buffer,r.buffer),{ids:n,positions:r}},bo.deserialize=function(t){var e=new bo;return e.ids=t.ids,e.positions=t.positions,e.indexed=!0,e};var wo=Math.pow(2,53)-1;function Mo(t){var e=+t;return!isNaN(e)&&e<=wo?e:go(String(t))}function Lo(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}Wr("FeaturePositionMap",bo);var ko=function(t,e){this.gl=t.gl,this.location=e},To=function(t){function e(e,n){t.call(this,e,n),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1i(this.location,t))},e}(ko),So=function(t){function e(e,n){t.call(this,e,n),this.current=0}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))},e}(ko),Eo=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]||(this.current=t,this.gl.uniform2f(this.location,t[0],t[1]))},e}(ko),Ao=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]||(this.current=t,this.gl.uniform3f(this.location,t[0],t[1],t[2]))},e}(ko),Do=function(t){function e(e,n){t.call(this,e,n),this.current=[0,0,0,0]}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))},e}(ko),Co=function(t){function e(e,n){t.call(this,e,n),this.current=Kt.transparent}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))},e}(ko),Po=new Float32Array(16),Io=function(t){function e(e,n){t.call(this,e,n),this.current=Po}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(t[12]!==this.current[12]||t[0]!==this.current[0])return this.current=t,void this.gl.uniformMatrix4fv(this.location,!1,t);for(var e=1;e<16;e++)if(t[e]!==this.current[e]){this.current=t,this.gl.uniformMatrix4fv(this.location,!1,t);break}},e}(ko);function Oo(t){return[mo(255*t.r,255*t.g),mo(255*t.b,255*t.a)]}var Ro=function(t,e,n){this.value=t,this.uniformNames=e.map((function(t){return"u_"+t})),this.type=n};Ro.prototype.setUniform=function(t,e,n){t.set(n.constantOr(this.value))},Ro.prototype.getBinding=function(t,e,n){return"color"===this.type?new Co(t,e):new So(t,e)};var Yo=function(t,e){this.uniformNames=e.map((function(t){return"u_"+t})),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Yo.prototype.setConstantPatternPositions=function(t,e){this.pixelRatioFrom=e.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=e.tlbr,this.patternTo=t.tlbr},Yo.prototype.setUniform=function(t,e,n,r){var i="u_pattern_to"===r?this.patternTo:"u_pattern_from"===r?this.patternFrom:"u_pixel_ratio_to"===r?this.pixelRatioTo:"u_pixel_ratio_from"===r?this.pixelRatioFrom:null;i&&t.set(i)},Yo.prototype.getBinding=function(t,e,n){return"u_pattern"===n.substr(0,9)?new Do(t,e):new So(t,e)};var Fo=function(t,e,n,r){this.expression=t,this.type=n,this.maxValue=0,this.paintVertexAttributes=e.map((function(t){return{name:"a_"+t,type:"Float32",components:"color"===n?2:1,offset:0}})),this.paintVertexArray=new r};Fo.prototype.populatePaintArray=function(t,e,n,r,i){var o=this.paintVertexArray.length,a=this.expression.evaluate(new pi(0),e,{},r,[],i);this.paintVertexArray.resize(t),this._setPaintValue(o,t,a)},Fo.prototype.updatePaintArray=function(t,e,n,r){var i=this.expression.evaluate({zoom:0},n,r);this._setPaintValue(t,e,i)},Fo.prototype._setPaintValue=function(t,e,n){if("color"===this.type)for(var r=Oo(n),i=t;i<e;i++)this.paintVertexArray.emplace(i,r[0],r[1]);else{for(var o=t;o<e;o++)this.paintVertexArray.emplace(o,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}},Fo.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Fo.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var jo=function(t,e,n,r,i,o){this.expression=t,this.uniformNames=e.map((function(t){return"u_"+t+"_t"})),this.type=n,this.useIntegerZoom=r,this.zoom=i,this.maxValue=0,this.paintVertexAttributes=e.map((function(t){return{name:"a_"+t,type:"Float32",components:"color"===n?4:2,offset:0}})),this.paintVertexArray=new o};jo.prototype.populatePaintArray=function(t,e,n,r,i){var o=this.expression.evaluate(new pi(this.zoom),e,{},r,[],i),a=this.expression.evaluate(new pi(this.zoom+1),e,{},r,[],i),s=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(s,t,o,a)},jo.prototype.updatePaintArray=function(t,e,n,r){var i=this.expression.evaluate({zoom:this.zoom},n,r),o=this.expression.evaluate({zoom:this.zoom+1},n,r);this._setPaintValue(t,e,i,o)},jo.prototype._setPaintValue=function(t,e,n,r){if("color"===this.type)for(var i=Oo(n),o=Oo(r),a=t;a<e;a++)this.paintVertexArray.emplace(a,i[0],i[1],o[0],o[1]);else{for(var s=t;s<e;s++)this.paintVertexArray.emplace(s,n,r);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(r))}},jo.prototype.upload=function(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},jo.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},jo.prototype.setUniform=function(t,e){var n=this.useIntegerZoom?Math.floor(e.zoom):e.zoom,r=u(this.expression.interpolationFactor(n,this.zoom,this.zoom+1),0,1);t.set(r)},jo.prototype.getBinding=function(t,e,n){return new So(t,e)};var zo=function(t,e,n,r,i,o){this.expression=t,this.type=e,this.useIntegerZoom=n,this.zoom=r,this.layerId=o,this.zoomInPaintVertexArray=new i,this.zoomOutPaintVertexArray=new i};zo.prototype.populatePaintArray=function(t,e,n){var r=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(r,t,e.patterns&&e.patterns[this.layerId],n)},zo.prototype.updatePaintArray=function(t,e,n,r,i){this._setPaintValues(t,e,n.patterns&&n.patterns[this.layerId],i)},zo.prototype._setPaintValues=function(t,e,n,r){if(r&&n){var i=r[n.min],o=r[n.mid],a=r[n.max];if(i&&o&&a)for(var s=t;s<e;s++)this.zoomInPaintVertexArray.emplace(s,o.tl[0],o.tl[1],o.br[0],o.br[1],i.tl[0],i.tl[1],i.br[0],i.br[1],o.pixelRatio,i.pixelRatio),this.zoomOutPaintVertexArray.emplace(s,o.tl[0],o.tl[1],o.br[0],o.br[1],a.tl[0],a.tl[1],a.br[0],a.br[1],o.pixelRatio,a.pixelRatio)}},zo.prototype.upload=function(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,_o.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,_o.members,this.expression.isStateDependent))},zo.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var No=function(t,e,n,r){this.binders={},this.layoutAttributes=r,this._buffers=[];var i=[];for(var o in t.paint._values)if(n(o)){var a=t.paint.get(o);if(a instanceof bi&&Bn(a.property.specification)){var s=Uo(o,t.type),u=a.value,l=a.property.specification.type,c=a.property.useIntegerZoom,d=a.property.specification["property-type"],h="cross-faded"===d||"cross-faded-data-driven"===d;if("constant"===u.kind)this.binders[o]=h?new Yo(u.value,s):new Ro(u.value,s,l),i.push("/u_"+o);else if("source"===u.kind||h){var f=Ho(o,l,"source");this.binders[o]=h?new zo(u,l,c,e,f,t.id):new Fo(u,s,l,f),i.push("/a_"+o)}else{var p=Ho(o,l,"composite");this.binders[o]=new jo(u,s,l,c,e,p),i.push("/z_"+o)}}}this.cacheKey=i.sort().join("")};No.prototype.getMaxValue=function(t){var e=this.binders[t];return e instanceof Fo||e instanceof jo?e.maxValue:0},No.prototype.populatePaintArrays=function(t,e,n,r,i){for(var o in this.binders){var a=this.binders[o];(a instanceof Fo||a instanceof jo||a instanceof zo)&&a.populatePaintArray(t,e,n,r,i)}},No.prototype.setConstantPatternPositions=function(t,e){for(var n in this.binders){var r=this.binders[n];r instanceof Yo&&r.setConstantPatternPositions(t,e)}},No.prototype.updatePaintArrays=function(t,e,n,r,i){var o=!1;for(var a in t)for(var s=0,u=e.getPositions(a);s<u.length;s+=1){var l=u[s],c=n.feature(l.index);for(var d in this.binders){var h=this.binders[d];if((h instanceof Fo||h instanceof jo||h instanceof zo)&&!0===h.expression.isStateDependent){var f=r.paint.get(d);h.expression=f.value,h.updatePaintArray(l.start,l.end,c,t[a],i),o=!0}}}return o},No.prototype.defines=function(){var t=[];for(var e in this.binders){var n=this.binders[e];(n instanceof Ro||n instanceof Yo)&&t.push.apply(t,n.uniformNames.map((function(t){return"#define HAS_UNIFORM_"+t})))}return t},No.prototype.getPaintVertexBuffers=function(){return this._buffers},No.prototype.getUniforms=function(t,e){var n=[];for(var r in this.binders){var i=this.binders[r];if(i instanceof Ro||i instanceof Yo||i instanceof jo)for(var o=0,a=i.uniformNames;o<a.length;o+=1){var s=a[o];if(e[s]){var u=i.getBinding(t,e[s],s);n.push({name:s,property:r,binding:u})}}}return n},No.prototype.setUniforms=function(t,e,n,r){for(var i=0,o=e;i<o.length;i+=1){var a=o[i],s=a.name,u=a.property;this.binders[u].setUniform(a.binding,r,n.get(u),s)}},No.prototype.updatePaintBuffers=function(t){for(var e in this._buffers=[],this.binders){var n=this.binders[e];if(t&&n instanceof zo){var r=2===t.fromScale?n.zoomInPaintVertexBuffer:n.zoomOutPaintVertexBuffer;r&&this._buffers.push(r)}else(n instanceof Fo||n instanceof jo)&&n.paintVertexBuffer&&this._buffers.push(n.paintVertexBuffer)}},No.prototype.upload=function(t){for(var e in this.binders){var n=this.binders[e];(n instanceof Fo||n instanceof jo||n instanceof zo)&&n.upload(t)}this.updatePaintBuffers()},No.prototype.destroy=function(){for(var t in this.binders){var e=this.binders[t];(e instanceof Fo||e instanceof jo||e instanceof zo)&&e.destroy()}};var Bo=function(t,e,n,r){void 0===r&&(r=function(){return!0}),this.programConfigurations={};for(var i=0,o=e;i<o.length;i+=1){var a=o[i];this.programConfigurations[a.id]=new No(a,n,r,t)}this.needsUpload=!1,this._featureMap=new bo,this._bufferOffset=0};function Uo(t,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[t]||[t.replace(e+"-","").replace(/-/g,"_")]}function Ho(t,e,n){var r={color:{source:to,composite:eo},number:{source:Xi,composite:to}},i=function(t){return{"line-pattern":{source:zi,composite:zi},"fill-pattern":{source:zi,composite:zi},"fill-extrusion-pattern":{source:zi,composite:zi}}[t]}(t);return i&&i[n]||r[e][n]}Bo.prototype.populatePaintArrays=function(t,e,n,r,i,o){for(var a in this.programConfigurations)this.programConfigurations[a].populatePaintArrays(t,e,r,i,o);void 0!==e.id&&this._featureMap.add(e.id,n,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0},Bo.prototype.updatePaintArrays=function(t,e,n,r){for(var i=0,o=n;i<o.length;i+=1){var a=o[i];this.needsUpload=this.programConfigurations[a.id].updatePaintArrays(t,this._featureMap,e,a,r)||this.needsUpload}},Bo.prototype.get=function(t){return this.programConfigurations[t]},Bo.prototype.upload=function(t){if(this.needsUpload){for(var e in this.programConfigurations)this.programConfigurations[e].upload(t);this.needsUpload=!1}},Bo.prototype.destroy=function(){for(var t in this.programConfigurations)this.programConfigurations[t].destroy()},Wr("ConstantBinder",Ro),Wr("CrossFadedConstantBinder",Yo),Wr("SourceExpressionBinder",Fo),Wr("CrossFadedCompositeBinder",zo),Wr("CompositeExpressionBinder",jo),Wr("ProgramConfiguration",No,{omit:["_buffers"]}),Wr("ProgramConfigurationSet",Bo);var Vo={min:-1*Math.pow(2,14),max:Math.pow(2,14)-1};function Wo(t){for(var e=Te/t.extent,n=t.loadGeometry(),r=0;r<n.length;r++)for(var i=n[r],o=0;o<i.length;o++){var a=i[o];a.x=Math.round(a.x*e),a.y=Math.round(a.y*e),(a.x<Vo.min||a.x>Vo.max||a.y<Vo.min||a.y>Vo.max)&&(b("Geometry exceeds allowed extent, reduce your vector tile buffer size"),a.x=u(a.x,Vo.min,Vo.max),a.y=u(a.y,Vo.min,Vo.max))}return n}function Go(t,e,n,r,i){t.emplaceBack(2*e+(r+1)/2,2*n+(i+1)/2)}var qo=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Ri,this.indexArray=new Ji,this.segments=new po,this.programConfigurations=new Bo(fo,t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};function Xo(t,e){for(var n=0;n<t.length;n++)if(ra(e,t[n]))return!0;for(var r=0;r<e.length;r++)if(ra(t,e[r]))return!0;return!!$o(t,e)}function Zo(t,e,n){return!!ra(t,e)||!!ta(e,t,n)}function Ko(t,e){if(1===t.length)return na(e,t[0]);for(var n=0;n<e.length;n++)for(var r=e[n],i=0;i<r.length;i++)if(ra(t,r[i]))return!0;for(var o=0;o<t.length;o++)if(na(e,t[o]))return!0;for(var a=0;a<e.length;a++)if($o(t,e[a]))return!0;return!1}function Jo(t,e,n){if(t.length>1){if($o(t,e))return!0;for(var r=0;r<e.length;r++)if(ta(e[r],t,n))return!0}for(var i=0;i<t.length;i++)if(ta(t[i],e,n))return!0;return!1}function $o(t,e){if(0===t.length||0===e.length)return!1;for(var n=0;n<t.length-1;n++)for(var r=t[n],i=t[n+1],o=0;o<e.length-1;o++)if(Qo(r,i,e[o],e[o+1]))return!0;return!1}function Qo(t,e,n,r){return w(t,n,r)!==w(e,n,r)&&w(t,e,n)!==w(t,e,r)}function ta(t,e,n){var r=n*n;if(1===e.length)return t.distSqr(e[0])<r;for(var i=1;i<e.length;i++)if(ea(t,e[i-1],e[i])<r)return!0;return!1}function ea(t,e,n){var r=e.distSqr(n);if(0===r)return t.distSqr(e);var i=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/r;return t.distSqr(i<0?e:i>1?n:n.sub(e)._mult(i)._add(e))}function na(t,e){for(var n,r,i,o=!1,a=0;a<t.length;a++)for(var s=0,u=(n=t[a]).length-1;s<n.length;u=s++)(r=n[s]).y>e.y!=(i=n[u]).y>e.y&&e.x<(i.x-r.x)*(e.y-r.y)/(i.y-r.y)+r.x&&(o=!o);return o}function ra(t,e){for(var n=!1,r=0,i=t.length-1;r<t.length;i=r++){var o=t[r],a=t[i];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function ia(t,e,n){var r=n[0],i=n[2];if(t.x<r.x&&e.x<r.x||t.x>i.x&&e.x>i.x||t.y<r.y&&e.y<r.y||t.y>i.y&&e.y>i.y)return!1;var o=w(t,e,n[0]);return o!==w(t,e,n[1])||o!==w(t,e,n[2])||o!==w(t,e,n[3])}function oa(t,e,n){var r=e.paint.get(t).value;return"constant"===r.kind?r.value:n.programConfigurations.get(e.id).getMaxValue(t)}function aa(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function sa(t,e,n,r,o){if(!e[0]&&!e[1])return t;var a=i.convert(e)._mult(o);"viewport"===n&&a._rotate(-r);for(var s=[],u=0;u<t.length;u++)s.push(t[u].sub(a));return s}qo.prototype.populate=function(t,e,n){var r=this.layers[0],i=[],o=null;"circle"===r.type&&(o=r.layout.get("circle-sort-key"));for(var a=0,s=t;a<s.length;a+=1){var u=s[a],l=u.feature,c=u.id,d=u.index,h=u.sourceLayerIndex,f=this.layers[0]._featureFilter.needGeometry,p={type:l.type,id:c,properties:l.properties,geometry:f?Wo(l):[]};if(this.layers[0]._featureFilter.filter(new pi(this.zoom),p,n)){f||(p.geometry=Wo(l));var m=o?o.evaluate(p,{},n):void 0;i.push({id:c,properties:l.properties,type:l.type,sourceLayerIndex:h,index:d,geometry:p.geometry,patterns:{},sortKey:m})}}o&&i.sort((function(t,e){return t.sortKey-e.sortKey}));for(var _=0,y=i;_<y.length;_+=1){var v=y[_],g=v.geometry,x=v.index,b=v.sourceLayerIndex,w=t[x].feature;this.addFeature(v,g,x,n),e.featureIndex.insert(w,g,x,b,this.index)}},qo.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},qo.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},qo.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},qo.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,fo),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},qo.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},qo.prototype.addFeature=function(t,e,n,r){for(var i=0,o=e;i<o.length;i+=1)for(var a=0,s=o[i];a<s.length;a+=1){var u=s[a],l=u.x,c=u.y;if(!(l<0||l>=Te||c<0||c>=Te)){var d=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),h=d.vertexLength;Go(this.layoutVertexArray,l,c,-1,-1),Go(this.layoutVertexArray,l,c,1,-1),Go(this.layoutVertexArray,l,c,1,1),Go(this.layoutVertexArray,l,c,-1,1),this.indexArray.emplaceBack(h,h+1,h+2),this.indexArray.emplaceBack(h,h+3,h+2),d.vertexLength+=4,d.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,{},r)},Wr("CircleBucket",qo,{omit:["layers"]});var ua,la=new Ei({"circle-sort-key":new Li(St.layout_circle["circle-sort-key"])}),ca={paint:new Ei({"circle-radius":new Li(St.paint_circle["circle-radius"]),"circle-color":new Li(St.paint_circle["circle-color"]),"circle-blur":new Li(St.paint_circle["circle-blur"]),"circle-opacity":new Li(St.paint_circle["circle-opacity"]),"circle-translate":new Mi(St.paint_circle["circle-translate"]),"circle-translate-anchor":new Mi(St.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Mi(St.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Mi(St.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Li(St.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Li(St.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Li(St.paint_circle["circle-stroke-opacity"])}),layout:la},da="undefined"!=typeof Float32Array?Float32Array:Array;function ha(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}Math.hypot||(Math.hypot=function(){for(var t=arguments,e=0,n=arguments.length;n--;)e+=t[n]*t[n];return Math.sqrt(e)}),ua=new da(3),da!=Float32Array&&(ua[0]=0,ua[1]=0,ua[2]=0),function(){var t=new da(4);da!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0)}();var fa=(function(){var t=new da(2);da!=Float32Array&&(t[0]=0,t[1]=0)}(),function(t){function e(e){t.call(this,e,ca)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new qo(t)},e.prototype.queryRadius=function(t){var e=t;return oa("circle-radius",this,e)+oa("circle-stroke-width",this,e)+aa(this.paint.get("circle-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,o,a,s){for(var u=sa(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,a),l=this.paint.get("circle-radius").evaluate(e,n)+this.paint.get("circle-stroke-width").evaluate(e,n),c="map"===this.paint.get("circle-pitch-alignment"),d=c?u:function(t,e){return t.map((function(t){return pa(t,e)}))}(u,s),h=c?l*a:l,f=0,p=r;f<p.length;f+=1)for(var m=0,_=p[f];m<_.length;m+=1){var y=_[m],v=c?y:pa(y,s),g=h,x=ha([],[y.x,y.y,0,1],s);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?g*=x[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(g*=o.cameraToCenterDistance/x[3]),Zo(d,v,g))return!0}return!1},e}(Ai));function pa(t,e){var n=ha([],[t.x,t.y,0,1],e);return new i(n[0]/n[3],n[1]/n[3])}var ma=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(qo);function _a(t,e,n,r){var i=e.width,o=e.height;if(r){if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==i*o*n)throw new RangeError("mismatched image size")}else r=new Uint8Array(i*o*n);return t.width=i,t.height=o,t.data=r,t}function ya(t,e,n){var r=e.width,i=e.height;if(r!==t.width||i!==t.height){var o=_a({},{width:r,height:i},n);va(t,o,{x:0,y:0},{x:0,y:0},{width:Math.min(t.width,r),height:Math.min(t.height,i)},n),t.width=r,t.height=i,t.data=o.data}}function va(t,e,n,r,i,o){if(0===i.width||0===i.height)return e;if(i.width>t.width||i.height>t.height||n.x>t.width-i.width||n.y>t.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>e.width||i.height>e.height||r.x>e.width-i.width||r.y>e.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=t.data,s=e.data,u=0;u<i.height;u++)for(var l=((n.y+u)*t.width+n.x)*o,c=((r.y+u)*e.width+r.x)*o,d=0;d<i.width*o;d++)s[c+d]=a[l+d];return e}Wr("HeatmapBucket",ma,{omit:["layers"]});var ga=function(t,e){_a(this,t,1,e)};ga.prototype.resize=function(t){ya(this,t,1)},ga.prototype.clone=function(){return new ga({width:this.width,height:this.height},new Uint8Array(this.data))},ga.copy=function(t,e,n,r,i){va(t,e,n,r,i,1)};var xa=function(t,e){_a(this,t,4,e)};xa.prototype.resize=function(t){ya(this,t,4)},xa.prototype.replace=function(t,e){e?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t},xa.prototype.clone=function(){return new xa({width:this.width,height:this.height},new Uint8Array(this.data))},xa.copy=function(t,e,n,r,i){va(t,e,n,r,i,4)},Wr("AlphaImage",ga),Wr("RGBAImage",xa);var ba={paint:new Ei({"heatmap-radius":new Li(St.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Li(St.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Mi(St.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Si(St.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Mi(St.paint_heatmap["heatmap-opacity"])})};function wa(t,e){for(var n=new Uint8Array(1024),r={},i=0,o=0;i<256;i++,o+=4){r[e]=i/255;var a=t.evaluate(r);n[o+0]=Math.floor(255*a.r/a.a),n[o+1]=Math.floor(255*a.g/a.a),n[o+2]=Math.floor(255*a.b/a.a),n[o+3]=Math.floor(255*a.a)}return new xa({width:256,height:1},n)}var Ma=function(t){function e(e){t.call(this,e,ba),this._updateColorRamp()}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new ma(t)},e.prototype._handleSpecialPaintPropertyUpdate=function(t){"heatmap-color"===t&&this._updateColorRamp()},e.prototype._updateColorRamp=function(){this.colorRamp=wa(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity"),this.colorRampTexture=null},e.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},e}(Ai),La={paint:new Ei({"hillshade-illumination-direction":new Mi(St.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Mi(St.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Mi(St.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Mi(St.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Mi(St.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Mi(St.paint_hillshade["hillshade-accent-color"])})},ka=function(t){function e(e){t.call(this,e,La)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},e}(Ai),Ta=Ii([{name:"a_pos",components:2,type:"Int16"}],4).members,Sa=Aa,Ea=Aa;function Aa(t,e,n){n=n||2;var r,i,o,a,s,u,l,c=e&&e.length,d=c?e[0]*n:t.length,h=Da(t,0,d,n,!0),f=[];if(!h||h.next===h.prev)return f;if(c&&(h=function(t,e,n,r){var i,o,a,s=[];for(i=0,o=e.length;i<o;i++)(a=Da(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),s.push(Ba(a));for(s.sort(Fa),i=0;i<s.length;i++)ja(s[i],n),n=Ca(n,n.next);return n}(t,e,h,n)),t.length>80*n){r=o=t[0],i=a=t[1];for(var p=n;p<d;p+=n)(s=t[p])<r&&(r=s),(u=t[p+1])<i&&(i=u),s>o&&(o=s),u>a&&(a=u);l=0!==(l=Math.max(o-r,a-i))?1/l:0}return Pa(h,f,n,r,i,l),f}function Da(t,e,n,r,i){var o,a;if(i===ts(t,e,n,r)>0)for(o=e;o<n;o+=r)a=Ja(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=Ja(o,t[o],t[o+1],a);return a&&Wa(a,a.next)&&($a(a),a=a.next),a}function Ca(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!Wa(r,r.next)&&0!==Va(r.prev,r,r.next))r=r.next;else{if($a(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function Pa(t,e,n,r,i,o,a){if(t){!a&&o&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=Na(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,u,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<l&&(s++,r=r.nextZ);e++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(t,r,i,o);for(var s,u,l=t;t.prev!==t.next;)if(s=t.prev,u=t.next,o?Oa(t,r,i,o):Ia(t))e.push(s.i/n),e.push(t.i/n),e.push(u.i/n),$a(t),t=u.next,l=u.next;else if((t=u)===l){a?1===a?Pa(t=Ra(Ca(t),e,n),e,n,r,i,o,2):2===a&&Ya(t,e,n,r,i,o):Pa(Ca(t),e,n,r,i,o,1);break}}}function Ia(t){var e=t.prev,n=t,r=t.next;if(Va(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(Ua(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Va(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Oa(t,e,n,r){var i=t.prev,o=t,a=t.next;if(Va(i,o,a)>=0)return!1;for(var s=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,u=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,l=Na(i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,e,n,r),c=Na(s,u,e,n,r),d=t.prevZ,h=t.nextZ;d&&d.z>=l&&h&&h.z<=c;){if(d!==t.prev&&d!==t.next&&Ua(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Va(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,h!==t.prev&&h!==t.next&&Ua(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&Va(h.prev,h,h.next)>=0)return!1;h=h.nextZ}for(;d&&d.z>=l;){if(d!==t.prev&&d!==t.next&&Ua(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Va(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;h&&h.z<=c;){if(h!==t.prev&&h!==t.next&&Ua(i.x,i.y,o.x,o.y,a.x,a.y,h.x,h.y)&&Va(h.prev,h,h.next)>=0)return!1;h=h.nextZ}return!0}function Ra(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!Wa(i,o)&&Ga(i,r,r.next,o)&&Za(i,o)&&Za(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),$a(r),$a(r.next),r=t=o),r=r.next}while(r!==t);return Ca(r)}function Ya(t,e,n,r,i,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&Ha(a,s)){var u=Ka(a,s);return a=Ca(a,a.next),u=Ca(u,u.next),Pa(a,e,n,r,i,o),void Pa(u,e,n,r,i,o)}s=s.next}a=a.next}while(a!==t)}function Fa(t,e){return t.x-e.x}function ja(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n;var u,l=n,c=n.x,d=n.y,h=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&Ua(o<d?i:a,o,c,d,o<d?a:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),Za(r,t)&&(u<h||u===h&&(r.x>n.x||r.x===n.x&&za(n,r)))&&(n=r,h=u)),r=r.next}while(r!==l);return n}(t,e)){var n=Ka(e,t);Ca(e,e.next),Ca(n,n.next)}}function za(t,e){return Va(t.prev,t,e.prev)<0&&Va(e.next,t,t.next)<0}function Na(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Ba(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function Ua(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function Ha(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Ga(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(Za(t,e)&&Za(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(Va(t.prev,t,e.prev)||Va(t,e.prev,e))||Wa(t,e)&&Va(t.prev,t,t.next)>0&&Va(e.prev,e,e.next)>0)}function Va(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Wa(t,e){return t.x===e.x&&t.y===e.y}function Ga(t,e,n,r){var i=Xa(Va(t,e,n)),o=Xa(Va(t,e,r)),a=Xa(Va(n,r,t)),s=Xa(Va(n,r,e));return i!==o&&a!==s||!(0!==i||!qa(t,n,e))||!(0!==o||!qa(t,r,e))||!(0!==a||!qa(n,t,r))||!(0!==s||!qa(n,e,r))}function qa(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Xa(t){return t>0?1:t<0?-1:0}function Za(t,e){return Va(t.prev,t,t.next)<0?Va(t,e,t.next)>=0&&Va(t,t.prev,e)>=0:Va(t,e,t.prev)<0||Va(t,t.next,e)<0}function Ka(t,e){var n=new Qa(t.i,t.x,t.y),r=new Qa(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Ja(t,e,n,r){var i=new Qa(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function $a(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Qa(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ts(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}function es(t,e,n,r,i){!function t(e,n,r,i,o){for(;i>r;){if(i-r>600){var a=i-r+1,s=n-r+1,u=Math.log(a),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(a-l)/a)*(s-a/2<0?-1:1);t(e,n,Math.max(r,Math.floor(n-s*l/a+c)),Math.min(i,Math.floor(n+(a-s)*l/a+c)),o)}var d=e[n],h=r,f=i;for(ns(e,r,n),o(e[i],d)>0&&ns(e,r,i);h<f;){for(ns(e,h,f),h++,f--;o(e[h],d)<0;)h++;for(;o(e[f],d)>0;)f--}0===o(e[r],d)?ns(e,r,f):ns(e,++f,i),f<=n&&(r=f+1),n<=f&&(i=f-1)}}(t,e,n||0,r||t.length-1,i||rs)}function ns(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function rs(t,e){return t<e?-1:t>e?1:0}function is(t,e){var n=t.length;if(n<=1)return[t];for(var r,i,o=[],a=0;a<n;a++){var s=M(t[a]);0!==s&&(t[a].area=Math.abs(s),void 0===i&&(i=s<0),i===s<0?(r&&o.push(r),r=[t[a]]):r.push(t[a]))}if(r&&o.push(r),e>1)for(var u=0;u<o.length;u++)o[u].length<=e||(es(o[u],e,1,o[u].length-1,os),o[u]=o[u].slice(0,e));return o}function os(t,e){return e.area-t.area}function as(t,e,n){for(var r=n.patternDependencies,i=!1,o=0,a=e;o<a.length;o+=1){var s=a[o].paint.get(t+"-pattern");s.isConstant()||(i=!0);var u=s.constantOr(null);u&&(i=!0,r[u.to]=!0,r[u.from]=!0)}return i}function ss(t,e,n,r,i){for(var o=i.patternDependencies,a=0,s=e;a<s.length;a+=1){var u=s[a],l=u.paint.get(t+"-pattern").value;if("constant"!==l.kind){var c=l.evaluate({zoom:r-1},n,{},i.availableImages),d=l.evaluate({zoom:r},n,{},i.availableImages),h=l.evaluate({zoom:r+1},n,{},i.availableImages);d=d&&d.name?d.name:d,h=h&&h.name?h.name:h,o[c=c&&c.name?c.name:c]=!0,o[d]=!0,o[h]=!0,n.patterns[u.id]={min:c,mid:d,max:h}}}return n}Aa.deviation=function(t,e,n,r){var i=e&&e.length,o=Math.abs(ts(t,0,i?e[0]*n:t.length,n));if(i)for(var a=0,s=e.length;a<s;a++)o-=Math.abs(ts(t,e[a]*n,a<s-1?e[a+1]*n:t.length,n));var u=0;for(a=0;a<r.length;a+=3){var l=r[a]*n,c=r[a+1]*n,d=r[a+2]*n;u+=Math.abs((t[l]-t[d])*(t[c+1]-t[l+1])-(t[l]-t[c])*(t[d+1]-t[l+1]))}return 0===o&&0===u?0:Math.abs((u-o)/o)},Aa.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&n.holes.push(r+=t[i-1].length)}return n},Sa.default=Ea;var us=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ri,this.indexArray=new Ji,this.indexArray2=new $i,this.programConfigurations=new Bo(Ta,t.layers,t.zoom),this.segments=new po,this.segments2=new po,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};us.prototype.populate=function(t,e,n){this.hasPattern=as("fill",this.layers,e);for(var r=this.layers[0].layout.get("fill-sort-key"),i=[],o=0,a=t;o<a.length;o+=1){var s=a[o],u=s.feature,l=s.id,c=s.index,d=s.sourceLayerIndex,h=this.layers[0]._featureFilter.needGeometry,f={type:u.type,id:l,properties:u.properties,geometry:h?Wo(u):[]};if(this.layers[0]._featureFilter.filter(new pi(this.zoom),f,n)){h||(f.geometry=Wo(u));var p=r?r.evaluate(f,{},n,e.availableImages):void 0;i.push({id:l,properties:u.properties,type:u.type,sourceLayerIndex:d,index:c,geometry:f.geometry,patterns:{},sortKey:p})}}r&&i.sort((function(t,e){return t.sortKey-e.sortKey}));for(var m=0,_=i;m<_.length;m+=1){var y=_[m],v=y.geometry,g=y.index,x=y.sourceLayerIndex;if(this.hasPattern){var b=ss("fill",this.layers,y,this.zoom,e);this.patternFeatures.push(b)}else this.addFeature(y,v,g,n,{});e.featureIndex.insert(t[g].feature,v,g,x,this.index)}},us.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},us.prototype.addFeatures=function(t,e,n){for(var r=0,i=this.patternFeatures;r<i.length;r+=1){var o=i[r];this.addFeature(o,o.geometry,o.index,e,n)}},us.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},us.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},us.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Ta),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0},us.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},us.prototype.addFeature=function(t,e,n,r,i){for(var o=0,a=is(e,500);o<a.length;o+=1){for(var s=a[o],u=0,l=0,c=s;l<c.length;l+=1)u+=c[l].length;for(var d=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray),h=d.vertexLength,f=[],p=[],m=0,_=s;m<_.length;m+=1){var y=_[m];if(0!==y.length){y!==s[0]&&p.push(f.length/2);var v=this.segments2.prepareSegment(y.length,this.layoutVertexArray,this.indexArray2),g=v.vertexLength;this.layoutVertexArray.emplaceBack(y[0].x,y[0].y),this.indexArray2.emplaceBack(g+y.length-1,g),f.push(y[0].x),f.push(y[0].y);for(var x=1;x<y.length;x++)this.layoutVertexArray.emplaceBack(y[x].x,y[x].y),this.indexArray2.emplaceBack(g+x-1,g+x),f.push(y[x].x),f.push(y[x].y);v.vertexLength+=y.length,v.primitiveLength+=y.length}}for(var b=Sa(f,p),w=0;w<b.length;w+=3)this.indexArray.emplaceBack(h+b[w],h+b[w+1],h+b[w+2]);d.vertexLength+=u,d.primitiveLength+=b.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,r)},Wr("FillBucket",us,{omit:["layers","patternFeatures"]});var ls=new Ei({"fill-sort-key":new Li(St.layout_fill["fill-sort-key"])}),cs={paint:new Ei({"fill-antialias":new Mi(St.paint_fill["fill-antialias"]),"fill-opacity":new Li(St.paint_fill["fill-opacity"]),"fill-color":new Li(St.paint_fill["fill-color"]),"fill-outline-color":new Li(St.paint_fill["fill-outline-color"]),"fill-translate":new Mi(St.paint_fill["fill-translate"]),"fill-translate-anchor":new Mi(St.paint_fill["fill-translate-anchor"]),"fill-pattern":new ki(St.paint_fill["fill-pattern"])}),layout:ls},ds=function(t){function e(e){t.call(this,e,cs)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e,n){t.prototype.recalculate.call(this,e,n);var r=this.paint._values["fill-outline-color"];"constant"===r.value.kind&&void 0===r.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},e.prototype.createBucket=function(t){return new us(t)},e.prototype.queryRadius=function(){return aa(this.paint.get("fill-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,i,o,a){return Ko(sa(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,a),r)},e.prototype.isTileClipped=function(){return!0},e}(Ai),hs=Ii([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,fs=ps;function ps(t,e,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=i,t.readFields(ms,this,e)}function ms(t,e,n){1==t?e.id=n.readVarint():2==t?function(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function _s(t){for(var e,n,r=0,i=0,o=t.length,a=o-1;i<o;a=i++)r+=((n=t[a]).x-(e=t[i]).x)*(e.y+n.y);return r}ps.types=["Unknown","Point","LineString","Polygon"],ps.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,r=1,o=0,a=0,s=0,u=[];t.pos<n;){if(o<=0){var l=t.readVarint();r=7&l,o=l>>3}if(o--,1===r||2===r)a+=t.readSVarint(),s+=t.readSVarint(),1===r&&(e&&u.push(e),e=[]),e.push(new i(a,s));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&u.push(e),u},ps.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,u=1/0,l=-1/0;t.pos<e;){if(r<=0){var c=t.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)(i+=t.readSVarint())<a&&(a=i),i>s&&(s=i),(o+=t.readSVarint())<u&&(u=o),o>l&&(l=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,u,s,l]},ps.prototype.toGeoJSON=function(t,e,n){var r,i,o=this.extent*Math.pow(2,n),a=this.extent*t,s=this.extent*e,u=this.loadGeometry(),l=ps.types[this.type];function c(t){for(var e=0;e<t.length;e++){var n=t[e];t[e]=[360*(n.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var d=[];for(r=0;r<u.length;r++)d[r]=u[r][0];c(u=d);break;case 2:for(r=0;r<u.length;r++)c(u[r]);break;case 3:for(u=function(t){var e=t.length;if(e<=1)return[t];for(var n,r,i=[],o=0;o<e;o++){var a=_s(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[t[o]]):n.push(t[o]))}return n&&i.push(n),i}(u),r=0;r<u.length;r++)for(i=0;i<u[r].length;i++)c(u[r][i])}1===u.length?u=u[0]:l="Multi"+l;var h={type:"Feature",geometry:{type:l,coordinates:u},properties:this.properties};return"id"in this&&(h.id=this.id),h};var ys=vs;function vs(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(gs,this,e),this.length=this._features.length}function gs(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(function(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}(n))}function xs(t,e,n){if(3===t){var r=new ys(n,n.readVarint()+n.pos);r.length&&(e[r.name]=r)}}vs.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new fs(this._pbf,e,this.extent,this._keys,this._values)};var bs={VectorTile:function(t,e){this.layers=t.readFields(xs,{},e)},VectorTileFeature:fs,VectorTileLayer:ys},ws=bs.VectorTileFeature.types,Ms=Math.pow(2,13);function Ls(t,e,n,r,i,o,a,s){t.emplaceBack(e,n,2*Math.floor(r*Ms)+a,i*Ms*2,o*Ms*2,Math.round(s))}var ks=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Fi,this.indexArray=new Ji,this.programConfigurations=new Bo(hs,t.layers,t.zoom),this.segments=new po,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};function Ts(t,e){return t.x===e.x&&(t.x<0||t.x>Te)||t.y===e.y&&(t.y<0||t.y>Te)}ks.prototype.populate=function(t,e,n){this.features=[],this.hasPattern=as("fill-extrusion",this.layers,e);for(var r=0,i=t;r<i.length;r+=1){var o=i[r],a=o.feature,s=o.id,u=o.index,l=o.sourceLayerIndex,c=this.layers[0]._featureFilter.needGeometry,d={type:a.type,id:s,properties:a.properties,geometry:c?Wo(a):[]};if(this.layers[0]._featureFilter.filter(new pi(this.zoom),d,n)){var h={id:s,sourceLayerIndex:l,index:u,geometry:c?d.geometry:Wo(a),properties:a.properties,type:a.type,patterns:{}};void 0!==a.id&&(h.id=a.id),this.hasPattern?this.features.push(ss("fill-extrusion",this.layers,h,this.zoom,e)):this.addFeature(h,h.geometry,u,n,{}),e.featureIndex.insert(a,h.geometry,u,l,this.index,!0)}}},ks.prototype.addFeatures=function(t,e,n){for(var r=0,i=this.features;r<i.length;r+=1){var o=i[r];this.addFeature(o,o.geometry,o.index,e,n)}},ks.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},ks.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},ks.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ks.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,hs),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},ks.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ks.prototype.addFeature=function(t,e,n,r,i){for(var o=0,a=is(e,500);o<a.length;o+=1){for(var s=a[o],u=0,l=0,c=s;l<c.length;l+=1)u+=c[l].length;for(var d=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),h=0,f=s;h<f.length;h+=1){var p=f[h];if(0!==p.length&&!((P=p).every((function(t){return t.x<0}))||P.every((function(t){return t.x>Te}))||P.every((function(t){return t.y<0}))||P.every((function(t){return t.y>Te}))))for(var m=0,_=0;_<p.length;_++){var y=p[_];if(_>=1){var v=p[_-1];if(!Ts(y,v)){d.vertexLength+4>po.MAX_VERTEX_ARRAY_LENGTH&&(d=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var g=y.sub(v)._perp()._unit(),x=v.dist(y);m+x>32768&&(m=0),Ls(this.layoutVertexArray,y.x,y.y,g.x,g.y,0,0,m),Ls(this.layoutVertexArray,y.x,y.y,g.x,g.y,0,1,m),Ls(this.layoutVertexArray,v.x,v.y,g.x,g.y,0,0,m+=x),Ls(this.layoutVertexArray,v.x,v.y,g.x,g.y,0,1,m);var b=d.vertexLength;this.indexArray.emplaceBack(b,b+2,b+1),this.indexArray.emplaceBack(b+1,b+2,b+3),d.vertexLength+=4,d.primitiveLength+=2}}}}if(d.vertexLength+u>po.MAX_VERTEX_ARRAY_LENGTH&&(d=this.segments.prepareSegment(u,this.layoutVertexArray,this.indexArray)),"Polygon"===ws[t.type]){for(var w=[],M=[],L=d.vertexLength,k=0,T=s;k<T.length;k+=1){var S=T[k];if(0!==S.length){S!==s[0]&&M.push(w.length/2);for(var E=0;E<S.length;E++){var A=S[E];Ls(this.layoutVertexArray,A.x,A.y,0,0,1,1,0),w.push(A.x),w.push(A.y)}}}for(var D=Sa(w,M),C=0;C<D.length;C+=3)this.indexArray.emplaceBack(L+D[C],L+D[C+2],L+D[C+1]);d.primitiveLength+=D.length/3,d.vertexLength+=u}}var P;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,n,i,r)},Wr("FillExtrusionBucket",ks,{omit:["layers","features"]});var Ss={paint:new Ei({"fill-extrusion-opacity":new Mi(St["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Li(St["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Mi(St["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Mi(St["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ki(St["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Li(St["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Li(St["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Mi(St["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Es=function(t){function e(e){t.call(this,e,Ss)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createBucket=function(t){return new ks(t)},e.prototype.queryRadius=function(){return aa(this.paint.get("fill-extrusion-translate"))},e.prototype.is3D=function(){return!0},e.prototype.queryIntersectsFeature=function(t,e,n,r,o,a,s,u){var l=sa(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,s),c=this.paint.get("fill-extrusion-height").evaluate(e,n),d=this.paint.get("fill-extrusion-base").evaluate(e,n),h=function(t,e,n,r){for(var o=[],a=0,s=t;a<s.length;a+=1){var u=s[a],l=[u.x,u.y,0,1];ha(l,l,e),o.push(new i(l[0]/l[3],l[1]/l[3]))}return o}(l,u),f=function(t,e,n,r){for(var o=[],a=[],s=r[8]*e,u=r[9]*e,l=r[10]*e,c=r[11]*e,d=r[8]*n,h=r[9]*n,f=r[10]*n,p=r[11]*n,m=0,_=t;m<_.length;m+=1){for(var y=[],v=[],g=0,x=_[m];g<x.length;g+=1){var b=x[g],w=b.x,M=b.y,L=r[0]*w+r[4]*M+r[12],k=r[1]*w+r[5]*M+r[13],T=r[2]*w+r[6]*M+r[14],S=r[3]*w+r[7]*M+r[15],E=T+l,A=S+c,D=L+d,C=k+h,P=T+f,I=S+p,O=new i((L+s)/A,(k+u)/A);O.z=E/A,y.push(O);var R=new i(D/I,C/I);R.z=P/I,v.push(R)}o.push(y),a.push(v)}return[o,a]}(r,d,c,u);return function(t,e,n){var r=1/0;Ko(n,e)&&(r=Ds(n,e[0]));for(var i=0;i<e.length;i++)for(var o=e[i],a=t[i],s=0;s<o.length-1;s++){var u=o[s],l=[u,o[s+1],a[s+1],a[s],u];Xo(n,l)&&(r=Math.min(r,Ds(n,l)))}return r!==1/0&&r}(f[0],f[1],h)},e}(Ai);function As(t,e){return t.x*e.x+t.y*e.y}function Ds(t,e){if(1===t.length){for(var n,r,i=0,o=e[i++];!n||o.equals(n);)if(!(n=e[i++]))return 1/0;for(;!r||o.equals(r)||n.equals(r);)if(!(r=e[i++]))return 1/0;var a=t[0],s=n.sub(o),u=r.sub(o),l=a.sub(o),c=As(s,s),d=As(s,u),h=As(u,u),f=As(l,s),p=As(l,u),m=c*h-d*d,_=(h*f-d*p)/m,y=(c*p-d*f)/m;return o.z*(1-_-y)+n.z*_+r.z*y}for(var v=1/0,g=0,x=e;g<x.length;g+=1)v=Math.min(v,x[g].z);return v}var Cs=Ii([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Ps=bs.VectorTileFeature.types,Is=Math.cos(Math.PI/180*37.5),Os=Math.pow(2,14)/.5,Rs=function(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ji,this.indexArray=new Ji,this.programConfigurations=new Bo(Cs,t.layers,t.zoom),this.segments=new po,this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id}))};Rs.prototype.populate=function(t,e,n){this.hasPattern=as("line",this.layers,e);for(var r=this.layers[0].layout.get("line-sort-key"),i=[],o=0,a=t;o<a.length;o+=1){var s=a[o],u=s.feature,l=s.id,c=s.index,d=s.sourceLayerIndex,h=this.layers[0]._featureFilter.needGeometry,f={type:u.type,id:l,properties:u.properties,geometry:h?Wo(u):[]};if(this.layers[0]._featureFilter.filter(new pi(this.zoom),f,n)){h||(f.geometry=Wo(u));var p=r?r.evaluate(f,{},n):void 0;i.push({id:l,properties:u.properties,type:u.type,sourceLayerIndex:d,index:c,geometry:f.geometry,patterns:{},sortKey:p})}}r&&i.sort((function(t,e){return t.sortKey-e.sortKey}));for(var m=0,_=i;m<_.length;m+=1){var y=_[m],v=y.geometry,g=y.index,x=y.sourceLayerIndex;if(this.hasPattern){var b=ss("line",this.layers,y,this.zoom,e);this.patternFeatures.push(b)}else this.addFeature(y,v,g,n,{});e.featureIndex.insert(t[g].feature,v,g,x,this.index)}},Rs.prototype.update=function(t,e,n){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,e,this.stateDependentLayers,n)},Rs.prototype.addFeatures=function(t,e,n){for(var r=0,i=this.patternFeatures;r<i.length;r+=1){var o=i[r];this.addFeature(o,o.geometry,o.index,e,n)}},Rs.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Rs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Rs.prototype.upload=function(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Cs),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0},Rs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Rs.prototype.addFeature=function(t,e,n,r,i){for(var o=this.layers[0].layout,a=o.get("line-join").evaluate(t,{}),s=o.get("line-cap"),u=o.get("line-miter-limit"),l=o.get("line-round-limit"),c=0,d=e;c<d.length;c+=1)this.addLine(d[c],t,a,s,u,l,n,r,i)},Rs.prototype.addLine=function(t,e,n,r,i,o,a,s,u){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+e.properties.mapbox_clip_start,this.clipEnd=+e.properties.mapbox_clip_end;for(var l=0;l<t.length-1;l++)this.totalDistance+=t[l].dist(t[l+1]);this.updateScaledDistance()}for(var c="Polygon"===Ps[e.type],d=t.length;d>=2&&t[d-1].equals(t[d-2]);)d--;for(var h=0;h<d-1&&t[h].equals(t[h+1]);)h++;if(!(d<(c?3:2))){"bevel"===n&&(i=1.05);var f,p=this.overscaling<=16?15*Te/(512*this.overscaling):0,m=this.segments.prepareSegment(10*d,this.layoutVertexArray,this.indexArray),_=void 0,y=void 0,v=void 0,g=void 0;this.e1=this.e2=-1,c&&(g=t[h].sub(f=t[d-2])._unit()._perp());for(var x=h;x<d;x++)if(!(y=x===d-1?c?t[h+1]:void 0:t[x+1])||!t[x].equals(y)){g&&(v=g),f&&(_=f),f=t[x],g=y?y.sub(f)._unit()._perp():v;var b=(v=v||g).add(g);0===b.x&&0===b.y||b._unit();var w=v.x*g.x+v.y*g.y,M=b.x*g.x+b.y*g.y,L=0!==M?1/M:1/0,k=2*Math.sqrt(2-2*M),T=M<Is&&_&&y,S=v.x*g.y-v.y*g.x>0;if(T&&x>h){var E=f.dist(_);if(E>2*p){var A=f.sub(f.sub(_)._mult(p/E)._round());this.updateDistance(_,A),this.addCurrentVertex(A,v,0,0,m),_=A}}var D=_&&y,C=D?n:c?"butt":r;if(D&&"round"===C&&(L<o?C="miter":L<=2&&(C="fakeround")),"miter"===C&&L>i&&(C="bevel"),"bevel"===C&&(L>2&&(C="flipbevel"),L<i&&(C="miter")),_&&this.updateDistance(_,f),"miter"===C)b._mult(L),this.addCurrentVertex(f,b,0,0,m);else if("flipbevel"===C){if(L>100)b=g.mult(-1);else{var P=L*v.add(g).mag()/v.sub(g).mag();b._perp()._mult(P*(S?-1:1))}this.addCurrentVertex(f,b,0,0,m),this.addCurrentVertex(f,b.mult(-1),0,0,m)}else if("bevel"===C||"fakeround"===C){var I=-Math.sqrt(L*L-1),O=S?I:0,R=S?0:I;if(_&&this.addCurrentVertex(f,v,O,R,m),"fakeround"===C)for(var Y=Math.round(180*k/Math.PI/20),F=1;F<Y;F++){var j=F/Y;if(.5!==j){var z=j-.5;j+=j*z*(j-1)*((1.0904+w*(w*(3.55645-1.43519*w)-3.2452))*z*z+(.848013+w*(.215638*w-1.06021)))}var N=g.sub(v)._mult(j)._add(v)._unit()._mult(S?-1:1);this.addHalfVertex(f,N.x,N.y,!1,S,0,m)}y&&this.addCurrentVertex(f,g,-O,-R,m)}else if("butt"===C)this.addCurrentVertex(f,b,0,0,m);else if("square"===C){var B=_?1:-1;this.addCurrentVertex(f,b,B,B,m)}else"round"===C&&(_&&(this.addCurrentVertex(f,v,0,0,m),this.addCurrentVertex(f,v,1,1,m,!0)),y&&(this.addCurrentVertex(f,g,-1,-1,m,!0),this.addCurrentVertex(f,g,0,0,m)));if(T&&x<d-1){var U=f.dist(y);if(U>2*p){var H=f.add(y.sub(f)._mult(p/U)._round());this.updateDistance(f,H),this.addCurrentVertex(H,g,0,0,m),f=H}}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,a,u,s)}},Rs.prototype.addCurrentVertex=function(t,e,n,r,i,o){void 0===o&&(o=!1);var a=e.y*r-e.x,s=-e.y-e.x*r;this.addHalfVertex(t,e.x+e.y*n,e.y-e.x*n,o,!1,n,i),this.addHalfVertex(t,a,s,o,!0,-r,i),this.distance>Os/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(t,e,n,r,i,o))},Rs.prototype.addHalfVertex=function(t,e,n,r,i,o,a){var s=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((t.x<<1)+(r?1:0),(t.y<<1)+(i?1:0),Math.round(63*e)+128,Math.round(63*n)+128,1+(0===o?0:o<0?-1:1)|(63&s)<<2,s>>6);var u=a.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,u),a.primitiveLength++),i?this.e2=u:this.e1=u},Rs.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(Os-1):this.distance},Rs.prototype.updateDistance=function(t,e){this.distance+=t.dist(e),this.updateScaledDistance()},Wr("LineBucket",Rs,{omit:["layers","patternFeatures"]});var Ys=new Ei({"line-cap":new Mi(St.layout_line["line-cap"]),"line-join":new Li(St.layout_line["line-join"]),"line-miter-limit":new Mi(St.layout_line["line-miter-limit"]),"line-round-limit":new Mi(St.layout_line["line-round-limit"]),"line-sort-key":new Li(St.layout_line["line-sort-key"])}),Fs={paint:new Ei({"line-opacity":new Li(St.paint_line["line-opacity"]),"line-color":new Li(St.paint_line["line-color"]),"line-translate":new Mi(St.paint_line["line-translate"]),"line-translate-anchor":new Mi(St.paint_line["line-translate-anchor"]),"line-width":new Li(St.paint_line["line-width"]),"line-gap-width":new Li(St.paint_line["line-gap-width"]),"line-offset":new Li(St.paint_line["line-offset"]),"line-blur":new Li(St.paint_line["line-blur"]),"line-dasharray":new Ti(St.paint_line["line-dasharray"]),"line-pattern":new ki(St.paint_line["line-pattern"]),"line-gradient":new Si(St.paint_line["line-gradient"])}),layout:Ys},js=new(function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.possiblyEvaluate=function(e,n){return n=new pi(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),t.prototype.possiblyEvaluate.call(this,e,n)},e.prototype.evaluate=function(e,n,r,i){return n=c({},n,{zoom:Math.floor(n.zoom)}),t.prototype.evaluate.call(this,e,n,r,i)},e}(Li))(Fs.paint.properties["line-width"].specification);js.useIntegerZoom=!0;var zs=function(t){function e(e){t.call(this,e,Fs)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype._handleSpecialPaintPropertyUpdate=function(t){"line-gradient"===t&&this._updateGradient()},e.prototype._updateGradient=function(){this.gradient=wa(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress"),this.gradientTexture=null},e.prototype.recalculate=function(e,n){t.prototype.recalculate.call(this,e,n),this.paint._values["line-floorwidth"]=js.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)},e.prototype.createBucket=function(t){return new Rs(t)},e.prototype.queryRadius=function(t){var e=t,n=Ns(oa("line-width",this,e),oa("line-gap-width",this,e)),r=oa("line-offset",this,e);return n/2+Math.abs(r)+aa(this.paint.get("line-translate"))},e.prototype.queryIntersectsFeature=function(t,e,n,r,o,a,s){var u=sa(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,s),l=s/2*Ns(this.paint.get("line-width").evaluate(e,n),this.paint.get("line-gap-width").evaluate(e,n)),c=this.paint.get("line-offset").evaluate(e,n);return c&&(r=function(t,e){for(var n=[],r=new i(0,0),o=0;o<t.length;o++){for(var a=t[o],s=[],u=0;u<a.length;u++){var l=a[u],c=a[u+1],d=0===u?r:l.sub(a[u-1])._unit()._perp(),h=u===a.length-1?r:c.sub(l)._unit()._perp(),f=d._add(h)._unit();f._mult(1/(f.x*h.x+f.y*h.y)),s.push(f._mult(e)._add(l))}n.push(s)}return n}(r,c*s)),function(t,e,n){for(var r=0;r<e.length;r++){var i=e[r];if(t.length>=3)for(var o=0;o<i.length;o++)if(ra(t,i[o]))return!0;if(Jo(t,i,n))return!0}return!1}(u,r,l)},e.prototype.isTileClipped=function(){return!0},e}(Ai);function Ns(t,e){return e>0?e+2*t:t}var Bs=Ii([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Us=Ii([{name:"a_projected_pos",components:3,type:"Float32"}],4),Hs=(Ii([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Ii([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Vs=(Ii([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),Ii([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Ws=Ii([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4);function Gs(t,e,n){return t.sections.forEach((function(t){t.text=function(t,e,n){var r=e.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?t=t.toLocaleUpperCase():"lowercase"===r&&(t=t.toLocaleLowerCase()),fi.applyArabicShaping&&(t=fi.applyArabicShaping(t)),t}(t.text,e,n)})),t}Ii([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ii([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"}]),Ii([{type:"Float32",name:"offsetX"}]),Ii([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var qs={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},Xs=24,Zs=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,d=n?i-1:0,h=n?-1:1,f=t[e+d];for(d+=h,o=f&(1<<-c)-1,f>>=-c,c+=s;c>0;o=256*o+t[e+d],d+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+t[e+d],d+=h,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=l}return(f?-1:1)*a*Math.pow(2,o-r)},Ks=function(t,e,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,d=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+d>=1?h/u:h*Math.pow(2,1-d))*u>=2&&(a++,u/=2),a+d>=c?(s=0,a=c):a+d>=1?(s=(e*u-1)*Math.pow(2,i),a+=d):(s=e*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;t[n+f]=255&s,f+=p,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;t[n+f]=255&a,f+=p,a/=256,l-=8);t[n+f-p]|=128*m},Js=$s;function $s(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}$s.Varint=0,$s.Fixed64=1,$s.Bytes=2,$s.Fixed32=5;var Qs="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function tu(t){return t.type===$s.Bytes?t.readVarint()+t.pos:t.pos+1}function eu(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function nu(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function ru(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function iu(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function ou(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function au(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function su(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function uu(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function lu(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function cu(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function du(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function hu(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function fu(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function pu(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}$s.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,t(i,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=hu(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=pu(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=hu(this.buf,this.pos)+4294967296*hu(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=hu(this.buf,this.pos)+4294967296*pu(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=Zs(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=Zs(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,r=this.buf;return e=127&(n=r[this.pos++]),n<128?e:(e|=(127&(n=r[this.pos++]))<<7,n<128?e:(e|=(127&(n=r[this.pos++]))<<14,n<128?e:(e|=(127&(n=r[this.pos++]))<<21,n<128?e:function(t,e,n){var r,i,o=n.buf;if(r=(112&(i=o[n.pos++]))>>4,i<128)return eu(t,r,e);if(r|=(127&(i=o[n.pos++]))<<3,i<128)return eu(t,r,e);if(r|=(127&(i=o[n.pos++]))<<10,i<128)return eu(t,r,e);if(r|=(127&(i=o[n.pos++]))<<17,i<128)return eu(t,r,e);if(r|=(127&(i=o[n.pos++]))<<24,i<128)return eu(t,r,e);if(r|=(1&(i=o[n.pos++]))<<31,i<128)return eu(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(n=r[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&Qs?function(t,e,n){return Qs.decode(t.subarray(e,n))}(this.buf,e,t):function(t,e,n){for(var r="",i=e;i<n;){var o,a,s,u=t[i],l=null,c=u>239?4:u>223?3:u>191?2:1;if(i+c>n)break;1===c?u<128&&(l=u):2===c?128==(192&(o=t[i+1]))&&(l=(31&u)<<6|63&o)<=127&&(l=null):3===c?(a=t[i+2],128==(192&(o=t[i+1]))&&128==(192&a)&&((l=(15&u)<<12|(63&o)<<6|63&a)<=2047||l>=55296&&l<=57343)&&(l=null)):4===c&&(a=t[i+2],s=t[i+3],128==(192&(o=t[i+1]))&&128==(192&a)&&128==(192&s)&&((l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||l>=1114112)&&(l=null)),null===l?(l=65533,c=1):l>65535&&(l-=65536,r+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),r+=String.fromCharCode(l),i+=c}return r}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==$s.Bytes)return t.push(this.readVarint(e));var n=tu(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==$s.Bytes)return t.push(this.readSVarint());var e=tu(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==$s.Bytes)return t.push(this.readBoolean());var e=tu(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==$s.Bytes)return t.push(this.readFloat());var e=tu(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==$s.Bytes)return t.push(this.readDouble());var e=tu(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==$s.Bytes)return t.push(this.readFixed32());var e=tu(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==$s.Bytes)return t.push(this.readSFixed32());var e=tu(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==$s.Bytes)return t.push(this.readFixed64());var e=tu(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==$s.Bytes)return t.push(this.readSFixed64());var e=tu(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===$s.Varint)for(;this.buf[this.pos++]>127;);else if(e===$s.Bytes)this.pos=this.readVarint()+this.pos;else if(e===$s.Fixed32)this.pos+=4;else{if(e!==$s.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),fu(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),fu(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),fu(this.buf,-1&t,this.pos),fu(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),fu(this.buf,-1&t,this.pos),fu(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var n,r;if(t>=0?(n=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:(n=0,r=r+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,n.buf[n.pos]=127&(t>>>=7)}(n,0,e),function(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var r,i,o=0;o<e.length;o++){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):i=r;continue}if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(t[n++]=239,t[n++]=191,t[n++]=189,i=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;n>=128&&nu(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),Ks(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),Ks(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;r>=128&&nu(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,$s.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,ru,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,iu,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,su,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,ou,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,au,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,uu,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,lu,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,cu,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,du,e)},writeBytesField:function(t,e){this.writeTag(t,$s.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,$s.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,$s.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,$s.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,$s.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,$s.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,$s.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,$s.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,$s.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,$s.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}};function mu(t,e,n){1===t&&n.readMessage(_u,e)}function _u(t,e,n){if(3===t){var r=n.readMessage(yu,{}),i=r.width,o=r.height,a=r.left,s=r.top,u=r.advance;e.push({id:r.id,bitmap:new ga({width:i+6,height:o+6},r.bitmap),metrics:{width:i,height:o,left:a,top:s,advance:u}})}}function yu(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}function vu(t){for(var e=0,n=0,r=0,i=t;r<i.length;r+=1){var o=i[r];e+=o.w*o.h,n=Math.max(n,o.w)}t.sort((function(t,e){return e.h-t.h}));for(var a=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),n),h:1/0}],s=0,u=0,l=0,c=t;l<c.length;l+=1)for(var d=c[l],h=a.length-1;h>=0;h--){var f=a[h];if(!(d.w>f.w||d.h>f.h)){if(d.x=f.x,d.y=f.y,u=Math.max(u,d.y+d.h),s=Math.max(s,d.x+d.w),d.w===f.w&&d.h===f.h){var p=a.pop();h<a.length&&(a[h]=p)}else d.h===f.h?(f.x+=d.w,f.w-=d.w):d.w===f.w?(f.y+=d.h,f.h-=d.h):(a.push({x:f.x+d.w,y:f.y,w:f.w-d.w,h:d.h}),f.y+=d.h,f.h-=d.h);break}}return{w:s,h:u,fill:e/(s*u)||0}}var gu=function(t,e){var n=e.pixelRatio,r=e.version,i=e.stretchX,o=e.stretchY,a=e.content;this.paddedRect=t,this.pixelRatio=n,this.stretchX=i,this.stretchY=o,this.content=a,this.version=r},xu={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};xu.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},xu.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},xu.tlbr.get=function(){return this.tl.concat(this.br)},xu.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(gu.prototype,xu);var bu=function(t,e){var n={},r={};this.haveRenderCallbacks=[];var i=[];this.addImages(t,n,i),this.addImages(e,r,i);var o=vu(i),a=new xa({width:o.w||1,height:o.h||1});for(var s in t){var u=t[s],l=n[s].paddedRect;xa.copy(u.data,a,{x:0,y:0},{x:l.x+1,y:l.y+1},u.data)}for(var c in e){var d=e[c],h=r[c].paddedRect,f=h.x+1,p=h.y+1,m=d.data.width,_=d.data.height;xa.copy(d.data,a,{x:0,y:0},{x:f,y:p},d.data),xa.copy(d.data,a,{x:0,y:_-1},{x:f,y:p-1},{width:m,height:1}),xa.copy(d.data,a,{x:0,y:0},{x:f,y:p+_},{width:m,height:1}),xa.copy(d.data,a,{x:m-1,y:0},{x:f-1,y:p},{width:1,height:_}),xa.copy(d.data,a,{x:0,y:0},{x:f+m,y:p},{width:1,height:_})}this.image=a,this.iconPositions=n,this.patternPositions=r};bu.prototype.addImages=function(t,e,n){for(var r in t){var i=t[r],o={x:0,y:0,w:i.data.width+2,h:i.data.height+2};n.push(o),e[r]=new gu(o,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(r)}},bu.prototype.patchUpdatedImages=function(t,e){for(var n in t.dispatchRenderCallbacks(this.haveRenderCallbacks),t.updatedImages)this.patchUpdatedImage(this.iconPositions[n],t.getImage(n),e),this.patchUpdatedImage(this.patternPositions[n],t.getImage(n),e)},bu.prototype.patchUpdatedImage=function(t,e,n){if(t&&e&&t.version!==e.version){t.version=e.version;var r=t.tl;n.update(e.data,void 0,{x:r[0],y:r[1]})}},Wr("ImagePosition",gu),Wr("ImageAtlas",bu);var wu={horizontal:1,vertical:2,horizontalOnly:3},Mu=-17,Lu=function(){this.scale=1,this.fontStack="",this.imageName=null};Lu.forText=function(t,e){var n=new Lu;return n.scale=t||1,n.fontStack=e,n},Lu.forImage=function(t){var e=new Lu;return e.imageName=t,e};var ku=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Tu(t,e,n,r,i,o,a,s,u,l,c,d,h,f,p,m){var _,y=ku.fromFeature(t,i);d===wu.vertical&&y.verticalizePunctuation();var v=fi.processBidirectionalText,g=fi.processStyledBidirectionalText;if(v&&1===y.sections.length){_=[];for(var x=0,b=v(y.toString(),Iu(y,l,o,e,r,f,p));x<b.length;x+=1){var w=b[x],M=new ku;M.text=w,M.sections=y.sections;for(var L=0;L<w.length;L++)M.sectionIndex.push(0);_.push(M)}}else if(g){_=[];for(var k=0,T=g(y.text,y.sectionIndex,Iu(y,l,o,e,r,f,p));k<T.length;k+=1){var S=T[k],E=new ku;E.text=S[0],E.sectionIndex=S[1],E.sections=y.sections,_.push(E)}}else _=function(t,e){for(var n=[],r=t.text,i=0,o=0,a=e;o<a.length;o+=1){var s=a[o];n.push(t.substring(i,s)),i=s}return i<r.length&&n.push(t.substring(i,r.length)),n}(y,Iu(y,l,o,e,r,f,p));var A=[],D={positionedLines:A,text:y.toString(),top:c[1],bottom:c[1],left:c[0],right:c[0],writingMode:d,iconsInText:!1,verticalizable:!1};return function(t,e,n,r,i,o,a,s,u,l,c,d){for(var h=0,f=Mu,p=0,m=0,_="right"===s?1:"left"===s?0:.5,y=0,v=0,g=i;v<g.length;v+=1){var x=g[v];x.trim();var b=x.getMaxScale(),w=(b-1)*Xs,M={positionedGlyphs:[],lineOffset:0};t.positionedLines[y]=M;var L=M.positionedGlyphs,k=0;if(x.length()){for(var T=0;T<x.length();T++){var S=x.getSection(T),E=x.getSectionIndex(T),A=x.getCharCode(T),D=0,C=null,P=null,I=null,O=Xs,R=!(u===wu.horizontal||!c&&!ti(A)||c&&(Su[A]||(V=A,$r.Arabic(V)||$r["Arabic Supplement"](V)||$r["Arabic Extended-A"](V)||$r["Arabic Presentation Forms-A"](V)||$r["Arabic Presentation Forms-B"](V))));if(S.imageName){var Y=r[S.imageName];if(!Y)continue;I=S.imageName,t.iconsInText=t.iconsInText||!0,P=Y.paddedRect;var F=Y.displaySize;S.scale=S.scale*Xs/d,D=w+(Xs-F[1]*S.scale),O=(C={width:F[0],height:F[1],left:1,top:-3,advance:R?F[1]:F[0]}).advance;var j=R?F[0]*S.scale-Xs*b:F[1]*S.scale-Xs*b;j>0&&j>k&&(k=j)}else{var z=n[S.fontStack],N=z&&z[A];if(N&&N.rect)P=N.rect,C=N.metrics;else{var B=e[S.fontStack],U=B&&B[A];if(!U)continue;C=U.metrics}D=(b-S.scale)*Xs}R?(t.verticalizable=!0,L.push({glyph:A,imageName:I,x:h,y:f+D,vertical:R,scale:S.scale,fontStack:S.fontStack,sectionIndex:E,metrics:C,rect:P}),h+=O*S.scale+l):(L.push({glyph:A,imageName:I,x:h,y:f+D,vertical:R,scale:S.scale,fontStack:S.fontStack,sectionIndex:E,metrics:C,rect:P}),h+=C.advance*S.scale+l)}0!==L.length&&(p=Math.max(h-l,p),Ru(L,0,L.length-1,_,k)),h=0;var H=o*b+k;M.lineOffset=Math.max(k,w),f+=H,m=Math.max(H,m),++y}else f+=o,++y}var V,W=f-Mu,G=Ou(a),q=G.horizontalAlign,X=G.verticalAlign;(function(t,e,n,r,i,o,a,s,u){var l,c=(e-n)*i;l=o!==a?-s*r-Mu:(-r*u+.5)*a;for(var d=0,h=t;d<h.length;d+=1)for(var f=0,p=h[d].positionedGlyphs;f<p.length;f+=1){var m=p[f];m.x+=c,m.y+=l}})(t.positionedLines,_,q,X,p,m,o,W,i.length),t.top+=-X*W,t.bottom=t.top+W,t.left+=-q*p,t.right=t.left+p}(D,e,n,r,_,a,s,u,d,l,h,m),!function(t){for(var e=0,n=t;e<n.length;e+=1)if(0!==n[e].positionedGlyphs.length)return!1;return!0}(A)&&D}ku.fromFeature=function(t,e){for(var n=new ku,r=0;r<t.sections.length;r++){var i=t.sections[r];i.image?n.addImageSection(i):n.addTextSection(i,e)}return n},ku.prototype.length=function(){return this.text.length},ku.prototype.getSection=function(t){return this.sections[this.sectionIndex[t]]},ku.prototype.getSectionIndex=function(t){return this.sectionIndex[t]},ku.prototype.getCharCode=function(t){return this.text.charCodeAt(t)},ku.prototype.verticalizePunctuation=function(){this.text=function(t){for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n+1)||null,i=t.charCodeAt(n-1)||null;e+=r&&ei(r)&&!qs[t[n+1]]||i&&ei(i)&&!qs[t[n-1]]||!qs[t[n]]?t[n]:qs[t[n]]}return e}(this.text)},ku.prototype.trim=function(){for(var t=0,e=0;e<this.text.length&&Su[this.text.charCodeAt(e)];e++)t++;for(var n=this.text.length,r=this.text.length-1;r>=0&&r>=t&&Su[this.text.charCodeAt(r)];r--)n--;this.text=this.text.substring(t,n),this.sectionIndex=this.sectionIndex.slice(t,n)},ku.prototype.substring=function(t,e){var n=new ku;return n.text=this.text.substring(t,e),n.sectionIndex=this.sectionIndex.slice(t,e),n.sections=this.sections,n},ku.prototype.toString=function(){return this.text},ku.prototype.getMaxScale=function(){var t=this;return this.sectionIndex.reduce((function(e,n){return Math.max(e,t.sections[n].scale)}),0)},ku.prototype.addTextSection=function(t,e){this.text+=t.text,this.sections.push(Lu.forText(t.scale,t.fontStack||e));for(var n=this.sections.length-1,r=0;r<t.text.length;++r)this.sectionIndex.push(n)},ku.prototype.addImageSection=function(t){var e=t.image?t.image.name:"";if(0!==e.length){var n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(Lu.forImage(e)),this.sectionIndex.push(this.sections.length-1)):b("Reached maximum number of images 6401")}else b("Can't add FormattedSection with an empty image.")},ku.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Su={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Eu={};function Au(t,e,n,r,i,o){if(e.imageName){var a=r[e.imageName];return a?a.displaySize[0]*e.scale*Xs/o+i:0}var s=n[e.fontStack],u=s&&s[t];return u?u.metrics.advance*e.scale+i:0}function Du(t,e,n,r){var i=Math.pow(t-e,2);return r?t<e?i/2:2*i:i+Math.abs(n)*n}function Cu(t,e,n){var r=0;return 10===t&&(r-=1e4),n&&(r+=150),40!==t&&65288!==t||(r+=50),41!==e&&65289!==e||(r+=50),r}function Pu(t,e,n,r,i,o){for(var a=null,s=Du(e,n,i,o),u=0,l=r;u<l.length;u+=1){var c=l[u],d=Du(e-c.x,n,i,o)+c.badness;d<=s&&(a=c,s=d)}return{index:t,x:e,priorBreak:a,badness:s}}function Iu(t,e,n,r,i,o,a){if("point"!==o)return[];if(!t)return[];for(var s,u=[],l=function(t,e,n,r,i,o){for(var a=0,s=0;s<t.length();s++){var u=t.getSection(s);a+=Au(t.getCharCode(s),u,r,i,e,o)}return a/Math.max(1,Math.ceil(a/n))}(t,e,n,r,i,a),c=t.text.indexOf("")>=0,d=0,h=0;h<t.length();h++){var f=t.getSection(h),p=t.getCharCode(h);if(Su[p]||(d+=Au(p,f,r,i,e,a)),h<t.length()-1){var m=!((s=p)<11904||!($r["Bopomofo Extended"](s)||$r.Bopomofo(s)||$r["CJK Compatibility Forms"](s)||$r["CJK Compatibility Ideographs"](s)||$r["CJK Compatibility"](s)||$r["CJK Radicals Supplement"](s)||$r["CJK Strokes"](s)||$r["CJK Symbols and Punctuation"](s)||$r["CJK Unified Ideographs Extension A"](s)||$r["CJK Unified Ideographs"](s)||$r["Enclosed CJK Letters and Months"](s)||$r["Halfwidth and Fullwidth Forms"](s)||$r.Hiragana(s)||$r["Ideographic Description Characters"](s)||$r["Kangxi Radicals"](s)||$r["Katakana Phonetic Extensions"](s)||$r.Katakana(s)||$r["Vertical Forms"](s)||$r["Yi Radicals"](s)||$r["Yi Syllables"](s)));(Eu[p]||m||f.imageName)&&u.push(Pu(h+1,d,l,u,Cu(p,t.getCharCode(h+1),m&&c),!1))}}return function t(e){return e?t(e.priorBreak).concat(e.index):[]}(Pu(t.length(),d,l,u,0,!0))}function Ou(t){var e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:e,verticalAlign:n}}function Ru(t,e,n,r,i){if(r||i)for(var o=t[n],a=(t[n].x+o.metrics.advance*o.scale)*r,s=e;s<=n;s++)t[s].x-=a,t[s].y+=i}function Yu(t,e,n,r,i,o){var a,s=t.image;if(s.content){var u=s.content,l=s.pixelRatio||1;a=[u[0]/l,u[1]/l,s.displaySize[0]-u[2]/l,s.displaySize[1]-u[3]/l]}var c,d,h,f,p=e.left*o,m=e.right*o;"width"===n||"both"===n?(f=i[0]+p-r[3],d=i[0]+m+r[1]):d=(f=i[0]+(p+m-s.displaySize[0])/2)+s.displaySize[0];var _=e.top*o,y=e.bottom*o;return"height"===n||"both"===n?(c=i[1]+_-r[0],h=i[1]+y+r[2]):h=(c=i[1]+(_+y-s.displaySize[1])/2)+s.displaySize[1],{image:s,top:c,right:d,bottom:h,left:f,collisionPadding:a}}Eu[10]=!0,Eu[32]=!0,Eu[38]=!0,Eu[40]=!0,Eu[41]=!0,Eu[43]=!0,Eu[45]=!0,Eu[47]=!0,Eu[173]=!0,Eu[183]=!0,Eu[8203]=!0,Eu[8208]=!0,Eu[8211]=!0,Eu[8231]=!0;var Fu=function(t){function e(e,n,r,i){t.call(this,e,n),this.angle=r,void 0!==i&&(this.segment=i)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(i);Wr("Anchor",Fu);var ju=128;function zu(t,e){var n=e.expression;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new pi(t+1))};if("source"===n.kind)return{kind:"source"};for(var r=n.zoomStops,i=n.interpolationType,o=0;o<r.length&&r[o]<=t;)o++;for(var a=o=Math.max(0,o-1);a<r.length&&r[a]<t+1;)a++;a=Math.min(r.length-1,a);var s=r[o],u=r[a];return"composite"===n.kind?{kind:"composite",minZoom:s,maxZoom:u,interpolationType:i}:{kind:"camera",minZoom:s,maxZoom:u,minSize:n.evaluate(new pi(s)),maxSize:n.evaluate(new pi(u)),interpolationType:i}}function Nu(t,e,n){var r=e.uSize,i=n.lowerSize;return"source"===t.kind?i/ju:"composite"===t.kind?Ze(i/ju,n.upperSize/ju,e.uSizeT):r}function Bu(t,e){var n=0,r=0;if("constant"===t.kind)r=t.layoutSize;else if("source"!==t.kind){var i=t.interpolationType,o=i?u(mn.interpolationFactor(i,e,t.minZoom,t.maxZoom),0,1):0;"camera"===t.kind?r=Ze(t.minSize,t.maxSize,o):n=o}return{uSizeT:n,uSize:r}}var Uu=Object.freeze({__proto__:null,getSizeData:zu,evaluateSizeForFeature:Nu,evaluateSizeForZoom:Bu,SIZE_PACK_FACTOR:ju});function Hu(t,e,n,r,i){if(void 0===e.segment)return!0;for(var o=e,a=e.segment+1,s=0;s>-n/2;){if(--a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;for(var u=[],l=0;s<n/2;){var c=t[a],d=t[a+1];if(!d)return!1;var h=t[a-1].angleTo(c)-c.angleTo(d);for(h=Math.abs((h+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:s,angleDelta:h}),l+=h;s-u[0].distance>r;)l-=u.shift().angleDelta;if(l>i)return!1;a++,s+=c.dist(d)}return!0}function Vu(t){for(var e=0,n=0;n<t.length-1;n++)e+=t[n].dist(t[n+1]);return e}function Wu(t,e,n){return t?.6*e*n:0}function Gu(t,e){return Math.max(t?t.right-t.left:0,e?e.right-e.left:0)}function qu(t,e,n,r,i,o){for(var a=Wu(n,i,o),s=Gu(n,r)*o,u=0,l=Vu(t)/2,c=0;c<t.length-1;c++){var d=t[c],h=t[c+1],f=d.dist(h);if(u+f>l){var p=(l-u)/f,m=Ze(d.x,h.x,p),_=Ze(d.y,h.y,p),y=new Fu(m,_,h.angleTo(d),c);return y._round(),!a||Hu(t,y,s,a,e)?y:void 0}u+=f}}function Xu(t,e,n,r,i,o,a,s,u){var l=Wu(r,o,a),c=Gu(r,i),d=c*a,h=0===t[0].x||t[0].x===u||0===t[0].y||t[0].y===u;return e-d<e/4&&(e=d+e/4),function t(e,n,r,i,o,a,s,u,l){for(var c=a/2,d=Vu(e),h=0,f=n-r,p=[],m=0;m<e.length-1;m++){for(var _=e[m],y=e[m+1],v=_.dist(y),g=y.angleTo(_);f+r<h+v;){var x=((f+=r)-h)/v,b=Ze(_.x,y.x,x),w=Ze(_.y,y.y,x);if(b>=0&&b<l&&w>=0&&w<l&&f-c>=0&&f+c<=d){var M=new Fu(b,w,g,m);M._round(),i&&!Hu(e,M,a,i,o)||p.push(M)}}h+=v}return u||p.length||s||(p=t(e,h/2,r,i,o,a,s,!0,l)),p}(t,h?e/2*s%e:(c/2+2*o)*a*s%e,e,l,n,d,h,!1,u)}function Zu(t,e,n,r){var o=[],a=t.image,s=a.pixelRatio,u=a.paddedRect.w-2,l=a.paddedRect.h-2,c=t.right-t.left,d=t.bottom-t.top,h=a.stretchX||[[0,u]],f=a.stretchY||[[0,l]],p=function(t,e){return t+e[1]-e[0]},m=h.reduce(p,0),_=f.reduce(p,0),y=u-m,v=l-_,g=0,x=m,b=0,w=_,M=0,L=y,k=0,T=v;if(a.content&&r){var S=a.content;g=Ku(h,0,S[0]),b=Ku(f,0,S[1]),x=Ku(h,S[0],S[2]),w=Ku(f,S[1],S[3]),M=S[0]-g,k=S[1]-b,L=S[2]-S[0]-x,T=S[3]-S[1]-w}var E=function(r,o,u,l){var h=$u(r.stretch-g,x,c,t.left),f=Qu(r.fixed-M,L,r.stretch,m),p=$u(o.stretch-b,w,d,t.top),y=Qu(o.fixed-k,T,o.stretch,_),v=$u(u.stretch-g,x,c,t.left),S=Qu(u.fixed-M,L,u.stretch,m),E=$u(l.stretch-b,w,d,t.top),A=Qu(l.fixed-k,T,l.stretch,_),D=new i(h,p),C=new i(v,p),P=new i(v,E),I=new i(h,E),O=new i(f/s,y/s),R=new i(S/s,A/s),Y=e*Math.PI/180;if(Y){var F=Math.sin(Y),j=Math.cos(Y),z=[j,-F,F,j];D._matMult(z),C._matMult(z),I._matMult(z),P._matMult(z)}var N=r.stretch+r.fixed,B=o.stretch+o.fixed;return{tl:D,tr:C,bl:I,br:P,tex:{x:a.paddedRect.x+1+N,y:a.paddedRect.y+1+B,w:u.stretch+u.fixed-N,h:l.stretch+l.fixed-B},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:O,pixelOffsetBR:R,minFontScaleX:L/s/c,minFontScaleY:T/s/d,isSDF:n}};if(r&&(a.stretchX||a.stretchY))for(var A=Ju(h,y,m),D=Ju(f,v,_),C=0;C<A.length-1;C++)for(var P=A[C],I=A[C+1],O=0;O<D.length-1;O++)o.push(E(P,D[O],I,D[O+1]));else o.push(E({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:u+1},{fixed:0,stretch:l+1}));return o}function Ku(t,e,n){for(var r=0,i=0,o=t;i<o.length;i+=1){var a=o[i];r+=Math.max(e,Math.min(n,a[1]))-Math.max(e,Math.min(n,a[0]))}return r}function Ju(t,e,n){for(var r=[{fixed:-1,stretch:0}],i=0,o=t;i<o.length;i+=1){var a=o[i],s=a[0],u=a[1],l=r[r.length-1];r.push({fixed:s-l.stretch,stretch:l.stretch}),r.push({fixed:s-l.stretch,stretch:l.stretch+(u-s)})}return r.push({fixed:e+1,stretch:n}),r}function $u(t,e,n,r){return t/e*n+r}function Qu(t,e,n,r){return t-e*n/r}var tl=function(t,e,n,r,o,a,s,u,l,c,d,h){var f=s.top*u-l,p=s.bottom*u+l,m=s.left*u-l,_=s.right*u+l,y=s.collisionPadding;if(y&&(m-=y[0]*u,f-=y[1]*u,_+=y[2]*u,p+=y[3]*u),this.boxStartIndex=t.length,c){var v=p-f,g=_-m;v>0&&(v=Math.max(10*u,v),this._addLineCollisionCircles(t,e,n,n.segment,g,v,r,o,a,d))}else{if(h){var x=new i(m,f),b=new i(_,f),w=new i(m,p),M=new i(_,p),L=h*Math.PI/180;x._rotate(L),b._rotate(L),w._rotate(L),M._rotate(L),m=Math.min(x.x,b.x,w.x,M.x),_=Math.max(x.x,b.x,w.x,M.x),f=Math.min(x.y,b.y,w.y,M.y),p=Math.max(x.y,b.y,w.y,M.y)}t.emplaceBack(n.x,n.y,m,f,_,p,r,o,a,0,0)}this.boxEndIndex=t.length};tl.prototype._addLineCollisionCircles=function(t,e,n,r,i,o,a,s,u,l){var c=o/2,d=Math.floor(i/c)||1,h=1+.4*Math.log(l)/Math.LN2,f=Math.floor(d*h/2),p=-o/2,m=n,_=r+1,y=p,v=-i/2,g=v-i/4;do{if(--_<0){if(y>v)return;_=0;break}y-=e[_].dist(m),m=e[_]}while(y>g);for(var x=e[_].dist(e[_+1]),b=-f;b<d+f;b++){var w=b*c,M=v+w;if(w<0&&(M+=w),w>i&&(M+=w-i),!(M<y)){for(;y+x<M;){if(y+=x,1+ ++_>=e.length)return;x=e[_].dist(e[_+1])}var L=M-y,k=e[_],T=e[_+1].sub(k)._unit()._mult(L)._add(k)._round(),S=Math.abs(M-p)<c?0:.8*(M-p);t.emplaceBack(T.x,T.y,-o/2,-o/2,o/2,o/2,a,s,u,o/2,S)}}};var el=function(t,e){if(void 0===t&&(t=[]),void 0===e&&(e=nl),this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)};function nl(t,e){return t<e?-1:t>e?1:0}function rl(t,e,n){void 0===e&&(e=1),void 0===n&&(n=!1);for(var r=1/0,o=1/0,a=-1/0,s=-1/0,u=t[0],l=0;l<u.length;l++){var c=u[l];(!l||c.x<r)&&(r=c.x),(!l||c.y<o)&&(o=c.y),(!l||c.x>a)&&(a=c.x),(!l||c.y>s)&&(s=c.y)}var d=Math.min(a-r,s-o),h=d/2,f=new el([],il);if(0===d)return new i(r,o);for(var p=r;p<a;p+=d)for(var m=o;m<s;m+=d)f.push(new ol(p+h,m+h,h,t));for(var _=function(t){for(var e=0,n=0,r=0,i=t[0],o=0,a=i.length,s=a-1;o<a;s=o++){var u=i[o],l=i[s],c=u.x*l.y-l.x*u.y;n+=(u.x+l.x)*c,r+=(u.y+l.y)*c,e+=3*c}return new ol(n/e,r/e,0,t)}(t),y=f.length;f.length;){var v=f.pop();(v.d>_.d||!_.d)&&(_=v,n&&console.log("found best %d after %d probes",Math.round(1e4*v.d)/1e4,y)),v.max-_.d<=e||(f.push(new ol(v.p.x-(h=v.h/2),v.p.y-h,h,t)),f.push(new ol(v.p.x+h,v.p.y-h,h,t)),f.push(new ol(v.p.x-h,v.p.y+h,h,t)),f.push(new ol(v.p.x+h,v.p.y+h,h,t)),y+=4)}return n&&(console.log("num probes: "+y),console.log("best distance: "+_.d)),_.p}function il(t,e){return e.max-t.max}function ol(t,e,n,r){this.p=new i(t,e),this.h=n,this.d=function(t,e){for(var n=!1,r=1/0,i=0;i<e.length;i++)for(var o=e[i],a=0,s=o.length,u=s-1;a<s;u=a++){var l=o[a],c=o[u];l.y>t.y!=c.y>t.y&&t.x<(c.x-l.x)*(t.y-l.y)/(c.y-l.y)+l.x&&(n=!n),r=Math.min(r,ea(t,l,c))}return(n?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}el.prototype.push=function(t){this.data.push(t),this.length++,this._up(this.length-1)},el.prototype.pop=function(){if(0!==this.length){var t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}},el.prototype.peek=function(){return this.data[0]},el.prototype._up=function(t){for(var e=this.data,n=this.compare,r=e[t];t>0;){var i=t-1>>1,o=e[i];if(n(r,o)>=0)break;e[t]=o,t=i}e[t]=r},el.prototype._down=function(t){for(var e=this.data,n=this.compare,r=this.length>>1,i=e[t];t<r;){var o=1+(t<<1),a=e[o],s=o+1;if(s<this.length&&n(e[s],a)<0&&(o=s,a=e[s]),n(a,i)>=0)break;e[t]=a,t=o}e[t]=i};var al=Number.POSITIVE_INFINITY;function sl(t,e){return e[1]!==al?function(t,e,n){var r=0,i=0;switch(e=Math.abs(e),n=Math.abs(n),t){case"top-right":case"top-left":case"top":i=n-7;break;case"bottom-right":case"bottom-left":case"bottom":i=7-n}switch(t){case"top-right":case"bottom-right":case"right":r=-e;break;case"top-left":case"bottom-left":case"left":r=e}return[r,i]}(t,e[0],e[1]):function(t,e){var n=0,r=0;e<0&&(e=0);var i=e/Math.sqrt(2);switch(t){case"top-right":case"top-left":r=i-7;break;case"bottom-right":case"bottom-left":r=7-i;break;case"bottom":r=7-e;break;case"top":r=e-7}switch(t){case"top-right":case"bottom-right":n=-i;break;case"top-left":case"bottom-left":n=i;break;case"left":n=e;break;case"right":n=-e}return[n,r]}(t,e[0])}function ul(t){switch(t){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}var ll=32640;function cl(t,e,n,r,o,a,s,u,l,c,d,h,f,p,m){var _=function(t,e,n,r,o,a,s,u){for(var l=r.layout.get("text-rotate").evaluate(a,{})*Math.PI/180,c=[],d=0,h=e.positionedLines;d<h.length;d+=1)for(var f=h[d],p=0,m=f.positionedGlyphs;p<m.length;p+=1){var _=m[p];if(_.rect){var y=_.rect||{},v=4,g=!0,x=1,b=0,w=(o||u)&&_.vertical,M=_.metrics.advance*_.scale/2;if(u&&e.verticalizable&&(b=f.lineOffset/2-(_.imageName?-(Xs-_.metrics.width*_.scale)/2:(_.scale-1)*Xs)),_.imageName){var L=s[_.imageName];g=L.sdf,v=1/(x=L.pixelRatio)}var k=o?[_.x+M,_.y]:[0,0],T=o?[0,0]:[_.x+M+n[0],_.y+n[1]-b],S=[0,0];w&&(S=T,T=[0,0]);var E=(_.metrics.left-v)*_.scale-M+T[0],A=(-_.metrics.top-v)*_.scale+T[1],D=E+y.w*_.scale/x,C=A+y.h*_.scale/x,P=new i(E,A),I=new i(D,A),O=new i(E,C),R=new i(D,C);if(w){var Y=new i(-M,M-Mu),F=-Math.PI/2,j=12-M,z=new i(22-j,-(_.imageName?j:0)),N=new(Function.prototype.bind.apply(i,[null].concat(S)));P._rotateAround(F,Y)._add(z)._add(N),I._rotateAround(F,Y)._add(z)._add(N),O._rotateAround(F,Y)._add(z)._add(N),R._rotateAround(F,Y)._add(z)._add(N)}if(l){var B=Math.sin(l),U=Math.cos(l),H=[U,-B,B,U];P._matMult(H),I._matMult(H),O._matMult(H),R._matMult(H)}var V=new i(0,0),W=new i(0,0);c.push({tl:P,tr:I,bl:O,br:R,tex:y,writingMode:e.writingMode,glyphOffset:k,sectionIndex:_.sectionIndex,isSDF:g,pixelOffsetTL:V,pixelOffsetBR:W,minFontScaleX:0,minFontScaleY:0})}}return c}(0,n,u,o,a,s,r,t.allowVerticalPlacement),y=t.textSizeData,v=null;"source"===y.kind?(v=[ju*o.layout.get("text-size").evaluate(s,{})])[0]>ll&&b(t.layerIds[0]+': Value for "text-size" is >= '+'255. Reduce your "text-size".'):"composite"===y.kind&&((v=[ju*p.compositeTextSizes[0].evaluate(s,{},m),ju*p.compositeTextSizes[1].evaluate(s,{},m)])[0]>ll||v[1]>ll)&&b(t.layerIds[0]+': Value for "text-size" is >= '+'255. Reduce your "text-size".'),t.addSymbols(t.text,_,v,u,a,s,c,e,l.lineStartIndex,l.lineLength,f,m);for(var g=0,x=d;g<x.length;g+=1)h[x[g]]=t.text.placedSymbolArray.length-1;return 4*_.length}function dl(t){for(var e in t)return t[e];return null}function hl(t,e,n,r){var i=t.compareText;if(e in i){for(var o=i[e],a=o.length-1;a>=0;a--)if(r.dist(o[a])<n)return!0}else i[e]=[];return i[e].push(r),!1}var fl=bs.VectorTileFeature.types,pl=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ml(t,e,n,r,i,o,a,s,u,l,c,d,h){var f=s?Math.min(ll,Math.round(s[0])):0,p=s?Math.min(ll,Math.round(s[1])):0;t.emplaceBack(e,n,Math.round(32*r),Math.round(32*i),o,a,(f<<1)+(u?1:0),p,16*l,16*c,256*d,256*h)}function _l(t,e,n){t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n),t.emplaceBack(e.x,e.y,n)}function yl(t){for(var e=0,n=t.sections;e<n.length;e+=1)if(ii(n[e].text))return!0;return!1}var vl=function(t){this.layoutVertexArray=new Ni,this.indexArray=new Ji,this.programConfigurations=t,this.segments=new po,this.dynamicLayoutVertexArray=new Bi,this.opacityVertexArray=new Ui,this.placedSymbolArray=new oo};vl.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},vl.prototype.upload=function(t,e,n,r){this.isEmpty()||(n&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Bs.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,e),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Us.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,pl,!0),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(t))},vl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Wr("SymbolBuffers",vl);var gl=function(t,e,n){this.layoutVertexArray=new t,this.layoutAttributes=e,this.indexArray=new n,this.segments=new po,this.collisionVertexArray=new Wi};gl.prototype.upload=function(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,Hs.members,!0)},gl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Wr("CollisionBuffers",gl);var xl=function(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(t){return t.id})),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[];var e=this.layers[0]._unevaluatedLayout._values;this.textSizeData=zu(this.zoom,e["text-size"]),this.iconSizeData=zu(this.zoom,e["icon-size"]);var n=this.layers[0].layout,r=n.get("symbol-sort-key"),i=n.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==i&&void 0!==r.constantOr(1),this.sortFeaturesByY=("viewport-y"===i||"auto"===i&&!this.sortFeaturesByKey)&&(n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement")),"point"===n.get("symbol-placement")&&(this.writingModes=n.get("text-writing-mode").map((function(t){return wu[t]}))),this.stateDependentLayerIds=this.layers.filter((function(t){return t.isStateDependent()})).map((function(t){return t.id})),this.sourceID=t.sourceID};xl.prototype.createArrays=function(){this.text=new vl(new Bo(Bs.members,this.layers,this.zoom,(function(t){return/^text/.test(t)}))),this.icon=new vl(new Bo(Bs.members,this.layers,this.zoom,(function(t){return/^icon/.test(t)}))),this.glyphOffsetArray=new uo,this.lineVertexArray=new lo,this.symbolInstances=new so},xl.prototype.calculateGlyphDependencies=function(t,e,n,r,i){for(var o=0;o<t.length;o++)if(e[t.charCodeAt(o)]=!0,(n||r)&&i){var a=qs[t.charAt(o)];a&&(e[a.charCodeAt(0)]=!0)}},xl.prototype.populate=function(t,e,n){var r=this.layers[0],i=r.layout,o=i.get("text-font"),a=i.get("text-field"),s=i.get("icon-image"),u=("constant"!==a.value.kind||a.value.value instanceof Qt&&!a.value.value.isEmpty()||a.value.value.toString().length>0)&&("constant"!==o.value.kind||o.value.value.length>0),l="constant"!==s.value.kind||!!s.value.value||Object.keys(s.parameters).length>0,c=i.get("symbol-sort-key");if(this.features=[],u||l){for(var d=e.iconDependencies,h=e.glyphDependencies,f=e.availableImages,p=new pi(this.zoom),m=0,_=t;m<_.length;m+=1){var y=_[m],v=y.feature,g=y.id,x=y.index,b=y.sourceLayerIndex,w=r._featureFilter.needGeometry,M={type:v.type,id:g,properties:v.properties,geometry:w?Wo(v):[]};if(r._featureFilter.filter(p,M,n)){w||(M.geometry=Wo(v));var L=void 0;if(u){var k=r.getValueAndResolveTokens("text-field",M,n,f),T=Qt.factory(k);yl(T)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===di()||this.hasRTLText&&fi.isParsed())&&(L=Gs(T,r,M))}var S=void 0;if(l){var E=r.getValueAndResolveTokens("icon-image",M,n,f);S=E instanceof te?E:te.fromString(E)}if(L||S){var A=this.sortFeaturesByKey?c.evaluate(M,{},n):void 0,D={id:g,text:L,icon:S,index:x,sourceLayerIndex:b,geometry:Wo(v),properties:v.properties,type:fl[v.type],sortKey:A};if(this.features.push(D),S&&(d[S.name]=!0),L){var C=o.evaluate(M,{},n).join(","),P="map"===i.get("text-rotation-alignment")&&"point"!==i.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(wu.vertical)>=0;for(var I=0,O=L.sections;I<O.length;I+=1){var R=O[I];if(R.image)d[R.image.name]=!0;else{var Y=Qr(L.toString()),F=R.fontStack||C,j=h[F]=h[F]||{};this.calculateGlyphDependencies(R.text,j,P,this.allowVerticalPlacement,Y)}}}}}}"line"===i.get("symbol-placement")&&(this.features=function(t){var e={},n={},r=[],i=0;function o(e){r.push(t[e]),i++}function a(t,e,i){var o=n[t];return delete n[t],n[e]=o,r[o].geometry[0].pop(),r[o].geometry[0]=r[o].geometry[0].concat(i[0]),o}function s(t,n,i){var o=e[n];return delete e[n],e[t]=o,r[o].geometry[0].shift(),r[o].geometry[0]=i[0].concat(r[o].geometry[0]),o}function u(t,e,n){var r=n?e[0][e[0].length-1]:e[0][0];return t+":"+r.x+":"+r.y}for(var l=0;l<t.length;l++){var c=t[l],d=c.geometry,h=c.text?c.text.toString():null;if(h){var f=u(h,d),p=u(h,d,!0);if(f in n&&p in e&&n[f]!==e[p]){var m=s(f,p,d),_=a(f,p,r[m].geometry);delete e[f],delete n[p],n[u(h,r[_].geometry,!0)]=_,r[m].geometry=null}else f in n?a(f,p,d):p in e?s(f,p,d):(o(l),e[f]=i-1,n[p]=i-1)}else o(l)}return r.filter((function(t){return t.geometry}))}(this.features)),this.sortFeaturesByKey&&this.features.sort((function(t,e){return t.sortKey-e.sortKey}))}},xl.prototype.update=function(t,e,n){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,e,this.layers,n),this.icon.programConfigurations.updatePaintArrays(t,e,this.layers,n))},xl.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},xl.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},xl.prototype.upload=function(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t),this.textCollisionCircle.upload(t),this.iconCollisionCircle.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},xl.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy(),this.textCollisionCircle.destroy(),this.iconCollisionCircle.destroy()},xl.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},xl.prototype.addToLineVertexArray=function(t,e){var n=this.lineVertexArray.length;if(void 0!==t.segment){for(var r=t.dist(e[t.segment+1]),i=t.dist(e[t.segment]),o={},a=t.segment+1;a<e.length;a++)o[a]={x:e[a].x,y:e[a].y,tileUnitDistanceFromAnchor:r},a<e.length-1&&(r+=e[a+1].dist(e[a]));for(var s=t.segment||0;s>=0;s--)o[s]={x:e[s].x,y:e[s].y,tileUnitDistanceFromAnchor:i},s>0&&(i+=e[s-1].dist(e[s]));for(var u=0;u<e.length;u++){var l=o[u];this.lineVertexArray.emplaceBack(l.x,l.y,l.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}},xl.prototype.addSymbols=function(t,e,n,r,i,o,a,s,u,l,c,d){for(var h=t.indexArray,f=t.layoutVertexArray,p=t.segments.prepareSegment(4*e.length,f,h,o.sortKey),m=this.glyphOffsetArray.length,_=p.vertexLength,y=this.allowVerticalPlacement&&a===wu.vertical?Math.PI/2:0,v=o.text&&o.text.sections,g=0;g<e.length;g++){var x=e[g],b=x.tl,w=x.tr,M=x.bl,L=x.br,k=x.tex,T=x.pixelOffsetTL,S=x.pixelOffsetBR,E=x.minFontScaleX,A=x.minFontScaleY,D=x.glyphOffset,C=x.isSDF,P=x.sectionIndex,I=p.vertexLength,O=D[1];ml(f,s.x,s.y,b.x,O+b.y,k.x,k.y,n,C,T.x,T.y,E,A),ml(f,s.x,s.y,w.x,O+w.y,k.x+k.w,k.y,n,C,S.x,T.y,E,A),ml(f,s.x,s.y,M.x,O+M.y,k.x,k.y+k.h,n,C,T.x,S.y,E,A),ml(f,s.x,s.y,L.x,O+L.y,k.x+k.w,k.y+k.h,n,C,S.x,S.y,E,A),_l(t.dynamicLayoutVertexArray,s,y),h.emplaceBack(I,I+1,I+2),h.emplaceBack(I+1,I+2,I+3),p.vertexLength+=4,p.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(D[0]),g!==e.length-1&&P===e[g+1].sectionIndex||t.programConfigurations.populatePaintArrays(f.length,o,o.index,{},d,v&&v[P])}t.placedSymbolArray.emplaceBack(s.x,s.y,m,this.glyphOffsetArray.length-m,_,u,l,s.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],a,0,!1,0,c)},xl.prototype._addCollisionDebugVertex=function(t,e,n,r,i,o){return e.emplaceBack(0,0),t.emplaceBack(n.x,n.y,r,i,Math.round(o.x),Math.round(o.y))},xl.prototype.addCollisionDebugVertices=function(t,e,n,r,o,a,s,u){var l=o.segments.prepareSegment(4,o.layoutVertexArray,o.indexArray),c=l.vertexLength,d=o.layoutVertexArray,h=o.collisionVertexArray,f=s.anchorX,p=s.anchorY;if(this._addCollisionDebugVertex(d,h,a,f,p,new i(t,e)),this._addCollisionDebugVertex(d,h,a,f,p,new i(n,e)),this._addCollisionDebugVertex(d,h,a,f,p,new i(n,r)),this._addCollisionDebugVertex(d,h,a,f,p,new i(t,r)),l.vertexLength+=4,u){var m=o.indexArray;m.emplaceBack(c,c+1,c+2),m.emplaceBack(c,c+2,c+3),l.primitiveLength+=2}else{var _=o.indexArray;_.emplaceBack(c,c+1),_.emplaceBack(c+1,c+2),_.emplaceBack(c+2,c+3),_.emplaceBack(c+3,c),l.primitiveLength+=4}},xl.prototype.addDebugCollisionBoxes=function(t,e,n,r){for(var i=t;i<e;i++){var o=this.collisionBoxArray.get(i),a=o.radius>0;this.addCollisionDebugVertices(o.x1,o.y1,o.x2,o.y2,a?r?this.textCollisionCircle:this.iconCollisionCircle:r?this.textCollisionBox:this.iconCollisionBox,o.anchorPoint,n,a)}},xl.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new gl(Vi,Vs.members,$i),this.iconCollisionBox=new gl(Vi,Vs.members,$i),this.textCollisionCircle=new gl(Vi,Ws.members,Ji),this.iconCollisionCircle=new gl(Vi,Ws.members,Ji);for(var t=0;t<this.symbolInstances.length;t++){var e=this.symbolInstances.get(t);this.addDebugCollisionBoxes(e.textBoxStartIndex,e.textBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.verticalTextBoxStartIndex,e.verticalTextBoxEndIndex,e,!0),this.addDebugCollisionBoxes(e.iconBoxStartIndex,e.iconBoxEndIndex,e,!1),this.addDebugCollisionBoxes(e.verticalIconBoxStartIndex,e.verticalIconBoxEndIndex,e,!1)}},xl.prototype._deserializeCollisionBoxesForSymbol=function(t,e,n,r,i,o,a,s,u){for(var l={},c=e;c<n;c++){var d=t.get(c);if(0===d.radius){l.textBox={x1:d.x1,y1:d.y1,x2:d.x2,y2:d.y2,anchorPointX:d.anchorPointX,anchorPointY:d.anchorPointY},l.textFeatureIndex=d.featureIndex;break}l.textCircles||(l.textCircles=[],l.textFeatureIndex=d.featureIndex),l.textCircles.push(d.anchorPointX,d.anchorPointY,d.radius,d.signedDistanceFromAnchor,1)}for(var h=r;h<i;h++){var f=t.get(h);if(0===f.radius){l.verticalTextBox={x1:f.x1,y1:f.y1,x2:f.x2,y2:f.y2,anchorPointX:f.anchorPointX,anchorPointY:f.anchorPointY},l.verticalTextFeatureIndex=f.featureIndex;break}}for(var p=o;p<a;p++){var m=t.get(p);if(0===m.radius){l.iconBox={x1:m.x1,y1:m.y1,x2:m.x2,y2:m.y2,anchorPointX:m.anchorPointX,anchorPointY:m.anchorPointY},l.iconFeatureIndex=m.featureIndex;break}}for(var _=s;_<u;_++){var y=t.get(_);if(0===y.radius){l.verticalIconBox={x1:y.x1,y1:y.y1,x2:y.x2,y2:y.y2,anchorPointX:y.anchorPointX,anchorPointY:y.anchorPointY},l.verticalIconFeatureIndex=y.featureIndex;break}}return l},xl.prototype.deserializeCollisionBoxes=function(t){this.collisionArrays=[];for(var e=0;e<this.symbolInstances.length;e++){var n=this.symbolInstances.get(e);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}},xl.prototype.hasTextData=function(){return this.text.segments.get().length>0},xl.prototype.hasIconData=function(){return this.icon.segments.get().length>0},xl.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox&&this.textCollisionCircle&&this.iconCollisionCircle},xl.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},xl.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},xl.prototype.hasTextCollisionCircleData=function(){return this.hasDebugData()&&this.textCollisionCircle.segments.get().length>0},xl.prototype.hasIconCollisionCircleData=function(){return this.hasDebugData()&&this.iconCollisionCircle.segments.get().length>0},xl.prototype.addIndicesForPlacedSymbol=function(t,e){for(var n=t.placedSymbolArray.get(e),r=n.vertexStartIndex+4*n.numGlyphs,i=n.vertexStartIndex;i<r;i+=4)t.indexArray.emplaceBack(i,i+1,i+2),t.indexArray.emplaceBack(i+1,i+2,i+3)},xl.prototype.getSortedSymbolIndexes=function(t){if(this.sortedAngle===t&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var e=Math.sin(t),n=Math.cos(t),r=[],i=[],o=[],a=0;a<this.symbolInstances.length;++a){o.push(a);var s=this.symbolInstances.get(a);r.push(0|Math.round(e*s.anchorX+n*s.anchorY)),i.push(s.featureIndex)}return o.sort((function(t,e){return r[t]-r[e]||i[e]-i[t]})),o},xl.prototype.addToSortKeyRanges=function(t,e){var n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===e?n.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:e,symbolInstanceStart:t,symbolInstanceEnd:t+1})},xl.prototype.sortFeatures=function(t){var e=this;if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var n=0,r=this.symbolInstanceIndexes;n<r.length;n+=1){var i=this.symbolInstances.get(r[n]);this.featureSortOrder.push(i.featureIndex),[i.rightJustifiedTextSymbolIndex,i.centerJustifiedTextSymbolIndex,i.leftJustifiedTextSymbolIndex].forEach((function(t,n,r){t>=0&&r.indexOf(t)===n&&e.addIndicesForPlacedSymbol(e.text,t)})),i.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,i.verticalPlacedTextSymbolIndex),i.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,i.placedIconSymbolIndex),i.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,i.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Wr("SymbolBucket",xl,{omit:["layers","collisionBoxArray","features","compareText"]}),xl.MAX_GLYPHS=65535,xl.addDynamicAttributes=_l;var bl=new Ei({"symbol-placement":new Mi(St.layout_symbol["symbol-placement"]),"symbol-spacing":new Mi(St.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Mi(St.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Li(St.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Mi(St.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Mi(St.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Mi(St.layout_symbol["icon-ignore-placement"]),"icon-optional":new Mi(St.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Mi(St.layout_symbol["icon-rotation-alignment"]),"icon-size":new Li(St.layout_symbol["icon-size"]),"icon-text-fit":new Mi(St.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Mi(St.layout_symbol["icon-text-fit-padding"]),"icon-image":new Li(St.layout_symbol["icon-image"]),"icon-rotate":new Li(St.layout_symbol["icon-rotate"]),"icon-padding":new Mi(St.layout_symbol["icon-padding"]),"icon-keep-upright":new Mi(St.layout_symbol["icon-keep-upright"]),"icon-offset":new Li(St.layout_symbol["icon-offset"]),"icon-anchor":new Li(St.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Mi(St.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Mi(St.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Mi(St.layout_symbol["text-rotation-alignment"]),"text-field":new Li(St.layout_symbol["text-field"]),"text-font":new Li(St.layout_symbol["text-font"]),"text-size":new Li(St.layout_symbol["text-size"]),"text-max-width":new Li(St.layout_symbol["text-max-width"]),"text-line-height":new Mi(St.layout_symbol["text-line-height"]),"text-letter-spacing":new Li(St.layout_symbol["text-letter-spacing"]),"text-justify":new Li(St.layout_symbol["text-justify"]),"text-radial-offset":new Li(St.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Mi(St.layout_symbol["text-variable-anchor"]),"text-anchor":new Li(St.layout_symbol["text-anchor"]),"text-max-angle":new Mi(St.layout_symbol["text-max-angle"]),"text-writing-mode":new Mi(St.layout_symbol["text-writing-mode"]),"text-rotate":new Li(St.layout_symbol["text-rotate"]),"text-padding":new Mi(St.layout_symbol["text-padding"]),"text-keep-upright":new Mi(St.layout_symbol["text-keep-upright"]),"text-transform":new Li(St.layout_symbol["text-transform"]),"text-offset":new Li(St.layout_symbol["text-offset"]),"text-allow-overlap":new Mi(St.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Mi(St.layout_symbol["text-ignore-placement"]),"text-optional":new Mi(St.layout_symbol["text-optional"])}),wl={paint:new Ei({"icon-opacity":new Li(St.paint_symbol["icon-opacity"]),"icon-color":new Li(St.paint_symbol["icon-color"]),"icon-halo-color":new Li(St.paint_symbol["icon-halo-color"]),"icon-halo-width":new Li(St.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Li(St.paint_symbol["icon-halo-blur"]),"icon-translate":new Mi(St.paint_symbol["icon-translate"]),"icon-translate-anchor":new Mi(St.paint_symbol["icon-translate-anchor"]),"text-opacity":new Li(St.paint_symbol["text-opacity"]),"text-color":new Li(St.paint_symbol["text-color"],{runtimeType:zt,getOverride:function(t){return t.textColor},hasOverride:function(t){return!!t.textColor}}),"text-halo-color":new Li(St.paint_symbol["text-halo-color"]),"text-halo-width":new Li(St.paint_symbol["text-halo-width"]),"text-halo-blur":new Li(St.paint_symbol["text-halo-blur"]),"text-translate":new Mi(St.paint_symbol["text-translate"]),"text-translate-anchor":new Mi(St.paint_symbol["text-translate-anchor"])}),layout:bl},Ml=function(t){this.type=t.property.overrides?t.property.overrides.runtimeType:Rt,this.defaultValue=t};Ml.prototype.evaluate=function(t){if(t.formattedSection){var e=this.defaultValue.property.overrides;if(e&&e.hasOverride(t.formattedSection))return e.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default},Ml.prototype.eachChild=function(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)},Ml.prototype.outputDefined=function(){return!1},Ml.prototype.serialize=function(){return null},Wr("FormatSectionOverride",Ml,{omit:["defaultValue"]});var Ll=function(t){function e(e){t.call(this,e,wl)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.recalculate=function(e,n){if(t.prototype.recalculate.call(this,e,n),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var r=this.layout.get("text-writing-mode");if(r){for(var i=[],o=0,a=r;o<a.length;o+=1){var s=a[o];i.indexOf(s)<0&&i.push(s)}this.layout._values["text-writing-mode"]=i}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},e.prototype.getValueAndResolveTokens=function(t,e,n,r){var i=this.layout.get(t).evaluate(e,{},n,r),o=this._unevaluatedLayout._values[t];return o.isDataDriven()||Qn(o.value)||!i?i:function(t,e){return e.replace(/{([^{}]+)}/g,(function(e,n){return n in t?String(t[n]):""}))}(e.properties,i)},e.prototype.createBucket=function(t){return new xl(t)},e.prototype.queryRadius=function(){return 0},e.prototype.queryIntersectsFeature=function(){return!1},e.prototype._setPaintOverrides=function(){for(var t=0,n=wl.paint.overridableProperties;t<n.length;t+=1){var r=n[t];if(e.hasPaintOverride(this.layout,r)){var i,o=this.paint.get(r),a=new Ml(o),s=new $n(a,o.property.specification);i="constant"===o.value.kind||"source"===o.value.kind?new er("source",s):new nr("composite",s,o.value.zoomStops,o.value._interpolationType),this.paint._values[r]=new bi(o.property,i,o.parameters)}}},e.prototype._handleOverridablePaintPropertyUpdate=function(t,n,r){return!(!this.layout||n.isDataDriven()||r.isDataDriven())&&e.hasPaintOverride(this.layout,t)},e.hasPaintOverride=function(t,e){var n=t.get("text-field"),r=wl.paint.properties[e],i=!1,o=function(t){for(var e=0,n=t;e<n.length;e+=1)if(r.overrides&&r.overrides.hasOverride(n[e]))return void(i=!0)};if("constant"===n.value.kind&&n.value.value instanceof Qt)o(n.value.value.sections);else if("source"===n.value.kind){var a=function(t){i||(t instanceof oe&&re(t.value)===Ht?o(t.value.sections):t instanceof le?o(t.sections):t.eachChild(a))},s=n.value;s._styleExpression&&a(s._styleExpression.expression)}return i},e}(Ai),kl={paint:new Ei({"background-color":new Mi(St.paint_background["background-color"]),"background-pattern":new Ti(St.paint_background["background-pattern"]),"background-opacity":new Mi(St.paint_background["background-opacity"])})},Tl=function(t){function e(e){t.call(this,e,kl)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Ai),Sl={paint:new Ei({"raster-opacity":new Mi(St.paint_raster["raster-opacity"]),"raster-hue-rotate":new Mi(St.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Mi(St.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Mi(St.paint_raster["raster-brightness-max"]),"raster-saturation":new Mi(St.paint_raster["raster-saturation"]),"raster-contrast":new Mi(St.paint_raster["raster-contrast"]),"raster-resampling":new Mi(St.paint_raster["raster-resampling"]),"raster-fade-duration":new Mi(St.paint_raster["raster-fade-duration"])})},El=function(t){function e(e){t.call(this,e,Sl)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Ai),Al=function(t){function e(e){t.call(this,e,{}),this.implementation=e}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},e.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},e.prototype.recalculate=function(){},e.prototype.updateTransitions=function(){},e.prototype.hasTransition=function(){},e.prototype.serialize=function(){},e.prototype.onAdd=function(t){this.implementation.onAdd&&this.implementation.onAdd(t,t.painter.context.gl)},e.prototype.onRemove=function(t){this.implementation.onRemove&&this.implementation.onRemove(t,t.painter.context.gl)},e}(Ai),Dl={circle:fa,heatmap:Ma,hillshade:ka,fill:ds,"fill-extrusion":Es,line:zs,symbol:Ll,background:Tl,raster:El},Cl=self.HTMLImageElement,Pl=self.HTMLCanvasElement,Il=self.HTMLVideoElement,Ol=self.ImageData,Rl=self.ImageBitmap,Yl=function(t,e,n,r){this.context=t,this.format=n,this.texture=t.gl.createTexture(),this.update(e,r)};Yl.prototype.update=function(t,e,n){var r=t.width,i=t.height,o=!(this.size&&this.size[0]===r&&this.size[1]===i||n),a=this.context,s=a.gl;if(this.useMipmap=Boolean(e&&e.useMipmap),s.bindTexture(s.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!e||!1!==e.premultiply)),o)this.size=[r,i],t instanceof Cl||t instanceof Pl||t instanceof Il||t instanceof Ol||Rl&&t instanceof Rl?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,t):s.texImage2D(s.TEXTURE_2D,0,this.format,r,i,0,this.format,s.UNSIGNED_BYTE,t.data);else{var u=n||{x:0,y:0},l=u.x,c=u.y;t instanceof Cl||t instanceof Pl||t instanceof Il||t instanceof Ol||Rl&&t instanceof Rl?s.texSubImage2D(s.TEXTURE_2D,0,l,c,s.RGBA,s.UNSIGNED_BYTE,t):s.texSubImage2D(s.TEXTURE_2D,0,l,c,r,i,s.RGBA,s.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&s.generateMipmap(s.TEXTURE_2D)},Yl.prototype.bind=function(t,e,n){var r=this.context.gl;r.bindTexture(r.TEXTURE_2D,this.texture),n!==r.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(n=r.LINEAR),t!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,n||t),this.filter=t),e!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,e),this.wrap=e)},Yl.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Yl.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Fl=function(t){var e=this;this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){e._triggered=!1,e._callback()})};Fl.prototype.trigger=function(){var t=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((function(){t._triggered=!1,t._callback()}),0))},Fl.prototype.remove=function(){delete this._channel,this._callback=function(){}};var jl=function(t,e,n){this.target=t,this.parent=e,this.mapId=n,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},m(["receive","process"],this),this.invoker=new Fl(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=L()?t:self};function zl(t,e,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[t*r-2*Math.PI*6378137/2,e*r-2*Math.PI*6378137/2]}jl.prototype.send=function(t,e,n,r,i){var o=this;void 0===i&&(i=!1);var a=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(this.callbacks[a]=n);var s=S(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:t,hasCallback:!!n,targetMapId:r,mustQueue:i,sourceMapId:this.mapId,data:Zr(e,s)},s),{cancel:function(){n&&delete o.callbacks[a],o.target.postMessage({id:a,type:"<cancel>",targetMapId:r,sourceMapId:o.mapId})}}},jl.prototype.receive=function(t){var e=t.data,n=e.id;if(n&&(!e.targetMapId||this.mapId===e.targetMapId))if("<cancel>"===e.type){delete this.tasks[n];var r=this.cancelCallbacks[n];delete this.cancelCallbacks[n],r&&r()}else L()||e.mustQueue?(this.tasks[n]=e,this.taskQueue.push(n),this.invoker.trigger()):this.processTask(n,e)},jl.prototype.process=function(){if(this.taskQueue.length){var t=this.taskQueue.shift(),e=this.tasks[t];delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),e&&this.processTask(t,e)}},jl.prototype.processTask=function(t,e){var n=this;if("<response>"===e.type){var r=this.callbacks[t];delete this.callbacks[t],r&&(e.error?r(Kr(e.error)):r(null,Kr(e.data)))}else{var i=!1,o=S(this.globalScope)?void 0:[],a=e.hasCallback?function(e,r){i=!0,delete n.cancelCallbacks[t],n.target.postMessage({id:t,type:"<response>",sourceMapId:n.mapId,error:e?Zr(e):null,data:Zr(r,o)},o)}:function(t){i=!0},s=null,u=Kr(e.data);if(this.parent[e.type])s=this.parent[e.type](e.sourceMapId,u,a);else if(this.parent.getWorkerSource){var l=e.type.split(".");s=this.parent.getWorkerSource(e.sourceMapId,l[0],u.source)[l[1]](u,a)}else a(new Error("Could not find function "+e.type));!i&&s&&s.cancel&&(this.cancelCallbacks[t]=s.cancel)}},jl.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Nl=function(t,e,n){this.z=t,this.x=e,this.y=n,this.key=Hl(0,t,t,e,n)};Nl.prototype.equals=function(t){return this.z===t.z&&this.x===t.x&&this.y===t.y},Nl.prototype.url=function(t,e){var n,r,i,o,a,s=(r=this.y,i=this.z,o=zl(256*(n=this.x),256*(r=Math.pow(2,i)-r-1),i),a=zl(256*(n+1),256*(r+1),i),o[0]+","+o[1]+","+a[0]+","+a[1]),u=function(t,e,n){for(var r,i="",o=t;o>0;o--)i+=(e&(r=1<<o-1)?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===e?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",u).replace("{bbox-epsg-3857}",s)},Nl.prototype.getTilePoint=function(t){var e=Math.pow(2,this.z);return new i((t.x*e-this.x)*Te,(t.y*e-this.y)*Te)},Nl.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Bl=function(t,e){this.wrap=t,this.canonical=e,this.key=Hl(t,e.z,e.z,e.x,e.y)},Ul=function(t,e,n,r,i){this.overscaledZ=t,this.wrap=e,this.canonical=new Nl(n,+r,+i),this.key=Hl(e,t,n,r,i)};function Hl(t,e,n,r,i){(t*=2)<0&&(t=-1*t-1);var o=1<<n;return(o*o*t+o*i+r).toString(36)+n.toString(36)+e.toString(36)}Ul.prototype.equals=function(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)},Ul.prototype.scaledTo=function(t){var e=this.canonical.z-t;return t>this.canonical.z?new Ul(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ul(t,this.wrap,t,this.canonical.x>>e,this.canonical.y>>e)},Ul.prototype.calculateScaledKey=function(t,e){var n=this.canonical.z-t;return t>this.canonical.z?Hl(this.wrap*+e,t,this.canonical.z,this.canonical.x,this.canonical.y):Hl(this.wrap*+e,t,t,this.canonical.x>>n,this.canonical.y>>n)},Ul.prototype.isChildOf=function(t){if(t.wrap!==this.wrap)return!1;var e=this.canonical.z-t.canonical.z;return 0===t.overscaledZ||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>e&&t.canonical.y===this.canonical.y>>e},Ul.prototype.children=function(t){if(this.overscaledZ>=t)return[new Ul(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var e=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new Ul(e,this.wrap,e,n,r),new Ul(e,this.wrap,e,n+1,r),new Ul(e,this.wrap,e,n,r+1),new Ul(e,this.wrap,e,n+1,r+1)]},Ul.prototype.isLessThan=function(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))},Ul.prototype.wrapped=function(){return new Ul(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Ul.prototype.unwrapTo=function(t){return new Ul(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)},Ul.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Ul.prototype.toUnwrapped=function(){return new Bl(this.wrap,this.canonical)},Ul.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Ul.prototype.getTilePoint=function(t){return this.canonical.getTilePoint(new ke(t.x-this.wrap,t.y))},Wr("CanonicalTileID",Nl),Wr("OverscaledTileID",Ul,{omit:["posMatrix"]});var Vl=function(t,e,n){if(this.uid=t,e.height!==e.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return b('"'+n+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=e.height;var r=this.dim=e.height-2;this.data=new Uint32Array(e.data.buffer),this.encoding=n||"mapbox";for(var i=0;i<r;i++)this.data[this._idx(-1,i)]=this.data[this._idx(0,i)],this.data[this._idx(r,i)]=this.data[this._idx(r-1,i)],this.data[this._idx(i,-1)]=this.data[this._idx(i,0)],this.data[this._idx(i,r)]=this.data[this._idx(i,r-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(r,-1)]=this.data[this._idx(r-1,0)],this.data[this._idx(-1,r)]=this.data[this._idx(0,r-1)],this.data[this._idx(r,r)]=this.data[this._idx(r-1,r-1)]};Vl.prototype.get=function(t,e){var n=new Uint8Array(this.data.buffer),r=4*this._idx(t,e);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(n[r],n[r+1],n[r+2])},Vl.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Vl.prototype._idx=function(t,e){if(t<-1||t>=this.dim+1||e<-1||e>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(e+1)*this.stride+(t+1)},Vl.prototype._unpackMapbox=function(t,e,n){return(256*t*256+256*e+n)/10-1e4},Vl.prototype._unpackTerrarium=function(t,e,n){return 256*t+e+n/256-32768},Vl.prototype.getPixels=function(){return new xa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Vl.prototype.backfillBorder=function(t,e,n){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");var r=e*this.dim,i=e*this.dim+this.dim,o=n*this.dim,a=n*this.dim+this.dim;switch(e){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:o=a-1;break;case 1:a=o+1}for(var s=-e*this.dim,u=-n*this.dim,l=o;l<a;l++)for(var c=r;c<i;c++)this.data[this._idx(c,l)]=t.data[this._idx(c+s,l+u)]},Wr("DEMData",Vl);var Wl=function(t){this._stringToNumber={},this._numberToString=[];for(var e=0;e<t.length;e++){var n=t[e];this._stringToNumber[n]=e,this._numberToString[e]=n}};Wl.prototype.encode=function(t){return this._stringToNumber[t]},Wl.prototype.decode=function(t){return this._numberToString[t]};var Gl=function(t,e,n,r,i){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=n,t._y=r,this.properties=t.properties,this.id=i},ql={geometry:{configurable:!0}};ql.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},ql.geometry.set=function(t){this._geometry=t},Gl.prototype.toJSON=function(){var t={geometry:this.geometry};for(var e in this)"_geometry"!==e&&"_vectorTileFeature"!==e&&(t[e]=this[e]);return t},Object.defineProperties(Gl.prototype,ql);var Xl=function(){this.state={},this.stateChanges={},this.deletedStates={}};Xl.prototype.updateState=function(t,e,n){var r=String(e);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][r]=this.stateChanges[t][r]||{},c(this.stateChanges[t][r],n),null===this.deletedStates[t])for(var i in this.deletedStates[t]={},this.state[t])i!==r&&(this.deletedStates[t][i]=null);else if(this.deletedStates[t]&&null===this.deletedStates[t][r])for(var o in this.deletedStates[t][r]={},this.state[t][r])n[o]||(this.deletedStates[t][r][o]=null);else for(var a in n)this.deletedStates[t]&&this.deletedStates[t][r]&&null===this.deletedStates[t][r][a]&&delete this.deletedStates[t][r][a]},Xl.prototype.removeFeatureState=function(t,e,n){if(null!==this.deletedStates[t]){var r=String(e);if(this.deletedStates[t]=this.deletedStates[t]||{},n&&void 0!==e)null!==this.deletedStates[t][r]&&(this.deletedStates[t][r]=this.deletedStates[t][r]||{},this.deletedStates[t][r][n]=null);else if(void 0!==e)if(this.stateChanges[t]&&this.stateChanges[t][r])for(n in this.deletedStates[t][r]={},this.stateChanges[t][r])this.deletedStates[t][r][n]=null;else this.deletedStates[t][r]=null;else this.deletedStates[t]=null}},Xl.prototype.getState=function(t,e){var n=String(e),r=c({},(this.state[t]||{})[n],(this.stateChanges[t]||{})[n]);if(null===this.deletedStates[t])return{};if(this.deletedStates[t]){var i=this.deletedStates[t][e];if(null===i)return{};for(var o in i)delete r[o]}return r},Xl.prototype.initializeTileState=function(t,e){t.setFeatureState(this.state,e)},Xl.prototype.coalesceChanges=function(t,e){var n={};for(var r in this.stateChanges){this.state[r]=this.state[r]||{};var i={};for(var o in this.stateChanges[r])this.state[r][o]||(this.state[r][o]={}),c(this.state[r][o],this.stateChanges[r][o]),i[o]=this.state[r][o];n[r]=i}for(var a in this.deletedStates){this.state[a]=this.state[a]||{};var s={};if(null===this.deletedStates[a])for(var u in this.state[a])s[u]={},this.state[a][u]={};else for(var l in this.deletedStates[a]){if(null===this.deletedStates[a][l])this.state[a][l]={};else for(var d=0,h=Object.keys(this.deletedStates[a][l]);d<h.length;d+=1)delete this.state[a][l][h[d]];s[l]=this.state[a][l]}n[a]=n[a]||{},c(n[a],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(var f in t)t[f].setFeatureState(n,e)};var Zl=function(t,e){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Nr(Te,16,0),this.grid3D=new Nr(Te,16,0),this.featureIndexArray=new ho,this.promoteId=e};function Kl(t,e,n,r,i){return y(t,(function(t,o){var a=e instanceof wi?e.get(o):null;return a&&a.evaluate?a.evaluate(n,r,i):a}))}function Jl(t){for(var e=1/0,n=1/0,r=-1/0,i=-1/0,o=0,a=t;o<a.length;o+=1){var s=a[o];e=Math.min(e,s.x),n=Math.min(n,s.y),r=Math.max(r,s.x),i=Math.max(i,s.y)}return{minX:e,minY:n,maxX:r,maxY:i}}function $l(t,e){return e-t}Zl.prototype.insert=function(t,e,n,r,i,o){var a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i);for(var s=o?this.grid3D:this.grid,u=0;u<e.length;u++){for(var l=e[u],c=[1/0,1/0,-1/0,-1/0],d=0;d<l.length;d++){var h=l[d];c[0]=Math.min(c[0],h.x),c[1]=Math.min(c[1],h.y),c[2]=Math.max(c[2],h.x),c[3]=Math.max(c[3],h.y)}c[0]<Te&&c[1]<Te&&c[2]>=0&&c[3]>=0&&s.insert(a,c[0],c[1],c[2],c[3])}},Zl.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new bs.VectorTile(new Js(this.rawTileData)).layers,this.sourceLayerCoder=new Wl(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Zl.prototype.query=function(t,e,n,r){var o=this;this.loadVTLayers();for(var a=t.params||{},s=Te/t.tileSize/t.scale,u=fr(a.filter),l=t.queryGeometry,c=t.queryPadding*s,d=Jl(l),h=this.grid.query(d.minX-c,d.minY-c,d.maxX+c,d.maxY+c),f=Jl(t.cameraQueryGeometry),p=0,m=this.grid3D.query(f.minX-c,f.minY-c,f.maxX+c,f.maxY+c,(function(e,n,r,o){return function(t,e,n,r,o){for(var a=0,s=t;a<s.length;a+=1){var u=s[a];if(e<=u.x&&n<=u.y&&r>=u.x&&o>=u.y)return!0}var l=[new i(e,n),new i(e,o),new i(r,o),new i(r,n)];if(t.length>2)for(var c=0,d=l;c<d.length;c+=1)if(ra(t,d[c]))return!0;for(var h=0;h<t.length-1;h++)if(ia(t[h],t[h+1],l))return!0;return!1}(t.cameraQueryGeometry,e-c,n-c,r+c,o+c)}));p<m.length;p+=1)h.push(m[p]);h.sort($l);for(var _,y={},v=function(i){var c=h[i];if(c!==_){_=c;var d=o.featureIndexArray.get(c),f=null;o.loadMatchingFeature(y,d.bucketIndex,d.sourceLayerIndex,d.featureIndex,u,a.layers,a.availableImages,e,n,r,(function(e,n,r){return f||(f=Wo(e)),n.queryIntersectsFeature(l,e,r,f,o.z,t.transform,s,t.pixelPosMatrix)}))}},g=0;g<h.length;g++)v(g);return y},Zl.prototype.loadMatchingFeature=function(t,e,n,r,i,o,a,s,u,l,c){var d=this.bucketLayerIDs[e];if(!o||function(t,e){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1}(o,d)){var h=this.sourceLayerCoder.decode(n),f=this.vtLayers[h].feature(r);if(i.filter(new pi(this.tileID.overscaledZ),f))for(var p=this.getId(f,h),m=0;m<d.length;m++){var _=d[m];if(!(o&&o.indexOf(_)<0)){var y=s[_];if(y){var v={};void 0!==p&&l&&(v=l.getState(y.sourceLayer||"_geojsonTileLayer",p));var g=u[_];g.paint=Kl(g.paint,y.paint,f,v,a),g.layout=Kl(g.layout,y.layout,f,v,a);var x=!c||c(f,y,v);if(x){var b=new Gl(f,this.z,this.x,this.y,p);b.layer=g;var w=t[_];void 0===w&&(w=t[_]=[]),w.push({featureIndex:r,feature:b,intersectionZ:x})}}}}}},Zl.prototype.lookupSymbolFeatures=function(t,e,n,r,i,o,a,s){var u={};this.loadVTLayers();for(var l=fr(i),c=0,d=t;c<d.length;c+=1)this.loadMatchingFeature(u,n,r,d[c],l,o,a,s,e);return u},Zl.prototype.hasLayer=function(t){for(var e=0,n=this.bucketLayerIDs;e<n.length;e+=1)for(var r=0,i=n[e];r<i.length;r+=1)if(t===i[r])return!0;return!1},Zl.prototype.getId=function(t,e){var n=t.id;return this.promoteId&&"boolean"==typeof(n=t.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[e]])&&(n=Number(n)),n},Wr("FeatureIndex",Zl,{omit:["rawTileData","sourceLayerCoder"]});var Ql=function(t,e){this.tileID=t,this.uid=h(),this.uses=0,this.tileSize=e,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Ql.prototype.registerFadeDuration=function(t){var e=t+this.timeAdded;e<Y.now()||this.fadeEndTime&&e<this.fadeEndTime||(this.fadeEndTime=e)},Ql.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},Ql.prototype.loadVectorData=function(t,e,n){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){for(var r in t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(t,e){var n={};if(!e)return n;for(var r=function(){var t=o[i],r=t.layerIds.map((function(t){return e.getLayer(t)})).filter(Boolean);if(0!==r.length){t.layers=r,t.stateDependentLayerIds&&(t.stateDependentLayers=t.stateDependentLayerIds.map((function(t){return r.filter((function(e){return e.id===t}))[0]})));for(var a=0,s=r;a<s.length;a+=1)n[s[a].id]=t}},i=0,o=t;i<o.length;i+=1)r();return n}(t.buckets,e.style),this.hasSymbolBuckets=!1,this.buckets){var i=this.buckets[r];if(i instanceof xl){if(this.hasSymbolBuckets=!0,!n)break;i.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var o in this.buckets){var a=this.buckets[o];if(a instanceof xl&&a.hasRTLText){this.hasRTLText=!0,fi.isLoading()||fi.isLoaded()||"deferred"!==di()||hi();break}}for(var s in this.queryPadding=0,this.buckets){var u=this.buckets[s];this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(s).queryRadius(u))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new ro},Ql.prototype.unloadVectorData=function(){for(var t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Ql.prototype.getBucket=function(t){return this.buckets[t.id]},Ql.prototype.upload=function(t){for(var e in this.buckets){var n=this.buckets[e];n.uploadPending()&&n.upload(t)}var r=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Yl(t,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Yl(t,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null)},Ql.prototype.prepare=function(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)},Ql.prototype.queryRenderedFeatures=function(t,e,n,r,i,o,a,s,u,l){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:r,cameraQueryGeometry:i,scale:o,tileSize:this.tileSize,pixelPosMatrix:l,transform:s,params:a,queryPadding:this.queryPadding*u},t,e,n):{}},Ql.prototype.querySourceFeatures=function(t,e){var n=this.latestFeatureIndex;if(n&&n.rawTileData){var r=n.loadVTLayers(),i=e?e.sourceLayer:"",o=r._geojsonTileLayer||r[i];if(o)for(var a=fr(e&&e.filter),s=this.tileID.canonical,u=s.z,l=s.x,c=s.y,d={z:u,x:l,y:c},h=0;h<o.length;h++){var f=o.feature(h);if(a.filter(new pi(this.tileID.overscaledZ),f)){var p=n.getId(f,i),m=new Gl(f,u,l,c,p);m.tile=d,t.push(m)}}}},Ql.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},Ql.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Ql.prototype.setExpiryData=function(t){var e=this.expirationTime;if(t.cacheControl){var n=k(t.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){var r=Date.now(),i=!1;if(this.expirationTime>r)i=!1;else if(e)if(this.expirationTime<e)i=!0;else{var o=this.expirationTime-e;o?this.expirationTime=r+Math.max(o,3e4):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Ql.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},Ql.prototype.setFeatureState=function(t,e){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(t).length){var n=this.latestFeatureIndex.loadVTLayers();for(var r in this.buckets)if(e.style.hasLayer(r)){var i=this.buckets[r],o=i.layers[0].sourceLayer||"_geojsonTileLayer",a=n[o],s=t[o];a&&s&&0!==Object.keys(s).length&&(i.update(s,a,this.imageAtlas&&this.imageAtlas.patternPositions||{}),e&&e.style&&(this.queryPadding=Math.max(this.queryPadding,e.style.getLayer(r).queryRadius(i))))}}},Ql.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},Ql.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Y.now()},Ql.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Ql.prototype.setHoldDuration=function(t){this.symbolFadeHoldUntil=Y.now()+t},Ql.prototype.setDependencies=function(t,e){for(var n={},r=0,i=e;r<i.length;r+=1)n[i[r]]=!0;this.dependencies[t]=n},Ql.prototype.hasDependency=function(t,e){for(var n=0,r=t;n<r.length;n+=1){var i=this.dependencies[r[n]];if(i)for(var o=0,a=e;o<a.length;o+=1)if(i[a[o]])return!0}return!1};var tc=self.performance,ec=function(t){this._marks={start:[t.url,"start"].join("#"),end:[t.url,"end"].join("#"),measure:t.url.toString()},tc.mark(this._marks.start)};ec.prototype.finish=function(){tc.mark(this._marks.end);var t=tc.getEntriesByName(this._marks.measure);return 0===t.length&&(tc.measure(this._marks.measure,this._marks.start,this._marks.end),t=tc.getEntriesByName(this._marks.measure),tc.clearMarks(this._marks.start),tc.clearMarks(this._marks.end),tc.clearMeasures(this._marks.measure)),t},t.Actor=jl,t.AlphaImage=ga,t.CanonicalTileID=Nl,t.CollisionBoxArray=ro,t.Color=Kt,t.DEMData=Vl,t.DataConstantProperty=Mi,t.DictionaryCoder=Wl,t.EXTENT=Te,t.ErrorEvent=kt,t.EvaluationParameters=pi,t.Event=Lt,t.Evented=Tt,t.FeatureIndex=Zl,t.FillBucket=us,t.FillExtrusionBucket=ks,t.ImageAtlas=bu,t.ImagePosition=gu,t.LineBucket=Rs,t.LngLat=ve,t.LngLatBounds=ye,t.MercatorCoordinate=ke,t.ONE_EM=Xs,t.OverscaledTileID=Ul,t.Point=i,t.Point$1=i,t.Properties=Ei,t.Protobuf=Js,t.RGBAImage=xa,t.RequestManager=H,t.RequestPerformance=ec,t.ResourceType=ft,t.SegmentVector=po,t.SourceFeatureState=Xl,t.StructArrayLayout1ui2=Qi,t.StructArrayLayout2i4=Ri,t.StructArrayLayout3ui6=Ji,t.StructArrayLayout4i8=Yi,t.SymbolBucket=xl,t.Texture=Yl,t.Tile=Ql,t.Transitionable=yi,t.Uniform1f=So,t.Uniform1i=To,t.Uniform2f=Eo,t.Uniform3f=Ao,t.Uniform4f=Do,t.UniformColor=Co,t.UniformMatrix4f=Io,t.UnwrappedTileID=Bl,t.ValidationError=Et,t.WritingMode=wu,t.ZoomHistory=Jr,t.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},t.addDynamicAttributes=_l,t.asyncAll=function(t,e,n){if(!t.length)return n(null,[]);var r=t.length,i=new Array(t.length),o=null;t.forEach((function(t,a){e(t,(function(t,e){t&&(o=t),i[a]=e,0==--r&&n(o,i)}))}))},t.bezier=a,t.bindAll=m,t.browser=Y,t.cacheEntryPossiblyAdded=function(t){++dt>st&&(t.getActor().send("enforceCacheSizeLimit",at),dt=0)},t.clamp=u,t.clearTileCache=function(t){var e=self.caches.delete(ot);t&&e.catch(t).then((function(){return t()}))},t.clone=function(t){var e=new da(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},t.clone$1=g,t.clone$2=function(t){var e=new da(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},t.config=F,t.create=function(){var t=new da(16);return da!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},t.create$1=function(){var t=new da(9);return da!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},t.create$2=function(){var t=new da(4);return da!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},t.createCommonjsModule=e,t.createExpression=tr,t.createLayout=Ii,t.createStyleLayer=function(t){return"custom"===t.type?new Al(t):new Dl[t.type](t)},t.cross=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t},t.deepEqual=function t(e,n){if(Array.isArray(e)){if(!Array.isArray(n)||e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(!t(e[r],n[r]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==n){if("object"!=typeof n)return!1;if(Object.keys(e).length!==Object.keys(n).length)return!1;for(var i in e)if(!t(e[i],n[i]))return!1;return!0}return e===n},t.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},t.dot$1=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},t.ease=s,t.emitValidationErrors=zr,t.endsWith=_,t.enforceCacheSizeLimit=function(t){ut(),$&&$.then((function(e){e.keys().then((function(n){for(var r=0;r<n.length-t;r++)e.delete(n[r])}))}))},t.evaluateSizeForFeature=Nu,t.evaluateSizeForZoom=Bu,t.evaluateVariableOffset=sl,t.evented=ci,t.extend=c,t.featureFilter=fr,t.filterObject=v,t.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},t.getAnchorAlignment=Ou,t.getAnchorJustification=ul,t.getArrayBuffer=gt,t.getImage=bt,t.getJSON=function(t,e){return vt(c(t,{type:"json"}),e)},t.getRTLTextPluginStatus=di,t.getReferrer=yt,t.getVideo=function(t,e){var n,r,i=self.document.createElement("video");i.muted=!0,i.onloadstart=function(){e(null,i)};for(var o=0;o<t.length;o++){var a=self.document.createElement("source");n=t[o],r=void 0,(r=self.document.createElement("a")).href=n,(r.protocol!==self.document.location.protocol||r.host!==self.document.location.host)&&(i.crossOrigin="Anonymous"),a.src=t[o],i.appendChild(a)}return{cancel:function(){}}},t.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},t.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7],c=e[8],d=e[9],h=e[10],f=e[11],p=e[12],m=e[13],_=e[14],y=e[15],v=n*s-r*a,g=n*u-i*a,x=n*l-o*a,b=r*u-i*s,w=r*l-o*s,M=i*l-o*u,L=c*m-d*p,k=c*_-h*p,T=c*y-f*p,S=d*_-h*m,E=d*y-f*m,A=h*y-f*_,D=v*A-g*E+x*S+b*T-w*k+M*L;return D?(t[0]=(s*A-u*E+l*S)*(D=1/D),t[1]=(i*E-r*A-o*S)*D,t[2]=(m*M-_*w+y*b)*D,t[3]=(h*w-d*M-f*b)*D,t[4]=(u*T-a*A-l*k)*D,t[5]=(n*A-i*T+o*k)*D,t[6]=(_*x-p*M-y*g)*D,t[7]=(c*M-h*x+f*g)*D,t[8]=(a*E-s*T+l*L)*D,t[9]=(r*T-n*E-o*L)*D,t[10]=(p*w-m*x+y*v)*D,t[11]=(d*x-c*w-f*v)*D,t[12]=(s*k-a*S-u*L)*D,t[13]=(n*S-r*k+i*L)*D,t[14]=(m*g-p*b-_*v)*D,t[15]=(c*b-d*g+h*v)*D,t):null},t.isChar=$r,t.isMapboxURL=V,t.keysDifference=function(t,e){var n=[];for(var r in t)r in e||n.push(r);return n},t.makeRequest=vt,t.mapObject=y,t.mercatorXfromLng=be,t.mercatorYfromLat=we,t.mercatorZfromAltitude=Me,t.multiply=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],d=e[8],h=e[9],f=e[10],p=e[11],m=e[12],_=e[13],y=e[14],v=e[15],g=n[0],x=n[1],b=n[2],w=n[3];return t[0]=g*r+x*s+b*d+w*m,t[1]=g*i+x*u+b*h+w*_,t[2]=g*o+x*l+b*f+w*y,t[3]=g*a+x*c+b*p+w*v,t[4]=(g=n[4])*r+(x=n[5])*s+(b=n[6])*d+(w=n[7])*m,t[5]=g*i+x*u+b*h+w*_,t[6]=g*o+x*l+b*f+w*y,t[7]=g*a+x*c+b*p+w*v,t[8]=(g=n[8])*r+(x=n[9])*s+(b=n[10])*d+(w=n[11])*m,t[9]=g*i+x*u+b*h+w*_,t[10]=g*o+x*l+b*f+w*y,t[11]=g*a+x*c+b*p+w*v,t[12]=(g=n[12])*r+(x=n[13])*s+(b=n[14])*d+(w=n[15])*m,t[13]=g*i+x*u+b*h+w*_,t[14]=g*o+x*l+b*f+w*y,t[15]=g*a+x*c+b*p+w*v,t},t.mvt=bs,t.normalize=function(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t},t.number=Ze,t.offscreenCanvasSupported=ht,t.ortho=function(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),l=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*l,t[15]=1,t},t.parseGlyphPBF=function(t){return new Js(t).readFields(mu,[])},t.pbf=Js,t.performSymbolLayout=function(t,e,n,r,o,a,s){t.createArrays(),t.tilePixelRatio=Te/(512*t.overscaling),t.compareText={},t.iconsNeedLinear=!1;var u=t.layers[0].layout,l=t.layers[0]._unevaluatedLayout._values,c={};if("composite"===t.textSizeData.kind){var d=t.textSizeData,h=d.maxZoom;c.compositeTextSizes=[l["text-size"].possiblyEvaluate(new pi(d.minZoom),s),l["text-size"].possiblyEvaluate(new pi(h),s)]}if("composite"===t.iconSizeData.kind){var f=t.iconSizeData,p=f.maxZoom;c.compositeIconSizes=[l["icon-size"].possiblyEvaluate(new pi(f.minZoom),s),l["icon-size"].possiblyEvaluate(new pi(p),s)]}c.layoutTextSize=l["text-size"].possiblyEvaluate(new pi(t.zoom+1),s),c.layoutIconSize=l["icon-size"].possiblyEvaluate(new pi(t.zoom+1),s),c.textMaxSize=l["text-size"].possiblyEvaluate(new pi(18));for(var m=u.get("text-line-height")*Xs,_="map"===u.get("text-rotation-alignment")&&"point"!==u.get("symbol-placement"),y=u.get("text-keep-upright"),v=u.get("text-size"),g=function(){var a=w[x],l=u.get("text-font").evaluate(a,{},s).join(","),d=v.evaluate(a,{},s),h=c.layoutTextSize.evaluate(a,{},s),f=c.layoutIconSize.evaluate(a,{},s),p={horizontal:{},vertical:void 0},g=a.text,M=[0,0];if(g){var L=g.toString(),k=u.get("text-letter-spacing").evaluate(a,{},s)*Xs,T=function(t){for(var e=0,n=t;e<n.length;e+=1)if(r=n[e].charCodeAt(0),$r.Arabic(r)||$r["Arabic Supplement"](r)||$r["Arabic Extended-A"](r)||$r["Arabic Presentation Forms-A"](r)||$r["Arabic Presentation Forms-B"](r))return!1;var r;return!0}(L)?k:0,S=u.get("text-anchor").evaluate(a,{},s),E=u.get("text-variable-anchor");if(!E){var A=u.get("text-radial-offset").evaluate(a,{},s);M=A?sl(S,[A*Xs,al]):u.get("text-offset").evaluate(a,{},s).map((function(t){return t*Xs}))}var D=_?"center":u.get("text-justify").evaluate(a,{},s),C=u.get("symbol-placement"),P="point"===C?u.get("text-max-width").evaluate(a,{},s)*Xs:0,I=function(){t.allowVerticalPlacement&&Qr(L)&&(p.vertical=Tu(g,e,n,o,l,P,m,S,"left",T,M,wu.vertical,!0,C,h,d))};if(!_&&E){for(var O="auto"===D?E.map((function(t){return ul(t)})):[D],R=!1,Y=0;Y<O.length;Y++){var F=O[Y];if(!p.horizontal[F])if(R)p.horizontal[F]=p.horizontal[0];else{var j=Tu(g,e,n,o,l,P,m,"center",F,T,M,wu.horizontal,!1,C,h,d);j&&(p.horizontal[F]=j,R=1===j.positionedLines.length)}}I()}else{"auto"===D&&(D=ul(S));var z=Tu(g,e,n,o,l,P,m,S,D,T,M,wu.horizontal,!1,C,h,d);z&&(p.horizontal[D]=z),I(),Qr(L)&&_&&y&&(p.vertical=Tu(g,e,n,o,l,P,m,S,D,T,M,wu.vertical,!1,C,h,d))}}var N=void 0,B=!1;if(a.icon&&a.icon.name){var U=r[a.icon.name];U&&(N=function(t,e,n){var r=Ou(n),i=e[0]-t.displaySize[0]*r.horizontalAlign,o=e[1]-t.displaySize[1]*r.verticalAlign;return{image:t,top:o,bottom:o+t.displaySize[1],left:i,right:i+t.displaySize[0]}}(o[a.icon.name],u.get("icon-offset").evaluate(a,{},s),u.get("icon-anchor").evaluate(a,{},s)),B=U.sdf,void 0===t.sdfIcons?t.sdfIcons=U.sdf:t.sdfIcons!==U.sdf&&b("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(U.pixelRatio!==t.pixelRatio||0!==u.get("icon-rotate").constantOr(1))&&(t.iconsNeedLinear=!0))}var H=dl(p.horizontal)||p.vertical;t.iconsInText=!!H&&H.iconsInText,(H||N)&&function(t,e,n,r,o,a,s,u,l,c,d){var h=a.textMaxSize.evaluate(e,{});void 0===h&&(h=s);var f,p=t.layers[0].layout,m=p.get("icon-offset").evaluate(e,{},d),_=dl(n.horizontal),y=s/24,v=t.tilePixelRatio*y,g=t.tilePixelRatio*h/24,x=t.tilePixelRatio*u,w=t.tilePixelRatio*p.get("symbol-spacing"),M=p.get("text-padding")*t.tilePixelRatio,L=p.get("icon-padding")*t.tilePixelRatio,k=p.get("text-max-angle")/180*Math.PI,T="map"===p.get("text-rotation-alignment")&&"point"!==p.get("symbol-placement"),S="map"===p.get("icon-rotation-alignment")&&"point"!==p.get("symbol-placement"),E=p.get("symbol-placement"),A=w/2,D=p.get("icon-text-fit");r&&"none"!==D&&(t.allowVerticalPlacement&&n.vertical&&(f=Yu(r,n.vertical,D,p.get("icon-text-fit-padding"),m,y)),_&&(r=Yu(r,_,D,p.get("icon-text-fit-padding"),m,y)));var C=function(i,s){s.x<0||s.x>=Te||s.y<0||s.y>=Te||function(t,e,n,r,i,o,a,s,u,l,c,d,h,f,p,m,_,y,v,g,x,w,M,L){var k,T,S,E,A,D=t.addToLineVertexArray(e,n),C=0,P=0,I=0,O=0,R=-1,Y=-1,F={},j=go(""),z=0,N=0;if(void 0===s._unevaluatedLayout.getValue("text-radial-offset")?(z=(k=s.layout.get("text-offset").evaluate(x,{},L).map((function(t){return t*Xs})))[0],N=k[1]):(z=s.layout.get("text-radial-offset").evaluate(x,{},L)*Xs,N=al),t.allowVerticalPlacement&&r.vertical){var B=s.layout.get("text-rotate").evaluate(x,{},L)+90;E=new tl(u,n,e,l,c,d,r.vertical,h,f,p,t.overscaling,B),a&&(A=new tl(u,n,e,l,c,d,a,_,y,p,t.overscaling,B))}if(i){var U=s.layout.get("icon-rotate").evaluate(x,{}),H="none"!==s.layout.get("icon-text-fit"),V=Zu(i,U,M,H),W=a?Zu(a,U,M,H):void 0;S=new tl(u,n,e,l,c,d,i,_,y,!1,t.overscaling,U),C=4*V.length;var G=t.iconSizeData,q=null;"source"===G.kind?(q=[ju*s.layout.get("icon-size").evaluate(x,{})])[0]>ll&&b(t.layerIds[0]+': Value for "icon-size" is >= '+'255. Reduce your "icon-size".'):"composite"===G.kind&&((q=[ju*w.compositeIconSizes[0].evaluate(x,{},L),ju*w.compositeIconSizes[1].evaluate(x,{},L)])[0]>ll||q[1]>ll)&&b(t.layerIds[0]+': Value for "icon-size" is >= '+'255. Reduce your "icon-size".'),t.addSymbols(t.icon,V,q,g,v,x,!1,e,D.lineStartIndex,D.lineLength,-1,L),R=t.icon.placedSymbolArray.length-1,W&&(P=4*W.length,t.addSymbols(t.icon,W,q,g,v,x,wu.vertical,e,D.lineStartIndex,D.lineLength,-1,L),Y=t.icon.placedSymbolArray.length-1)}for(var X in r.horizontal){var Z=r.horizontal[X];if(!T){j=go(Z.text);var K=s.layout.get("text-rotate").evaluate(x,{},L);T=new tl(u,n,e,l,c,d,Z,h,f,p,t.overscaling,K)}var J=1===Z.positionedLines.length;if(I+=cl(t,e,Z,o,s,p,x,m,D,r.vertical?wu.horizontal:wu.horizontalOnly,J?Object.keys(r.horizontal):[X],F,R,w,L),J)break}r.vertical&&(O+=cl(t,e,r.vertical,o,s,p,x,m,D,wu.vertical,["vertical"],F,Y,w,L));var $=T?T.boxStartIndex:t.collisionBoxArray.length,Q=T?T.boxEndIndex:t.collisionBoxArray.length,tt=E?E.boxStartIndex:t.collisionBoxArray.length,et=E?E.boxEndIndex:t.collisionBoxArray.length,nt=S?S.boxStartIndex:t.collisionBoxArray.length,rt=S?S.boxEndIndex:t.collisionBoxArray.length,it=A?A.boxStartIndex:t.collisionBoxArray.length,ot=A?A.boxEndIndex:t.collisionBoxArray.length;t.glyphOffsetArray.length>=xl.MAX_GLYPHS&&b("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==x.sortKey&&t.addToSortKeyRanges(t.symbolInstances.length,x.sortKey),t.symbolInstances.emplaceBack(e.x,e.y,F.right>=0?F.right:-1,F.center>=0?F.center:-1,F.left>=0?F.left:-1,F.vertical||-1,R,Y,j,$,Q,tt,et,nt,rt,it,ot,l,I,O,C,P,0,h,z,N)}(t,s,i,n,r,o,f,t.layers[0],t.collisionBoxArray,e.index,e.sourceLayerIndex,t.index,v,M,T,l,x,L,S,m,e,a,c,d)};if("line"===E)for(var P=0,I=function(t,e,n,r,o){for(var a=[],s=0;s<t.length;s++)for(var u=t[s],l=void 0,c=0;c<u.length-1;c++){var d=u[c],h=u[c+1];d.x<0&&h.x<0||(d.x<0?d=new i(0,d.y+(0-d.x)/(h.x-d.x)*(h.y-d.y))._round():h.x<0&&(h=new i(0,d.y+(0-d.x)/(h.x-d.x)*(h.y-d.y))._round()),d.y<0&&h.y<0||(d.y<0?d=new i(d.x+(0-d.y)/(h.y-d.y)*(h.x-d.x),0)._round():h.y<0&&(h=new i(d.x+(0-d.y)/(h.y-d.y)*(h.x-d.x),0)._round()),d.x>=r&&h.x>=r||(d.x>=r?d=new i(r,d.y+(r-d.x)/(h.x-d.x)*(h.y-d.y))._round():h.x>=r&&(h=new i(r,d.y+(r-d.x)/(h.x-d.x)*(h.y-d.y))._round()),d.y>=o&&h.y>=o||(d.y>=o?d=new i(d.x+(o-d.y)/(h.y-d.y)*(h.x-d.x),o)._round():h.y>=o&&(h=new i(d.x+(o-d.y)/(h.y-d.y)*(h.x-d.x),o)._round()),l&&d.equals(l[l.length-1])||a.push(l=[d]),l.push(h)))))}return a}(e.geometry,0,0,Te,Te);P<I.length;P+=1)for(var O=I[P],R=0,Y=Xu(O,w,k,n.vertical||_,r,24,g,t.overscaling,Te);R<Y.length;R+=1){var F=Y[R];_&&hl(t,_.text,A,F)||C(O,F)}else if("line-center"===E)for(var j=0,z=e.geometry;j<z.length;j+=1){var N=z[j];if(N.length>1){var B=qu(N,k,n.vertical||_,r,24,g);B&&C(N,B)}}else if("Polygon"===e.type)for(var U=0,H=is(e.geometry,0);U<H.length;U+=1){var V=H[U],W=rl(V,16);C(V[0],new Fu(W.x,W.y,0))}else if("LineString"===e.type)for(var G=0,q=e.geometry;G<q.length;G+=1){var X=q[G];C(X,new Fu(X[0].x,X[0].y,0))}else if("Point"===e.type)for(var Z=0,K=e.geometry;Z<K.length;Z+=1)for(var J=0,$=K[Z];J<$.length;J+=1){var Q=$[J];C([Q],new Fu(Q.x,Q.y,0))}}(t,a,p,N,r,c,h,f,M,B,s)},x=0,w=t.features;x<w.length;x+=1)g();a&&t.generateCollisionDebugBuffers()},t.perspective=function(t,e,n,r,i){var o,a=1/Math.tan(e/2);return t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(t[10]=(i+r)*(o=1/(r-i)),t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t},t.pick=function(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r];i in t&&(n[i]=t[i])}return n},t.plugin=fi,t.polygonIntersectsPolygon=Xo,t.postMapLoadEvent=it,t.postTurnstileEvent=nt,t.potpack=vu,t.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],t.register=Wr,t.registerForPluginStateChange=function(t){return t({pluginStatus:ai,pluginURL:si}),ci.on("pluginStateChange",t),t},t.rotate=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=i*u+a*s,t[2]=r*-s+o*u,t[3]=i*-s+a*u,t},t.rotateX=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],l=e[8],c=e[9],d=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+l*r,t[5]=a*i+c*r,t[6]=s*i+d*r,t[7]=u*i+h*r,t[8]=l*i-o*r,t[9]=c*i-a*r,t[10]=d*i-s*r,t[11]=h*i-u*r,t},t.rotateZ=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],l=e[4],c=e[5],d=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+l*r,t[1]=a*i+c*r,t[2]=s*i+d*r,t[3]=u*i+h*r,t[4]=l*i-o*r,t[5]=c*i-a*r,t[6]=d*i-s*r,t[7]=h*i-u*r,t},t.scale=function(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},t.scale$1=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},t.scale$2=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},t.setCacheLimits=function(t,e){at=t,st=e},t.setRTLTextPlugin=function(t,e,n){if(void 0===n&&(n=!1),"deferred"===ai||"loading"===ai||"loaded"===ai)throw new Error("setRTLTextPlugin cannot be called multiple times.");si=Y.resolveURL(t),ai="deferred",oi=e,li(),n||hi()},t.sphericalToCartesian=function(t){var e=t[0],n=t[1],r=t[2];return n+=90,n*=Math.PI/180,r*=Math.PI/180,{x:e*Math.cos(n)*Math.sin(r),y:e*Math.sin(n)*Math.sin(r),z:e*Math.cos(r)}},t.sqrLen=function(t){var e=t[0],n=t[1];return e*e+n*n},t.styleSpec=St,t.sub=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t},t.symbolSize=Uu,t.transformMat3=function(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t},t.transformMat4=ha,t.translate=function(t,e,n){var r,i,o,a,s,u,l,c,d,h,f,p,m=n[0],_=n[1],y=n[2];return e===t?(t[12]=e[0]*m+e[4]*_+e[8]*y+e[12],t[13]=e[1]*m+e[5]*_+e[9]*y+e[13],t[14]=e[2]*m+e[6]*_+e[10]*y+e[14],t[15]=e[3]*m+e[7]*_+e[11]*y+e[15]):(i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],l=e[6],c=e[7],d=e[8],h=e[9],f=e[10],p=e[11],t[0]=r=e[0],t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=l,t[7]=c,t[8]=d,t[9]=h,t[10]=f,t[11]=p,t[12]=r*m+s*_+d*y+e[12],t[13]=i*m+u*_+h*y+e[13],t[14]=o*m+l*_+f*y+e[14],t[15]=a*m+c*_+p*y+e[15]),t},t.triggerPluginCompletionEvent=ui,t.uniqueId=h,t.validateCustomStyleLayer=function(t){var e=[],n=t.id;return void 0===n&&e.push({message:"layers."+n+': missing required property "id"'}),void 0===t.render&&e.push({message:"layers."+n+': missing required method "render"'}),t.renderingMode&&"2d"!==t.renderingMode&&"3d"!==t.renderingMode&&e.push({message:"layers."+n+': property "renderingMode" must be either "2d" or "3d"'}),e},t.validateLight=Yr,t.validateStyle=Rr,t.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},t.vectorTile=bs,t.version="1.9.1",t.warnOnce=b,t.webpSupported=j,t.window=self,t.wrap=l})),r(0,(function(t){function e(t){var n=typeof t;if("number"===n||"boolean"===n||"string"===n||null==t)return JSON.stringify(t);if(Array.isArray(t)){for(var r="[",i=0,o=t;i<o.length;i+=1)r+=e(o[i])+",";return r+"]"}for(var a=Object.keys(t).sort(),s="{",u=0;u<a.length;u++)s+=JSON.stringify(a[u])+":"+e(t[a[u]])+",";return s+"}"}function n(n){for(var r="",i=0,o=t.refProperties;i<o.length;i+=1)r+="/"+e(n[o[i]]);return r}var r=function(t){this.keyCache={},t&&this.replace(t)};r.prototype.replace=function(t){this._layerConfigs={},this._layers={},this.update(t,[])},r.prototype.update=function(e,r){for(var i=this,o=0,a=e;o<a.length;o+=1){var s=a[o];this._layerConfigs[s.id]=s;var u=this._layers[s.id]=t.createStyleLayer(s);u._featureFilter=t.featureFilter(u.filter),this.keyCache[s.id]&&delete this.keyCache[s.id]}for(var l=0,c=r;l<c.length;l+=1){var d=c[l];delete this.keyCache[d],delete this._layerConfigs[d],delete this._layers[d]}this.familiesBySource={};for(var h=0,f=function(t,e){for(var r={},i=0;i<t.length;i++){var o=e&&e[t[i].id]||n(t[i]);e&&(e[t[i].id]=o);var a=r[o];a||(a=r[o]=[]),a.push(t[i])}var s=[];for(var u in r)s.push(r[u]);return s}(t.values(this._layerConfigs),this.keyCache);h<f.length;h+=1){var p=f[h].map((function(t){return i._layers[t.id]})),m=p[0];if("none"!==m.visibility){var _=m.source||"",y=this.familiesBySource[_];y||(y=this.familiesBySource[_]={});var v=m.sourceLayer||"_geojsonTileLayer",g=y[v];g||(g=y[v]=[]),g.push(p)}}};var i=function(e){var n={},r=[];for(var i in e){var o=e[i],a=n[i]={};for(var s in o){var u=o[+s];if(u&&0!==u.bitmap.width&&0!==u.bitmap.height){var l={x:0,y:0,w:u.bitmap.width+2,h:u.bitmap.height+2};r.push(l),a[s]={rect:l,metrics:u.metrics}}}}var c=t.potpack(r),d=new t.AlphaImage({width:c.w||1,height:c.h||1});for(var h in e){var f=e[h];for(var p in f){var m=f[+p];if(m&&0!==m.bitmap.width&&0!==m.bitmap.height){var _=n[h][p].rect;t.AlphaImage.copy(m.bitmap,d,{x:0,y:0},{x:_.x+1,y:_.y+1},m.bitmap)}}}this.image=d,this.positions=n};t.register("GlyphAtlas",i);var o=function(e){this.tileID=new t.OverscaledTileID(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId};function a(e,n,r){for(var i=new t.EvaluationParameters(n),o=0,a=e;o<a.length;o+=1)a[o].recalculate(i,r)}function s(e,n){var r=t.getArrayBuffer(e.request,(function(e,r,i,o){e?n(e):r&&n(null,{vectorTile:new t.vectorTile.VectorTile(new t.pbf(r)),rawData:r,cacheControl:i,expires:o})}));return function(){r.cancel(),n()}}o.prototype.parse=function(e,n,r,o,s){var u=this;this.status="parsing",this.data=e,this.collisionBoxArray=new t.CollisionBoxArray;var l=new t.DictionaryCoder(Object.keys(e.layers).sort()),c=new t.FeatureIndex(this.tileID,this.promoteId);c.bucketLayerIDs=[];var d,h,f,p,m={},_={featureIndex:c,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:r},y=n.familiesBySource[this.source];for(var v in y){var g=e.layers[v];if(g){1===g.version&&t.warnOnce('Vector tile source "'+this.source+'" layer "'+v+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var x=l.encode(v),b=[],w=0;w<g.length;w++){var M=g.feature(w),L=c.getId(M,v);b.push({feature:M,id:L,index:w,sourceLayerIndex:x})}for(var k=0,T=y[v];k<T.length;k+=1){var S=T[k],E=S[0];E.minzoom&&this.zoom<Math.floor(E.minzoom)||E.maxzoom&&this.zoom>=E.maxzoom||"none"!==E.visibility&&(a(S,this.zoom,r),(m[E.id]=E.createBucket({index:c.bucketLayerIDs.length,layers:S,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:x,sourceID:this.source})).populate(b,_,this.tileID.canonical),c.bucketLayerIDs.push(S.map((function(t){return t.id}))))}}}var A=t.mapObject(_.glyphDependencies,(function(t){return Object.keys(t).map(Number)}));Object.keys(A).length?o.send("getGlyphs",{uid:this.uid,stacks:A},(function(t,e){d||(d=t,h=e,P.call(u))})):h={};var D=Object.keys(_.iconDependencies);D.length?o.send("getImages",{icons:D,source:this.source,tileID:this.tileID,type:"icons"},(function(t,e){d||(d=t,f=e,P.call(u))})):f={};var C=Object.keys(_.patternDependencies);function P(){if(d)return s(d);if(h&&f&&p){var e=new i(h),n=new t.ImageAtlas(f,p);for(var o in m){var u=m[o];u instanceof t.SymbolBucket?(a(u.layers,this.zoom,r),t.performSymbolLayout(u,h,e.positions,f,n.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):u.hasPattern&&(u instanceof t.LineBucket||u instanceof t.FillBucket||u instanceof t.FillExtrusionBucket)&&(a(u.layers,this.zoom,r),u.addFeatures(_,this.tileID.canonical,n.patternPositions))}this.status="done",s(null,{buckets:t.values(m).filter((function(t){return!t.isEmpty()})),featureIndex:c,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,imageAtlas:n,glyphMap:this.returnDependencies?h:null,iconMap:this.returnDependencies?f:null,glyphPositions:this.returnDependencies?e.positions:null})}}C.length?o.send("getImages",{icons:C,source:this.source,tileID:this.tileID,type:"patterns"},(function(t,e){d||(d=t,p=e,P.call(u))})):p={},P.call(this)};var u=function(t,e,n,r){this.actor=t,this.layerIndex=e,this.availableImages=n,this.loadVectorData=r||s,this.loading={},this.loaded={}};u.prototype.loadTile=function(e,n){var r=this,i=e.uid;this.loading||(this.loading={});var a=!!(e&&e.request&&e.request.collectResourceTiming)&&new t.RequestPerformance(e.request),s=this.loading[i]=new o(e);s.abort=this.loadVectorData(e,(function(e,o){if(delete r.loading[i],e||!o)return s.status="done",r.loaded[i]=s,n(e);var u=o.rawData,l={};o.expires&&(l.expires=o.expires),o.cacheControl&&(l.cacheControl=o.cacheControl);var c={};if(a){var d=a.finish();d&&(c.resourceTiming=JSON.parse(JSON.stringify(d)))}s.vectorTile=o.vectorTile,s.parse(o.vectorTile,r.layerIndex,r.availableImages,r.actor,(function(e,r){if(e||!r)return n(e);n(null,t.extend({rawTileData:u.slice(0)},r,l,c))})),r.loaded=r.loaded||{},r.loaded[i]=s}))},u.prototype.reloadTile=function(t,e){var n=this,r=this.loaded,i=t.uid,o=this;if(r&&r[i]){var a=r[i];a.showCollisionBoxes=t.showCollisionBoxes;var s=function(t,r){var i=a.reloadCallback;i&&(delete a.reloadCallback,a.parse(a.vectorTile,o.layerIndex,n.availableImages,o.actor,i)),e(t,r)};"parsing"===a.status?a.reloadCallback=s:"done"===a.status&&(a.vectorTile?a.parse(a.vectorTile,this.layerIndex,this.availableImages,this.actor,s):s())}},u.prototype.abortTile=function(t,e){var n=this.loading,r=t.uid;n&&n[r]&&n[r].abort&&(n[r].abort(),delete n[r]),e()},u.prototype.removeTile=function(t,e){var n=this.loaded,r=t.uid;n&&n[r]&&delete n[r],e()};var l=t.window.ImageBitmap,c=function(){this.loaded={}};c.prototype.loadTile=function(e,n){var r=e.uid,i=e.encoding,o=e.rawImageData,a=l&&o instanceof l?this.getImageData(o):o,s=new t.DEMData(r,a,i);this.loaded=this.loaded||{},this.loaded[r]=s,n(null,s)},c.prototype.getImageData=function(e){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);var n=this.offscreenCanvasContext.getImageData(-1,-1,e.width+2,e.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:n.width,height:n.height},n.data)},c.prototype.removeTile=function(t){var e=this.loaded,n=t.uid;e&&e[n]&&delete e[n]};var d=6378137;function h(t){var e=0;if(t&&t.length>0){e+=Math.abs(f(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(f(t[n]))}return e}function f(t){var e,n,r,i,o,a,s=0,u=t.length;if(u>2){for(a=0;a<u;a++)a===u-2?(r=u-2,i=u-1,o=0):a===u-1?(r=u-1,i=0,o=1):(r=a,i=a+1,o=a+2),e=t[r],n=t[i],s+=(p(t[o][0])-p(e[0]))*Math.sin(p(n[1]));s=s*d*d/2}return s}function p(t){return t*Math.PI/180}var m={geometry:function t(e){var n,r=0;switch(e.type){case"Polygon":return h(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)r+=h(e.coordinates[n]);return r;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)r+=t(e.geometries[n]);return r}},ring:f};function _(t,e){return function(n){return t(n,e)}}function y(t,e){t[0]=v(t[0],e=!!e);for(var n=1;n<t.length;n++)t[n]=v(t[n],!e);return t}function v(t,e){return function(t){return m.ring(t)>=0}(t)===e?t:t.reverse()}var g=t.vectorTile.VectorTileFeature.prototype.toGeoJSON,x=function(e){this._feature=e,this.extent=t.EXTENT,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))};x.prototype.loadGeometry=function(){if(1===this._feature.type){for(var e=[],n=0,r=this._feature.geometry;n<r.length;n+=1){var i=r[n];e.push([new t.Point$1(i[0],i[1])])}return e}for(var o=[],a=0,s=this._feature.geometry;a<s.length;a+=1){for(var u=[],l=0,c=s[a];l<c.length;l+=1){var d=c[l];u.push(new t.Point$1(d[0],d[1]))}o.push(u)}return o},x.prototype.toGeoJSON=function(t,e,n){return g.call(this,t,e,n)};var b=function(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=e.length,this._features=e};b.prototype.feature=function(t){return new x(this._features[t])};var w=t.vectorTile.VectorTileFeature,M=L;function L(t,e){this.options=e||{},this.features=t,this.length=t.length}function k(t,e){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=e||4096}L.prototype.feature=function(t){return new k(this.features[t],this.options.extent)},k.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var n=0;n<e.length;n++){for(var r=e[n],i=[],o=0;o<r.length;o++)i.push(new t.Point$1(r[o][0],r[o][1]));this.geometry.push(i)}return this.geometry},k.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var u=a[s];e=Math.min(e,u.x),n=Math.max(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.y)}return[e,r,n,i]},k.prototype.toGeoJSON=w.prototype.toGeoJSON;var T=E,S=M;function E(e){var n=new t.pbf;return function(t,e){for(var n in t.layers)e.writeMessage(3,A,t.layers[n])}(e,n),n.finish()}function A(t,e){var n;e.writeVarintField(15,t.version||1),e.writeStringField(1,t.name||""),e.writeVarintField(5,t.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<t.length;n++)r.feature=t.feature(n),e.writeMessage(2,D,r);var i=r.keys;for(n=0;n<i.length;n++)e.writeStringField(3,i[n]);var o=r.values;for(n=0;n<o.length;n++)e.writeMessage(4,R,o[n])}function D(t,e){var n=t.feature;void 0!==n.id&&e.writeVarintField(1,n.id),e.writeMessage(2,C,t),e.writeVarintField(3,n.type),e.writeMessage(4,O,n)}function C(t,e){var n=t.feature,r=t.keys,i=t.values,o=t.keycache,a=t.valuecache;for(var s in n.properties){var u=o[s];void 0===u&&(r.push(s),o[s]=u=r.length-1),e.writeVarint(u);var l=n.properties[s],c=typeof l;"string"!==c&&"boolean"!==c&&"number"!==c&&(l=JSON.stringify(l));var d=c+":"+l,h=a[d];void 0===h&&(i.push(l),a[d]=h=i.length-1),e.writeVarint(h)}}function P(t,e){return(e<<3)+(7&t)}function I(t){return t<<1^t>>31}function O(t,e){for(var n=t.loadGeometry(),r=t.type,i=0,o=0,a=n.length,s=0;s<a;s++){var u=n[s],l=1;1===r&&(l=u.length),e.writeVarint(P(1,l));for(var c=3===r?u.length-1:u.length,d=0;d<c;d++){1===d&&1!==r&&e.writeVarint(P(2,c-1));var h=u[d].x-i,f=u[d].y-o;e.writeVarint(I(h)),e.writeVarint(I(f)),i+=h,o+=f}3===r&&e.writeVarint(P(7,1))}}function R(t,e){var n=typeof t;"string"===n?e.writeStringField(1,t):"boolean"===n?e.writeBooleanField(7,t):"number"===n&&(t%1!=0?e.writeDoubleField(3,t):t<0?e.writeSVarintField(6,t):e.writeVarintField(5,t))}function Y(t,e,n,r){F(t,n,r),F(e,2*n,2*r),F(e,2*n+1,2*r+1)}function F(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function j(t,e,n,r){var i=t-n,o=e-r;return i*i+o*o}T.fromVectorTileJs=E,T.fromGeojsonVt=function(t,e){e=e||{};var n={};for(var r in t)n[r]=new M(t[r].features,e),n[r].name=r,n[r].version=e.version,n[r].extent=e.extent;return E({layers:n})},T.GeoJSONWrapper=S;var z=function(t){return t[0]},N=function(t){return t[1]},B=function(t,e,n,r,i){void 0===e&&(e=z),void 0===n&&(n=N),void 0===r&&(r=64),void 0===i&&(i=Float64Array),this.nodeSize=r,this.points=t;for(var o=t.length<65536?Uint16Array:Uint32Array,a=this.ids=new o(t.length),s=this.coords=new i(2*t.length),u=0;u<t.length;u++)a[u]=u,s[2*u]=e(t[u]),s[2*u+1]=n(t[u]);!function t(e,n,r,i,o,a){if(!(o-i<=r)){var s=i+o>>1;!function t(e,n,r,i,o,a){for(;o>i;){if(o-i>600){var s=o-i+1,u=r-i+1,l=Math.log(s),c=.5*Math.exp(2*l/3),d=.5*Math.sqrt(l*c*(s-c)/s)*(u-s/2<0?-1:1);t(e,n,r,Math.max(i,Math.floor(r-u*c/s+d)),Math.min(o,Math.floor(r+(s-u)*c/s+d)),a)}var h=n[2*r+a],f=i,p=o;for(Y(e,n,i,r),n[2*o+a]>h&&Y(e,n,i,o);f<p;){for(Y(e,n,f,p),f++,p--;n[2*f+a]<h;)f++;for(;n[2*p+a]>h;)p--}n[2*i+a]===h?Y(e,n,i,p):Y(e,n,++p,o),p<=r&&(i=p+1),r<=p&&(o=p-1)}}(e,n,s,i,o,a%2),t(e,n,r,i,s-1,a+1),t(e,n,r,s+1,o,a+1)}}(a,s,r,0,a.length-1,0)};B.prototype.range=function(t,e,n,r){return function(t,e,n,r,i,o,a){for(var s,u,l=[0,t.length-1,0],c=[];l.length;){var d=l.pop(),h=l.pop(),f=l.pop();if(h-f<=a)for(var p=f;p<=h;p++)u=e[2*p+1],(s=e[2*p])>=n&&s<=i&&u>=r&&u<=o&&c.push(t[p]);else{var m=Math.floor((f+h)/2);u=e[2*m+1],(s=e[2*m])>=n&&s<=i&&u>=r&&u<=o&&c.push(t[m]);var _=(d+1)%2;(0===d?n<=s:r<=u)&&(l.push(f),l.push(m-1),l.push(_)),(0===d?i>=s:o>=u)&&(l.push(m+1),l.push(h),l.push(_))}}return c}(this.ids,this.coords,t,e,n,r,this.nodeSize)},B.prototype.within=function(t,e,n){return function(t,e,n,r,i,o){for(var a=[0,t.length-1,0],s=[],u=i*i;a.length;){var l=a.pop(),c=a.pop(),d=a.pop();if(c-d<=o)for(var h=d;h<=c;h++)j(e[2*h],e[2*h+1],n,r)<=u&&s.push(t[h]);else{var f=Math.floor((d+c)/2),p=e[2*f],m=e[2*f+1];j(p,m,n,r)<=u&&s.push(t[f]);var _=(l+1)%2;(0===l?n-i<=p:r-i<=m)&&(a.push(d),a.push(f-1),a.push(_)),(0===l?n+i>=p:r+i>=m)&&(a.push(f+1),a.push(c),a.push(_))}}return s}(this.ids,this.coords,t,e,n,this.nodeSize)};var U={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(t){return t}},H=function(t){this.options=K(Object.create(U),t),this.trees=new Array(this.options.maxZoom+1)};function V(t,e,n,r,i){return{x:t,y:e,zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}}function W(t,e){var n=t.geometry.coordinates,r=n[1];return{x:X(n[0]),y:Z(r),zoom:1/0,index:e,parentId:-1}}function G(t){return{type:"Feature",id:t.id,properties:q(t),geometry:{type:"Point",coordinates:[(r=t.x,360*(r-.5)),(e=t.y,n=(180-360*e)*Math.PI/180,360*Math.atan(Math.exp(n))/Math.PI-90)]}};var e,n,r}function q(t){var e=t.numPoints,n=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return K(K({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function X(t){return t/360+.5}function Z(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function K(t,e){for(var n in e)t[n]=e[n];return t}function J(t){return t.x}function $(t){return t.y}function Q(t,e,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var u=((t-n)*a+(e-r)*s)/(a*a+s*s);u>1?(n=i,r=o):u>0&&(n+=a*u,r+=s*u)}return(a=t-n)*a+(s=e-r)*s}function tt(t,e,n,r){var i={id:void 0===t?null:t,type:e,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(t){var e=t.geometry,n=t.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)et(t,e);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<e.length;r++)et(t,e[r]);else if("MultiPolygon"===n)for(r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++)et(t,e[r][i])}(i),i}function et(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function nt(t,e,n,r){if(e.geometry){var i=e.geometry.coordinates,o=e.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],u=e.id;if(n.promoteId?u=e.properties[n.promoteId]:n.generateId&&(u=r||0),"Point"===o)rt(i,s);else if("MultiPoint"===o)for(var l=0;l<i.length;l++)rt(i[l],s);else if("LineString"===o)it(i,s,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(l=0;l<i.length;l++)it(i[l],s=[],a,!1),t.push(tt(u,"LineString",s,e.properties));return}ot(i,s,a,!1)}else if("Polygon"===o)ot(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(l=0;l<e.geometry.geometries.length;l++)nt(t,{id:u,geometry:e.geometry.geometries[l],properties:e.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(l=0;l<i.length;l++){var c=[];ot(i[l],c,a,!0),s.push(c)}}t.push(tt(u,o,s,e.properties))}}function rt(t,e){e.push(at(t[0])),e.push(st(t[1])),e.push(0)}function it(t,e,n,r){for(var i,o,a=0,s=0;s<t.length;s++){var u=at(t[s][0]),l=st(t[s][1]);e.push(u),e.push(l),e.push(0),s>0&&(a+=r?(i*l-u*o)/2:Math.sqrt(Math.pow(u-i,2)+Math.pow(l-o,2))),i=u,o=l}var c=e.length-3;e[2]=1,function t(e,n,r,i){for(var o,a=i,s=r-n>>1,u=r-n,l=e[n],c=e[n+1],d=e[r],h=e[r+1],f=n+3;f<r;f+=3){var p=Q(e[f],e[f+1],l,c,d,h);if(p>a)o=f,a=p;else if(p===a){var m=Math.abs(f-s);m<u&&(o=f,u=m)}}a>i&&(o-n>3&&t(e,n,o,i),e[o+2]=a,r-o>3&&t(e,o,r,i))}(e,0,c,n),e[c+2]=1,e.size=Math.abs(a),e.start=0,e.end=e.size}function ot(t,e,n,r){for(var i=0;i<t.length;i++){var o=[];it(t[i],o,n,r),e.push(o)}}function at(t){return t/360+.5}function st(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function ut(t,e,n,r,i,o,a,s){if(r/=e,o>=(n/=e)&&a<r)return t;if(a<n||o>=r)return null;for(var u=[],l=0;l<t.length;l++){var c=t[l],d=c.geometry,h=c.type,f=0===i?c.minX:c.minY,p=0===i?c.maxX:c.maxY;if(f>=n&&p<r)u.push(c);else if(!(p<n||f>=r)){var m=[];if("Point"===h||"MultiPoint"===h)lt(d,m,n,r,i);else if("LineString"===h)ct(d,m,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===h)ht(d,m,n,r,i,!1);else if("Polygon"===h)ht(d,m,n,r,i,!0);else if("MultiPolygon"===h)for(var _=0;_<d.length;_++){var y=[];ht(d[_],y,n,r,i,!0),y.length&&m.push(y)}if(m.length){if(s.lineMetrics&&"LineString"===h){for(_=0;_<m.length;_++)u.push(tt(c.id,h,m[_],c.tags));continue}"LineString"!==h&&"MultiLineString"!==h||(1===m.length?(h="LineString",m=m[0]):h="MultiLineString"),"Point"!==h&&"MultiPoint"!==h||(h=3===m.length?"Point":"MultiPoint"),u.push(tt(c.id,h,m,c.tags))}}}return u.length?u:null}function lt(t,e,n,r,i){for(var o=0;o<t.length;o+=3){var a=t[o+i];a>=n&&a<=r&&(e.push(t[o]),e.push(t[o+1]),e.push(t[o+2]))}}function ct(t,e,n,r,i,o,a){for(var s,u,l=dt(t),c=0===i?pt:mt,d=t.start,h=0;h<t.length-3;h+=3){var f=t[h],p=t[h+1],m=t[h+2],_=t[h+3],y=t[h+4],v=0===i?f:p,g=0===i?_:y,x=!1;a&&(s=Math.sqrt(Math.pow(f-_,2)+Math.pow(p-y,2))),v<n?g>n&&(u=c(l,f,p,_,y,n),a&&(l.start=d+s*u)):v>r?g<r&&(u=c(l,f,p,_,y,r),a&&(l.start=d+s*u)):ft(l,f,p,m),g<n&&v>=n&&(u=c(l,f,p,_,y,n),x=!0),g>r&&v<=r&&(u=c(l,f,p,_,y,r),x=!0),!o&&x&&(a&&(l.end=d+s*u),e.push(l),l=dt(t)),a&&(d+=s)}var b=t.length-3;f=t[b],p=t[b+1],m=t[b+2],(v=0===i?f:p)>=n&&v<=r&&ft(l,f,p,m),b=l.length-3,o&&b>=3&&(l[b]!==l[0]||l[b+1]!==l[1])&&ft(l,l[0],l[1],l[2]),l.length&&e.push(l)}function dt(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function ht(t,e,n,r,i,o){for(var a=0;a<t.length;a++)ct(t[a],e,n,r,i,o,!1)}function ft(t,e,n,r){t.push(e),t.push(n),t.push(r)}function pt(t,e,n,r,i,o){var a=(o-e)/(r-e);return t.push(o),t.push(n+(i-n)*a),t.push(1),a}function mt(t,e,n,r,i,o){var a=(o-n)/(i-n);return t.push(e+(r-e)*a),t.push(o),t.push(1),a}function _t(t,e){for(var n=[],r=0;r<t.length;r++){var i,o=t[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=yt(o.geometry,e);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(yt(o.geometry[s],e))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var u=[],l=0;l<o.geometry[s].length;l++)u.push(yt(o.geometry[s][l],e));i.push(u)}n.push(tt(o.id,a,i,o.tags))}return n}function yt(t,e){var n=[];n.size=t.size,void 0!==t.start&&(n.start=t.start,n.end=t.end);for(var r=0;r<t.length;r+=3)n.push(t[r]+e,t[r+1],t[r+2]);return n}function vt(t,e){if(t.transformed)return t;var n,r,i,o=1<<t.z,a=t.x,s=t.y;for(n=0;n<t.features.length;n++){var u=t.features[n],l=u.geometry,c=u.type;if(u.geometry=[],1===c)for(r=0;r<l.length;r+=2)u.geometry.push(gt(l[r],l[r+1],e,o,a,s));else for(r=0;r<l.length;r++){var d=[];for(i=0;i<l[r].length;i+=2)d.push(gt(l[r][i],l[r][i+1],e,o,a,s));u.geometry.push(d)}}return t.transformed=!0,t}function gt(t,e,n,r,i,o){return[Math.round(n*(t*r-i)),Math.round(n*(e*r-o))]}function xt(t,e,n,r,i){for(var o=e===i.maxZoom?0:i.tolerance/((1<<e)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){a.numFeatures++,bt(a,t[s],o,i);var u=t[s].minX,l=t[s].minY,c=t[s].maxX,d=t[s].maxY;u<a.minX&&(a.minX=u),l<a.minY&&(a.minY=l),c>a.maxX&&(a.maxX=c),d>a.maxY&&(a.maxY=d)}return a}function bt(t,e,n,r){var i=e.geometry,o=e.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),t.numPoints++,t.numSimplified++;else if("LineString"===o)wt(a,i,t,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)wt(a,i[s],t,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var u=0;u<i.length;u++){var l=i[u];for(s=0;s<l.length;s++)wt(a,l[s],t,n,!0,0===s)}if(a.length){var c=e.tags||null;if("LineString"===o&&r.lineMetrics){for(var d in c={},e.tags)c[d]=e.tags[d];c.mapbox_clip_start=i.start/i.size,c.mapbox_clip_end=i.end/i.size}var h={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:c};null!==e.id&&(h.id=e.id),t.features.push(h)}}function wt(t,e,n,r,i,o){var a=r*r;if(r>0&&e.size<(i?a:r))n.numPoints+=e.length/3;else{for(var s=[],u=0;u<e.length;u+=3)(0===r||e[u+2]>a)&&(n.numSimplified++,s.push(e[u]),s.push(e[u+1])),n.numPoints++;i&&function(t,e){for(var n=0,r=0,i=t.length,o=i-2;r<i;o=r,r+=2)n+=(t[r]-t[o])*(t[r+1]+t[o+1]);if(n>0===e)for(r=0,i=t.length;r<i/2;r+=2){var a=t[r],s=t[r+1];t[r]=t[i-2-r],t[r+1]=t[i-1-r],t[i-2-r]=a,t[i-1-r]=s}}(s,o),t.push(s)}}function Mt(t,e){var n=(e=this.options=function(t,e){for(var n in e)t[n]=e[n];return t}(Object.create(this.options),e)).debug;if(n&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(t,e){var n=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)nt(n,t.features[r],e,r);else nt(n,"Feature"===t.type?t:{geometry:t},e);return n}(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(r=function(t,e){var n=e.buffer/e.extent,r=t,i=ut(t,1,-1-n,n,0,-1,2,e),o=ut(t,1,1-n,2+n,0,-1,2,e);return(i||o)&&(r=ut(t,1,-n,1+n,0,-1,2,e)||[],i&&(r=_t(i,1).concat(r)),o&&(r=r.concat(_t(o,-1)))),r}(r,e)).length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Lt(t,e,n){return 32*((1<<t)*n+e)+t}function kt(t,e){var n=t.tileID.canonical;if(!this._geoJSONIndex)return e(null,null);var r=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!r)return e(null,null);var i=new b(r.features),o=T(i);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),e(null,{vectorTile:i,rawData:o.buffer})}H.prototype.load=function(t){var e=this.options,n=e.log,r=e.minZoom,i=e.maxZoom,o=e.nodeSize;n&&console.time("total time");var a="prepare "+t.length+" points";n&&console.time(a),this.points=t;for(var s=[],u=0;u<t.length;u++)t[u].geometry&&s.push(W(t[u],u));this.trees[i+1]=new B(s,J,$,o,Float32Array),n&&console.timeEnd(a);for(var l=i;l>=r;l--){var c=+Date.now();s=this._cluster(s,l),this.trees[l]=new B(s,J,$,o,Float32Array),n&&console.log("z%d: %d clusters in %dms",l,s.length,+Date.now()-c)}return n&&console.timeEnd("total time"),this},H.prototype.getClusters=function(t,e){var n=((t[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,t[1])),i=180===t[2]?180:((t[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,i=180;else if(n>i){var a=this.getClusters([n,r,180,o],e),s=this.getClusters([-180,r,i,o],e);return a.concat(s)}for(var u=this.trees[this._limitZoom(e)],l=[],c=0,d=u.range(X(n),Z(o),X(i),Z(r));c<d.length;c+=1){var h=u.points[d[c]];l.push(h.numPoints?G(h):this.points[h.index])}return l},H.prototype.getChildren=function(t){var e=this._getOriginId(t),n=this._getOriginZoom(t),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);var o=i.points[e];if(!o)throw new Error(r);for(var a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=[],u=0,l=i.within(o.x,o.y,a);u<l.length;u+=1){var c=i.points[l[u]];c.parentId===t&&s.push(c.numPoints?G(c):this.points[c.index])}if(0===s.length)throw new Error(r);return s},H.prototype.getLeaves=function(t,e,n){var r=[];return this._appendLeaves(r,t,e=e||10,n=n||0,0),r},H.prototype.getTile=function(t,e,n){var r=this.trees[this._limitZoom(t)],i=Math.pow(2,t),o=this.options,a=o.radius/o.extent,s=(n-a)/i,u=(n+1+a)/i,l={features:[]};return this._addTileFeatures(r.range((e-a)/i,s,(e+1+a)/i,u),r.points,e,n,i,l),0===e&&this._addTileFeatures(r.range(1-a/i,s,1,u),r.points,i,n,i,l),e===i-1&&this._addTileFeatures(r.range(0,s,a/i,u),r.points,-1,n,i,l),l.features.length?l:null},H.prototype.getClusterExpansionZoom=function(t){for(var e=this._getOriginZoom(t)-1;e<=this.options.maxZoom;){var n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e},H.prototype._appendLeaves=function(t,e,n,r,i){for(var o=0,a=this.getChildren(e);o<a.length;o+=1){var s=a[o],u=s.properties;if(u&&u.cluster?i+u.point_count<=r?i+=u.point_count:i=this._appendLeaves(t,u.cluster_id,n,r,i):i<r?i++:t.push(s),t.length===n)break}return i},H.prototype._addTileFeatures=function(t,e,n,r,i,o){for(var a=0,s=t;a<s.length;a+=1){var u=e[s[a]],l=u.numPoints,c={type:1,geometry:[[Math.round(this.options.extent*(u.x*i-n)),Math.round(this.options.extent*(u.y*i-r))]],tags:l?q(u):this.points[u.index].properties},d=void 0;l?d=u.id:this.options.generateId?d=u.index:this.points[u.index].id&&(d=this.points[u.index].id),void 0!==d&&(c.id=d),o.features.push(c)}},H.prototype._limitZoom=function(t){return Math.max(this.options.minZoom,Math.min(t,this.options.maxZoom+1))},H.prototype._cluster=function(t,e){for(var n=[],r=this.options,i=r.reduce,o=r.radius/(r.extent*Math.pow(2,e)),a=0;a<t.length;a++){var s=t[a];if(!(s.zoom<=e)){s.zoom=e;for(var u=this.trees[e+1],l=u.within(s.x,s.y,o),c=s.numPoints||1,d=s.x*c,h=s.y*c,f=i&&c>1?this._map(s,!0):null,p=(a<<5)+(e+1)+this.points.length,m=0,_=l;m<_.length;m+=1){var y=u.points[_[m]];if(!(y.zoom<=e)){y.zoom=e;var v=y.numPoints||1;d+=y.x*v,h+=y.y*v,c+=v,y.parentId=p,i&&(f||(f=this._map(s,!0)),i(f,this._map(y)))}}1===c?n.push(s):(s.parentId=p,n.push(V(d/c,h/c,p,c,f)))}}return n},H.prototype._getOriginId=function(t){return t-this.points.length>>5},H.prototype._getOriginZoom=function(t){return(t-this.points.length)%32},H.prototype._map=function(t,e){if(t.numPoints)return e?K({},t.properties):t.properties;var n=this.points[t.index].properties,r=this.options.map(n);return e&&r===n?K({},r):r},Mt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Mt.prototype.splitTile=function(t,e,n,r,i,o,a){for(var s=[t,e,n,r],u=this.options,l=u.debug;s.length;){r=s.pop(),n=s.pop(),e=s.pop(),t=s.pop();var c=1<<e,d=Lt(e,n,r),h=this.tiles[d];if(!h&&(l>1&&console.time("creation"),h=this.tiles[d]=xt(t,e,n,r,u),this.tileCoords.push({z:e,x:n,y:r}),l)){l>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,r,h.numFeatures,h.numPoints,h.numSimplified),console.timeEnd("creation"));var f="z"+e;this.stats[f]=(this.stats[f]||0)+1,this.total++}if(h.source=t,i){if(e===u.maxZoom||e===i)continue;var p=1<<i-e;if(n!==Math.floor(o/p)||r!==Math.floor(a/p))continue}else if(e===u.indexMaxZoom||h.numPoints<=u.indexMaxPoints)continue;if(h.source=null,0!==t.length){l>1&&console.time("clipping");var m,_,y,v,g,x,b=.5*u.buffer/u.extent,w=.5-b,M=.5+b,L=1+b;m=_=y=v=null,g=ut(t,c,n-b,n+M,0,h.minX,h.maxX,u),x=ut(t,c,n+w,n+L,0,h.minX,h.maxX,u),t=null,g&&(m=ut(g,c,r-b,r+M,1,h.minY,h.maxY,u),_=ut(g,c,r+w,r+L,1,h.minY,h.maxY,u),g=null),x&&(y=ut(x,c,r-b,r+M,1,h.minY,h.maxY,u),v=ut(x,c,r+w,r+L,1,h.minY,h.maxY,u),x=null),l>1&&console.timeEnd("clipping"),s.push(m||[],e+1,2*n,2*r),s.push(_||[],e+1,2*n,2*r+1),s.push(y||[],e+1,2*n+1,2*r),s.push(v||[],e+1,2*n+1,2*r+1)}}},Mt.prototype.getTile=function(t,e,n){var r=this.options,i=r.extent,o=r.debug;if(t<0||t>24)return null;var a=1<<t,s=Lt(t,e=(e%a+a)%a,n);if(this.tiles[s])return vt(this.tiles[s],i);o>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var u,l=t,c=e,d=n;!u&&l>0;)l--,c=Math.floor(c/2),d=Math.floor(d/2),u=this.tiles[Lt(l,c,d)];return u&&u.source?(o>1&&console.log("found parent tile z%d-%d-%d",l,c,d),o>1&&console.time("drilling down"),this.splitTile(u.source,l,c,d,t,e,n),o>1&&console.timeEnd("drilling down"),this.tiles[s]?vt(this.tiles[s],i):null):null};var Tt=function(e){function n(t,n,r,i){e.call(this,t,n,r,kt),i&&(this.loadGeoJSON=i)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.loadData=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=e,this._pendingLoadDataParams=t,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},n.prototype._loadData=function(){var e=this;if(this._pendingCallback&&this._pendingLoadDataParams){var n=this._pendingCallback,r=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var i=!!(r&&r.request&&r.request.collectResourceTiming)&&new t.RequestPerformance(r.request);this.loadGeoJSON(r,(function(o,a){if(o||!a)return n(o);if("object"!=typeof a)return n(new Error("Input data given to '"+r.source+"' is not a valid GeoJSON object."));!function t(e,n){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.map(_(t,n)),e;case"GeometryCollection":return e.geometries=e.geometries.map(_(t,n)),e;case"Feature":return e.geometry=t(e.geometry,n),e;case"Polygon":case"MultiPolygon":return function(t,e){return"Polygon"===t.type?t.coordinates=y(t.coordinates,e):"MultiPolygon"===t.type&&(t.coordinates=t.coordinates.map(_(y,e))),t}(e,n);default:return e}}(a,!0);try{e._geoJSONIndex=r.cluster?new H(function(e){var n=e.superclusterOptions,r=e.clusterProperties;if(!r||!n)return n;for(var i={},o={},a={accumulated:null,zoom:0},s={properties:null},u=Object.keys(r),l=0,c=u;l<c.length;l+=1){var d=c[l],h=r[d],f=h[0],p=t.createExpression(h[1]),m=t.createExpression("string"==typeof f?[f,["accumulated"],["get",d]]:f);i[d]=p.value,o[d]=m.value}return n.map=function(t){s.properties=t;for(var e={},n=0,r=u;n<r.length;n+=1){var o=r[n];e[o]=i[o].evaluate(a,s)}return e},n.reduce=function(t,e){s.properties=e;for(var n=0,r=u;n<r.length;n+=1){var i=r[n];a.accumulated=t[i],t[i]=o[i].evaluate(a,s)}},n}(r)).load(a.features):function(t,e){return new Mt(t,e)}(a,r.geojsonVtOptions)}catch(o){return n(o)}e.loaded={};var s={};if(i){var u=i.finish();u&&(s.resourceTiming={},s.resourceTiming[r.source]=JSON.parse(JSON.stringify(u)))}n(null,s)}))}},n.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},n.prototype.reloadTile=function(t,n){var r=this.loaded;return r&&r[t.uid]?e.prototype.reloadTile.call(this,t,n):this.loadTile(t,n)},n.prototype.loadGeoJSON=function(e,n){if(e.request)t.getJSON(e.request,n);else{if("string"!=typeof e.data)return n(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."));try{return n(null,JSON.parse(e.data))}catch(t){return n(new Error("Input data given to '"+e.source+"' is not a valid GeoJSON object."))}}},n.prototype.removeSource=function(t,e){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),e()},n.prototype.getClusterExpansionZoom=function(t,e){try{e(null,this._geoJSONIndex.getClusterExpansionZoom(t.clusterId))}catch(t){e(t)}},n.prototype.getClusterChildren=function(t,e){try{e(null,this._geoJSONIndex.getChildren(t.clusterId))}catch(t){e(t)}},n.prototype.getClusterLeaves=function(t,e){try{e(null,this._geoJSONIndex.getLeaves(t.clusterId,t.limit,t.offset))}catch(t){e(t)}},n}(u),St=function(e){var n=this;this.self=e,this.actor=new t.Actor(e,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:u,geojson:Tt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(t,e){if(n.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');n.workerSourceTypes[t]=e},this.self.registerRTLTextPlugin=function(e){if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=e.applyArabicShaping,t.plugin.processBidirectionalText=e.processBidirectionalText,t.plugin.processStyledBidirectionalText=e.processStyledBidirectionalText}};return St.prototype.setReferrer=function(t,e){this.referrer=e},St.prototype.setImages=function(t,e,n){this.availableImages[t]=e,n()},St.prototype.setLayers=function(t,e,n){this.getLayerIndex(t).replace(e),n()},St.prototype.updateLayers=function(t,e,n){this.getLayerIndex(t).update(e.layers,e.removedIds),n()},St.prototype.loadTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).loadTile(e,n)},St.prototype.loadDEMTile=function(t,e,n){this.getDEMWorkerSource(t,e.source).loadTile(e,n)},St.prototype.reloadTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).reloadTile(e,n)},St.prototype.abortTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).abortTile(e,n)},St.prototype.removeTile=function(t,e,n){this.getWorkerSource(t,e.type,e.source).removeTile(e,n)},St.prototype.removeDEMTile=function(t,e){this.getDEMWorkerSource(t,e.source).removeTile(e)},St.prototype.removeSource=function(t,e,n){if(this.workerSources[t]&&this.workerSources[t][e.type]&&this.workerSources[t][e.type][e.source]){var r=this.workerSources[t][e.type][e.source];delete this.workerSources[t][e.type][e.source],void 0!==r.removeSource?r.removeSource(e,n):n()}},St.prototype.loadWorkerSource=function(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t.toString())}},St.prototype.syncRTLPluginState=function(e,n,r){try{t.plugin.setState(n);var i=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&null!=i){this.self.importScripts(i);var o=t.plugin.isParsed();r(o?void 0:new Error("RTL Text Plugin failed to import scripts from "+i),o)}}catch(t){r(t.toString())}},St.prototype.getAvailableImages=function(t){var e=this.availableImages[t];return e||(e=[]),e},St.prototype.getLayerIndex=function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new r),e},St.prototype.getWorkerSource=function(t,e,n){var r=this;return this.workerSources[t]||(this.workerSources[t]={}),this.workerSources[t][e]||(this.workerSources[t][e]={}),this.workerSources[t][e][n]||(this.workerSources[t][e][n]=new this.workerSourceTypes[e]({send:function(e,n,i){r.actor.send(e,n,i,t)}},this.getLayerIndex(t),this.getAvailableImages(t))),this.workerSources[t][e][n]},St.prototype.getDEMWorkerSource=function(t,e){return this.demWorkerSources[t]||(this.demWorkerSources[t]={}),this.demWorkerSources[t][e]||(this.demWorkerSources[t][e]=new c),this.demWorkerSources[t][e]},St.prototype.enforceCacheSizeLimit=function(e,n){t.enforceCacheSizeLimit(n)},"undefined"!=typeof WorkerGlobalScope&&void 0!==t.window&&t.window instanceof WorkerGlobalScope&&(t.window.worker=new St(t.window)),St})),r(0,(function(t){var e=t.createCommonjsModule((function(t){function e(t){return!!("undefined"!=typeof window&&"undefined"!=typeof document&&Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray&&Function.prototype&&Function.prototype.bind&&Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions&&"JSON"in window&&"parse"in JSON&&"stringify"in JSON&&function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{e=new Worker(r),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(r),t}()&&"Uint8ClampedArray"in window&&ArrayBuffer.isView&&(r=t&&t.failIfMajorPerformanceCaveat,void 0===n[r]&&(n[r]=function(t){var n=document.createElement("canvas"),r=Object.create(e.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=t,n.probablySupportsContext?n.probablySupportsContext("webgl",r)||n.probablySupportsContext("experimental-webgl",r):n.supportsContext?n.supportsContext("webgl",r)||n.supportsContext("experimental-webgl",r):n.getContext("webgl",r)||n.getContext("experimental-webgl",r)}(r)),n[r]));var r}t.exports?t.exports=e:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=e);var n={};e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}})),n={create:function(e,n,r){var i=t.window.document.createElement(e);return void 0!==n&&(i.className=n),r&&r.appendChild(i),i},createNS:function(e,n){return t.window.document.createElementNS(e,n)}},r=t.window.document.documentElement.style;function i(t){if(!r)return t[0];for(var e=0;e<t.length;e++)if(t[e]in r)return t[e];return t[0]}var o,a=i(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);n.disableDrag=function(){r&&a&&(o=r[a],r[a]="none")},n.enableDrag=function(){r&&a&&(r[a]=o)};var s=i(["transform","WebkitTransform"]);n.setTransform=function(t,e){t.style[s]=e};var u=!1;try{var l=Object.defineProperty({},"passive",{get:function(){u=!0}});t.window.addEventListener("test",l,l),t.window.removeEventListener("test",l,l)}catch(t){u=!1}n.addEventListener=function(t,e,n,r){void 0===r&&(r={}),t.addEventListener(e,n,"passive"in r&&u?r:r.capture)},n.removeEventListener=function(t,e,n,r){void 0===r&&(r={}),t.removeEventListener(e,n,"passive"in r&&u?r:r.capture)};var c=function(e){e.preventDefault(),e.stopPropagation(),t.window.removeEventListener("click",c,!0)};function d(t){var e=t.userImage;return!!(e&&e.render&&e.render())&&(t.data.replace(new Uint8Array(e.data.buffer)),!0)}n.suppressClick=function(){t.window.addEventListener("click",c,!0),t.window.setTimeout((function(){t.window.removeEventListener("click",c,!0)}),0)},n.mousePos=function(e,n){var r=e.getBoundingClientRect(),i=t.window.TouchEvent&&n instanceof t.window.TouchEvent?n.touches[0]:n;return new t.Point(i.clientX-r.left-e.clientLeft,i.clientY-r.top-e.clientTop)},n.touchPos=function(e,n){for(var r=e.getBoundingClientRect(),i=[],o="touchend"===n.type?n.changedTouches:n.touches,a=0;a<o.length;a++)i.push(new t.Point(o[a].clientX-r.left-e.clientLeft,o[a].clientY-r.top-e.clientTop));return i},n.mouseButton=function(e){return void 0!==t.window.InstallTrigger&&2===e.button&&e.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:e.button},n.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)};var h=function(e){function n(){e.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.isLoaded=function(){return this.loaded},n.prototype.setLoaded=function(t){if(this.loaded!==t&&(this.loaded=t,t)){for(var e=0,n=this.requestors;e<n.length;e+=1){var r=n[e];this._notify(r.ids,r.callback)}this.requestors=[]}},n.prototype.getImage=function(t){return this.images[t]},n.prototype.addImage=function(t,e){this._validate(t,e)&&(this.images[t]=e)},n.prototype._validate=function(e,n){var r=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "stretchX" value'))),r=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "stretchY" value'))),r=!1),this._validateContent(n.content,n)||(this.fire(new t.ErrorEvent(new Error('Image "'+e+'" has invalid "content" value'))),r=!1),r},n.prototype._validateStretch=function(t,e){if(!t)return!0;for(var n=0,r=0,i=t;r<i.length;r+=1){var o=i[r];if(o[0]<n||o[1]<o[0]||e<o[1])return!1;n=o[1]}return!0},n.prototype._validateContent=function(t,e){return!(t&&(4!==t.length||t[0]<0||e.data.width<t[0]||t[1]<0||e.data.height<t[1]||t[2]<0||e.data.width<t[2]||t[3]<0||e.data.height<t[3]||t[2]<t[0]||t[3]<t[1]))},n.prototype.updateImage=function(t,e){e.version=this.images[t].version+1,this.images[t]=e,this.updatedImages[t]=!0},n.prototype.removeImage=function(t){var e=this.images[t];delete this.images[t],delete this.patterns[t],e.userImage&&e.userImage.onRemove&&e.userImage.onRemove()},n.prototype.listImages=function(){return Object.keys(this.images)},n.prototype.getImages=function(t,e){var n=!0;if(!this.isLoaded())for(var r=0,i=t;r<i.length;r+=1)this.images[i[r]]||(n=!1);this.isLoaded()||n?this._notify(t,e):this.requestors.push({ids:t,callback:e})},n.prototype._notify=function(e,n){for(var r={},i=0,o=e;i<o.length;i+=1){var a=o[i];this.images[a]||this.fire(new t.Event("styleimagemissing",{id:a}));var s=this.images[a];s?r[a]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf,version:s.version,stretchX:s.stretchX,stretchY:s.stretchY,content:s.content,hasRenderCallback:Boolean(s.userImage&&s.userImage.render)}:t.warnOnce('Image "'+a+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}n(null,r)},n.prototype.getPixelSize=function(){var t=this.atlasImage;return{width:t.width,height:t.height}},n.prototype.getPattern=function(e){var n=this.patterns[e],r=this.getImage(e);if(!r)return null;if(n&&n.position.version===r.version)return n.position;if(n)n.position.version=r.version;else{var i={w:r.data.width+2,h:r.data.height+2,x:0,y:0},o=new t.ImagePosition(i,r);this.patterns[e]={bin:i,position:o}}return this._updatePatternAtlas(),this.patterns[e].position},n.prototype.bind=function(e){var n=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(e,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)},n.prototype._updatePatternAtlas=function(){var e=[];for(var n in this.patterns)e.push(this.patterns[n].bin);var r=t.potpack(e),i=r.w,o=r.h,a=this.atlasImage;for(var s in a.resize({width:i||1,height:o||1}),this.patterns){var u=this.patterns[s].bin,l=u.x+1,c=u.y+1,d=this.images[s].data,h=d.width,f=d.height;t.RGBAImage.copy(d,a,{x:0,y:0},{x:l,y:c},{width:h,height:f}),t.RGBAImage.copy(d,a,{x:0,y:f-1},{x:l,y:c-1},{width:h,height:1}),t.RGBAImage.copy(d,a,{x:0,y:0},{x:l,y:c+f},{width:h,height:1}),t.RGBAImage.copy(d,a,{x:h-1,y:0},{x:l-1,y:c},{width:1,height:f}),t.RGBAImage.copy(d,a,{x:0,y:0},{x:l+h,y:c},{width:1,height:f})}this.dirty=!0},n.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},n.prototype.dispatchRenderCallbacks=function(t){for(var e=0,n=t;e<n.length;e+=1){var r=n[e];if(!this.callbackDispatchedThisFrame[r]){this.callbackDispatchedThisFrame[r]=!0;var i=this.images[r];d(i)&&this.updateImage(r,i)}}},n}(t.Evented),f=_,p=_,m=1e20;function _(t,e,n,r,i,o){this.fontSize=t||24,this.buffer=void 0===e?3:e,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=n||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function y(t,e,n,r,i,o,a){for(var s=0;s<e;s++){for(var u=0;u<n;u++)r[u]=t[u*e+s];for(v(r,i,o,a,n),u=0;u<n;u++)t[u*e+s]=i[u]}for(u=0;u<n;u++){for(s=0;s<e;s++)r[s]=t[u*e+s];for(v(r,i,o,a,e),s=0;s<e;s++)t[u*e+s]=Math.sqrt(i[s])}}function v(t,e,n,r,i){n[0]=0,r[0]=-m,r[1]=+m;for(var o=1,a=0;o<i;o++){for(var s=(t[o]+o*o-(t[n[a]]+n[a]*n[a]))/(2*o-2*n[a]);s<=r[a];)s=(t[o]+o*o-(t[n[--a]]+n[a]*n[a]))/(2*o-2*n[a]);n[++a]=o,r[a]=s,r[a+1]=+m}for(o=0,a=0;o<i;o++){for(;r[a+1]<o;)a++;e[o]=(o-n[a])*(o-n[a])+t[n[a]]}}_.prototype.draw=function(t){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(t,this.buffer,this.middle);for(var e=this.ctx.getImageData(0,0,this.size,this.size),n=new Uint8ClampedArray(this.size*this.size),r=0;r<this.size*this.size;r++){var i=e.data[4*r+3]/255;this.gridOuter[r]=1===i?0:0===i?m:Math.pow(Math.max(0,.5-i),2),this.gridInner[r]=1===i?m:0===i?0:Math.pow(Math.max(0,i-.5),2)}for(y(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),y(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),r=0;r<this.size*this.size;r++)n[r]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[r]-this.gridInner[r])/this.radius+this.cutoff))));return n},f.default=p;var g=function(t,e){this.requestManager=t,this.localIdeographFontFamily=e,this.entries={}};g.prototype.setURL=function(t){this.url=t},g.prototype.getGlyphs=function(e,n){var r=this,i=[];for(var o in e)for(var a=0,s=e[o];a<s.length;a+=1)i.push({stack:o,id:s[a]});t.asyncAll(i,(function(t,e){var n=t.stack,i=t.id,o=r.entries[n];o||(o=r.entries[n]={glyphs:{},requests:{}});var a=o.glyphs[i];if(void 0===a){if(a=r._tinySDF(o,n,i))return o.glyphs[i]=a,void e(null,{stack:n,id:i,glyph:a});var s=Math.floor(i/256);if(256*s>65535)e(new Error("glyphs > 65535 not supported"));else{var u=o.requests[s];u||(u=o.requests[s]=[],g.loadGlyphRange(n,s,r.url,r.requestManager,(function(t,e){if(e)for(var n in e)r._doesCharSupportLocalGlyph(+n)||(o.glyphs[+n]=e[+n]);for(var i=0,a=u;i<a.length;i+=1)(0,a[i])(t,e);delete o.requests[s]}))),u.push((function(t,r){t?e(t):r&&e(null,{stack:n,id:i,glyph:r[i]||null})}))}}else e(null,{stack:n,id:i,glyph:a})}),(function(t,e){if(t)n(t);else if(e){for(var r={},i=0,o=e;i<o.length;i+=1){var a=o[i],s=a.stack,u=a.id,l=a.glyph;(r[s]||(r[s]={}))[u]=l&&{id:l.id,bitmap:l.bitmap.clone(),metrics:l.metrics}}n(null,r)}}))},g.prototype._doesCharSupportLocalGlyph=function(e){return!!this.localIdeographFontFamily&&(t.isChar["CJK Unified Ideographs"](e)||t.isChar["Hangul Syllables"](e)||t.isChar.Hiragana(e)||t.isChar.Katakana(e))},g.prototype._tinySDF=function(e,n,r){var i=this.localIdeographFontFamily;if(i&&this._doesCharSupportLocalGlyph(r)){var o=e.tinySDF;if(!o){var a="400";/bold/i.test(n)?a="900":/medium/i.test(n)?a="500":/light/i.test(n)&&(a="200"),o=e.tinySDF=new g.TinySDF(24,3,8,.25,i,a)}return{id:r,bitmap:new t.AlphaImage({width:30,height:30},o.draw(String.fromCharCode(r))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},g.loadGlyphRange=function(e,n,r,i,o){var a=256*n,s=a+255,u=i.transformRequest(i.normalizeGlyphsURL(r).replace("{fontstack}",e).replace("{range}",a+"-"+s),t.ResourceType.Glyphs);t.getArrayBuffer(u,(function(e,n){if(e)o(e);else if(n){for(var r={},i=0,a=t.parseGlyphPBF(n);i<a.length;i+=1){var s=a[i];r[s.id]=s}o(null,r)}}))},g.TinySDF=f;var x=function(){this.specification=t.styleSpec.light.position};x.prototype.possiblyEvaluate=function(e,n){return t.sphericalToCartesian(e.expression.evaluate(n))},x.prototype.interpolate=function(e,n,r){return{x:t.number(e.x,n.x,r),y:t.number(e.y,n.y,r),z:t.number(e.z,n.z,r)}};var b=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new x,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),w=function(e){function n(n){e.call(this),this._transitionable=new t.Transitionable(b),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getLight=function(){return this._transitionable.serialize()},n.prototype.setLight=function(e,n){if(void 0===n&&(n={}),!this._validate(t.validateLight,e,n))for(var r in e){var i=e[r];t.endsWith(r,"-transition")?this._transitionable.setTransition(r.slice(0,-"-transition".length),i):this._transitionable.setValue(r,i)}},n.prototype.updateTransitions=function(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)},n.prototype.hasTransition=function(){return this._transitioning.hasTransition()},n.prototype.recalculate=function(t){this.properties=this._transitioning.possiblyEvaluate(t)},n.prototype._validate=function(e,n,r){return(!r||!1!==r.validate)&&t.emitValidationErrors(this,e.call(t.validateStyle,t.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},n}(t.Evented),M=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};M.prototype.getDash=function(t,e){var n=t.join(",")+String(e);return this.dashEntry[n]||(this.dashEntry[n]=this.addDash(t,e)),this.dashEntry[n]},M.prototype.getDashRanges=function(t,e,n){var r=[],i=t.length%2==1?-t[t.length-1]*n:0,o=t[0]*n,a=!0;r.push({left:i,right:o,isDash:a,zeroLength:0===t[0]});for(var s=t[0],u=1;u<t.length;u++){var l=t[u];r.push({left:i=s*n,right:o=(s+=l)*n,isDash:a=!a,zeroLength:0===l})}return r},M.prototype.addRoundDash=function(t,e,n){for(var r=e/2,i=-n;i<=n;i++)for(var o=this.width*(this.nextRow+n+i),a=0,s=t[a],u=0;u<this.width;u++){u/s.right>1&&(s=t[++a]);var l=Math.abs(u-s.left),c=Math.abs(u-s.right),d=Math.min(l,c),h=void 0,f=i/n*(r+1);if(s.isDash){var p=r-Math.abs(f);h=Math.sqrt(d*d+p*p)}else h=r-Math.sqrt(d*d+f*f);this.data[o+u]=Math.max(0,Math.min(255,h+128))}},M.prototype.addRegularDash=function(t){for(var e=t.length-1;e>=0;--e){var n=t[e],r=t[e+1];n.zeroLength?t.splice(e,1):r&&r.isDash===n.isDash&&(r.left=n.left,t.splice(e,1))}var i=t[0],o=t[t.length-1];i.isDash===o.isDash&&(i.left=o.left-this.width,o.right=i.right+this.width);for(var a=this.width*this.nextRow,s=0,u=t[s],l=0;l<this.width;l++){l/u.right>1&&(u=t[++s]);var c=Math.abs(l-u.left),d=Math.abs(l-u.right),h=Math.min(c,d);this.data[a+l]=Math.max(0,Math.min(255,(u.isDash?h:-h)+128))}},M.prototype.addDash=function(e,n){var r=n?7:0,i=2*r+1;if(this.nextRow+i>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var o=0,a=0;a<e.length;a++)o+=e[a];if(0!==o){var s=this.width/o,u=this.getDashRanges(e,this.width,s);n?this.addRoundDash(u,s,r):this.addRegularDash(u)}var l={y:(this.nextRow+r+.5)/this.height,height:2*r/this.height,width:o};return this.nextRow+=i,this.dirty=!0,l},M.prototype.bind=function(t){var e=t.gl;this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.ALPHA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.ALPHA,this.width,this.height,0,e.ALPHA,e.UNSIGNED_BYTE,this.data))};var L=function e(n,r){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var i=this.workerPool.acquire(this.id),o=0;o<i.length;o++){var a=new e.Actor(i[o],r,this.id);a.name="Worker "+o,this.actors.push(a)}};function k(e,n,r){var i=function(i,o){if(i)return r(i);if(o){var a=t.pick(t.extend(o,e),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);o.vector_layers&&(a.vectorLayers=o.vector_layers,a.vectorLayerIds=a.vectorLayers.map((function(t){return t.id}))),a.tiles=n.canonicalizeTileset(a,e.url),r(null,a)}};return e.url?t.getJSON(n.transformRequest(n.normalizeSourceURL(e.url),t.ResourceType.Source),i):t.browser.frame((function(){return i(null,e)}))}L.prototype.broadcast=function(e,n,r){t.asyncAll(this.actors,(function(t,r){t.send(e,n,r)}),r=r||function(){})},L.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},L.prototype.remove=function(){this.actors.forEach((function(t){t.remove()})),this.actors=[],this.workerPool.release(this.id)},L.Actor=t.Actor;var T=function(e,n,r){this.bounds=t.LngLatBounds.convert(this.validateBounds(e)),this.minzoom=n||0,this.maxzoom=r||24};T.prototype.validateBounds=function(t){return Array.isArray(t)&&4===t.length?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]},T.prototype.contains=function(e){var n=Math.pow(2,e.z),r=Math.floor(t.mercatorXfromLng(this.bounds.getWest())*n),i=Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*n),o=Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*n),a=Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*n);return e.x>=r&&e.x<o&&e.y>=i&&e.y<a};var S=function(e){function n(n,r,i,o){if(e.call(this),this.id=n,this.dispatcher=i,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(r,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},r),this._collectResourceTiming=r.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(o)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=k(this._options,this.map._requestManager,(function(n,r){e._tileJSONRequest=null,e._loaded=!0,n?e.fire(new t.ErrorEvent(n)):r&&(t.extend(e,r),r.bounds&&(e.tileBounds=new T(r.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(r.tiles,e.map._requestManager._customAccessToken),t.postMapLoadEvent(r.tiles,e.map._getMapId(),e.map._requestManager._skuToken,e.map._requestManager._customAccessToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))},n.prototype.loaded=function(){return this._loaded},n.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return t.extend({},this._options)},n.prototype.loadTile=function(e,n){var r=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme)),i={request:this.map._requestManager.transformRequest(r,t.ResourceType.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function o(r,i){return delete e.request,e.aborted?n(null):r&&404!==r.status?n(r):(i&&i.resourceTiming&&(e.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&i&&e.setExpiryData(i),e.loadVectorData(i,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}i.request.collectResourceTiming=this._collectResourceTiming,e.actor&&"expired"!==e.state?"loading"===e.state?e.reloadCallback=n:e.request=e.actor.send("reloadTile",i,o.bind(this)):(e.actor=this.dispatcher.getActor(),e.request=e.actor.send("loadTile",i,o.bind(this)))},n.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.actor&&t.actor.send("abortTile",{uid:t.uid,type:this.type,source:this.id},void 0)},n.prototype.unloadTile=function(t){t.unloadVectorData(),t.actor&&t.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id},void 0)},n.prototype.hasTransition=function(){return!1},n}(t.Evented),E=function(e){function n(n,r,i,o){e.call(this),this.id=n,this.dispatcher=i,this.setEventedParent(o),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},r),t.extend(this,t.pick(r,["url","scheme","tileSize"]))}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=k(this._options,this.map._requestManager,(function(n,r){e._tileJSONRequest=null,e._loaded=!0,n?e.fire(new t.ErrorEvent(n)):r&&(t.extend(e,r),r.bounds&&(e.tileBounds=new T(r.bounds,e.minzoom,e.maxzoom)),t.postTurnstileEvent(r.tiles),t.postMapLoadEvent(r.tiles,e.map._getMapId(),e.map._requestManager._skuToken),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),e.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))}))},n.prototype.loaded=function(){return this._loaded},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},n.prototype.serialize=function(){return t.extend({},this._options)},n.prototype.hasTile=function(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)},n.prototype.loadTile=function(e,n){var r=this,i=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);e.request=t.getImage(this.map._requestManager.transformRequest(i,t.ResourceType.Tile),(function(i,o){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(i)e.state="errored",n(i);else if(o){r.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;var a=r.map.painter.context,s=a.gl;e.texture=r.map.painter.getTileTexture(o.width),e.texture?e.texture.update(o,{useMipmap:!0}):(e.texture=new t.Texture(a,o,s.RGBA,{useMipmap:!0}),e.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST),a.extTextureFilterAnisotropic&&s.texParameterf(s.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax)),e.state="loaded",t.cacheEntryPossiblyAdded(r.dispatcher),n(null)}}))},n.prototype.abortTile=function(t,e){t.request&&(t.request.cancel(),delete t.request),e()},n.prototype.unloadTile=function(t,e){t.texture&&this.map.painter.saveTileTexture(t.texture),e()},n.prototype.hasTransition=function(){return!1},n}(t.Evented),A=function(e){function n(n,r,i,o){e.call(this,n,r,i,o),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},r),this.encoding=r.encoding||"mapbox"}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},n.prototype.loadTile=function(e,n){var r=this.map._requestManager.normalizeTileURL(e.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function i(t,r){t&&(e.state="errored",n(t)),r&&(e.dem=r,e.needsHillshadePrepare=!0,e.state="loaded",n(null))}e.request=t.getImage(this.map._requestManager.transformRequest(r,t.ResourceType.Tile),function(r,o){if(delete e.request,e.aborted)e.state="unloaded",n(null);else if(r)e.state="errored",n(r);else if(o){this.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;var a=t.window.ImageBitmap&&o instanceof t.window.ImageBitmap&&t.offscreenCanvasSupported()?o:t.browser.getImageData(o,1),s={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:a,encoding:this.encoding};e.actor&&"expired"!==e.state||(e.actor=this.dispatcher.getActor(),e.actor.send("loadDEMTile",s,i.bind(this)))}}.bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)},n.prototype._getNeighboringTiles=function(e){var n=e.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,o=0===n.x?e.wrap-1:e.wrap,a=(n.x+1+r)%r,s=n.x+1===r?e.wrap+1:e.wrap,u={};return u[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y).key]={backfilled:!1},n.y>0&&(u[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y-1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y-1).key]={backfilled:!1}),n.y+1<r&&(u[new t.OverscaledTileID(e.overscaledZ,o,n.z,i,n.y+1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,e.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},u[new t.OverscaledTileID(e.overscaledZ,s,n.z,a,n.y+1).key]={backfilled:!1}),u},n.prototype.unloadTile=function(t){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&t.actor.send("removeDEMTile",{uid:t.uid,source:this.id})},n}(E),D=function(e){function n(n,r,i,o){e.call(this),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=i.getActor(),this.setEventedParent(o),this._data=r.data,this._options=t.extend({},r),this._collectResourceTiming=r.collectResourceTiming,this._resourceTiming=[],void 0!==r.maxzoom&&(this.maxzoom=r.maxzoom),r.type&&(this.type=r.type),r.attribution&&(this.attribution=r.attribution),this.promoteId=r.promoteId;var a=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:r.cluster||!1,geojsonVtOptions:{buffer:(void 0!==r.buffer?r.buffer:128)*a,tolerance:(void 0!==r.tolerance?r.tolerance:.375)*a,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:r.lineMetrics||!1,generateId:r.generateId||!1},superclusterOptions:{maxZoom:void 0!==r.clusterMaxZoom?Math.min(r.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:t.EXTENT,radius:(r.clusterRadius||50)*a,log:!1,generateId:r.generateId||!1},clusterProperties:r.clusterProperties},r.workerOptions)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(n){if(n)e.fire(new t.ErrorEvent(n));else{var r={dataType:"source",sourceDataType:"metadata"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(r.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire(new t.Event("data",r))}}))},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.setData=function(e){var n=this;return this._data=e,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(e){if(e)n.fire(new t.ErrorEvent(e));else{var r={dataType:"source",sourceDataType:"content"};n._collectResourceTiming&&n._resourceTiming&&n._resourceTiming.length>0&&(r.resourceTiming=n._resourceTiming,n._resourceTiming=[]),n.fire(new t.Event("data",r))}})),this},n.prototype.getClusterExpansionZoom=function(t,e){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:t,source:this.id},e),this},n.prototype.getClusterChildren=function(t,e){return this.actor.send("geojson.getClusterChildren",{clusterId:t,source:this.id},e),this},n.prototype.getClusterLeaves=function(t,e,n,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:t,limit:e,offset:n},r),this},n.prototype._updateWorkerData=function(e){var n=this;this._loaded=!1;var r=t.extend({},this.workerOptions),i=this._data;"string"==typeof i?(r.request=this.map._requestManager.transformRequest(t.browser.resolveURL(i),t.ResourceType.Source),r.request.collectResourceTiming=this._collectResourceTiming):r.data=JSON.stringify(i),this.actor.send(this.type+".loadData",r,(function(t,i){n._removed||i&&i.abandoned||(n._loaded=!0,i&&i.resourceTiming&&i.resourceTiming[n.id]&&(n._resourceTiming=i.resourceTiming[n.id].slice(0)),n.actor.send(n.type+".coalesce",{source:r.source},null),e(t))}))},n.prototype.loaded=function(){return this._loaded},n.prototype.loadTile=function(e,n){var r=this,i=e.actor?"reloadTile":"loadTile";e.actor=this.actor,e.request=this.actor.send(i,{type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(function(t,o){return delete e.request,e.unloadVectorData(),e.aborted?n(null):t?n(t):(e.loadVectorData(o,r.map.painter,"reloadTile"===i),n(null))}))},n.prototype.abortTile=function(t){t.request&&(t.request.cancel(),delete t.request),t.aborted=!0},n.prototype.unloadTile=function(t){t.unloadVectorData(),this.actor.send("removeTile",{uid:t.uid,type:this.type,source:this.id})},n.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},n.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},n.prototype.hasTransition=function(){return!1},n}(t.Evented),C=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),P=function(e){function n(t,n,r,i){e.call(this),this.id=t,this.dispatcher=r,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(i),this.options=n}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(e,n){var r=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),(function(i,o){r._loaded=!0,i?r.fire(new t.ErrorEvent(i)):o&&(r.image=o,e&&(r.coordinates=e),n&&n(),r._finishLoading())}))},n.prototype.loaded=function(){return this._loaded},n.prototype.updateImage=function(t){var e=this;return this.image&&t.url?(this.options.url=t.url,this.load(t.coordinates,(function(){e.texture=null})),this):this},n.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},n.prototype.onAdd=function(t){this.map=t,this.load()},n.prototype.setCoordinates=function(e){var n=this;this.coordinates=e;var r=e.map(t.MercatorCoordinate.fromLngLat);this.tileID=function(e){for(var n=1/0,r=1/0,i=-1/0,o=-1/0,a=0,s=e;a<s.length;a+=1){var u=s[a];n=Math.min(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.x),o=Math.max(o,u.y)}var l=Math.max(i-n,o-r),c=Math.max(0,Math.floor(-Math.log(l)/Math.LN2)),d=Math.pow(2,c);return new t.CanonicalTileID(c,Math.floor((n+i)/2*d),Math.floor((r+o)/2*d))}(r),this.minzoom=this.maxzoom=this.tileID.z;var i=r.map((function(t){return n.tileID.getTilePoint(t)._round()}));return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(i[0].x,i[0].y,0,0),this._boundsArray.emplaceBack(i[1].x,i[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(i[3].x,i[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(i[2].x,i[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},n.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var e=this.map.painter.context,n=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,C.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(e,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},n.prototype.loadTile=function(t,e){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={},e(null)):(t.state="errored",e(null))},n.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return!1},n}(t.Evented),I=function(e){function n(t,n,r,i){e.call(this,t,n,r,i),this.roundZoom=!0,this.type="video",this.options=n}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){var e=this;this._loaded=!1;var n=this.options;this.urls=[];for(var r=0,i=n.urls;r<i.length;r+=1)this.urls.push(this.map._requestManager.transformRequest(i[r],t.ResourceType.Source).url);t.getVideo(this.urls,(function(n,r){e._loaded=!0,n?e.fire(new t.ErrorEvent(n)):r&&(e.video=r,e.video.loop=!0,e.video.addEventListener("playing",(function(){e.map.triggerRepaint()})),e.map&&e.video.play(),e._finishLoading())}))},n.prototype.pause=function(){this.video&&this.video.pause()},n.prototype.play=function(){this.video&&this.video.play()},n.prototype.seek=function(e){if(this.video){var n=this.video.seekable;e<n.start(0)||e>n.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+n.start(0)+" and "+n.end(0)+"-second mark."))):this.video.currentTime=e}},n.prototype.getVideo=function(){return this.video},n.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},n.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var e=this.map.painter.context,n=e.gl;for(var r in this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,C.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(e,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this.tiles){var i=this.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this.video&&!this.video.paused},n}(P),O=function(e){function n(n,r,i,o){e.call(this,n,r,i,o),r.coordinates?Array.isArray(r.coordinates)&&4===r.coordinates.length&&!r.coordinates.some((function(t){return!Array.isArray(t)||2!==t.length||t.some((function(t){return"number"!=typeof t}))}))||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'missing required property "coordinates"'))),r.animate&&"boolean"!=typeof r.animate&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'optional "animate" property must be a boolean value'))),r.canvas?"string"==typeof r.canvas||r.canvas instanceof t.window.HTMLCanvasElement||this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+n,null,'missing required property "canvas"'))),this.options=r,this.animate=void 0===r.animate||r.animate}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},n.prototype.getCanvas=function(){return this.canvas},n.prototype.onAdd=function(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()},n.prototype.onRemove=function(){this.pause()},n.prototype.prepare=function(){var e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var n=this.map.painter.context,r=n.gl;for(var i in this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,C.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(n,this.canvas,r.RGBA,{premultiply:!0}),this.tiles){var o=this.tiles[i];"loaded"!==o.state&&(o.state="loaded",o.texture=this.texture)}}},n.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},n.prototype.hasTransition=function(){return this._playing},n.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var n=e[t];if(isNaN(n)||n<=0)return!0}return!1},n}(P),R={vector:S,raster:E,"raster-dem":A,geojson:D,video:I,image:P,canvas:O};function Y(e,n){var r=t.identity([]);return t.translate(r,r,[1,1,0]),t.scale(r,r,[.5*e.width,.5*e.height,1]),t.multiply(r,r,e.calculatePosMatrix(n.toUnwrapped()))}function F(t,e,n,r,i,o){var a=function(t,e,n){if(t)for(var r=0,i=t;r<i.length;r+=1){var o=e[i[r]];if(o&&o.source===n&&"fill-extrusion"===o.type)return!0}else for(var a in e){var s=e[a];if(s.source===n&&"fill-extrusion"===s.type)return!0}return!1}(i&&i.layers,e,t.id),s=o.maxPitchScaleFactor(),u=t.tilesIn(r,s,a);u.sort(j);for(var l=[],c=0,d=u;c<d.length;c+=1){var h=d[c];l.push({wrappedTileID:h.tileID.wrapped().key,queryResults:h.tile.queryRenderedFeatures(e,n,t._state,h.queryGeometry,h.cameraQueryGeometry,h.scale,i,o,s,Y(t.transform,h.tileID))})}var f=function(t){for(var e={},n={},r=0,i=t;r<i.length;r+=1){var o=i[r],a=o.queryResults,s=o.wrappedTileID,u=n[s]=n[s]||{};for(var l in a)for(var c=a[l],d=u[l]=u[l]||{},h=e[l]=e[l]||[],f=0,p=c;f<p.length;f+=1){var m=p[f];d[m.featureIndex]||(d[m.featureIndex]=!0,h.push(m))}}return e}(l);for(var p in f)f[p].forEach((function(e){var n=e.feature,r=t.getFeatureState(n.layer["source-layer"],n.id);n.source=n.layer.source,n.layer["source-layer"]&&(n.sourceLayer=n.layer["source-layer"]),n.state=r}));return f}function j(t,e){var n=t.tileID,r=e.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}var z=function(t,e){this.max=t,this.onRemove=e,this.reset()};z.prototype.reset=function(){for(var t in this.data)for(var e=0,n=this.data[t];e<n.length;e+=1){var r=n[e];r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value)}return this.data={},this.order=[],this},z.prototype.add=function(t,e,n){var r=this,i=t.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);var o={value:e,timeout:void 0};if(void 0!==n&&(o.timeout=setTimeout((function(){r.remove(t,o)}),n)),this.data[i].push(o),this.order.push(i),this.order.length>this.max){var a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this},z.prototype.has=function(t){return t.wrapped().key in this.data},z.prototype.getAndRemove=function(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null},z.prototype._getAndRemoveByKey=function(t){var e=this.data[t].shift();return e.timeout&&clearTimeout(e.timeout),0===this.data[t].length&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),e.value},z.prototype.getByKey=function(t){var e=this.data[t];return e?e[0].value:null},z.prototype.get=function(t){return this.has(t)?this.data[t.wrapped().key][0].value:null},z.prototype.remove=function(t,e){if(!this.has(t))return this;var n=t.wrapped().key,r=void 0===e?0:this.data[n].indexOf(e),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this},z.prototype.setMaxSize=function(t){for(this.max=t;this.order.length>this.max;){var e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this},z.prototype.filter=function(t){var e=[];for(var n in this.data)for(var r=0,i=this.data[n];r<i.length;r+=1){var o=i[r];t(o.value)||e.push(o)}for(var a=0,s=e;a<s.length;a+=1){var u=s[a];this.remove(u.value.tileID,u)}};var N=function(t,e,n){this.context=t;var r=t.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};N.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},N.prototype.updateData=function(t){var e=this.context.gl;this.context.unbindVAO(),this.bind(),e.bufferSubData(e.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)},N.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var B={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},U=function(t,e,n,r){this.length=e.length,this.attributes=n,this.itemSize=e.bytesPerElement,this.dynamicDraw=r,this.context=t;var i=t.gl;this.buffer=i.createBuffer(),t.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,e.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete e.arrayBuffer};U.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},U.prototype.updateData=function(t){var e=this.context.gl;this.bind(),e.bufferSubData(e.ARRAY_BUFFER,0,t.arrayBuffer)},U.prototype.enableAttributes=function(t,e){for(var n=0;n<this.attributes.length;n++){var r=e.attributes[this.attributes[n].name];void 0!==r&&t.enableVertexAttribArray(r)}},U.prototype.setVertexAttribPointers=function(t,e,n){for(var r=0;r<this.attributes.length;r++){var i=this.attributes[r],o=e.attributes[i.name];void 0!==o&&t.vertexAttribPointer(o,i.components,t[B[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}},U.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var H=function(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};H.prototype.get=function(){return this.current},H.prototype.set=function(t){},H.prototype.getDefault=function(){return this.default},H.prototype.setDefault=function(){this.set(this.default)};var V=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getDefault=function(){return t.Color.transparent},n.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},n}(H),W=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 1},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)},e}(H),G=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)},e}(H),q=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[!0,!0,!0,!0]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(H),X=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)},e}(H),Z=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 255},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)},e}(H),K=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},e.prototype.set=function(t){var e=this.current;(t.func!==e.func||t.ref!==e.ref||t.mask!==e.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)},e}(H),J=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)},e}(H),$=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.current=t,this.dirty=!1}},e}(H),Q=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return[0,1]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)},e}(H),tt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this.current=t,this.dirty=!1}},e}(H),et=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.LESS},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)},e}(H),nt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.BLEND):e.disable(e.BLEND),this.current=t,this.dirty=!1}},e}(H),rt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[t.ONE,t.ZERO]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)},e}(H),it=function(e){function n(){e.apply(this,arguments)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getDefault=function(){return t.Color.transparent},n.prototype.set=function(t){var e=this.current;(t.r!==e.r||t.g!==e.g||t.b!==e.b||t.a!==e.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)},n}(H),ot=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.FUNC_ADD},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)},e}(H),at=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;t?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this.current=t,this.dirty=!1}},e}(H),st=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.BACK},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)},e}(H),ut=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.CCW},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)},e}(H),lt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)},e}(H),ct=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return this.gl.TEXTURE0},e.prototype.set=function(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)},e}(H),dt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){var t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]},e.prototype.set=function(t){var e=this.current;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)},e}(H),ht=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,t),this.current=t,this.dirty=!1}},e}(H),ft=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindRenderbuffer(e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(H),pt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindTexture(e.TEXTURE_2D,t),this.current=t,this.dirty=!1}},e}(H),mt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}},e}(H),_t=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){var e=this.gl;e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1},e}(H),yt=function(t){function e(e){t.call(this,e),this.vao=e.extVertexArrayObject}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e.prototype.set=function(t){this.vao&&(t!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(t),this.current=t,this.dirty=!1)},e}(H),vt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return 4},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}},e}(H),gt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}},e}(H),xt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return!1},e.prototype.set=function(t){if(t!==this.current||this.dirty){var e=this.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}},e}(H),bt=function(t){function e(e,n){t.call(this,e),this.context=e,this.parent=n}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getDefault=function(){return null},e}(H),wt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.setDirty=function(){this.dirty=!0},e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}},e}(bt),Mt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.set=function(t){if(t!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var e=this.gl;e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t),this.current=t,this.dirty=!1}},e}(bt),Lt=function(t,e,n,r){this.context=t,this.width=e,this.height=n;var i=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new wt(t,i),r&&(this.depthAttachment=new Mt(t,i))};Lt.prototype.destroy=function(){var t=this.context.gl,e=this.colorAttachment.get();if(e&&t.deleteTexture(e),this.depthAttachment){var n=this.depthAttachment.get();n&&t.deleteRenderbuffer(n)}t.deleteFramebuffer(this.framebuffer)};var kt=function(t,e,n){this.func=t,this.mask=e,this.range=n};kt.ReadOnly=!1,kt.ReadWrite=!0,kt.disabled=new kt(519,kt.ReadOnly,[0,1]);var Tt=function(t,e,n,r,i,o){this.test=t,this.ref=e,this.mask=n,this.fail=r,this.depthFail=i,this.pass=o};Tt.disabled=new Tt({func:519,mask:0},0,0,7680,7680,7680);var St=function(t,e,n){this.blendFunction=t,this.blendColor=e,this.mask=n};St.disabled=new St(St.Replace=[1,0],t.Color.transparent,[!1,!1,!1,!1]),St.unblended=new St(St.Replace,t.Color.transparent,[!0,!0,!0,!0]),St.alphaBlended=new St([1,771],t.Color.transparent,[!0,!0,!0,!0]);var Et=function(t,e,n){this.enable=t,this.mode=e,this.frontFace=n};Et.disabled=new Et(!1,1029,2305),Et.backCCW=new Et(!0,1029,2305);var At=function(t){this.gl=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new V(this),this.clearDepth=new W(this),this.clearStencil=new G(this),this.colorMask=new q(this),this.depthMask=new X(this),this.stencilMask=new Z(this),this.stencilFunc=new K(this),this.stencilOp=new J(this),this.stencilTest=new $(this),this.depthRange=new Q(this),this.depthTest=new tt(this),this.depthFunc=new et(this),this.blend=new nt(this),this.blendFunc=new rt(this),this.blendColor=new it(this),this.blendEquation=new ot(this),this.cullFace=new at(this),this.cullFaceSide=new st(this),this.frontFace=new ut(this),this.program=new lt(this),this.activeTexture=new ct(this),this.viewport=new dt(this),this.bindFramebuffer=new ht(this),this.bindRenderbuffer=new ft(this),this.bindTexture=new pt(this),this.bindVertexBuffer=new mt(this),this.bindElementBuffer=new _t(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new yt(this),this.pixelStoreUnpack=new vt(this),this.pixelStoreUnpackPremultiplyAlpha=new gt(this),this.pixelStoreUnpackFlipY=new xt(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=t.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&t.getExtension("OES_texture_half_float_linear"),this.extTimerQuery=t.getExtension("EXT_disjoint_timer_query")};At.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},At.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},At.prototype.createIndexBuffer=function(t,e){return new N(this,t,e)},At.prototype.createVertexBuffer=function(t,e,n){return new U(this,t,e,n)},At.prototype.createRenderbuffer=function(t,e,n){var r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,t,e,n),this.bindRenderbuffer.set(null),i},At.prototype.createFramebuffer=function(t,e,n){return new Lt(this,t,e,n)},At.prototype.clear=function(t){var e=t.color,n=t.depth,r=this.gl,i=0;e&&(i|=r.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(i|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),r.clear(i)},At.prototype.setCullFace=function(t){!1===t.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))},At.prototype.setDepthMode=function(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)},At.prototype.setStencilMode=function(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)},At.prototype.setColorMode=function(e){t.deepEqual(e.blendFunction,St.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)},At.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Dt=function(e){function n(n,r,i){var o=this;e.call(this),this.id=n,this.dispatcher=i,this.on("data",(function(t){"source"===t.dataType&&"metadata"===t.sourceDataType&&(o._sourceLoaded=!0),o._sourceLoaded&&!o._paused&&"source"===t.dataType&&"content"===t.sourceDataType&&(o.reload(),o.transform&&o.update(o.transform))})),this.on("error",(function(){o._sourceErrored=!0})),this._source=function(e,n,r,i){var o=new R[n.type](e,n,r,i);if(o.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+o.id);return t.bindAll(["load","abort","unload","serialize","prepare"],o),o}(n,r,i,this),this._tiles={},this._cache=new z(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new t.SourceFeatureState}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.onAdd=function(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(t)},n.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},n.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var t in this._tiles){var e=this._tiles[t];if("loaded"!==e.state&&"errored"!==e.state)return!1}return!0},n.prototype.getSource=function(){return this._source},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){if(this._paused){var t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform)}},n.prototype._loadTile=function(t,e){return this._source.loadTile(t,e)},n.prototype._unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t,(function(){}))},n.prototype._abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t,(function(){}))},n.prototype.serialize=function(){return this._source.serialize()},n.prototype.prepare=function(t){for(var e in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var n=this._tiles[e];n.upload(t),n.prepare(this.map.style.imageManager)}},n.prototype.getIds=function(){return t.values(this._tiles).map((function(t){return t.tileID})).sort(Ct).map((function(t){return t.key}))},n.prototype.getRenderableIds=function(e){var n=this,r=[];for(var i in this._tiles)this._isIdRenderable(i,e)&&r.push(this._tiles[i]);return e?r.sort((function(e,r){var i=e.tileID,o=r.tileID,a=new t.Point(i.canonical.x,i.canonical.y)._rotate(n.transform.angle),s=new t.Point(o.canonical.x,o.canonical.y)._rotate(n.transform.angle);return i.overscaledZ-o.overscaledZ||s.y-a.y||s.x-a.x})).map((function(t){return t.tileID.key})):r.map((function(t){return t.tileID})).sort(Ct).map((function(t){return t.key}))},n.prototype.hasRenderableParent=function(t){var e=this.findLoadedParent(t,0);return!!e&&this._isIdRenderable(e.tileID.key)},n.prototype._isIdRenderable=function(t,e){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(e||!this._tiles[t].holdingForFade())},n.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var t in this._cache.reset(),this._tiles)"errored"!==this._tiles[t].state&&this._reloadTile(t,"reloading")},n.prototype._reloadTile=function(t,e){var n=this._tiles[t];n&&("loading"!==n.state&&(n.state=e),this._loadTile(n,this._tileLoaded.bind(this,n,t,e)))},n.prototype._tileLoaded=function(e,n,r,i){if(i)return e.state="errored",void(404!==i.status?this._source.fire(new t.ErrorEvent(i,{tile:e})):this.update(this.transform));e.timeAdded=t.browser.now(),"expired"===r&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(n,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:e,coord:e.tileID}))},n.prototype._backfillDEM=function(t){for(var e=this.getRenderableIds(),n=0;n<e.length;n++){var r=e[n];if(t.neighboringTiles&&t.neighboringTiles[r]){var i=this.getTileByID(r);o(t,i),o(i,t)}}function o(t,e){t.needsHillshadePrepare=!0;var n=e.tileID.canonical.x-t.tileID.canonical.x,r=e.tileID.canonical.y-t.tileID.canonical.y,i=Math.pow(2,t.tileID.canonical.z),o=e.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),e.dem&&t.dem&&(t.dem.backfillBorder(e.dem,n,r),t.neighboringTiles&&t.neighboringTiles[o]&&(t.neighboringTiles[o].backfilled=!0)))}},n.prototype.getTile=function(t){return this.getTileByID(t.key)},n.prototype.getTileByID=function(t){return this._tiles[t]},n.prototype._retainLoadedChildren=function(t,e,n,r){for(var i in this._tiles){var o=this._tiles[i];if(!(r[i]||!o.hasData()||o.tileID.overscaledZ<=e||o.tileID.overscaledZ>n)){for(var a=o.tileID;o&&o.tileID.overscaledZ>e+1;){var s=o.tileID.scaledTo(o.tileID.overscaledZ-1);(o=this._tiles[s.key])&&o.hasData()&&(a=s)}for(var u=a;u.overscaledZ>e;)if(t[(u=u.scaledTo(u.overscaledZ-1)).key]){r[a.key]=a;break}}}},n.prototype.findLoadedParent=function(t,e){if(t.key in this._loadedParentTiles){var n=this._loadedParentTiles[t.key];return n&&n.tileID.overscaledZ>=e?n:null}for(var r=t.overscaledZ-1;r>=e;r--){var i=t.scaledTo(r),o=this._getLoadedTile(i);if(o)return o}},n.prototype._getLoadedTile=function(t){var e=this._tiles[t.key];return e&&e.hasData()?e:this._cache.getByKey(t.wrapped().key)},n.prototype.updateCacheSize=function(t){var e=Math.ceil(t.width/this._source.tileSize)+1,n=Math.ceil(t.height/this._source.tileSize)+1,r=Math.floor(e*n*5),i="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,r):r;this._cache.setMaxSize(i)},n.prototype.handleWrapJump=function(t){var e=Math.round((t-(void 0===this._prevLng?t:this._prevLng))/360);if(this._prevLng=t,e){var n={};for(var r in this._tiles){var i=this._tiles[r];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+e),n[i.tileID.key]=i}for(var o in this._tiles=n,this._timers)clearTimeout(this._timers[o]),delete this._timers[o];for(var a in this._tiles)this._setTileReloadTimer(a,this._tiles[a])}},n.prototype.update=function(e){var r=this;if(this.transform=e,this._sourceLoaded&&!this._paused){var i;this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?i=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(e){return new t.OverscaledTileID(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)})):(i=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(i=i.filter((function(t){return r._source.hasTile(t)})))):i=[];var o=e.coveringZoomLevel(this._source),a=Math.max(o-n.maxOverzooming,this._source.minzoom),s=Math.max(o+n.maxUnderzooming,this._source.minzoom),u=this._updateRetainedTiles(i,o);if(Pt(this._source.type)){for(var l={},c={},d=0,h=Object.keys(u);d<h.length;d+=1){var f=h[d],p=u[f],m=this._tiles[f];if(m&&!(m.fadeEndTime&&m.fadeEndTime<=t.browser.now())){var _=this.findLoadedParent(p,a);_&&(this._addTile(_.tileID),l[_.tileID.key]=_.tileID),c[f]=p}}for(var y in this._retainLoadedChildren(c,o,s,u),l)u[y]||(this._coveredTiles[y]=!0,u[y]=l[y])}for(var v in u)this._tiles[v].clearFadeHold();for(var g=0,x=t.keysDifference(this._tiles,u);g<x.length;g+=1){var b=x[g],w=this._tiles[b];w.hasSymbolBuckets&&!w.holdingForFade()?w.setHoldDuration(this.map._fadeDuration):w.hasSymbolBuckets&&!w.symbolFadeFinished()||this._removeTile(b)}this._updateLoadedParentTileCache()}},n.prototype.releaseSymbolFadeTiles=function(){for(var t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)},n.prototype._updateRetainedTiles=function(t,e){for(var r={},i={},o=Math.max(e-n.maxOverzooming,this._source.minzoom),a=Math.max(e+n.maxUnderzooming,this._source.minzoom),s={},u=0,l=t;u<l.length;u+=1){var c=l[u],d=this._addTile(c);r[c.key]=c,d.hasData()||e<this._source.maxzoom&&(s[c.key]=c)}this._retainLoadedChildren(s,e,a,r);for(var h=0,f=t;h<f.length;h+=1){var p=f[h],m=this._tiles[p.key];if(!m.hasData()){if(e+1>this._source.maxzoom){var _=p.children(this._source.maxzoom)[0],y=this.getTile(_);if(y&&y.hasData()){r[_.key]=_;continue}}else{var v=p.children(this._source.maxzoom);if(r[v[0].key]&&r[v[1].key]&&r[v[2].key]&&r[v[3].key])continue}for(var g=m.wasRequested(),x=p.overscaledZ-1;x>=o;--x){var b=p.scaledTo(x);if(i[b.key])break;if(i[b.key]=!0,!(m=this.getTile(b))&&g&&(m=this._addTile(b)),m&&(r[b.key]=b,g=m.wasRequested(),m.hasData()))break}}}return r},n.prototype._updateLoadedParentTileCache=function(){for(var t in this._loadedParentTiles={},this._tiles){for(var e=[],n=void 0,r=this._tiles[t].tileID;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){n=this._loadedParentTiles[r.key];break}e.push(r.key);var i=r.scaledTo(r.overscaledZ-1);if(n=this._getLoadedTile(i))break;r=i}for(var o=0,a=e;o<a.length;o+=1)this._loadedParentTiles[a[o]]=n}},n.prototype._addTile=function(e){var n=this._tiles[e.key];if(n)return n;(n=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,n),n.tileID=e,this._state.initializeTileState(n,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,n)));var r=Boolean(n);return r||(n=new t.Tile(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(n,this._tileLoaded.bind(this,n,e.key,n.state))),n?(n.uses++,this._tiles[e.key]=n,r||this._source.fire(new t.Event("dataloading",{tile:n,coord:n.tileID,dataType:"source"})),n):null},n.prototype._setTileReloadTimer=function(t,e){var n=this;t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);var r=e.getExpiryTimeout();r&&(this._timers[t]=setTimeout((function(){n._reloadTile(t,"expired"),delete n._timers[t]}),r))},n.prototype._removeTile=function(t){var e=this._tiles[t];e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),e.uses>0||(e.hasData()&&"reloading"!==e.state?this._cache.add(e.tileID,e,e.getExpiryTimeout()):(e.aborted=!0,this._abortTile(e),this._unloadTile(e))))},n.prototype.clearTiles=function(){for(var t in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(t);this._cache.reset()},n.prototype.tilesIn=function(e,n,r){var i=this,o=[],a=this.transform;if(!a)return o;for(var s=r?a.getCameraQueryGeometry(e):e,u=e.map((function(t){return a.pointCoordinate(t)})),l=s.map((function(t){return a.pointCoordinate(t)})),c=this.getIds(),d=1/0,h=1/0,f=-1/0,p=-1/0,m=0,_=l;m<_.length;m+=1){var y=_[m];d=Math.min(d,y.x),h=Math.min(h,y.y),f=Math.max(f,y.x),p=Math.max(p,y.y)}for(var v=function(e){var r=i._tiles[c[e]];if(!r.holdingForFade()){var s=r.tileID,m=Math.pow(2,a.zoom-r.tileID.overscaledZ),_=n*r.queryPadding*t.EXTENT/r.tileSize/m,y=[s.getTilePoint(new t.MercatorCoordinate(d,h)),s.getTilePoint(new t.MercatorCoordinate(f,p))];if(y[0].x-_<t.EXTENT&&y[0].y-_<t.EXTENT&&y[1].x+_>=0&&y[1].y+_>=0){var v=u.map((function(t){return s.getTilePoint(t)})),g=l.map((function(t){return s.getTilePoint(t)}));o.push({tile:r,tileID:s,queryGeometry:v,cameraQueryGeometry:g,scale:m})}}},g=0;g<c.length;g++)v(g);return o},n.prototype.getVisibleCoordinates=function(t){for(var e=this,n=this.getRenderableIds(t).map((function(t){return e._tiles[t].tileID})),r=0,i=n;r<i.length;r+=1){var o=i[r];o.posMatrix=this.transform.calculatePosMatrix(o.toUnwrapped())}return n},n.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(Pt(this._source.type))for(var e in this._tiles){var n=this._tiles[e];if(void 0!==n.fadeEndTime&&n.fadeEndTime>=t.browser.now())return!0}return!1},n.prototype.setFeatureState=function(t,e,n){this._state.updateState(t=t||"_geojsonTileLayer",e,n)},n.prototype.removeFeatureState=function(t,e,n){this._state.removeFeatureState(t=t||"_geojsonTileLayer",e,n)},n.prototype.getFeatureState=function(t,e){return this._state.getState(t=t||"_geojsonTileLayer",e)},n.prototype.setDependencies=function(t,e,n){var r=this._tiles[t];r&&r.setDependencies(e,n)},n.prototype.reloadTilesForDependencies=function(t,e){for(var n in this._tiles)this._tiles[n].hasDependency(t,e)&&this._reloadTile(n,"reloading");this._cache.filter((function(n){return!n.hasDependency(t,e)}))},n}(t.Evented);function Ct(t,e){var n=Math.abs(2*t.wrap)-+(t.wrap<0),r=Math.abs(2*e.wrap)-+(e.wrap<0);return t.overscaledZ-e.overscaledZ||r-n||e.canonical.y-t.canonical.y||e.canonical.x-t.canonical.x}function Pt(t){return"raster"===t||"image"===t||"video"===t}function It(){return new t.window.Worker(fi.workerUrl)}Dt.maxOverzooming=10,Dt.maxUnderzooming=3;var Ot=function(){this.active={}};Ot.prototype.acquire=function(t){if(!this.workers)for(this.workers=[];this.workers.length<Ot.workerCount;)this.workers.push(new It);return this.active[t]=!0,this.workers.slice()},Ot.prototype.release=function(t){delete this.active[t],0===Object.keys(this.active).length&&(this.workers.forEach((function(t){t.terminate()})),this.workers=null)};var Rt,Yt=Math.floor(t.browser.hardwareConcurrency/2);function Ft(e,n){var r={};for(var i in e)"ref"!==i&&(r[i]=e[i]);return t.refProperties.forEach((function(t){t in n&&(r[t]=n[t])})),r}function jt(t){t=t.slice();for(var e=Object.create(null),n=0;n<t.length;n++)e[t[n].id]=t[n];for(var r=0;r<t.length;r++)"ref"in t[r]&&(t[r]=Ft(t[r],e[t[r].ref]));return t}Ot.workerCount=Math.max(Math.min(Yt,6),1);var zt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Nt(t,e,n){n.push({command:zt.addSource,args:[t,e[t]]})}function Bt(t,e,n){e.push({command:zt.removeSource,args:[t]}),n[t]=!0}function Ut(t,e,n,r){Bt(t,n,r),Nt(t,e,n)}function Ht(e,n,r){var i;for(i in e[r])if(e[r].hasOwnProperty(i)&&"data"!==i&&!t.deepEqual(e[r][i],n[r][i]))return!1;for(i in n[r])if(n[r].hasOwnProperty(i)&&"data"!==i&&!t.deepEqual(e[r][i],n[r][i]))return!1;return!0}function Vt(e,n,r,i,o,a){var s;for(s in n=n||{},e=e||{})e.hasOwnProperty(s)&&(t.deepEqual(e[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}));for(s in n)n.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t.deepEqual(e[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}))}function Wt(t){return t.id}function Gt(t,e){return t[e.id]=e,t}var qt=function(t,e,n){var r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(t/n),this.yCellCount=Math.ceil(e/n);for(var o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=e,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/e,this.boxUid=0,this.circleUid=0};function Xt(e,n,r,i,o){var a=t.create();return n?(t.scale(a,a,[1/o,1/o,1]),r||t.rotateZ(a,a,i.angle)):t.multiply(a,i.labelPlaneMatrix,e),a}function Zt(e,n,r,i,o){if(n){var a=t.clone(e);return t.scale(a,a,[o,o,1]),r||t.rotateZ(a,a,-i.angle),a}return i.glCoordMatrix}function Kt(e,n){var r=[e.x,e.y,0,1];ae(r,r,n);var i=r[3];return{point:new t.Point(r[0]/i,r[1]/i),signedDistanceFromCamera:i}}function Jt(t,e){var n=t[0]/t[3],r=t[1]/t[3];return n>=-e[0]&&n<=e[0]&&r>=-e[1]&&r<=e[1]}function $t(e,n,r,i,o,a,s,u){var l=i?e.textSizeData:e.iconSizeData,c=t.evaluateSizeForZoom(l,r.transform.zoom),d=[256/r.width*2+1,256/r.height*2+1],h=i?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;h.clear();for(var f=e.lineVertexArray,p=i?e.text.placedSymbolArray:e.icon.placedSymbolArray,m=r.transform.width/r.transform.height,_=!1,y=0;y<p.length;y++){var v=p.get(y);if(v.hidden||v.writingMode===t.WritingMode.vertical&&!_)oe(v.numGlyphs,h);else{_=!1;var g=[v.anchorX,v.anchorY,0,1];if(t.transformMat4(g,g,n),Jt(g,d)){var x=.5+g[3]/r.transform.cameraToCenterDistance*.5,b=t.evaluateSizeForFeature(l,c,v),w=s?b*x:b/x,M=new t.Point(v.anchorX,v.anchorY),L=Kt(M,o).point,k={},T=ee(v,w,!1,u,n,o,a,e.glyphOffsetArray,f,h,L,M,k,m);_=T.useVertical,(T.notEnoughRoom||_||T.needsFlipping&&ee(v,w,!0,u,n,o,a,e.glyphOffsetArray,f,h,L,M,k,m).notEnoughRoom)&&oe(v.numGlyphs,h)}else oe(v.numGlyphs,h)}}i?e.text.dynamicLayoutVertexBuffer.updateData(h):e.icon.dynamicLayoutVertexBuffer.updateData(h)}function Qt(t,e,n,r,i,o,a,s,u,l,c,d){var h=s.glyphStartIndex+s.numGlyphs,f=s.lineStartIndex,p=s.lineStartIndex+s.lineLength,m=e.getoffsetX(s.glyphStartIndex),_=e.getoffsetX(h-1),y=re(t*m,n,r,i,o,a,s.segment,f,p,u,l,c,d);if(!y)return null;var v=re(t*_,n,r,i,o,a,s.segment,f,p,u,l,c,d);return v?{first:y,last:v}:null}function te(e,n,r,i){return e===t.WritingMode.horizontal&&Math.abs(r.y-n.y)>Math.abs(r.x-n.x)*i?{useVertical:!0}:(e===t.WritingMode.vertical?n.y<r.y:n.x>r.x)?{needsFlipping:!0}:null}function ee(e,n,r,i,o,a,s,u,l,c,d,h,f,p){var m,_=n/24,y=e.lineOffsetX*_,v=e.lineOffsetY*_;if(e.numGlyphs>1){var g=e.glyphStartIndex+e.numGlyphs,x=e.lineStartIndex,b=e.lineStartIndex+e.lineLength,w=Qt(_,u,y,v,r,d,h,e,l,a,f,!1);if(!w)return{notEnoughRoom:!0};var M=Kt(w.first.point,s).point,L=Kt(w.last.point,s).point;if(i&&!r){var k=te(e.writingMode,M,L,p);if(k)return k}m=[w.first];for(var T=e.glyphStartIndex+1;T<g-1;T++)m.push(re(_*u.getoffsetX(T),y,v,r,d,h,e.segment,x,b,l,a,f,!1));m.push(w.last)}else{if(i&&!r){var S=Kt(h,o).point,E=e.lineStartIndex+e.segment+1,A=new t.Point(l.getx(E),l.gety(E)),D=Kt(A,o),C=D.signedDistanceFromCamera>0?D.point:ne(h,A,S,1,o),P=te(e.writingMode,S,C,p);if(P)return P}var I=re(_*u.getoffsetX(e.glyphStartIndex),y,v,r,d,h,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,l,a,f,!1);if(!I)return{notEnoughRoom:!0};m=[I]}for(var O=0,R=m;O<R.length;O+=1){var Y=R[O];t.addDynamicAttributes(c,Y.point,Y.angle)}return{}}function ne(t,e,n,r,i){var o=Kt(t.add(t.sub(e)._unit()),i).point,a=n.sub(o);return n.add(a._mult(r/a.mag()))}function re(e,n,r,i,o,a,s,u,l,c,d,h,f){var p=i?e-n:e+n,m=p>0?1:-1,_=0;i&&(m*=-1,_=Math.PI),m<0&&(_+=Math.PI);for(var y=m>0?u+s:u+s+1,v=y,g=o,x=o,b=0,w=0,M=Math.abs(p);b+w<=M;){if((y+=m)<u||y>=l)return null;if(x=g,void 0===(g=h[y])){var L=new t.Point(c.getx(y),c.gety(y)),k=Kt(L,d);if(k.signedDistanceFromCamera>0)g=h[y]=k.point;else{var T=y-m;g=ne(0===b?a:new t.Point(c.getx(T),c.gety(T)),L,x,M-b+1,d)}}b+=w,w=x.dist(g)}var S=(M-b)/w,E=g.sub(x),A=E.mult(S)._add(x);return A._add(E._unit()._perp()._mult(r*m)),{point:A,angle:_+Math.atan2(g.y-x.y,g.x-x.x),tileDistance:f?{prevTileDistance:y-m===v?0:c.gettileUnitDistanceFromAnchor(y-m),lastSegmentViewportDistance:M-b}:null}}qt.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},qt.prototype.insert=function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},qt.prototype.insertCircle=function(t,e,n,r){this._forEachCell(e-r,n-r,e+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(e),this.circles.push(n),this.circles.push(r)},qt.prototype._insertBoxCell=function(t,e,n,r,i,o){this.boxCells[i].push(o)},qt.prototype._insertCircleCell=function(t,e,n,r,i,o){this.circleCells[i].push(o)},qt.prototype._query=function(t,e,n,r,i,o){if(n<0||t>this.width||r<0||e>this.height)return!i&&[];var a=[];if(t<=0&&e<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(var s=0;s<this.boxKeys.length;s++)a.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var u=0;u<this.circleKeys.length;u++){var l=this.circles[3*u],c=this.circles[3*u+1],d=this.circles[3*u+2];a.push({key:this.circleKeys[u],x1:l-d,y1:c-d,x2:l+d,y2:c+d})}return o?a.filter(o):a}return this._forEachCell(t,e,n,r,this._queryCell,a,{hitTest:i,seenUids:{box:{},circle:{}}},o),i?a.length>0:a},qt.prototype._queryCircle=function(t,e,n,r,i){var o=t-n,a=t+n,s=e-n,u=e+n;if(a<0||o>this.width||u<0||s>this.height)return!r&&[];var l=[];return this._forEachCell(o,s,a,u,this._queryCellCircle,l,{hitTest:r,circle:{x:t,y:e,radius:n},seenUids:{box:{},circle:{}}},i),r?l.length>0:l},qt.prototype.query=function(t,e,n,r,i){return this._query(t,e,n,r,!1,i)},qt.prototype.hitTest=function(t,e,n,r,i){return this._query(t,e,n,r,!0,i)},qt.prototype.hitTestCircle=function(t,e,n,r){return this._queryCircle(t,e,n,!0,r)},qt.prototype._queryCell=function(t,e,n,r,i,o,a,s){var u=a.seenUids,l=this.boxCells[i];if(null!==l)for(var c=this.bboxes,d=0,h=l;d<h.length;d+=1){var f=h[d];if(!u.box[f]){u.box[f]=!0;var p=4*f;if(t<=c[p+2]&&e<=c[p+3]&&n>=c[p+0]&&r>=c[p+1]&&(!s||s(this.boxKeys[f]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[f],x1:c[p],y1:c[p+1],x2:c[p+2],y2:c[p+3]})}}}var m=this.circleCells[i];if(null!==m)for(var _=this.circles,y=0,v=m;y<v.length;y+=1){var g=v[y];if(!u.circle[g]){u.circle[g]=!0;var x=3*g;if(this._circleAndRectCollide(_[x],_[x+1],_[x+2],t,e,n,r)&&(!s||s(this.circleKeys[g]))){if(a.hitTest)return o.push(!0),!0;var b=_[x],w=_[x+1],M=_[x+2];o.push({key:this.circleKeys[g],x1:b-M,y1:w-M,x2:b+M,y2:w+M})}}}},qt.prototype._queryCellCircle=function(t,e,n,r,i,o,a,s){var u=a.circle,l=a.seenUids,c=this.boxCells[i];if(null!==c)for(var d=this.bboxes,h=0,f=c;h<f.length;h+=1){var p=f[h];if(!l.box[p]){l.box[p]=!0;var m=4*p;if(this._circleAndRectCollide(u.x,u.y,u.radius,d[m+0],d[m+1],d[m+2],d[m+3])&&(!s||s(this.boxKeys[p])))return o.push(!0),!0}}var _=this.circleCells[i];if(null!==_)for(var y=this.circles,v=0,g=_;v<g.length;v+=1){var x=g[v];if(!l.circle[x]){l.circle[x]=!0;var b=3*x;if(this._circlesCollide(y[b],y[b+1],y[b+2],u.x,u.y,u.radius)&&(!s||s(this.circleKeys[x])))return o.push(!0),!0}}},qt.prototype._forEachCell=function(t,e,n,r,i,o,a,s){for(var u=this._convertToXCellCoord(t),l=this._convertToYCellCoord(e),c=this._convertToXCellCoord(n),d=this._convertToYCellCoord(r),h=u;h<=c;h++)for(var f=l;f<=d;f++)if(i.call(this,t,e,n,r,this.xCellCount*f+h,o,a,s))return},qt.prototype._convertToXCellCoord=function(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))},qt.prototype._convertToYCellCoord=function(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))},qt.prototype._circlesCollide=function(t,e,n,r,i,o){var a=r-t,s=i-e,u=n+o;return u*u>a*a+s*s},qt.prototype._circleAndRectCollide=function(t,e,n,r,i,o,a){var s=(o-r)/2,u=Math.abs(t-(r+s));if(u>s+n)return!1;var l=(a-i)/2,c=Math.abs(e-(i+l));if(c>l+n)return!1;if(u<=s||c<=l)return!0;var d=u-s,h=c-l;return d*d+h*h<=n*n};var ie=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function oe(t,e){for(var n=0;n<t;n++){var r=e.length;e.resize(r+4),e.float32.set(ie,3*r)}}function ae(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t[3]=n[3]*r+n[7]*i+n[15],t}var se=function(t,e,n){void 0===e&&(e=new qt(t.width+200,t.height+200,25)),void 0===n&&(n=new qt(t.width+200,t.height+200,25)),this.transform=t,this.grid=e,this.ignoredGrid=n,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+100,this.screenBottomBoundary=t.height+100,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200};function ue(t,e,n){t[e+4]=n?1:0}function le(e,n,r){return n*(t.EXTENT/(e.tileSize*Math.pow(2,r-e.tileID.overscaledZ)))}se.prototype.placeCollisionBox=function(t,e,n,r,i){var o=this.projectAndGetPerspectiveRatio(r,t.anchorPointX,t.anchorPointY),a=n*o.perspectiveRatio,s=t.x1*a+o.point.x,u=t.y1*a+o.point.y,l=t.x2*a+o.point.x,c=t.y2*a+o.point.y;return!this.isInsideGrid(s,u,l,c)||!e&&this.grid.hitTest(s,u,l,c,i)?{box:[],offscreen:!1}:{box:[s,u,l,c],offscreen:this.isOffscreen(s,u,l,c)}},se.prototype.approximateTileDistance=function(t,e,n,r,i){var o=t.lastSegmentViewportDistance*n;return t.prevTileDistance+o+((i?1:r/this.pitchfactor)-1)*o*Math.abs(Math.sin(e))},se.prototype.placeCollisionCircles=function(e,n,r,i,o,a,s,u,l,c,d,h,f){var p=[],m=this.projectAnchor(l,o.anchorX,o.anchorY),_=u/24,y=o.lineOffsetX*u,v=o.lineOffsetY*u,g=new t.Point(o.anchorX,o.anchorY),x=Qt(_,s,y,v,!1,Kt(g,c).point,g,o,a,c,{},!0),b=!1,w=!1,M=!0,L=m.perspectiveRatio*i,k=1/(i*r),T=0,S=0;x&&(T=this.approximateTileDistance(x.first.tileDistance,x.first.angle,k,m.cameraDistance,h),S=this.approximateTileDistance(x.last.tileDistance,x.last.angle,k,m.cameraDistance,h));for(var E=0;E<e.length;E+=5){var A=e[E],D=e[E+1],C=e[E+2],P=e[E+3];if(!x||P<-T||P>S)ue(e,E,!1);else{var I=this.projectPoint(l,A,D),O=C*L;if(p.length>0){var R=I.x-p[p.length-4],Y=I.y-p[p.length-3];if(O*O*2>R*R+Y*Y&&E+8<e.length){var F=e[E+8];if(F>-T&&F<S){ue(e,E,!1);continue}}}p.push(I.x,I.y,O,E/5),ue(e,E,!0);var j=I.x-O,z=I.y-O,N=I.x+O,B=I.y+O;if(M=M&&this.isOffscreen(j,z,N,B),w=w||this.isInsideGrid(j,z,N,B),!n&&this.grid.hitTestCircle(I.x,I.y,O,f)){if(!d)return{circles:[],offscreen:!1};b=!0}}}return{circles:b||!w?[]:p,offscreen:M}},se.prototype.queryRenderedSymbols=function(e){if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var n=[],r=1/0,i=1/0,o=-1/0,a=-1/0,s=0,u=e;s<u.length;s+=1){var l=u[s],c=new t.Point(l.x+100,l.y+100);r=Math.min(r,c.x),i=Math.min(i,c.y),o=Math.max(o,c.x),a=Math.max(a,c.y),n.push(c)}for(var d={},h={},f=0,p=this.grid.query(r,i,o,a).concat(this.ignoredGrid.query(r,i,o,a));f<p.length;f+=1){var m=p[f],_=m.key;if(void 0===d[_.bucketInstanceId]&&(d[_.bucketInstanceId]={}),!d[_.bucketInstanceId][_.featureIndex]){var y=[new t.Point(m.x1,m.y1),new t.Point(m.x2,m.y1),new t.Point(m.x2,m.y2),new t.Point(m.x1,m.y2)];t.polygonIntersectsPolygon(n,y)&&(d[_.bucketInstanceId][_.featureIndex]=!0,void 0===h[_.bucketInstanceId]&&(h[_.bucketInstanceId]=[]),h[_.bucketInstanceId].push(_.featureIndex))}}return h},se.prototype.insertCollisionBox=function(t,e,n,r,i){(e?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:r,collisionGroupID:i},t[0],t[1],t[2],t[3])},se.prototype.insertCollisionCircles=function(t,e,n,r,i){for(var o=e?this.ignoredGrid:this.grid,a={bucketInstanceId:n,featureIndex:r,collisionGroupID:i},s=0;s<t.length;s+=4)o.insertCircle(a,t[s],t[s+1],t[s+2])},se.prototype.projectAnchor=function(t,e,n){var r=[e,n,0,1];return ae(r,r,t),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5,cameraDistance:r[3]}},se.prototype.projectPoint=function(e,n,r){var i=[n,r,0,1];return ae(i,i,e),new t.Point((i[0]/i[3]+1)/2*this.transform.width+100,(-i[1]/i[3]+1)/2*this.transform.height+100)},se.prototype.projectAndGetPerspectiveRatio=function(e,n,r){var i=[n,r,0,1];return ae(i,i,e),{point:new t.Point((i[0]/i[3]+1)/2*this.transform.width+100,(-i[1]/i[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/i[3]*.5}},se.prototype.isOffscreen=function(t,e,n,r){return n<100||t>=this.screenRightBoundary||r<100||e>this.screenBottomBoundary},se.prototype.isInsideGrid=function(t,e,n,r){return n>=0&&t<this.gridRightBoundary&&r>=0&&e<this.gridBottomBoundary};var ce=function(t,e,n,r){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?e:-e))):r&&n?1:0,this.placed=n};ce.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var de=function(t,e,n,r,i){this.text=new ce(t?t.text:null,e,n,i),this.icon=new ce(t?t.icon:null,e,r,i)};de.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var he=function(t,e,n){this.text=t,this.icon=e,this.skipFade=n},fe=function(t,e,n,r,i){this.bucketInstanceId=t,this.featureIndex=e,this.sourceLayerIndex=n,this.bucketIndex=r,this.tileID=i},pe=function(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}};function me(e,n,r,i,o){var a=t.getAnchorAlignment(e),s=-(a.horizontalAlign-.5)*n,u=-(a.verticalAlign-.5)*r,l=t.evaluateVariableOffset(e,i);return new t.Point(s+l[0]*o,u+l[1]*o)}function _e(e,n,r,i,o,a){var s=e.x1,u=e.x2,l=e.y1,c=e.y2,d=e.anchorPointX,h=e.anchorPointY,f=new t.Point(n,r);return i&&f._rotate(o?a:-a),{x1:s+f.x,y1:l+f.y,x2:u+f.x,y2:c+f.y,anchorPointX:d,anchorPointY:h}}pe.prototype.get=function(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){var e=++this.maxGroupID;this.collisionGroups[t]={ID:e,predicate:function(t){return t.collisionGroupID===e}}}return this.collisionGroups[t]};var ye=function(t,e,n,r){this.transform=t.clone(),this.collisionIndex=new se(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=e,this.retainedQueryData={},this.collisionGroups=new pe(n),this.prevPlacement=r,r&&(r.prevPlacement=void 0),this.placedOrientations={}};function ve(t,e,n,r,i){t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0),t.emplaceBack(e?1:0,n?1:0,r||0,i||0)}ye.prototype.getBucketParts=function(e,n,r,i){var o=r.getBucket(n),a=r.latestFeatureIndex;if(o&&a&&n.id===o.layerIds[0]){var s=r.collisionBoxArray,u=o.layers[0].layout,l=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),c=r.tileSize/t.EXTENT,d=this.transform.calculatePosMatrix(r.tileID.toUnwrapped()),h=Xt(d,"map"===u.get("text-pitch-alignment"),"map"===u.get("text-rotation-alignment"),this.transform,le(r,1,this.transform.zoom));this.retainedQueryData[o.bucketInstanceId]=new fe(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,r.tileID);var f={bucket:o,layout:u,posMatrix:d,textLabelPlaneMatrix:h,scale:l,textPixelRatio:c,holdingForFade:r.holdingForFade(),collisionBoxArray:s,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(i)for(var p=0,m=o.sortKeyRanges;p<m.length;p+=1){var _=m[p];e.push({sortKey:_.sortKey,symbolInstanceStart:_.symbolInstanceStart,symbolInstanceEnd:_.symbolInstanceEnd,parameters:f})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:f})}},ye.prototype.attemptAnchorPlacement=function(t,e,n,r,i,o,a,s,u,l,c,d,h,f,p){var m,_=[d.textOffset0,d.textOffset1],y=me(t,n,r,_,i),v=this.collisionIndex.placeCollisionBox(_e(e,y.x,y.y,o,a,this.transform.angle),c,s,u,l.predicate);if(!p||0!==this.collisionIndex.placeCollisionBox(_e(p,y.x,y.y,o,a,this.transform.angle),c,s,u,l.predicate).box.length)return v.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[d.crossTileID]&&this.prevPlacement.placements[d.crossTileID]&&this.prevPlacement.placements[d.crossTileID].text&&(m=this.prevPlacement.variableOffsets[d.crossTileID].anchor),this.variableOffsets[d.crossTileID]={textOffset:_,width:n,height:r,anchor:t,textBoxScale:i,prevAnchor:m},this.markUsedJustification(h,t,d,f),h.allowVerticalPlacement&&(this.markUsedOrientation(h,f,d),this.placedOrientations[d.crossTileID]=f),{shift:y,placedGlyphBoxes:v}):void 0},ye.prototype.placeLayerBucketPart=function(e,n,r){var i=this,o=e.parameters,a=o.bucket,s=o.layout,u=o.posMatrix,l=o.textLabelPlaneMatrix,c=o.scale,d=o.textPixelRatio,h=o.holdingForFade,f=o.collisionBoxArray,p=o.partiallyEvaluatedTextSize,m=o.collisionGroup,_=s.get("text-optional"),y=s.get("icon-optional"),v=s.get("text-allow-overlap"),g=s.get("icon-allow-overlap"),x="map"===s.get("text-rotation-alignment"),b="map"===s.get("text-pitch-alignment"),w="none"!==s.get("icon-text-fit"),M="viewport-y"===s.get("symbol-z-order"),L=v&&(g||!a.hasIconData()||y),k=g&&(v||!a.hasTextData()||_);!a.collisionArrays&&f&&a.deserializeCollisionBoxes(f);var T=function(e,o){if(!n[e.crossTileID])if(h)i.placements[e.crossTileID]=new he(!1,!1,!1);else{var f,M=!1,T=!1,S=!0,E=null,A={box:null,offscreen:null},D={box:null,offscreen:null},C=null,P=null,I=0,O=0,R=0;o.textFeatureIndex&&(I=o.textFeatureIndex),o.verticalTextFeatureIndex&&(O=o.verticalTextFeatureIndex);var Y=o.textBox;if(Y){var F=function(n){var r=t.WritingMode.horizontal;if(a.allowVerticalPlacement&&!n&&i.prevPlacement){var o=i.prevPlacement.placedOrientations[e.crossTileID];o&&(i.placedOrientations[e.crossTileID]=o,i.markUsedOrientation(a,r=o,e))}return r},j=function(n,r){if(a.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&o.verticalTextBox)for(var i=0,s=a.writingModes;i<s.length&&(s[i]===t.WritingMode.vertical?(A=r(),D=A):A=n(),!(A&&A.box&&A.box.length));i+=1);else A=n()};if(s.get("text-variable-anchor")){var z=s.get("text-variable-anchor");if(i.prevPlacement&&i.prevPlacement.variableOffsets[e.crossTileID]){var N=i.prevPlacement.variableOffsets[e.crossTileID];z.indexOf(N.anchor)>0&&(z=z.filter((function(t){return t!==N.anchor}))).unshift(N.anchor)}var B=function(t,n,r){for(var o=t.x2-t.x1,s=t.y2-t.y1,l=e.textBoxScale,c=w&&!g?n:null,h={box:[],offscreen:!1},f=v?2*z.length:z.length,p=0;p<f;++p){var _=i.attemptAnchorPlacement(z[p%z.length],t,o,s,l,x,b,d,u,m,p>=z.length,e,a,r,c);if(_&&(h=_.placedGlyphBoxes)&&h.box&&h.box.length){M=!0,E=_.shift;break}}return h};j((function(){return B(Y,o.iconBox,t.WritingMode.horizontal)}),(function(){var n=o.verticalTextBox;return a.allowVerticalPlacement&&!(A&&A.box&&A.box.length)&&e.numVerticalGlyphVertices>0&&n?B(n,o.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}})),A&&(M=A.box,S=A.offscreen);var U=F(A&&A.box);if(!M&&i.prevPlacement){var H=i.prevPlacement.variableOffsets[e.crossTileID];H&&(i.variableOffsets[e.crossTileID]=H,i.markUsedJustification(a,H.anchor,e,U))}}else{var V=function(t,n){var r=i.collisionIndex.placeCollisionBox(t,v,d,u,m.predicate);return r&&r.box&&r.box.length&&(i.markUsedOrientation(a,n,e),i.placedOrientations[e.crossTileID]=n),r};j((function(){return V(Y,t.WritingMode.horizontal)}),(function(){var n=o.verticalTextBox;return a.allowVerticalPlacement&&e.numVerticalGlyphVertices>0&&n?V(n,t.WritingMode.vertical):{box:null,offscreen:null}})),F(A&&A.box&&A.box.length)}}M=(f=A)&&f.box&&f.box.length>0,S=f&&f.offscreen;var W=o.textCircles;if(W){var G=a.text.placedSymbolArray.get(e.centerJustifiedTextSymbolIndex),q=t.evaluateSizeForFeature(a.textSizeData,p,G);C=i.collisionIndex.placeCollisionCircles(W,v,c,d,G,a.lineVertexArray,a.glyphOffsetArray,q,u,l,r,b,m.predicate),M=v||C.circles.length>0,S=S&&C.offscreen}if(o.iconFeatureIndex&&(R=o.iconFeatureIndex),o.iconBox){var X=function(t){var e=w&&E?_e(t,E.x,E.y,x,b,i.transform.angle):t;return i.collisionIndex.placeCollisionBox(e,g,d,u,m.predicate)};T=D&&D.box&&D.box.length&&o.verticalIconBox?(P=X(o.verticalIconBox)).box.length>0:(P=X(o.iconBox)).box.length>0,S=S&&P.offscreen}var Z=_||0===e.numHorizontalGlyphVertices&&0===e.numVerticalGlyphVertices,K=y||0===e.numIconVertices;Z||K?K?Z||(T=T&&M):M=T&&M:T=M=T&&M,M&&f&&f.box&&i.collisionIndex.insertCollisionBox(f.box,s.get("text-ignore-placement"),a.bucketInstanceId,D&&D.box&&O?O:I,m.ID),T&&P&&i.collisionIndex.insertCollisionBox(P.box,s.get("icon-ignore-placement"),a.bucketInstanceId,R,m.ID),M&&C&&i.collisionIndex.insertCollisionCircles(C.circles,s.get("text-ignore-placement"),a.bucketInstanceId,I,m.ID),i.placements[e.crossTileID]=new he(M||L,T||k,S||a.justReloaded),n[e.crossTileID]=!0}};if(M)for(var S=a.getSortedSymbolIndexes(this.transform.angle),E=S.length-1;E>=0;--E){var A=S[E];T(a.symbolInstances.get(A),a.collisionArrays[A])}else for(var D=e.symbolInstanceStart;D<e.symbolInstanceEnd;D++)T(a.symbolInstances.get(D),a.collisionArrays[D]);a.justReloaded=!1},ye.prototype.markUsedJustification=function(e,n,r,i){var o;o=i===t.WritingMode.vertical?r.verticalPlacedTextSymbolIndex:{left:r.leftJustifiedTextSymbolIndex,center:r.centerJustifiedTextSymbolIndex,right:r.rightJustifiedTextSymbolIndex}[t.getAnchorJustification(n)];for(var a=0,s=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex,r.verticalPlacedTextSymbolIndex];a<s.length;a+=1){var u=s[a];u>=0&&(e.text.placedSymbolArray.get(u).crossTileID=o>=0&&u!==o?0:r.crossTileID)}},ye.prototype.markUsedOrientation=function(e,n,r){for(var i=n===t.WritingMode.horizontal||n===t.WritingMode.horizontalOnly?n:0,o=n===t.WritingMode.vertical?n:0,a=0,s=[r.leftJustifiedTextSymbolIndex,r.centerJustifiedTextSymbolIndex,r.rightJustifiedTextSymbolIndex];a<s.length;a+=1)e.text.placedSymbolArray.get(s[a]).placedOrientation=i;r.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(r.verticalPlacedTextSymbolIndex).placedOrientation=o)},ye.prototype.commit=function(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;var e=this.prevPlacement,n=!1;this.prevZoomAdjustment=e?e.zoomAdjustment(this.transform.zoom):0;var r=e?e.symbolFadeChange(t):1,i=e?e.opacities:{},o=e?e.variableOffsets:{},a=e?e.placedOrientations:{};for(var s in this.placements){var u=this.placements[s],l=i[s];l?(this.opacities[s]=new de(l,r,u.text,u.icon),n=n||u.text!==l.text.placed||u.icon!==l.icon.placed):(this.opacities[s]=new de(null,r,u.text,u.icon,u.skipFade),n=n||u.text||u.icon)}for(var c in i){var d=i[c];if(!this.opacities[c]){var h=new de(d,r,!1,!1);h.isHidden()||(this.opacities[c]=h,n=n||d.text.placed||d.icon.placed)}}for(var f in o)this.variableOffsets[f]||!this.opacities[f]||this.opacities[f].isHidden()||(this.variableOffsets[f]=o[f]);for(var p in a)this.placedOrientations[p]||!this.opacities[p]||this.opacities[p].isHidden()||(this.placedOrientations[p]=a[p]);n?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)},ye.prototype.updateLayerOpacities=function(t,e){for(var n={},r=0,i=e;r<i.length;r+=1){var o=i[r],a=o.getBucket(t);a&&o.latestFeatureIndex&&t.id===a.layerIds[0]&&this.updateBucketOpacities(a,n,o.collisionBoxArray)}},ye.prototype.updateBucketOpacities=function(e,n,r){var i=this;e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear(),e.hasIconCollisionCircleData()&&e.iconCollisionCircle.collisionVertexArray.clear(),e.hasTextCollisionCircleData()&&e.textCollisionCircle.collisionVertexArray.clear();var o=e.layers[0].layout,a=new de(null,0,!1,!1,!0),s=o.get("text-allow-overlap"),u=o.get("icon-allow-overlap"),l=o.get("text-variable-anchor"),c="map"===o.get("text-rotation-alignment"),d="map"===o.get("text-pitch-alignment"),h="none"!==o.get("icon-text-fit"),f=new de(null,0,s&&(u||!e.hasIconData()||o.get("icon-optional")),u&&(s||!e.hasTextData()||o.get("text-optional")),!0);!e.collisionArrays&&r&&(e.hasIconCollisionBoxData()||e.hasIconCollisionCircleData()||e.hasTextCollisionBoxData()||e.hasTextCollisionCircleData())&&e.deserializeCollisionBoxes(r);for(var p=function(t,e,n){for(var r=0;r<e/4;r++)t.opacityVertexArray.emplaceBack(n)},m=function(r){var o=e.symbolInstances.get(r),s=o.numHorizontalGlyphVertices,u=o.numVerticalGlyphVertices,m=o.crossTileID,_=n[m],y=i.opacities[m];_?y=a:y||(i.opacities[m]=y=f),n[m]=!0;var v=o.numIconVertices>0,g=i.placedOrientations[o.crossTileID],x=g===t.WritingMode.vertical,b=g===t.WritingMode.horizontal||g===t.WritingMode.horizontalOnly;if(s>0||u>0){var w=Te(y.text);p(e.text,s,x?Se:w),p(e.text,u,b?Se:w);var M=y.text.isHidden();[o.rightJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.leftJustifiedTextSymbolIndex].forEach((function(t){t>=0&&(e.text.placedSymbolArray.get(t).hidden=M||x?1:0)})),o.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(o.verticalPlacedTextSymbolIndex).hidden=M||b?1:0);var L=i.variableOffsets[o.crossTileID];L&&i.markUsedJustification(e,L.anchor,o,g);var k=i.placedOrientations[o.crossTileID];k&&(i.markUsedJustification(e,"left",o,k),i.markUsedOrientation(e,k,o))}if(v){var T=Te(y.icon),S=!(h&&o.verticalPlacedIconSymbolIndex&&x);o.placedIconSymbolIndex>=0&&(p(e.icon,o.numIconVertices,S?T:Se),e.icon.placedSymbolArray.get(o.placedIconSymbolIndex).hidden=y.icon.isHidden()),o.verticalPlacedIconSymbolIndex>=0&&(p(e.icon,o.numVerticalIconVertices,S?Se:T),e.icon.placedSymbolArray.get(o.verticalPlacedIconSymbolIndex).hidden=y.icon.isHidden())}if(e.hasIconCollisionBoxData()||e.hasIconCollisionCircleData()||e.hasTextCollisionBoxData()||e.hasTextCollisionCircleData()){var E=e.collisionArrays[r];if(E){var A=new t.Point(0,0);if(E.textBox||E.verticalTextBox){var D=!0;if(l){var C=i.variableOffsets[m];C?(A=me(C.anchor,C.width,C.height,C.textOffset,C.textBoxScale),c&&A._rotate(d?i.transform.angle:-i.transform.angle)):D=!1}E.textBox&&ve(e.textCollisionBox.collisionVertexArray,y.text.placed,!D||x,A.x,A.y),E.verticalTextBox&&ve(e.textCollisionBox.collisionVertexArray,y.text.placed,!D||b,A.x,A.y)}var P=Boolean(!b&&E.verticalIconBox);E.iconBox&&ve(e.iconCollisionBox.collisionVertexArray,y.icon.placed,P,h?A.x:0,h?A.y:0),E.verticalIconBox&&ve(e.iconCollisionBox.collisionVertexArray,y.icon.placed,!P,h?A.x:0,h?A.y:0);var I=E.textCircles;if(I&&e.hasTextCollisionCircleData())for(var O=0;O<I.length;O+=5)ve(e.textCollisionCircle.collisionVertexArray,y.text.placed,_||0===I[O+4])}}},_=0;_<e.symbolInstances.length;_++)m(_);e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.hasIconCollisionCircleData()&&e.iconCollisionCircle.collisionVertexBuffer&&e.iconCollisionCircle.collisionVertexBuffer.updateData(e.iconCollisionCircle.collisionVertexArray),e.hasTextCollisionCircleData()&&e.textCollisionCircle.collisionVertexBuffer&&e.textCollisionCircle.collisionVertexBuffer.updateData(e.textCollisionCircle.collisionVertexArray)},ye.prototype.symbolFadeChange=function(t){return 0===this.fadeDuration?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},ye.prototype.zoomAdjustment=function(t){return Math.max(0,(this.transform.zoom-t)/1.5)},ye.prototype.hasTransitions=function(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration},ye.prototype.stillRecent=function(t,e){var n=this.zoomAtLastRecencyCheck===e?1-this.zoomAdjustment(e):1;return this.zoomAtLastRecencyCheck=e,this.commitTime+this.fadeDuration*n>t},ye.prototype.setStale=function(){this.stale=!0};var ge=Math.pow(2,25),xe=Math.pow(2,24),be=Math.pow(2,17),we=Math.pow(2,16),Me=Math.pow(2,9),Le=Math.pow(2,8),ke=Math.pow(2,1);function Te(t){if(0===t.opacity&&!t.placed)return 0;if(1===t.opacity&&t.placed)return 4294967295;var e=t.placed?1:0,n=Math.floor(127*t.opacity);return n*ge+e*xe+n*be+e*we+n*Me+e*Le+n*ke+e}var Se=0,Ee=function(t){this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Ee.prototype.continuePlacement=function(t,e,n,r,i){for(var o=this._bucketParts;this._currentTileIndex<t.length;)if(e.getBucketParts(o,r,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,i())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort((function(t,e){return t.sortKey-e.sortKey})));this._currentPartIndex<o.length;)if(e.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,n),this._currentPartIndex++,i())return!0;return!1};var Ae=function(t,e,n,r,i,o,a){this.placement=new ye(t,i,o,a),this._currentPlacementIndex=e.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1};Ae.prototype.isDone=function(){return this._done},Ae.prototype.continuePlacement=function(e,n,r){for(var i=this,o=t.browser.now(),a=function(){var e=t.browser.now()-o;return!i._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var s=n[e[this._currentPlacementIndex]],u=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=u)&&(!s.maxzoom||s.maxzoom>u)){if(this._inProgressLayer||(this._inProgressLayer=new Ee(s)),this._inProgressLayer.continuePlacement(r[s.source],this.placement,this._showCollisionBoxes,s,a))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Ae.prototype.commit=function(t){return this.placement.commit(t),this.placement};var De=512/t.EXTENT/2,Ce=function(t,e,n){this.tileID=t,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(var r=0;r<e.length;r++){var i=e.get(r),o=i.key;this.indexedSymbolInstances[o]||(this.indexedSymbolInstances[o]=[]),this.indexedSymbolInstances[o].push({crossTileID:i.crossTileID,coord:this.getScaledCoordinates(i,t)})}};Ce.prototype.getScaledCoordinates=function(e,n){var r=De/Math.pow(2,n.canonical.z-this.tileID.canonical.z);return{x:Math.floor((n.canonical.x*t.EXTENT+e.anchorX)*r),y:Math.floor((n.canonical.y*t.EXTENT+e.anchorY)*r)}},Ce.prototype.findMatches=function(t,e,n){for(var r=this.tileID.canonical.z<e.canonical.z?1:Math.pow(2,this.tileID.canonical.z-e.canonical.z),i=0;i<t.length;i++){var o=t.get(i);if(!o.crossTileID){var a=this.indexedSymbolInstances[o.key];if(a)for(var s=this.getScaledCoordinates(o,e),u=0,l=a;u<l.length;u+=1){var c=l[u];if(Math.abs(c.coord.x-s.x)<=r&&Math.abs(c.coord.y-s.y)<=r&&!n[c.crossTileID]){n[c.crossTileID]=!0,o.crossTileID=c.crossTileID;break}}}}};var Pe=function(){this.maxCrossTileID=0};Pe.prototype.generate=function(){return++this.maxCrossTileID};var Ie=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};Ie.prototype.handleWrapJump=function(t){var e=Math.round((t-this.lng)/360);if(0!==e)for(var n in this.indexes){var r=this.indexes[n],i={};for(var o in r){var a=r[o];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+e),i[a.tileID.key]=a}this.indexes[n]=i}this.lng=t},Ie.prototype.addBucket=function(t,e,n){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===e.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(var r=0;r<e.symbolInstances.length;r++)e.symbolInstances.get(r).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});var i=this.usedCrossTileIDs[t.overscaledZ];for(var o in this.indexes){var a=this.indexes[o];if(Number(o)>t.overscaledZ)for(var s in a){var u=a[s];u.tileID.isChildOf(t)&&u.findMatches(e.symbolInstances,t,i)}else{var l=a[t.scaledTo(Number(o)).key];l&&l.findMatches(e.symbolInstances,t,i)}}for(var c=0;c<e.symbolInstances.length;c++){var d=e.symbolInstances.get(c);d.crossTileID||(d.crossTileID=n.generate(),i[d.crossTileID]=!0)}return void 0===this.indexes[t.overscaledZ]&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new Ce(t,e.symbolInstances,e.bucketInstanceId),!0},Ie.prototype.removeBucketCrossTileIDs=function(t,e){for(var n in e.indexedSymbolInstances)for(var r=0,i=e.indexedSymbolInstances[n];r<i.length;r+=1)delete this.usedCrossTileIDs[t][i[r].crossTileID]},Ie.prototype.removeStaleBuckets=function(t){var e=!1;for(var n in this.indexes){var r=this.indexes[n];for(var i in r)t[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],e=!0)}return e};var Oe=function(){this.layerIndexes={},this.crossTileIDs=new Pe,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Oe.prototype.addLayer=function(t,e,n){var r=this.layerIndexes[t.id];void 0===r&&(r=this.layerIndexes[t.id]=new Ie);var i=!1,o={};r.handleWrapJump(n);for(var a=0,s=e;a<s.length;a+=1){var u=s[a],l=u.getBucket(t);l&&t.id===l.layerIds[0]&&(l.bucketInstanceId||(l.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(u.tileID,l,this.crossTileIDs)&&(i=!0),o[l.bucketInstanceId]=!0)}return r.removeStaleBuckets(o)&&(i=!0),i},Oe.prototype.pruneUnusedLayers=function(t){var e={};for(var n in t.forEach((function(t){e[t]=!0})),this.layerIndexes)e[n]||delete this.layerIndexes[n]};var Re=function(e,n){return t.emitValidationErrors(e,n&&n.filter((function(t){return"source.canvas"!==t.identifier})))},Ye=t.pick(zt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Fe=t.pick(zt,["setCenter","setZoom","setBearing","setPitch"]),je=function(){var e={},n=t.styleSpec.$version;for(var r in t.styleSpec.$root){var i,o=t.styleSpec.$root[r];o.required&&null!=(i="version"===r?n:"array"===o.type?[]:{})&&(e[r]=i)}return e}(),ze=function(e){function n(r,i){var o=this;void 0===i&&(i={}),e.call(this),this.map=r,this.dispatcher=new L((Rt||(Rt=new Ot),Rt),this),this.imageManager=new h,this.imageManager.setEventedParent(this),this.glyphManager=new g(r._requestManager,i.localIdeographFontFamily),this.lineAtlas=new M(256,512),this.crossTileSymbolIndex=new Oe,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var a=this;this._rtlTextPluginCallback=n.registerForPluginStateChange((function(e){a.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:e.pluginStatus,pluginURL:e.pluginURL},(function(e,n){if(t.triggerPluginCompletionEvent(e),n&&n.every((function(t){return t})))for(var r in a.sourceCaches)a.sourceCaches[r].reload()}))})),this.on("data",(function(t){if("source"===t.dataType&&"metadata"===t.sourceDataType){var e=o.sourceCaches[t.sourceId];if(e){var n=e.getSource();if(n&&n.vectorLayerIds)for(var r in o._layers){var i=o._layers[r];i.source===n.id&&o._validateLayer(i)}}}}))}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.loadURL=function(e,n){var r=this;void 0===n&&(n={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var i="boolean"==typeof n.validate?n.validate:!t.isMapboxURL(e);e=this.map._requestManager.normalizeStyleURL(e,n.accessToken);var o=this.map._requestManager.transformRequest(e,t.ResourceType.Style);this._request=t.getJSON(o,(function(e,n){r._request=null,e?r.fire(new t.ErrorEvent(e)):n&&r._load(n,i)}))},n.prototype.loadJSON=function(e,n){var r=this;void 0===n&&(n={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame((function(){r._request=null,r._load(e,!1!==n.validate)}))},n.prototype.loadEmpty=function(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(je,!1)},n.prototype._load=function(e,n){if(!n||!Re(this,t.validateStyle(e))){for(var r in this._loaded=!0,this.stylesheet=e,e.sources)this.addSource(r,e.sources[r],{validate:!1});e.sprite?this._loadSprite(e.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var i=jt(this.stylesheet.layers);this._order=i.map((function(t){return t.id})),this._layers={},this._serializedLayers={};for(var o=0,a=i;o<a.length;o+=1){var s=a[o];(s=t.createStyleLayer(s)).setEventedParent(this,{layer:{id:s.id}}),this._layers[s.id]=s,this._serializedLayers[s.id]=s.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new w(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},n.prototype._loadSprite=function(e){var n=this;this._spriteRequest=function(e,n,r){var i,o,a,s=t.browser.devicePixelRatio>1?"@2x":"",u=t.getJSON(n.transformRequest(n.normalizeSpriteURL(e,s,".json"),t.ResourceType.SpriteJSON),(function(t,e){u=null,a||(a=t,i=e,c())})),l=t.getImage(n.transformRequest(n.normalizeSpriteURL(e,s,".png"),t.ResourceType.SpriteImage),(function(t,e){l=null,a||(a=t,o=e,c())}));function c(){if(a)r(a);else if(i&&o){var e=t.browser.getImageData(o),n={};for(var s in i){var u=i[s],l=u.width,c=u.height,d=u.x,h=u.y,f=u.sdf,p=u.pixelRatio,m=u.stretchX,_=u.stretchY,y=u.content,v=new t.RGBAImage({width:l,height:c});t.RGBAImage.copy(e,v,{x:d,y:h},{x:0,y:0},{width:l,height:c}),n[s]={data:v,pixelRatio:p,sdf:f,stretchX:m,stretchY:_,content:y}}r(null,n)}}return{cancel:function(){u&&(u.cancel(),u=null),l&&(l.cancel(),l=null)}}}(e,this.map._requestManager,(function(e,r){if(n._spriteRequest=null,e)n.fire(new t.ErrorEvent(e));else if(r)for(var i in r)n.imageManager.addImage(i,r[i]);n.imageManager.setLoaded(!0),n._availableImages=n.imageManager.listImages(),n.dispatcher.broadcast("setImages",n._availableImages),n.fire(new t.Event("data",{dataType:"style"}))}))},n.prototype._validateLayer=function(e){var n=this.sourceCaches[e.source];if(n){var r=e.sourceLayer;if(r){var i=n.getSource();("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(r))&&this.fire(new t.ErrorEvent(new Error('Source layer "'+r+'" does not exist on source "'+i.id+'" as specified by style layer "'+e.id+'"')))}}},n.prototype.loaded=function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},n.prototype._serializeLayers=function(t){for(var e=[],n=0,r=t;n<r.length;n+=1){var i=this._layers[r[n]];"custom"!==i.type&&e.push(i.serialize())}return e},n.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(var e in this._layers)if(this._layers[e].hasTransition())return!0;return!1},n.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},n.prototype.update=function(e){if(this._loaded){var n=this._changed;if(this._changed){var r=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);for(var o in(r.length||i.length)&&this._updateWorkerLayers(r,i),this._updatedSources){var a=this._updatedSources[o];"reload"===a?this._reloadSource(o):"clear"===a&&this._clearSource(o)}for(var s in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[s].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates()}for(var u in this.sourceCaches)this.sourceCaches[u].used=!1;for(var l=0,c=this._order;l<c.length;l+=1){var d=this._layers[c[l]];d.recalculate(e,this._availableImages),!d.isHidden(e.zoom)&&d.source&&(this.sourceCaches[d.source].used=!0)}this.light.recalculate(e),this.z=e.zoom,n&&this.fire(new t.Event("data",{dataType:"style"}))}},n.prototype._updateTilesForChangedImages=function(){var t=Object.keys(this._changedImages);if(t.length){for(var e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}},n.prototype._updateWorkerLayers=function(t,e){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e})},n.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},n.prototype.setState=function(e){var n=this;if(this._checkLoaded(),Re(this,t.validateStyle(e)))return!1;(e=t.clone$1(e)).layers=jt(e.layers);var r=function(e,n){if(!e)return[{command:zt.setStyle,args:[n]}];var r=[];try{if(!t.deepEqual(e.version,n.version))return[{command:zt.setStyle,args:[n]}];t.deepEqual(e.center,n.center)||r.push({command:zt.setCenter,args:[n.center]}),t.deepEqual(e.zoom,n.zoom)||r.push({command:zt.setZoom,args:[n.zoom]}),t.deepEqual(e.bearing,n.bearing)||r.push({command:zt.setBearing,args:[n.bearing]}),t.deepEqual(e.pitch,n.pitch)||r.push({command:zt.setPitch,args:[n.pitch]}),t.deepEqual(e.sprite,n.sprite)||r.push({command:zt.setSprite,args:[n.sprite]}),t.deepEqual(e.glyphs,n.glyphs)||r.push({command:zt.setGlyphs,args:[n.glyphs]}),t.deepEqual(e.transition,n.transition)||r.push({command:zt.setTransition,args:[n.transition]}),t.deepEqual(e.light,n.light)||r.push({command:zt.setLight,args:[n.light]});var i={},o=[];!function(e,n,r,i){var o;for(o in n=n||{},e=e||{})e.hasOwnProperty(o)&&(n.hasOwnProperty(o)||Bt(o,r,i));for(o in n)n.hasOwnProperty(o)&&(e.hasOwnProperty(o)?t.deepEqual(e[o],n[o])||("geojson"===e[o].type&&"geojson"===n[o].type&&Ht(e,n,o)?r.push({command:zt.setGeoJSONSourceData,args:[o,n[o].data]}):Ut(o,n,r,i)):Nt(o,n,r))}(e.sources,n.sources,o,i);var a=[];e.layers&&e.layers.forEach((function(t){i[t.source]?r.push({command:zt.removeLayer,args:[t.id]}):a.push(t)})),r=r.concat(o),function(e,n,r){n=n||[];var i,o,a,s,u,l,c,d=(e=e||[]).map(Wt),h=n.map(Wt),f=e.reduce(Gt,{}),p=n.reduce(Gt,{}),m=d.slice(),_=Object.create(null);for(i=0,o=0;i<d.length;i++)p.hasOwnProperty(a=d[i])?o++:(r.push({command:zt.removeLayer,args:[a]}),m.splice(m.indexOf(a,o),1));for(i=0,o=0;i<h.length;i++)m[m.length-1-i]!==(a=h[h.length-1-i])&&(f.hasOwnProperty(a)?(r.push({command:zt.removeLayer,args:[a]}),m.splice(m.lastIndexOf(a,m.length-o),1)):o++,r.push({command:zt.addLayer,args:[p[a],l=m[m.length-i]]}),m.splice(m.length-i,0,a),_[a]=!0);for(i=0;i<h.length;i++)if(s=f[a=h[i]],u=p[a],!_[a]&&!t.deepEqual(s,u))if(t.deepEqual(s.source,u.source)&&t.deepEqual(s["source-layer"],u["source-layer"])&&t.deepEqual(s.type,u.type)){for(c in Vt(s.layout,u.layout,r,a,null,zt.setLayoutProperty),Vt(s.paint,u.paint,r,a,null,zt.setPaintProperty),t.deepEqual(s.filter,u.filter)||r.push({command:zt.setFilter,args:[a,u.filter]}),t.deepEqual(s.minzoom,u.minzoom)&&t.deepEqual(s.maxzoom,u.maxzoom)||r.push({command:zt.setLayerZoomRange,args:[a,u.minzoom,u.maxzoom]}),s)s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?Vt(s[c],u[c],r,a,c.slice(6),zt.setPaintProperty):t.deepEqual(s[c],u[c])||r.push({command:zt.setLayerProperty,args:[a,c,u[c]]}));for(c in u)u.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?Vt(s[c],u[c],r,a,c.slice(6),zt.setPaintProperty):t.deepEqual(s[c],u[c])||r.push({command:zt.setLayerProperty,args:[a,c,u[c]]}))}else r.push({command:zt.removeLayer,args:[a]}),l=m[m.lastIndexOf(a)+1],r.push({command:zt.addLayer,args:[u,l]})}(a,n.layers,r)}catch(t){console.warn("Unable to compute style diff:",t),r=[{command:zt.setStyle,args:[n]}]}return r}(this.serialize(),e).filter((function(t){return!(t.command in Fe)}));if(0===r.length)return!1;var i=r.filter((function(t){return!(t.command in Ye)}));if(i.length>0)throw new Error("Unimplemented: "+i.map((function(t){return t.command})).join(", ")+".");return r.forEach((function(t){"setTransition"!==t.command&&n[t.command].apply(n,t.args)})),this.stylesheet=e,!0},n.prototype.addImage=function(e,n){if(this.getImage(e))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(e,n),this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.fire(new t.Event("data",{dataType:"style"}))},n.prototype.updateImage=function(t,e){this.imageManager.updateImage(t,e)},n.prototype.getImage=function(t){return this.imageManager.getImage(t)},n.prototype.removeImage=function(e){if(!this.getImage(e))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(e),this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.fire(new t.Event("data",{dataType:"style"}))},n.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},n.prototype.addSource=function(e,n,r){var i=this;if(void 0===r&&(r={}),this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!n.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(n).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(t.validateStyle.source,"sources."+e,n,null,r))){this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);var o=this.sourceCaches[e]=new Dt(e,n,this.dispatcher);o.style=this,o.setEventedParent(this,(function(){return{isSourceLoaded:i.loaded(),source:o.serialize(),sourceId:e}})),o.onAdd(this.map),this._changed=!0}},n.prototype.removeSource=function(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(var n in this._layers)if(this._layers[n].source===e)return this.fire(new t.ErrorEvent(new Error('Source "'+e+'" cannot be removed while layer "'+n+'" is using it.')));var r=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],r.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),r.setEventedParent(null),r.clearTiles(),r.onRemove&&r.onRemove(this.map),this._changed=!0},n.prototype.setGeoJSONSourceData=function(t,e){this._checkLoaded(),this.sourceCaches[t].getSource().setData(e),this._changed=!0},n.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},n.prototype.addLayer=function(e,n,r){void 0===r&&(r={}),this._checkLoaded();var i=e.id;if(this.getLayer(i))this.fire(new t.ErrorEvent(new Error('Layer with id "'+i+'" already exists on this map')));else{var o;if("custom"===e.type){if(Re(this,t.validateCustomStyleLayer(e)))return;o=t.createStyleLayer(e)}else{if("object"==typeof e.source&&(this.addSource(i,e.source),e=t.clone$1(e),e=t.extend(e,{source:i})),this._validate(t.validateStyle.layer,"layers."+i,e,{arrayIndex:-1},r))return;o=t.createStyleLayer(e),this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}}),this._serializedLayers[o.id]=o.serialize()}var a=n?this._order.indexOf(n):this._order.length;if(n&&-1===a)this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.')));else{if(this._order.splice(a,0,i),this._layerOrderChanged=!0,this._layers[i]=o,this._removedLayers[i]&&o.source&&"custom"!==o.type){var s=this._removedLayers[i];delete this._removedLayers[i],s.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map)}}},n.prototype.moveLayer=function(e,n){if(this._checkLoaded(),this._changed=!0,this._layers[e]){if(e!==n){var r=this._order.indexOf(e);this._order.splice(r,1);var i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new t.ErrorEvent(new Error('Layer with id "'+n+'" does not exist on this map.'))):(this._order.splice(i,0,e),this._layerOrderChanged=!0)}}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")))},n.prototype.removeLayer=function(e){this._checkLoaded();var n=this._layers[e];if(n){n.setEventedParent(null);var r=this._order.indexOf(e);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=n,delete this._layers[e],delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],n.onRemove&&n.onRemove(this.map)}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")))},n.prototype.getLayer=function(t){return this._layers[t]},n.prototype.hasLayer=function(t){return t in this._layers},n.prototype.setLayerZoomRange=function(e,n,r){this._checkLoaded();var i=this.getLayer(e);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")))},n.prototype.setFilter=function(e,n,r){void 0===r&&(r={}),this._checkLoaded();var i=this.getLayer(e);if(i){if(!t.deepEqual(i.filter,n))return null==n?(i.filter=void 0,void this._updateLayer(i)):void(this._validate(t.validateStyle.filter,"layers."+i.id+".filter",n,null,r)||(i.filter=t.clone$1(n),this._updateLayer(i)))}else this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")))},n.prototype.getFilter=function(e){return t.clone$1(this.getLayer(e).filter)},n.prototype.setLayoutProperty=function(e,n,r,i){void 0===i&&(i={}),this._checkLoaded();var o=this.getLayer(e);o?t.deepEqual(o.getLayoutProperty(n),r)||(o.setLayoutProperty(n,r,i),this._updateLayer(o)):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getLayoutProperty=function(e,n){var r=this.getLayer(e);if(r)return r.getLayoutProperty(n);this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style.")))},n.prototype.setPaintProperty=function(e,n,r,i){void 0===i&&(i={}),this._checkLoaded();var o=this.getLayer(e);o?t.deepEqual(o.getPaintProperty(n),r)||(o.setPaintProperty(n,r,i)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[e]=!0):this.fire(new t.ErrorEvent(new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")))},n.prototype.getPaintProperty=function(t,e){return this.getLayer(t).getPaintProperty(e)},n.prototype.setFeatureState=function(e,n){this._checkLoaded();var r=e.source,i=e.sourceLayer,o=this.sourceCaches[r];if(void 0!==o){var a=o.getSource().type;"geojson"===a&&i?this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==a||i?(void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),o.setFeatureState(i,e.id,n)):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},n.prototype.removeFeatureState=function(e,n){this._checkLoaded();var r=e.source,i=this.sourceCaches[r];if(void 0!==i){var o=i.getSource().type,a="vector"===o?e.sourceLayer:void 0;"vector"!==o||a?n&&"string"!=typeof e.id&&"number"!=typeof e.id?this.fire(new t.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):i.removeFeatureState(a,e.id,n):this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+r+"' does not exist in the map's style.")))},n.prototype.getFeatureState=function(e){this._checkLoaded();var n=e.source,r=e.sourceLayer,i=this.sourceCaches[n];if(void 0!==i){if("vector"!==i.getSource().type||r)return void 0===e.id&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),i.getFeatureState(r,e.id);this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new t.ErrorEvent(new Error("The source '"+n+"' does not exist in the map's style.")))},n.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},n.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,(function(t){return t.serialize()})),layers:this._serializeLayers(this._order)},(function(t){return void 0!==t}))},n.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&"raster"!==this.sourceCaches[t.source].getSource().type&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._changed=!0},n.prototype._flattenAndSortRenderedFeatures=function(t){for(var e=this,n=function(t){return"fill-extrusion"===e._layers[t].type},r={},i=[],o=this._order.length-1;o>=0;o--){var a=this._order[o];if(n(a)){r[a]=o;for(var s=0,u=t;s<u.length;s+=1){var l=u[s][a];if(l)for(var c=0,d=l;c<d.length;c+=1)i.push(d[c])}}}i.sort((function(t,e){return e.intersectionZ-t.intersectionZ}));for(var h=[],f=this._order.length-1;f>=0;f--){var p=this._order[f];if(n(p))for(var m=i.length-1;m>=0;m--){var _=i[m].feature;if(r[_.layer.id]<f)break;h.push(_),i.pop()}else for(var y=0,v=t;y<v.length;y+=1){var g=v[y][p];if(g)for(var x=0,b=g;x<b.length;x+=1)h.push(b[x].feature)}}return h},n.prototype.queryRenderedFeatures=function(e,n,r){n&&n.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",n.filter,null,n);var i={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var o=0,a=n.layers;o<a.length;o+=1){var s=a[o],u=this._layers[s];if(!u)return this.fire(new t.ErrorEvent(new Error("The layer '"+s+"' does not exist in the map's style and cannot be queried for features."))),[];i[u.source]=!0}}var l=[];for(var c in n.availableImages=this._availableImages,this.sourceCaches)n.layers&&!i[c]||l.push(F(this.sourceCaches[c],this._layers,this._serializedLayers,e,n,r));return this.placement&&l.push(function(t,e,n,r,i,o,a){for(var s={},u=o.queryRenderedSymbols(r),l=[],c=0,d=Object.keys(u).map(Number);c<d.length;c+=1)l.push(a[d[c]]);l.sort(j);for(var h=function(){var n=p[f],r=n.featureIndex.lookupSymbolFeatures(u[n.bucketInstanceId],e,n.bucketIndex,n.sourceLayerIndex,i.filter,i.layers,i.availableImages,t);for(var o in r){var a=s[o]=s[o]||[],l=r[o];l.sort((function(t,e){var r=n.featureSortOrder;if(r){var i=r.indexOf(t.featureIndex);return r.indexOf(e.featureIndex)-i}return e.featureIndex-t.featureIndex}));for(var c=0,d=l;c<d.length;c+=1)a.push(d[c])}},f=0,p=l;f<p.length;f+=1)h();var m=function(e){s[e].forEach((function(r){var i=r.feature,o=n[t[e].source].getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=o}))};for(var _ in s)m(_);return s}(this._layers,this._serializedLayers,this.sourceCaches,e,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(l)},n.prototype.querySourceFeatures=function(e,n){n&&n.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",n.filter,null,n);var r=this.sourceCaches[e];return r?function(t,e){for(var n=t.getRenderableIds().map((function(e){return t.getTileByID(e)})),r=[],i={},o=0;o<n.length;o++){var a=n[o],s=a.tileID.canonical.key;i[s]||(i[s]=!0,a.querySourceFeatures(r,e))}return r}(r,n):[]},n.prototype.addSourceType=function(t,e,r){return n.getSourceType(t)?r(new Error('A source type called "'+t+'" already exists.')):(n.setSourceType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},r):r(null,null))},n.prototype.getLight=function(){return this.light.getLight()},n.prototype.setLight=function(e,n){void 0===n&&(n={}),this._checkLoaded();var r=this.light.getLight(),i=!1;for(var o in e)if(!t.deepEqual(e[o],r[o])){i=!0;break}if(i){var a={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,n),this.light.updateTransitions(a)}},n.prototype._validate=function(e,n,r,i,o){return void 0===o&&(o={}),(!o||!1!==o.validate)&&Re(this,e.call(t.validateStyle,t.extend({key:n,style:this.serialize(),value:r,styleSpec:t.styleSpec},i)))},n.prototype._remove=function(){for(var e in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[e].setEventedParent(null);for(var n in this.sourceCaches)this.sourceCaches[n].clearTiles(),this.sourceCaches[n].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},n.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},n.prototype._reloadSource=function(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()},n.prototype._updateSources=function(t){for(var e in this.sourceCaches)this.sourceCaches[e].update(t)},n.prototype._generateCollisionBoxes=function(){for(var t in this.sourceCaches)this._reloadSource(t)},n.prototype._updatePlacement=function(e,n,r,i,o){void 0===o&&(o=!1);for(var a=!1,s=!1,u={},l=0,c=this._order;l<c.length;l+=1){var d=this._layers[c[l]];if("symbol"===d.type){if(!u[d.source]){var h=this.sourceCaches[d.source];u[d.source]=h.getRenderableIds(!0).map((function(t){return h.getTileByID(t)})).sort((function(t,e){return e.tileID.overscaledZ-t.tileID.overscaledZ||(t.tileID.isLessThan(e.tileID)?-1:1)}))}var f=this.crossTileSymbolIndex.addLayer(d,u[d.source],e.center.lng);a=a||f}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((o=o||this._layerOrderChanged||0===r)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now(),e.zoom))&&(this.pauseablePlacement=new Ae(e,this._order,o,n,r,i,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,u),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.browser.now()),s=!0),a&&this.pauseablePlacement.placement.setStale()),s||a)for(var p=0,m=this._order;p<m.length;p+=1){var _=this._layers[m[p]];"symbol"===_.type&&this.placement.updateLayerOpacities(_,u[_.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now())},n.prototype._releaseSymbolFadeTiles=function(){for(var t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()},n.prototype.getImages=function(t,e,n){this.imageManager.getImages(e.icons,n),this._updateTilesForChangedImages();var r=this.sourceCaches[e.source];r&&r.setDependencies(e.tileID.key,e.type,e.icons)},n.prototype.getGlyphs=function(t,e,n){this.glyphManager.getGlyphs(e.stacks,n)},n.prototype.getResource=function(e,n,r){return t.makeRequest(n,r)},n}(t.Evented);ze.getSourceType=function(t){return R[t]},ze.setSourceType=function(t,e){R[t]=e},ze.registerForPluginStateChange=t.registerForPluginStateChange;var Ne=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),Be=pn("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),Ue=pn("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),He=pn("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Ve=pn("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),We=pn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ge=pn("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),qe=pn("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Xe=pn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Ze=pn("uniform float u_overscale_factor;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {float alpha=0.5;vec4 color=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {color=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {color*=.2;}float extrude_scale_length=length(v_extrude_scale);float extrude_length=length(v_extrude)*extrude_scale_length;float stroke_width=15.0*extrude_scale_length/u_overscale_factor;float radius=v_radius*extrude_scale_length;float distance_to_edge=abs(extrude_length-radius);float opacity_t=smoothstep(-stroke_width,0.0,-distance_to_edge);gl_FragColor=opacity_t*color;}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;varying float v_radius;varying vec2 v_extrude;varying vec2 v_extrude_scale;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);highp float padding_factor=1.2;gl_Position.xy+=a_extrude*u_extrude_scale*padding_factor*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;v_radius=abs(a_extrude.y);v_extrude=a_extrude*padding_factor;v_extrude_scale=u_extrude_scale*u_camera_to_center_distance*collision_perspective_ratio;}"),Ke=pn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Je=pn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),$e=pn("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Qe=pn("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),tn=pn("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),en=pn("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),nn=pn("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),rn=pn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),on=pn("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),an=pn("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),sn=pn("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),un=pn("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),ln=pn("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),cn=pn("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),dn=pn("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),hn=pn("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),fn=pn("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function pn(t,e){var n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r={};return{fragmentSource:t=t.replace(n,(function(t,e,n,i,o){return r[o]=!0,"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nvarying "+n+" "+i+" "+o+";\n#else\nuniform "+n+" "+i+" u_"+o+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+o+"\n    "+n+" "+i+" "+o+" = u_"+o+";\n#endif\n"})),vertexSource:e=e.replace(n,(function(t,e,n,i,o){var a="float"===i?"vec2":"vec4",s=o.match(/color/)?"color":a;return r[o]?"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float u_"+o+"_t;\nattribute "+n+" "+a+" a_"+o+";\nvarying "+n+" "+i+" "+o+";\n#else\nuniform "+n+" "+i+" u_"+o+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = a_"+o+";\n#else\n    "+n+" "+i+" "+o+" = u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+o+" = unpack_mix_"+s+"(a_"+o+", u_"+o+"_t);\n#else\n    "+n+" "+i+" "+o+" = u_"+o+";\n#endif\n":"define"===e?"\n#ifndef HAS_UNIFORM_u_"+o+"\nuniform lowp float u_"+o+"_t;\nattribute "+n+" "+a+" a_"+o+";\n#else\nuniform "+n+" "+i+" u_"+o+";\n#endif\n":"vec4"===s?"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+n+" "+i+" "+o+" = a_"+o+";\n#else\n    "+n+" "+i+" "+o+" = u_"+o+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+o+"\n    "+n+" "+i+" "+o+" = unpack_mix_"+s+"(a_"+o+", u_"+o+"_t);\n#else\n    "+n+" "+i+" "+o+" = u_"+o+";\n#endif\n"}))}}var mn=Object.freeze({__proto__:null,prelude:Be,background:Ue,backgroundPattern:He,circle:Ve,clippingMask:We,heatmap:Ge,heatmapTexture:qe,collisionBox:Xe,collisionCircle:Ze,debug:Ke,fill:Je,fillOutline:$e,fillOutlinePattern:Qe,fillPattern:tn,fillExtrusion:en,fillExtrusionPattern:nn,hillshadePrepare:rn,hillshade:on,line:an,lineGradient:sn,linePattern:un,lineSDF:ln,raster:cn,symbolIcon:dn,symbolSDF:hn,symbolTextAndIcon:fn}),_n=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};_n.prototype.bind=function(t,e,n,r,i,o,a,s){this.context=t;for(var u=this.boundPaintVertexBuffers.length!==r.length,l=0;!u&&l<r.length;l++)this.boundPaintVertexBuffers[l]!==r[l]&&(u=!0);t.extVertexArrayObject&&this.vao&&this.boundProgram===e&&this.boundLayoutVertexBuffer===n&&!u&&this.boundIndexBuffer===i&&this.boundVertexOffset===o&&this.boundDynamicVertexBuffer===a&&this.boundDynamicVertexBuffer2===s?(t.bindVertexArrayOES.set(this.vao),a&&a.bind(),i&&i.dynamicDraw&&i.bind(),s&&s.bind()):this.freshBind(e,n,r,i,o,a,s)},_n.prototype.freshBind=function(t,e,n,r,i,o,a){var s,u=t.numAttributes,l=this.context,c=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=t,this.boundLayoutVertexBuffer=e,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=a;else{s=l.currentNumAttributes||0;for(var d=u;d<s;d++)c.disableVertexAttribArray(d)}e.enableAttributes(c,t);for(var h=0,f=n;h<f.length;h+=1)f[h].enableAttributes(c,t);o&&o.enableAttributes(c,t),a&&a.enableAttributes(c,t),e.bind(),e.setVertexAttribPointers(c,t,i);for(var p=0,m=n;p<m.length;p+=1){var _=m[p];_.bind(),_.setVertexAttribPointers(c,t,i)}o&&(o.bind(),o.setVertexAttribPointers(c,t,i)),r&&r.bind(),a&&(a.bind(),a.setVertexAttribPointers(c,t,i)),l.currentNumAttributes=u},_n.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var yn=function(t,e,n,r,i){var o=t.gl;this.program=o.createProgram();var a=n?n.defines():[];i&&a.push("#define OVERDRAW_INSPECTOR;");var s=a.concat(Be.fragmentSource,e.fragmentSource).join("\n"),u=a.concat(Be.vertexSource,e.vertexSource).join("\n"),l=o.createShader(o.FRAGMENT_SHADER);if(o.isContextLost())this.failedToCreate=!0;else{o.shaderSource(l,s),o.compileShader(l),o.attachShader(this.program,l);var c=o.createShader(o.VERTEX_SHADER);if(o.isContextLost())this.failedToCreate=!0;else{o.shaderSource(c,u),o.compileShader(c),o.attachShader(this.program,c);for(var d=n?n.layoutAttributes:[],h=0;h<d.length;h++)o.bindAttribLocation(this.program,h,d[h].name);o.linkProgram(this.program),this.numAttributes=o.getProgramParameter(this.program,o.ACTIVE_ATTRIBUTES),this.attributes={};for(var f={},p=0;p<this.numAttributes;p++){var m=o.getActiveAttrib(this.program,p);m&&(this.attributes[m.name]=o.getAttribLocation(this.program,m.name))}for(var _=o.getProgramParameter(this.program,o.ACTIVE_UNIFORMS),y=0;y<_;y++){var v=o.getActiveUniform(this.program,y);v&&(f[v.name]=o.getUniformLocation(this.program,v.name))}this.fixedUniforms=r(t,f),this.binderUniforms=n?n.getUniforms(t,f):[]}}};function vn(t,e,n){var r=1/le(n,1,e.transform.tileZoom),i=Math.pow(2,n.tileID.overscaledZ),o=n.tileSize*Math.pow(2,e.transform.tileZoom)/i,a=o*(n.tileID.canonical.x+n.tileID.wrap*i),s=o*n.tileID.canonical.y;return{u_image:0,u_texsize:n.imageAtlasTexture.size,u_scale:[r,t.fromScale,t.toScale],u_fade:t.t,u_pixel_coord_upper:[a>>16,s>>16],u_pixel_coord_lower:[65535&a,65535&s]}}yn.prototype.draw=function(t,e,n,r,i,o,a,s,u,l,c,d,h,f,p,m){var _,y=t.gl;if(!this.failedToCreate){for(var v in t.program.set(this.program),t.setDepthMode(n),t.setStencilMode(r),t.setColorMode(i),t.setCullFace(o),this.fixedUniforms)this.fixedUniforms[v].set(a[v]);f&&f.setUniforms(t,this.binderUniforms,d,{zoom:h});for(var g=(_={},_[y.LINES]=2,_[y.TRIANGLES]=3,_[y.LINE_STRIP]=1,_)[e],x=0,b=c.get();x<b.length;x+=1){var w=b[x],M=w.vaos||(w.vaos={});(M[s]||(M[s]=new _n)).bind(t,this,u,f?f.getPaintVertexBuffers():[],l,w.vertexOffset,p,m),y.drawElements(e,w.primitiveLength*g,y.UNSIGNED_SHORT,w.primitiveOffset*g*2)}}};var gn=function(e,n,r,i){var o=n.style.light,a=o.properties.get("position"),s=[a.x,a.y,a.z],u=t.create$1();"viewport"===o.properties.get("anchor")&&t.fromRotation(u,-n.transform.angle),t.transformMat3(s,s,u);var l=o.properties.get("color");return{u_matrix:e,u_lightpos:s,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[l.r,l.g,l.b],u_vertical_gradient:+r,u_opacity:i}},xn=function(e,n,r,i,o,a,s){return t.extend(gn(e,n,r,i),vn(a,n,s),{u_height_factor:-Math.pow(2,o.overscaledZ)/s.tileSize/8})},bn=function(t){return{u_matrix:t}},wn=function(e,n,r,i){return t.extend(bn(e),vn(r,n,i))},Mn=function(t,e){return{u_matrix:t,u_world:e}},Ln=function(e,n,r,i,o){return t.extend(wn(e,n,r,i),{u_world:o})},kn=function(e,n,r,i){var o,a,s=e.transform;if("map"===i.paint.get("circle-pitch-alignment")){var u=le(r,1,s.zoom);o=!0,a=[u,u]}else o=!1,a=s.pixelsToGLUnits;return{u_camera_to_center_distance:s.cameraToCenterDistance,u_scale_with_map:+("map"===i.paint.get("circle-pitch-scale")),u_matrix:e.translatePosMatrix(n.posMatrix,r,i.paint.get("circle-translate"),i.paint.get("circle-translate-anchor")),u_pitch_with_map:+o,u_device_pixel_ratio:t.browser.devicePixelRatio,u_extrude_scale:a}},Tn=function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(e,n.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_overscale_factor:new t.Uniform1f(e,n.u_overscale_factor)}},Sn=function(t,e,n){var r=le(n,1,e.zoom),i=Math.pow(2,e.zoom-n.tileID.overscaledZ),o=n.tileID.overscaleFactor();return{u_matrix:t,u_camera_to_center_distance:e.cameraToCenterDistance,u_pixels_to_tile_units:r,u_extrude_scale:[e.pixelsToGLUnits[0]/(r*i),e.pixelsToGLUnits[1]/(r*i)],u_overscale_factor:o}},En=function(t,e,n){return void 0===n&&(n=1),{u_matrix:t,u_color:e,u_overlay:0,u_overlay_scale:n}},An=function(t){return{u_matrix:t}},Dn=function(t,e,n,r){return{u_matrix:t,u_extrude_scale:le(e,1,n),u_intensity:r}},Cn=function(e,n,r){var i=r.paint.get("hillshade-shadow-color"),o=r.paint.get("hillshade-highlight-color"),a=r.paint.get("hillshade-accent-color"),s=r.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===r.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);var u,l,c,d=!e.options.moving;return{u_matrix:e.transform.calculatePosMatrix(n.tileID.toUnwrapped(),d),u_image:0,u_latrange:(u=n.tileID,l=Math.pow(2,u.canonical.z),c=u.canonical.y,[new t.MercatorCoordinate(0,c/l).toLngLat().lat,new t.MercatorCoordinate(0,(c+1)/l).toLngLat().lat]),u_light:[r.paint.get("hillshade-exaggeration"),s],u_shadow:i,u_highlight:o,u_accent:a}},Pn=function(e,n,r){var i=e.transform;return{u_matrix:Fn(e,n,r),u_ratio:1/le(n,1,i.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_units_to_pixels:[1/i.pixelsToGLUnits[0],1/i.pixelsToGLUnits[1]]}},In=function(e,n,r){return t.extend(Pn(e,n,r),{u_image:0})},On=function(e,n,r,i){var o=e.transform,a=Yn(n,o);return{u_matrix:Fn(e,n,r),u_texsize:n.imageAtlasTexture.size,u_ratio:1/le(n,1,o.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_image:0,u_scale:[a,i.fromScale,i.toScale],u_fade:i.t,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},Rn=function(e,n,r,i,o){var a=e.lineAtlas,s=Yn(n,e.transform),u="round"===r.layout.get("line-cap"),l=a.getDash(i.from,u),c=a.getDash(i.to,u),d=l.width*o.fromScale,h=c.width*o.toScale;return t.extend(Pn(e,n,r),{u_patternscale_a:[s/d,-l.height/2],u_patternscale_b:[s/h,-c.height/2],u_sdfgamma:a.width/(256*Math.min(d,h)*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:l.y,u_tex_y_b:c.y,u_mix:o.t})};function Yn(t,e){return 1/le(t,1,e.tileZoom)}function Fn(t,e,n){return t.translatePosMatrix(e.tileID.posMatrix,e,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}var jn=function(t,e,n,r,i){return{u_matrix:t,u_tl_parent:e,u_scale_parent:n,u_buffer_scale:1,u_fade_t:r.mix,u_opacity:r.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(a=i.paint.get("raster-saturation"),a>0?1-1/(1.001-a):-a),u_contrast_factor:(o=i.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:zn(i.paint.get("raster-hue-rotate"))};var o,a};function zn(t){t*=Math.PI/180;var e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}var Nn=function(t,e,n,r,i,o,a,s,u,l){var c=i.transform;return{u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:c.cameraToCenterDistance,u_pitch:c.pitch/360*2*Math.PI,u_rotate_symbol:+n,u_aspect_ratio:c.width/c.height,u_fade_change:i.options.fadeDuration?i.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:a,u_coord_matrix:s,u_is_text:+u,u_pitch_with_map:+r,u_texsize:l,u_texture:0}},Bn=function(e,n,r,i,o,a,s,u,l,c,d){var h=o.transform;return t.extend(Nn(e,n,r,i,o,a,s,u,l,c),{u_gamma_scale:i?Math.cos(h._pitch)*h.cameraToCenterDistance:1,u_device_pixel_ratio:t.browser.devicePixelRatio,u_is_halo:+d})},Un=function(e,n,r,i,o,a,s,u,l,c){return t.extend(Bn(e,n,r,i,o,a,s,u,!0,l,!0),{u_texsize_icon:c,u_texture_icon:1})},Hn=function(t,e,n){return{u_matrix:t,u_opacity:e,u_color:n}},Vn=function(e,n,r,i,o,a){return t.extend(function(t,e,n,r){var i=n.imageManager.getPattern(t.from.toString()),o=n.imageManager.getPattern(t.to.toString()),a=n.imageManager.getPixelSize(),s=a.width,u=a.height,l=Math.pow(2,r.tileID.overscaledZ),c=r.tileSize*Math.pow(2,n.transform.tileZoom)/l,d=c*(r.tileID.canonical.x+r.tileID.wrap*l),h=c*r.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:i.tl,u_pattern_br_a:i.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[s,u],u_mix:e.t,u_pattern_size_a:i.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:e.fromScale,u_scale_b:e.toScale,u_tile_units_to_pixels:1/le(r,1,n.transform.tileZoom),u_pixel_coord_upper:[d>>16,h>>16],u_pixel_coord_lower:[65535&d,65535&h]}}(i,a,r,o),{u_matrix:e,u_opacity:n})},Wn={fillExtrusion:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient),u_opacity:new t.Uniform1f(e,n.u_opacity)}},fillExtrusionPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_lightpos:new t.Uniform3f(e,n.u_lightpos),u_lightintensity:new t.Uniform1f(e,n.u_lightintensity),u_lightcolor:new t.Uniform3f(e,n.u_lightcolor),u_vertical_gradient:new t.Uniform1f(e,n.u_vertical_gradient),u_height_factor:new t.Uniform1f(e,n.u_height_factor),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade),u_opacity:new t.Uniform1f(e,n.u_opacity)}},fill:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},fillPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},fillOutline:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world)}},fillOutlinePattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_texsize:new t.Uniform2f(e,n.u_texsize),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},circle:function(e,n){return{u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(e,n.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(e,n.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},collisionBox:Tn,collisionCircle:Tn,debug:function(e,n){return{u_color:new t.UniformColor(e,n.u_color),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_overlay:new t.Uniform1i(e,n.u_overlay),u_overlay_scale:new t.Uniform1f(e,n.u_overlay_scale)}},clippingMask:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},heatmap:function(e,n){return{u_extrude_scale:new t.Uniform1f(e,n.u_extrude_scale),u_intensity:new t.Uniform1f(e,n.u_intensity),u_matrix:new t.UniformMatrix4f(e,n.u_matrix)}},heatmapTexture:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_world:new t.Uniform2f(e,n.u_world),u_image:new t.Uniform1i(e,n.u_image),u_color_ramp:new t.Uniform1i(e,n.u_color_ramp),u_opacity:new t.Uniform1f(e,n.u_opacity)}},hillshade:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_latrange:new t.Uniform2f(e,n.u_latrange),u_light:new t.Uniform2f(e,n.u_light),u_shadow:new t.UniformColor(e,n.u_shadow),u_highlight:new t.UniformColor(e,n.u_highlight),u_accent:new t.UniformColor(e,n.u_accent)}},hillshadePrepare:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_image:new t.Uniform1i(e,n.u_image),u_dimension:new t.Uniform2f(e,n.u_dimension),u_zoom:new t.Uniform1f(e,n.u_zoom),u_maxzoom:new t.Uniform1f(e,n.u_maxzoom),u_unpack:new t.Uniform4f(e,n.u_unpack)}},line:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels)}},lineGradient:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_image:new t.Uniform1i(e,n.u_image)}},linePattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_texsize:new t.Uniform2f(e,n.u_texsize),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_image:new t.Uniform1i(e,n.u_image),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_scale:new t.Uniform3f(e,n.u_scale),u_fade:new t.Uniform1f(e,n.u_fade)}},lineSDF:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_ratio:new t.Uniform1f(e,n.u_ratio),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(e,n.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(e,n.u_patternscale_a),u_patternscale_b:new t.Uniform2f(e,n.u_patternscale_b),u_sdfgamma:new t.Uniform1f(e,n.u_sdfgamma),u_image:new t.Uniform1i(e,n.u_image),u_tex_y_a:new t.Uniform1f(e,n.u_tex_y_a),u_tex_y_b:new t.Uniform1f(e,n.u_tex_y_b),u_mix:new t.Uniform1f(e,n.u_mix)}},raster:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_tl_parent:new t.Uniform2f(e,n.u_tl_parent),u_scale_parent:new t.Uniform1f(e,n.u_scale_parent),u_buffer_scale:new t.Uniform1f(e,n.u_buffer_scale),u_fade_t:new t.Uniform1f(e,n.u_fade_t),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image0:new t.Uniform1i(e,n.u_image0),u_image1:new t.Uniform1i(e,n.u_image1),u_brightness_low:new t.Uniform1f(e,n.u_brightness_low),u_brightness_high:new t.Uniform1f(e,n.u_brightness_high),u_saturation_factor:new t.Uniform1f(e,n.u_saturation_factor),u_contrast_factor:new t.Uniform1f(e,n.u_contrast_factor),u_spin_weights:new t.Uniform3f(e,n.u_spin_weights)}},symbolIcon:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture)}},symbolSDF:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texture:new t.Uniform1i(e,n.u_texture),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,n.u_is_halo)}},symbolTextAndIcon:function(e,n){return{u_is_size_zoom_constant:new t.Uniform1i(e,n.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(e,n.u_is_size_feature_constant),u_size_t:new t.Uniform1f(e,n.u_size_t),u_size:new t.Uniform1f(e,n.u_size),u_camera_to_center_distance:new t.Uniform1f(e,n.u_camera_to_center_distance),u_pitch:new t.Uniform1f(e,n.u_pitch),u_rotate_symbol:new t.Uniform1i(e,n.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(e,n.u_aspect_ratio),u_fade_change:new t.Uniform1f(e,n.u_fade_change),u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(e,n.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(e,n.u_coord_matrix),u_is_text:new t.Uniform1i(e,n.u_is_text),u_pitch_with_map:new t.Uniform1i(e,n.u_pitch_with_map),u_texsize:new t.Uniform2f(e,n.u_texsize),u_texsize_icon:new t.Uniform2f(e,n.u_texsize_icon),u_texture:new t.Uniform1i(e,n.u_texture),u_texture_icon:new t.Uniform1i(e,n.u_texture_icon),u_gamma_scale:new t.Uniform1f(e,n.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(e,n.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(e,n.u_is_halo)}},background:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_color:new t.UniformColor(e,n.u_color)}},backgroundPattern:function(e,n){return{u_matrix:new t.UniformMatrix4f(e,n.u_matrix),u_opacity:new t.Uniform1f(e,n.u_opacity),u_image:new t.Uniform1i(e,n.u_image),u_pattern_tl_a:new t.Uniform2f(e,n.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(e,n.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(e,n.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(e,n.u_pattern_br_b),u_texsize:new t.Uniform2f(e,n.u_texsize),u_mix:new t.Uniform1f(e,n.u_mix),u_pattern_size_a:new t.Uniform2f(e,n.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(e,n.u_pattern_size_b),u_scale_a:new t.Uniform1f(e,n.u_scale_a),u_scale_b:new t.Uniform1f(e,n.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(e,n.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(e,n.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(e,n.u_tile_units_to_pixels)}}};function Gn(t,e,n,r,i,o,a,s){for(var u=t.context,l=u.gl,c=t.useProgram(i?"collisionCircle":"collisionBox"),d=0;d<r.length;d++){var h=r[d],f=e.getTile(h),p=f.getBucket(n);if(p){var m=i?s?p.textCollisionCircle:p.iconCollisionCircle:s?p.textCollisionBox:p.iconCollisionBox;if(m){var _=h.posMatrix;0===o[0]&&0===o[1]||(_=t.translatePosMatrix(h.posMatrix,f,o,a)),c.draw(u,i?l.TRIANGLES:l.LINES,kt.disabled,Tt.disabled,t.colorModeForRenderPass(),Et.disabled,Sn(_,t.transform,f),n.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,null,t.transform.zoom,null,null,m.collisionVertexBuffer)}}}}function qn(t,e,n,r,i,o,a){Gn(t,e,n,r,!1,i,o,a),Gn(t,e,n,r,!0,i,o,a)}var Xn=t.identity(new Float32Array(16));function Zn(e,n,r,i,o,a){var s=t.getAnchorAlignment(e),u=-(s.horizontalAlign-.5)*n,l=-(s.verticalAlign-.5)*r,c=t.evaluateVariableOffset(e,i);return new t.Point((u/o+c[0])*a,(l/o+c[1])*a)}function Kn(e,n,r,i,o,a,s,u,l,c,d){var h=e.text.placedSymbolArray,f=e.text.dynamicLayoutVertexArray,p=e.icon.dynamicLayoutVertexArray,m={};f.clear();for(var _=0;_<h.length;_++){var y=h.get(_),v=y.hidden||!y.crossTileID||e.allowVerticalPlacement&&!y.placedOrientation?null:i[y.crossTileID];if(v){var g=new t.Point(y.anchorX,y.anchorY),x=Kt(g,r?u:s),b=.5+a.cameraToCenterDistance/x.signedDistanceFromCamera*.5,w=o.evaluateSizeForFeature(e.textSizeData,c,y)*b/t.ONE_EM;r&&(w*=e.tilePixelRatio/l);for(var M=Zn(v.anchor,v.width,v.height,v.textOffset,v.textBoxScale,w),L=r?Kt(g.add(M),s).point:x.point.add(n?M.rotate(-a.angle):M),k=e.allowVerticalPlacement&&y.placedOrientation===t.WritingMode.vertical?Math.PI/2:0,T=0;T<y.numGlyphs;T++)t.addDynamicAttributes(f,L,k);d&&y.associatedIconIndex>=0&&(m[y.associatedIconIndex]={shiftedAnchor:L,angle:k})}else oe(y.numGlyphs,f)}if(d){p.clear();for(var S=e.icon.placedSymbolArray,E=0;E<S.length;E++){var A=S.get(E);if(A.hidden)oe(A.numGlyphs,p);else{var D=m[E];if(D)for(var C=0;C<A.numGlyphs;C++)t.addDynamicAttributes(p,D.shiftedAnchor,D.angle);else oe(A.numGlyphs,p)}}e.icon.dynamicLayoutVertexBuffer.updateData(p)}e.text.dynamicLayoutVertexBuffer.updateData(f)}function Jn(t,e,n){return n.iconsInText&&e?"symbolTextAndIcon":t?"symbolSDF":"symbolIcon"}function $n(e,n,r,i,o,a,s,u,l,c,d,h){for(var f=e.context,p=f.gl,m=e.transform,_="map"===u,y="map"===l,v=_&&"point"!==r.layout.get("symbol-placement"),g=_&&!y&&!v,x=void 0!==r.layout.get("symbol-sort-key").constantOr(1),b=e.depthModeForSublayer(0,kt.ReadOnly),w=r.layout.get("text-variable-anchor"),M=[],L=0,k=i;L<k.length;L+=1){var T=k[L],S=n.getTile(T),E=S.getBucket(r);if(E){var A=o?E.text:E.icon;if(A&&A.segments.get().length){var D=A.programConfigurations.get(r.id),C=o||E.sdfIcons,P=o?E.textSizeData:E.iconSizeData,I=y||0!==m.pitch,O=e.useProgram(Jn(C,o,E),D),R=t.evaluateSizeForZoom(P,m.zoom),Y=void 0,F=[0,0],j=void 0,z=void 0,N=null,B=void 0;if(o)j=S.glyphAtlasTexture,z=p.LINEAR,Y=S.glyphAtlasTexture.size,E.iconsInText&&(F=S.imageAtlasTexture.size,N=S.imageAtlasTexture,B=I||e.options.rotating||e.options.zooming||"composite"===P.kind||"camera"===P.kind?p.LINEAR:p.NEAREST);else{var U=1!==r.layout.get("icon-size").constantOr(0)||E.iconsNeedLinear;j=S.imageAtlasTexture,z=C||e.options.rotating||e.options.zooming||U||I?p.LINEAR:p.NEAREST,Y=S.imageAtlasTexture.size}var H=le(S,1,e.transform.zoom),V=Xt(T.posMatrix,y,_,e.transform,H),W=Zt(T.posMatrix,y,_,e.transform,H),G=w&&E.hasTextData(),q="none"!==r.layout.get("icon-text-fit")&&G&&E.hasIconData();v&&$t(E,T.posMatrix,e,o,V,W,y,c);var X=e.translatePosMatrix(T.posMatrix,S,a,s),Z=v||o&&w||q?Xn:V,K=e.translatePosMatrix(W,S,a,s,!0),J=C&&0!==r.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1),$={program:O,buffers:A,uniformValues:C?E.iconsInText?Un(P.kind,R,g,y,e,X,Z,K,Y,F):Bn(P.kind,R,g,y,e,X,Z,K,o,Y,!0):Nn(P.kind,R,g,y,e,X,Z,K,o,Y),atlasTexture:j,atlasTextureIcon:N,atlasInterpolation:z,atlasInterpolationIcon:B,isSDF:C,hasHalo:J};if(x)for(var Q=0,tt=A.segments.get();Q<tt.length;Q+=1){var et=tt[Q];M.push({segments:new t.SegmentVector([et]),sortKey:et.sortKey,state:$})}else M.push({segments:A.segments,sortKey:0,state:$})}}}x&&M.sort((function(t,e){return t.sortKey-e.sortKey}));for(var nt=0,rt=M;nt<rt.length;nt+=1){var it=rt[nt],ot=it.state;if(f.activeTexture.set(p.TEXTURE0),ot.atlasTexture.bind(ot.atlasInterpolation,p.CLAMP_TO_EDGE),ot.atlasTextureIcon&&(f.activeTexture.set(p.TEXTURE1),ot.atlasTextureIcon&&ot.atlasTextureIcon.bind(ot.atlasInterpolationIcon,p.CLAMP_TO_EDGE)),ot.isSDF){var at=ot.uniformValues;ot.hasHalo&&(at.u_is_halo=1,Qn(ot.buffers,it.segments,r,e,ot.program,b,d,h,at)),at.u_is_halo=0}Qn(ot.buffers,it.segments,r,e,ot.program,b,d,h,ot.uniformValues)}}function Qn(t,e,n,r,i,o,a,s,u){var l=r.context;i.draw(l,l.gl.TRIANGLES,o,a,s,Et.disabled,u,n.id,t.layoutVertexBuffer,t.indexBuffer,e,n.paint,r.transform.zoom,t.programConfigurations.get(n.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function tr(t,e,n,r,i,o,a){var s,u,l,c,d,h=t.context.gl,f=n.paint.get("fill-pattern"),p=f&&f.constantOr(1),m=n.getCrossfadeParameters();a?(u=p&&!n.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",s=h.LINES):(u=p?"fillPattern":"fill",s=h.TRIANGLES);for(var _=0,y=r;_<y.length;_+=1){var v=y[_],g=e.getTile(v);if(!p||g.patternsLoaded()){var x=g.getBucket(n);if(x){var b=x.programConfigurations.get(n.id),w=t.useProgram(u,b);p&&(t.context.activeTexture.set(h.TEXTURE0),g.imageAtlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE),b.updatePaintBuffers(m));var M=f.constantOr(null);if(M&&g.imageAtlas){var L=g.imageAtlas,k=L.patternPositions[M.to.toString()],T=L.patternPositions[M.from.toString()];k&&T&&b.setConstantPatternPositions(k,T)}var S=t.translatePosMatrix(v.posMatrix,g,n.paint.get("fill-translate"),n.paint.get("fill-translate-anchor"));if(a){c=x.indexBuffer2,d=x.segments2;var E=[h.drawingBufferWidth,h.drawingBufferHeight];l="fillOutlinePattern"===u&&p?Ln(S,t,m,g,E):Mn(S,E)}else c=x.indexBuffer,d=x.segments,l=p?wn(S,t,m,g):bn(S);w.draw(t.context,s,i,t.stencilModeForClipping(v),o,Et.disabled,l,n.id,x.layoutVertexBuffer,c,d,n.paint,t.transform.zoom,b)}}}}function er(t,e,n,r,i,o,a){for(var s=t.context,u=s.gl,l=n.paint.get("fill-extrusion-pattern"),c=l.constantOr(1),d=n.getCrossfadeParameters(),h=n.paint.get("fill-extrusion-opacity"),f=0,p=r;f<p.length;f+=1){var m=p[f],_=e.getTile(m),y=_.getBucket(n);if(y){var v=y.programConfigurations.get(n.id),g=t.useProgram(c?"fillExtrusionPattern":"fillExtrusion",v);c&&(t.context.activeTexture.set(u.TEXTURE0),_.imageAtlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE),v.updatePaintBuffers(d));var x=l.constantOr(null);if(x&&_.imageAtlas){var b=_.imageAtlas,w=b.patternPositions[x.to.toString()],M=b.patternPositions[x.from.toString()];w&&M&&v.setConstantPatternPositions(w,M)}var L=t.translatePosMatrix(m.posMatrix,_,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor")),k=n.paint.get("fill-extrusion-vertical-gradient"),T=c?xn(L,t,k,h,m,d,_):gn(L,t,k,h);g.draw(s,s.gl.TRIANGLES,i,o,a,Et.backCCW,T,n.id,y.layoutVertexBuffer,y.indexBuffer,y.segments,n.paint,t.transform.zoom,v)}}}function nr(t,e,n,r,i,o){var a=t.context,s=a.gl,u=e.fbo;if(u){var l=t.useProgram("hillshade");a.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,u.colorAttachment.get());var c=Cn(t,e,n);l.draw(a,s.TRIANGLES,r,i,o,Et.disabled,c,n.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}}function rr(e,n,r,i,o,a,s){var u=e.context,l=u.gl,c=n.dem;if(c&&c.data){var d=c.dim,h=c.stride,f=c.getPixels();if(u.activeTexture.set(l.TEXTURE1),u.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||e.getTileTexture(h),n.demTexture){var p=n.demTexture;p.update(f,{premultiply:!1}),p.bind(l.NEAREST,l.CLAMP_TO_EDGE)}else n.demTexture=new t.Texture(u,f,l.RGBA,{premultiply:!1}),n.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);u.activeTexture.set(l.TEXTURE0);var m=n.fbo;if(!m){var _=new t.Texture(u,{width:d,height:d,data:null},l.RGBA);_.bind(l.LINEAR,l.CLAMP_TO_EDGE),(m=n.fbo=u.createFramebuffer(d,d,!0)).colorAttachment.set(_.texture)}u.bindFramebuffer.set(m.framebuffer),u.viewport.set([0,0,d,d]),e.useProgram("hillshadePrepare").draw(u,l.TRIANGLES,o,a,s,Et.disabled,function(e,n,r){var i=n.stride,o=t.create();return t.ortho(o,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(o,o,[0,-t.EXTENT,0]),{u_matrix:o,u_image:1,u_dimension:[i,i],u_zoom:e.overscaledZ,u_maxzoom:r,u_unpack:n.getUnpackVector()}}(n.tileID,c,i),r.id,e.rasterBoundsBuffer,e.quadTriangleIndexBuffer,e.rasterBoundsSegments),n.needsHillshadePrepare=!1}}function ir(e,n,r,i,o){var a=i.paint.get("raster-fade-duration");if(a>0){var s=t.browser.now(),u=(s-e.timeAdded)/a,l=n?(s-n.timeAdded)/a:-1,c=r.getSource(),d=o.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),h=!n||Math.abs(n.tileID.overscaledZ-d)>Math.abs(e.tileID.overscaledZ-d),f=h&&e.refreshedUponExpiration?1:t.clamp(h?u:1-l,0,1);return e.refreshedUponExpiration&&u>=1&&(e.refreshedUponExpiration=!1),n?{opacity:1,mix:1-f}:{opacity:f,mix:0}}return{opacity:1,mix:0}}var or=new t.Color(1,0,0,1),ar=new t.Color(0,1,0,1),sr=new t.Color(0,0,1,1),ur=new t.Color(1,0,1,1),lr=new t.Color(0,1,1,1);function cr(t,e,n,r){hr(t,0,e+n/2,t.transform.width,n,r)}function dr(t,e,n,r){hr(t,e-n/2,0,n,t.transform.height,r)}function hr(e,n,r,i,o,a){var s=e.context,u=s.gl;u.enable(u.SCISSOR_TEST),u.scissor(n*t.browser.devicePixelRatio,r*t.browser.devicePixelRatio,i*t.browser.devicePixelRatio,o*t.browser.devicePixelRatio),s.clear({color:a}),u.disable(u.SCISSOR_TEST)}function fr(e,n,r){var i=e.context,o=i.gl,a=r.posMatrix,s=e.useProgram("debug"),u=kt.disabled,l=Tt.disabled,c=e.colorModeForRenderPass();i.activeTexture.set(o.TEXTURE0),e.emptyTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),s.draw(i,o.LINE_STRIP,u,l,c,Et.disabled,En(a,t.Color.red),"$debug",e.debugBuffer,e.tileBorderIndexBuffer,e.debugSegments);var d=n.getTileByID(r.key).latestRawTileData,h=Math.floor((d&&d.byteLength||0)/1024),f=n.getTile(r).tileSize,p=512/Math.min(f,512)*(r.overscaledZ/e.transform.zoom)*.5,m=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(m+=" => "+r.overscaledZ),function(t,e){t.initDebugOverlayCanvas();var n=t.debugOverlayCanvas,r=t.context.gl,i=t.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,n.width,n.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(e,5,5),i.strokeText(e,5,5),t.debugOverlayTexture.update(n),t.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(e,m+" "+h+"kb"),s.draw(i,o.TRIANGLES,u,l,St.alphaBlended,Et.disabled,En(a,t.Color.transparent,p),"$debug",e.debugBuffer,e.quadTriangleIndexBuffer,e.debugSegments)}var pr={symbol:function(e,n,r,i,o){if("translucent"===e.renderPass){var a=Tt.disabled,s=e.colorModeForRenderPass();r.layout.get("text-variable-anchor")&&function(e,n,r,i,o,a,s){for(var u=n.transform,l="map"===o,c="map"===a,d=0,h=e;d<h.length;d+=1){var f=h[d],p=i.getTile(f),m=p.getBucket(r);if(m&&m.text&&m.text.segments.get().length){var _=t.evaluateSizeForZoom(m.textSizeData,u.zoom),y=le(p,1,n.transform.zoom),v=Xt(f.posMatrix,c,l,n.transform,y),g="none"!==r.layout.get("icon-text-fit")&&m.hasIconData();if(_){var x=Math.pow(2,u.zoom-p.tileID.overscaledZ);Kn(m,l,c,s,t.symbolSize,u,v,f.posMatrix,x,_,g)}}}}(i,e,r,n,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),o),0!==r.paint.get("icon-opacity").constantOr(1)&&$n(e,n,r,i,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),a,s),0!==r.paint.get("text-opacity").constantOr(1)&&$n(e,n,r,i,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),a,s),n.map.showCollisionBoxes&&(qn(e,n,r,i,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),qn(e,n,r,i,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))}},circle:function(e,n,r,i){if("translucent"===e.renderPass){var o=r.paint.get("circle-opacity"),a=r.paint.get("circle-stroke-width"),s=r.paint.get("circle-stroke-opacity"),u=void 0!==r.layout.get("circle-sort-key").constantOr(1);if(0!==o.constantOr(1)||0!==a.constantOr(1)&&0!==s.constantOr(1)){for(var l=e.context,c=l.gl,d=e.depthModeForSublayer(0,kt.ReadOnly),h=Tt.disabled,f=e.colorModeForRenderPass(),p=[],m=0;m<i.length;m++){var _=i[m],y=n.getTile(_),v=y.getBucket(r);if(v){var g=v.programConfigurations.get(r.id),x={programConfiguration:g,program:e.useProgram("circle",g),layoutVertexBuffer:v.layoutVertexBuffer,indexBuffer:v.indexBuffer,uniformValues:kn(e,_,y,r)};if(u)for(var b=0,w=v.segments.get();b<w.length;b+=1){var M=w[b];p.push({segments:new t.SegmentVector([M]),sortKey:M.sortKey,state:x})}else p.push({segments:v.segments,sortKey:0,state:x})}}u&&p.sort((function(t,e){return t.sortKey-e.sortKey}));for(var L=0,k=p;L<k.length;L+=1){var T=k[L],S=T.state;S.program.draw(l,c.TRIANGLES,d,h,f,Et.disabled,S.uniformValues,r.id,S.layoutVertexBuffer,S.indexBuffer,T.segments,r.paint,e.transform.zoom,S.programConfiguration)}}}},heatmap:function(e,n,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var o=e.context,a=o.gl,s=Tt.disabled,u=new St([a.ONE,a.ONE],t.Color.transparent,[!0,!0,!0,!0]);!function(t,e,n){var r=t.gl;t.activeTexture.set(r.TEXTURE1),t.viewport.set([0,0,e.width/4,e.height/4]);var i=n.heatmapFbo;if(i)r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),t.bindFramebuffer.set(i.framebuffer);else{var o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),i=n.heatmapFbo=t.createFramebuffer(e.width/4,e.height/4,!1),function t(e,n,r,i){var o=e.gl;o.texImage2D(o.TEXTURE_2D,0,o.RGBA,n.width/4,n.height/4,0,o.RGBA,e.extTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:o.UNSIGNED_BYTE,null),i.colorAttachment.set(r),e.extTextureHalfFloat&&o.checkFramebufferStatus(o.FRAMEBUFFER)!==o.FRAMEBUFFER_COMPLETE&&(e.extTextureHalfFloat=null,i.colorAttachment.setDirty(),t(e,n,r,i))}(t,e,o,i)}}(o,e,r),o.clear({color:t.Color.transparent});for(var l=0;l<i.length;l++){var c=i[l];if(!n.hasRenderableParent(c)){var d=n.getTile(c),h=d.getBucket(r);if(h){var f=h.programConfigurations.get(r.id);e.useProgram("heatmap",f).draw(o,a.TRIANGLES,kt.disabled,s,u,Et.disabled,Dn(c.posMatrix,d,e.transform.zoom,r.paint.get("heatmap-intensity")),r.id,h.layoutVertexBuffer,h.indexBuffer,h.segments,r.paint,e.transform.zoom,f)}}}o.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),function(e,n){var r=e.context,i=r.gl,o=n.heatmapFbo;if(o){r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);var a=n.colorRampTexture;a||(a=n.colorRampTexture=new t.Texture(r,n.colorRamp,i.RGBA)),a.bind(i.LINEAR,i.CLAMP_TO_EDGE),e.useProgram("heatmapTexture").draw(r,i.TRIANGLES,kt.disabled,Tt.disabled,e.colorModeForRenderPass(),Et.disabled,function(e,n,r,i){var o=t.create();t.ortho(o,0,e.width,e.height,0,0,1);var a=e.context.gl;return{u_matrix:o,u_world:[a.drawingBufferWidth,a.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:n.paint.get("heatmap-opacity")}}(e,n),n.id,e.viewportBuffer,e.quadTriangleIndexBuffer,e.viewportSegments,n.paint,e.transform.zoom)}}(e,r))},line:function(e,n,r,i){if("translucent"===e.renderPass){var o=r.paint.get("line-opacity"),a=r.paint.get("line-width");if(0!==o.constantOr(1)&&0!==a.constantOr(1)){var s=e.depthModeForSublayer(0,kt.ReadOnly),u=e.colorModeForRenderPass(),l=r.paint.get("line-dasharray"),c=r.paint.get("line-pattern"),d=c.constantOr(1),h=r.paint.get("line-gradient"),f=r.getCrossfadeParameters(),p=d?"linePattern":l?"lineSDF":h?"lineGradient":"line",m=e.context,_=m.gl,y=!0;if(h){m.activeTexture.set(_.TEXTURE0);var v=r.gradientTexture;if(!r.gradient)return;v||(v=r.gradientTexture=new t.Texture(m,r.gradient,_.RGBA)),v.bind(_.LINEAR,_.CLAMP_TO_EDGE)}for(var g=0,x=i;g<x.length;g+=1){var b=x[g],w=n.getTile(b);if(!d||w.patternsLoaded()){var M=w.getBucket(r);if(M){var L=M.programConfigurations.get(r.id),k=e.context.program.get(),T=e.useProgram(p,L),S=y||T.program!==k,E=c.constantOr(null);if(E&&w.imageAtlas){var A=w.imageAtlas,D=A.patternPositions[E.to.toString()],C=A.patternPositions[E.from.toString()];D&&C&&L.setConstantPatternPositions(D,C)}var P=d?On(e,w,r,f):l?Rn(e,w,r,l,f):h?In(e,w,r):Pn(e,w,r);d?(m.activeTexture.set(_.TEXTURE0),w.imageAtlasTexture.bind(_.LINEAR,_.CLAMP_TO_EDGE),L.updatePaintBuffers(f)):l&&(S||e.lineAtlas.dirty)&&(m.activeTexture.set(_.TEXTURE0),e.lineAtlas.bind(m)),T.draw(m,_.TRIANGLES,s,e.stencilModeForClipping(b),u,Et.disabled,P,r.id,M.layoutVertexBuffer,M.indexBuffer,M.segments,r.paint,e.transform.zoom,L),y=!1}}}}}},fill:function(e,n,r,i){var o=r.paint.get("fill-color"),a=r.paint.get("fill-opacity");if(0!==a.constantOr(1)){var s=e.colorModeForRenderPass(),u=r.paint.get("fill-pattern"),l=e.opaquePassEnabledForLayer()&&!u.constantOr(1)&&1===o.constantOr(t.Color.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(e.renderPass===l){var c=e.depthModeForSublayer(1,"opaque"===e.renderPass?kt.ReadWrite:kt.ReadOnly);tr(e,n,r,i,c,s,!1)}if("translucent"===e.renderPass&&r.paint.get("fill-antialias")){var d=e.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,kt.ReadOnly);tr(e,n,r,i,d,s,!0)}}},"fill-extrusion":function(t,e,n,r){var i=n.paint.get("fill-extrusion-opacity");if(0!==i&&"translucent"===t.renderPass){var o=new kt(t.context.gl.LEQUAL,kt.ReadWrite,t.depthRangeFor3D);if(1!==i||n.paint.get("fill-extrusion-pattern").constantOr(1))er(t,e,n,r,o,Tt.disabled,St.disabled),er(t,e,n,r,o,t.stencilModeFor3D(),t.colorModeForRenderPass());else{var a=t.colorModeForRenderPass();er(t,e,n,r,o,Tt.disabled,a)}}},hillshade:function(t,e,n,r){if("offscreen"===t.renderPass||"translucent"===t.renderPass){for(var i=t.context,o=e.getSource().maxzoom,a=t.depthModeForSublayer(0,kt.ReadOnly),s=t.colorModeForRenderPass(),u="translucent"===t.renderPass?t.stencilConfigForOverlap(r):[{},r],l=u[0],c=0,d=u[1];c<d.length;c+=1){var h=d[c],f=e.getTile(h);f.needsHillshadePrepare&&"offscreen"===t.renderPass?rr(t,f,n,o,a,Tt.disabled,s):"translucent"===t.renderPass&&nr(t,f,n,a,l[h.overscaledZ],s)}i.viewport.set([0,0,t.width,t.height])}},raster:function(t,e,n,r){if("translucent"===t.renderPass&&0!==n.paint.get("raster-opacity")&&r.length)for(var i=t.context,o=i.gl,a=e.getSource(),s=t.useProgram("raster"),u=t.colorModeForRenderPass(),l=a instanceof P?[{},r]:t.stencilConfigForOverlap(r),c=l[0],d=l[1],h=d[d.length-1].overscaledZ,f=!t.options.moving,p=0,m=d;p<m.length;p+=1){var _=m[p],y=t.depthModeForSublayer(_.overscaledZ-h,1===n.paint.get("raster-opacity")?kt.ReadWrite:kt.ReadOnly,o.LESS),v=e.getTile(_),g=t.transform.calculatePosMatrix(_.toUnwrapped(),f);v.registerFadeDuration(n.paint.get("raster-fade-duration"));var x=e.findLoadedParent(_,0),b=ir(v,x,e,n,t.transform),w=void 0,M=void 0,L="nearest"===n.paint.get("raster-resampling")?o.NEAREST:o.LINEAR;i.activeTexture.set(o.TEXTURE0),v.texture.bind(L,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),i.activeTexture.set(o.TEXTURE1),x?(x.texture.bind(L,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),w=Math.pow(2,x.tileID.overscaledZ-v.tileID.overscaledZ),M=[v.tileID.canonical.x*w%1,v.tileID.canonical.y*w%1]):v.texture.bind(L,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST);var k=jn(g,M||[0,0],w||1,b,n);a instanceof P?s.draw(i,o.TRIANGLES,y,Tt.disabled,u,Et.disabled,k,n.id,a.boundsBuffer,t.quadTriangleIndexBuffer,a.boundsSegments):s.draw(i,o.TRIANGLES,y,c[_.overscaledZ],u,Et.disabled,k,n.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,e,n){var r=n.paint.get("background-color"),i=n.paint.get("background-opacity");if(0!==i){var o=t.context,a=o.gl,s=t.transform,u=s.tileSize,l=n.paint.get("background-pattern");if(!t.isPatternMissing(l)){var c=!l&&1===r.a&&1===i&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass===c){var d=Tt.disabled,h=t.depthModeForSublayer(0,"opaque"===c?kt.ReadWrite:kt.ReadOnly),f=t.colorModeForRenderPass(),p=t.useProgram(l?"backgroundPattern":"background"),m=s.coveringTiles({tileSize:u});l&&(o.activeTexture.set(a.TEXTURE0),t.imageManager.bind(t.context));for(var _=n.getCrossfadeParameters(),y=0,v=m;y<v.length;y+=1){var g=v[y],x=t.transform.calculatePosMatrix(g.toUnwrapped()),b=l?Vn(x,i,t,l,{tileID:g,tileSize:u},_):Hn(x,i,r);p.draw(o,a.TRIANGLES,h,d,f,Et.disabled,b,n.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}}}}},debug:function(t,e,n){for(var r=0;r<n.length;r++)fr(t,e,n[r])},custom:function(t,e,n){var r=t.context,i=n.implementation;if("offscreen"===t.renderPass){var o=i.prerender;o&&(t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),o.call(i,r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),r.setColorMode(t.colorModeForRenderPass()),r.setStencilMode(Tt.disabled);var a="3d"===i.renderingMode?new kt(t.context.gl.LEQUAL,kt.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,kt.ReadOnly);r.setDepthMode(a),i.render(r.gl,t.transform.customLayerMatrix()),r.setDirty(),t.setBaseState(),r.bindFramebuffer.set(null)}}},mr=function(t,e){this.context=new At(t),this.transform=e,this._tileTextures={},this.setup(),this.numSublayers=Dt.maxUnderzooming+Dt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Oe,this.gpuTimers={}};mr.prototype.resize=function(e,n){if(this.width=e*t.browser.devicePixelRatio,this.height=n*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var r=0,i=this.style._order;r<i.length;r+=1)this.style._layers[i[r]].resize()},mr.prototype.setup=function(){var e=this.context,n=new t.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(t.EXTENT,0),n.emplaceBack(0,t.EXTENT),n.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=e.createVertexBuffer(n,Ne.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var r=new t.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(t.EXTENT,0),r.emplaceBack(0,t.EXTENT),r.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=e.createVertexBuffer(r,Ne.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var i=new t.StructArrayLayout4i8;i.emplaceBack(0,0,0,0),i.emplaceBack(t.EXTENT,0,t.EXTENT,0),i.emplaceBack(0,t.EXTENT,0,t.EXTENT),i.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=e.createVertexBuffer(i,C.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var o=new t.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(o,Ne.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var a=new t.StructArrayLayout1ui2;a.emplaceBack(0),a.emplaceBack(1),a.emplaceBack(3),a.emplaceBack(2),a.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(a);var s=new t.StructArrayLayout3ui6;s.emplaceBack(0,1,2),s.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(s),this.emptyTexture=new t.Texture(e,{width:1,height:1,data:new Uint8Array([0,0,0,0])},e.gl.RGBA);var u=this.context.gl;this.stencilClearMode=new Tt({func:u.ALWAYS,mask:0},0,255,u.ZERO,u.ZERO,u.ZERO)},mr.prototype.clearStencil=function(){var e=this.context,n=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var r=t.create();t.ortho(r,0,this.width,this.height,0,0,1),t.scale(r,r,[n.drawingBufferWidth,n.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,n.TRIANGLES,kt.disabled,this.stencilClearMode,St.disabled,Et.disabled,An(r),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},mr.prototype._renderTileClippingMasks=function(t,e){if(this.currentStencilSource!==t.source&&t.isTileClipped()&&e&&e.length){this.currentStencilSource=t.source;var n=this.context,r=n.gl;this.nextStencilID+e.length>256&&this.clearStencil(),n.setColorMode(St.disabled),n.setDepthMode(kt.disabled);var i=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var o=0,a=e;o<a.length;o+=1){var s=a[o],u=this._tileClippingMaskIDs[s.key]=this.nextStencilID++;i.draw(n,r.TRIANGLES,kt.disabled,new Tt({func:r.ALWAYS,mask:0},u,255,r.KEEP,r.KEEP,r.REPLACE),St.disabled,Et.disabled,An(s.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},mr.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var t=this.nextStencilID++,e=this.context.gl;return new Tt({func:e.NOTEQUAL,mask:255},t,255,e.KEEP,e.KEEP,e.REPLACE)},mr.prototype.stencilModeForClipping=function(t){var e=this.context.gl;return new Tt({func:e.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,e.KEEP,e.KEEP,e.REPLACE)},mr.prototype.stencilConfigForOverlap=function(t){var e,n=this.context.gl,r=t.sort((function(t,e){return e.overscaledZ-t.overscaledZ})),i=r[r.length-1].overscaledZ,o=r[0].overscaledZ-i+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();for(var a={},s=0;s<o;s++)a[s+i]=new Tt({func:n.GEQUAL,mask:255},s+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=o,[a,r]}return[(e={},e[i]=Tt.disabled,e),r]},mr.prototype.colorModeForRenderPass=function(){var e=this.context.gl;return this._showOverdrawInspector?new St([e.CONSTANT_COLOR,e.ONE],new t.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?St.unblended:St.alphaBlended},mr.prototype.depthModeForSublayer=function(t,e,n){if(!this.opaquePassEnabledForLayer())return kt.disabled;var r=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new kt(n||this.context.gl.LEQUAL,e,[r,r])},mr.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},mr.prototype.render=function(e,n){var r=this;this.style=e,this.options=n,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(t.browser.now()),this.imageManager.beginFrame();var i=this.style._order,o=this.style.sourceCaches;for(var a in o){var s=o[a];s.used&&s.prepare(this.context)}var u,l,c={},d={},h={};for(var f in o){var p=o[f];c[f]=p.getVisibleCoordinates(),d[f]=c[f].slice().reverse(),h[f]=p.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var m=0;m<i.length;m++)if(this.style._layers[i[m]].is3D()){this.opaquePassCutoff=m;break}this.renderPass="offscreen";for(var _=0,y=i;_<y.length;_+=1){var v=this.style._layers[y[_]];if(v.hasOffscreenPass()&&!v.isHidden(this.transform.zoom)){var g=d[v.source];("custom"===v.type||g.length)&&this.renderLayer(this,o[v.source],v,g)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:n.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=i.length-1;this.currentLayer>=0;this.currentLayer--){var x=this.style._layers[i[this.currentLayer]],b=o[x.source],w=c[x.source];this._renderTileClippingMasks(x,w),this.renderLayer(this,b,x,w)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<i.length;this.currentLayer++){var M=this.style._layers[i[this.currentLayer]],L=o[M.source],k=("symbol"===M.type?h:d)[M.source];this._renderTileClippingMasks(M,c[M.source]),this.renderLayer(this,L,M,k)}this.options.showTileBoundaries&&(t.values(this.style._layers).forEach((function(t){t.source&&!t.isHidden(r.transform.zoom)&&(t.source!==(l&&l.id)&&(l=r.style.sourceCaches[t.source]),(!u||u.getSource().maxzoom<l.getSource().maxzoom)&&(u=l))})),u&&pr.debug(this,u,u.getVisibleCoordinates())),this.options.showPadding&&function(t){var e=t.transform.padding;cr(t,t.transform.height-(e.top||0),3,or),cr(t,e.bottom||0,3,ar),dr(t,e.left||0,3,sr),dr(t,t.transform.width-(e.right||0),3,ur);var n=t.transform.centerPoint;!function(t,e,n,r){hr(t,e-1,n-10,2,20,r),hr(t,e-10,n-1,20,2,r)}(t,n.x,t.transform.height-n.y,lr)}(this),this.context.setDefault()},mr.prototype.renderLayer=function(t,e,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||"custom"===n.type||r.length)&&(this.id=n.id,this.gpuTimingStart(n),pr[n.type](t,e,n,r,this.style.placement.variableOffsets),this.gpuTimingEnd())},mr.prototype.gpuTimingStart=function(t){if(this.options.gpuTiming){var e=this.context.extTimerQuery,n=this.gpuTimers[t.id];n||(n=this.gpuTimers[t.id]={calls:0,cpuTime:0,query:e.createQueryEXT()}),n.calls++,e.beginQueryEXT(e.TIME_ELAPSED_EXT,n.query)}},mr.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var t=this.context.extTimerQuery;t.endQueryEXT(t.TIME_ELAPSED_EXT)}},mr.prototype.collectGpuTimers=function(){var t=this.gpuTimers;return this.gpuTimers={},t},mr.prototype.queryGpuTimers=function(t){var e={};for(var n in t){var r=t[n],i=this.context.extTimerQuery,o=i.getQueryObjectEXT(r.query,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(r.query),e[n]=o}return e},mr.prototype.translatePosMatrix=function(e,n,r,i,o){if(!r[0]&&!r[1])return e;var a=o?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(a){var s=Math.sin(a),u=Math.cos(a);r=[r[0]*u-r[1]*s,r[0]*s+r[1]*u]}var l=[o?r[0]:le(n,r[0],this.transform.zoom),o?r[1]:le(n,r[1],this.transform.zoom),0],c=new Float32Array(16);return t.translate(c,e,l),c},mr.prototype.saveTileTexture=function(t){var e=this._tileTextures[t.size[0]];e?e.push(t):this._tileTextures[t.size[0]]=[t]},mr.prototype.getTileTexture=function(t){var e=this._tileTextures[t];return e&&e.length>0?e.pop():null},mr.prototype.isPatternMissing=function(t){if(!t)return!1;var e=this.imageManager.getPattern(t.from.toString()),n=this.imageManager.getPattern(t.to.toString());return!e||!n},mr.prototype.useProgram=function(t,e){this.cache=this.cache||{};var n=""+t+(e?e.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=new yn(this.context,mn[t],e,Wn[t],this._showOverdrawInspector)),this.cache[n]},mr.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},mr.prototype.setBaseState=function(){var t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)},mr.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},mr.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var _r=function(t,e){this.points=t,this.planes=e};_r.fromInvProjectionMatrix=function(e,n,r){var i=Math.pow(2,r),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((function(n){return t.transformMat4([],n,e)})).map((function(e){return t.scale$1([],e,1/e[3]/n*i)})),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((function(e){var n=t.sub([],o[e[0]],o[e[1]]),r=t.sub([],o[e[2]],o[e[1]]),i=t.normalize([],t.cross([],n,r)),a=-t.dot(i,o[e[1]]);return i.concat(a)}));return new _r(o,a)};var yr=function(e,n){this.min=e,this.max=n,this.center=t.scale$2([],t.add([],this.min,this.max),.5)};yr.prototype.quadrant=function(e){for(var n=[e%2==0,e<2],r=t.clone$2(this.min),i=t.clone$2(this.max),o=0;o<n.length;o++)r[o]=n[o]?this.min[o]:this.center[o],i[o]=n[o]?this.center[o]:this.max[o];return i[2]=this.max[2],new yr(r,i)},yr.prototype.distanceX=function(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]},yr.prototype.distanceY=function(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]},yr.prototype.intersects=function(e){for(var n=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],r=!0,i=0;i<e.planes.length;i++){for(var o=e.planes[i],a=0,s=0;s<n.length;s++)a+=t.dot$1(o,n[s])>=0;if(0===a)return 0;a!==n.length&&(r=!1)}if(r)return 2;for(var u=0;u<3;u++){for(var l=Number.MAX_VALUE,c=-Number.MAX_VALUE,d=0;d<e.points.length;d++){var h=e.points[d][u]-this.min[u];l=Math.min(l,h),c=Math.max(c,h)}if(c<0||l>this.max[u]-this.min[u])return 0}return 1};var vr=function(t,e,n,r){if(void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),isNaN(t)||t<0||isNaN(e)||e<0||isNaN(n)||n<0||isNaN(r)||r<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=e,this.left=n,this.right=r};vr.prototype.interpolate=function(e,n,r){return null!=n.top&&null!=e.top&&(this.top=t.number(e.top,n.top,r)),null!=n.bottom&&null!=e.bottom&&(this.bottom=t.number(e.bottom,n.bottom,r)),null!=n.left&&null!=e.left&&(this.left=t.number(e.left,n.left,r)),null!=n.right&&null!=e.right&&(this.right=t.number(e.right,n.right,r)),this},vr.prototype.getCenter=function(e,n){var r=t.clamp((this.left+e-this.right)/2,0,e),i=t.clamp((this.top+n-this.bottom)/2,0,n);return new t.Point(r,i)},vr.prototype.equals=function(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right},vr.prototype.clone=function(){return new vr(this.top,this.bottom,this.left,this.right)},vr.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var gr=function(e,n,r,i,o){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===o||o,this._minZoom=e||0,this._maxZoom=n||22,this._minPitch=null==r?0:r,this._maxPitch=null==i?60:i,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new vr,this._posMatrixCache={},this._alignedPosMatrixCache={}},xr={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};gr.prototype.clone=function(){var t=new gr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.tileSize=this.tileSize,t.latRange=this.latRange,t.width=this.width,t.height=this.height,t._center=this._center,t.zoom=this.zoom,t.angle=this.angle,t._fov=this._fov,t._pitch=this._pitch,t._unmodified=this._unmodified,t._edgeInsets=this._edgeInsets.clone(),t._calcMatrices(),t},xr.minZoom.get=function(){return this._minZoom},xr.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},xr.maxZoom.get=function(){return this._maxZoom},xr.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},xr.minPitch.get=function(){return this._minPitch},xr.minPitch.set=function(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))},xr.maxPitch.get=function(){return this._maxPitch},xr.maxPitch.set=function(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))},xr.renderWorldCopies.get=function(){return this._renderWorldCopies},xr.renderWorldCopies.set=function(t){void 0===t?t=!0:null===t&&(t=!1),this._renderWorldCopies=t},xr.worldSize.get=function(){return this.tileSize*this.scale},xr.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},xr.size.get=function(){return new t.Point(this.width,this.height)},xr.bearing.get=function(){return-this.angle/Math.PI*180},xr.bearing.set=function(e){var n=-t.wrap(e,-180,180)*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},xr.pitch.get=function(){return this._pitch/Math.PI*180},xr.pitch.set=function(e){var n=t.clamp(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())},xr.fov.get=function(){return this._fov/Math.PI*180},xr.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},xr.zoom.get=function(){return this._zoom},xr.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},xr.center.get=function(){return this._center},xr.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},xr.padding.get=function(){return this._edgeInsets.toJSON()},xr.padding.set=function(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())},xr.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},gr.prototype.isPaddingEqual=function(t){return this._edgeInsets.equals(t)},gr.prototype.interpolatePadding=function(t,e,n){this._unmodified=!1,this._edgeInsets.interpolate(t,e,n),this._constrain(),this._calcMatrices()},gr.prototype.coveringZoomLevel=function(t){var e=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,e)},gr.prototype.getVisibleUnwrappedCoordinates=function(e){var n=[new t.UnwrappedTileID(0,e)];if(this._renderWorldCopies)for(var r=this.pointCoordinate(new t.Point(0,0)),i=this.pointCoordinate(new t.Point(this.width,0)),o=this.pointCoordinate(new t.Point(this.width,this.height)),a=this.pointCoordinate(new t.Point(0,this.height)),s=Math.floor(Math.min(r.x,i.x,o.x,a.x)),u=Math.floor(Math.max(r.x,i.x,o.x,a.x)),l=s-1;l<=u+1;l++)0!==l&&n.push(new t.UnwrappedTileID(l,e));return n},gr.prototype.coveringTiles=function(e){var n=this.coveringZoomLevel(e),r=n;if(void 0!==e.minzoom&&n<e.minzoom)return[];void 0!==e.maxzoom&&n>e.maxzoom&&(n=e.maxzoom);var i=t.MercatorCoordinate.fromLngLat(this.center),o=Math.pow(2,n),a=[o*i.x,o*i.y,0],s=_r.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n),u=e.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(u=n);var l=function(t){return{aabb:new yr([t*o,0,0],[(t+1)*o,o,0]),zoom:0,x:0,y:0,wrap:t,fullyVisible:!1}},c=[],d=[],h=n,f=e.reparseOverscaled?r:n;if(this._renderWorldCopies)for(var p=1;p<=3;p++)c.push(l(-p)),c.push(l(p));for(c.push(l(0));c.length>0;){var m=c.pop(),_=m.x,y=m.y,v=m.fullyVisible;if(!v){var g=m.aabb.intersects(s);if(0===g)continue;v=2===g}var x=m.aabb.distanceX(a),b=m.aabb.distanceY(a),w=Math.max(Math.abs(x),Math.abs(b));if(m.zoom===h||w>3+(1<<h-m.zoom)-2&&m.zoom>=u)d.push({tileID:new t.OverscaledTileID(m.zoom===h?f:m.zoom,m.wrap,m.zoom,_,y),distanceSq:t.sqrLen([a[0]-.5-_,a[1]-.5-y])});else for(var M=0;M<4;M++){var L=(_<<1)+M%2,k=(y<<1)+(M>>1);c.push({aabb:m.aabb.quadrant(M),zoom:m.zoom+1,x:L,y:k,wrap:m.wrap,fullyVisible:v})}}return d.sort((function(t,e){return t.distanceSq-e.distanceSq})).map((function(t){return t.tileID}))},gr.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},xr.unmodified.get=function(){return this._unmodified},gr.prototype.zoomScale=function(t){return Math.pow(2,t)},gr.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},gr.prototype.project=function(e){var n=t.clamp(e.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(e.lng)*this.worldSize,t.mercatorYfromLat(n)*this.worldSize)},gr.prototype.unproject=function(e){return new t.MercatorCoordinate(e.x/this.worldSize,e.y/this.worldSize).toLngLat()},xr.point.get=function(){return this.project(this.center)},gr.prototype.setLocationAtPoint=function(e,n){var r=this.pointCoordinate(n),i=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(e),a=new t.MercatorCoordinate(o.x-(r.x-i.x),o.y-(r.y-i.y));this.center=this.coordinateLocation(a),this._renderWorldCopies&&(this.center=this.center.wrap())},gr.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},gr.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},gr.prototype.locationCoordinate=function(e){return t.MercatorCoordinate.fromLngLat(e)},gr.prototype.coordinateLocation=function(t){return t.toLngLat()},gr.prototype.pointCoordinate=function(e){var n=[e.x,e.y,0,1],r=[e.x,e.y,1,1];t.transformMat4(n,n,this.pixelMatrixInverse),t.transformMat4(r,r,this.pixelMatrixInverse);var i=n[3],o=r[3],a=n[1]/i,s=r[1]/o,u=n[2]/i,l=r[2]/o,c=u===l?0:(0-u)/(l-u);return new t.MercatorCoordinate(t.number(n[0]/i,r[0]/o,c)/this.worldSize,t.number(a,s,c)/this.worldSize)},gr.prototype.coordinatePoint=function(e){var n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(n,n,this.pixelMatrix),new t.Point(n[0]/n[3],n[1]/n[3])},gr.prototype.getBounds=function(){return(new t.LngLatBounds).extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},gr.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},gr.prototype.setMaxBounds=function(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},gr.prototype.calculatePosMatrix=function(e,n){void 0===n&&(n=!1);var r=e.key,i=n?this._alignedPosMatrixCache:this._posMatrixCache;if(i[r])return i[r];var o=e.canonical,a=this.worldSize/this.zoomScale(o.z),s=o.x+Math.pow(2,o.z)*e.wrap,u=t.identity(new Float64Array(16));return t.translate(u,u,[s*a,o.y*a,0]),t.scale(u,u,[a/t.EXTENT,a/t.EXTENT,1]),t.multiply(u,n?this.alignedProjMatrix:this.projMatrix,u),i[r]=new Float32Array(u),i[r]},gr.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},gr.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,n,r,i,o=-90,a=90,s=-180,u=180,l=this.size,c=this._unmodified;if(this.latRange){var d=this.latRange;o=t.mercatorYfromLat(d[1])*this.worldSize,e=(a=t.mercatorYfromLat(d[0])*this.worldSize)-o<l.y?l.y/(a-o):0}if(this.lngRange){var h=this.lngRange;s=t.mercatorXfromLng(h[0])*this.worldSize,n=(u=t.mercatorXfromLng(h[1])*this.worldSize)-s<l.x?l.x/(u-s):0}var f=this.point,p=Math.max(n||0,e||0);if(p)return this.center=this.unproject(new t.Point(n?(u+s)/2:f.x,e?(a+o)/2:f.y)),this.zoom+=this.scaleZoom(p),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var m=f.y,_=l.y/2;m-_<o&&(i=o+_),m+_>a&&(i=a-_)}if(this.lngRange){var y=f.x,v=l.x/2;y-v<s&&(r=s+v),y+v>u&&(r=u-v)}void 0===r&&void 0===i||(this.center=this.unproject(new t.Point(void 0!==r?r:f.x,void 0!==i?i:f.y))),this._unmodified=c,this._constraining=!1}},gr.prototype._calcMatrices=function(){if(this.height){var e=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var n=Math.PI/2+this._pitch,r=this._fov*(.5+e.y/this.height),i=Math.sin(r)*this.cameraToCenterDistance/Math.sin(t.clamp(Math.PI-n-r,.01,Math.PI-.01)),o=this.point,a=o.x,s=o.y,u=1.01*(Math.cos(Math.PI/2-this._pitch)*i+this.cameraToCenterDistance),l=this.height/50,c=new Float64Array(16);t.perspective(c,this._fov,this.width/this.height,l,u),c[8]=2*-e.x/this.width,c[9]=2*e.y/this.height,t.scale(c,c,[1,-1,1]),t.translate(c,c,[0,0,-this.cameraToCenterDistance]),t.rotateX(c,c,this._pitch),t.rotateZ(c,c,this.angle),t.translate(c,c,[-a,-s,0]),this.mercatorMatrix=t.scale([],c,[this.worldSize,this.worldSize,this.worldSize]),t.scale(c,c,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=c,this.invProjMatrix=t.invert([],this.projMatrix);var d=this.width%2/2,h=this.height%2/2,f=Math.cos(this.angle),p=Math.sin(this.angle),m=a-Math.round(a)+f*d+p*h,_=s-Math.round(s)+f*h+p*d,y=new Float64Array(c);if(t.translate(y,y,[m>.5?m-1:m,_>.5?_-1:_,0]),this.alignedProjMatrix=y,c=t.create(),t.scale(c,c,[this.width/2,-this.height/2,1]),t.translate(c,c,[1,-1,0]),this.labelPlaneMatrix=c,c=t.create(),t.scale(c,c,[1,-1,1]),t.translate(c,c,[-1,-1,0]),t.scale(c,c,[2/this.width,2/this.height,1]),this.glCoordMatrix=c,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(c=t.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=c,this._posMatrixCache={},this._alignedPosMatrixCache={}}},gr.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var e=this.pointCoordinate(new t.Point(0,0)),n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return t.transformMat4(n,n,this.pixelMatrix)[3]/this.cameraToCenterDistance},gr.prototype.getCameraPoint=function(){var e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,e))},gr.prototype.getCameraQueryGeometry=function(e){var n=this.getCameraPoint();if(1===e.length)return[e[0],n];for(var r=n.x,i=n.y,o=n.x,a=n.y,s=0,u=e;s<u.length;s+=1){var l=u[s];r=Math.min(r,l.x),i=Math.min(i,l.y),o=Math.max(o,l.x),a=Math.max(a,l.y)}return[new t.Point(r,i),new t.Point(o,i),new t.Point(o,a),new t.Point(r,a),new t.Point(r,i)]},Object.defineProperties(gr.prototype,xr);var br=function(e){var n,r,i,o;this._hashName=e&&encodeURIComponent(e),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(n=this._updateHashUnthrottled.bind(this),r=!1,i=null,o=function(){i=null,r&&(n(),i=setTimeout(o,300),r=!1)},function(){return r=!0,i||o(),i})};br.prototype.addTo=function(e){return this._map=e,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},br.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},br.prototype.getHashString=function(e){var n=this._map.getCenter(),r=Math.round(100*this._map.getZoom())/100,i=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,i),a=Math.round(n.lng*o)/o,s=Math.round(n.lat*o)/o,u=this._map.getBearing(),l=this._map.getPitch(),c="";if(c+=e?"/"+a+"/"+s+"/"+r:r+"/"+s+"/"+a,(u||l)&&(c+="/"+Math.round(10*u)/10),l&&(c+="/"+Math.round(l)),this._hashName){var d=this._hashName,h=!1,f=t.window.location.hash.slice(1).split("&").map((function(t){var e=t.split("=")[0];return e===d?(h=!0,e+"="+c):t})).filter((function(t){return t}));return h||f.push(d+"="+c),"#"+f.join("&")}return"#"+c},br.prototype._getCurrentHash=function(){var e,n=this,r=t.window.location.hash.replace("#","");return this._hashName?(r.split("&").map((function(t){return t.split("=")})).forEach((function(t){t[0]===n._hashName&&(e=t)})),(e&&e[1]||"").split("/")):r.split("/")},br.prototype._onHashChange=function(){var t=this._getCurrentHash();if(t.length>=3&&!t.some((function(t){return isNaN(t)}))){var e=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(t[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:e,pitch:+(t[4]||0)}),!0}return!1},br.prototype._updateHashUnthrottled=function(){var e=this.getHashString();try{t.window.history.replaceState(t.window.history.state,"",e)}catch(t){}};var wr=function(e){function r(r,i,o,a){void 0===a&&(a={});var s=n.mousePos(i.getCanvasContainer(),o),u=i.unproject(s);e.call(this,r,t.extend({point:s,lngLat:u,originalEvent:o},a)),this._defaultPrevented=!1,this.target=i}e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r;var i={defaultPrevented:{configurable:!0}};return r.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(r.prototype,i),r}(t.Event),Mr=function(e){function r(r,i,o){var a=n.touchPos(i.getCanvasContainer(),o),s=a.map((function(t){return i.unproject(t)})),u=a.reduce((function(t,e,n,r){return t.add(e.div(r.length))}),new t.Point(0,0)),l=i.unproject(u);e.call(this,r,{points:a,point:u,lngLats:s,lngLat:l,originalEvent:o}),this._defaultPrevented=!1}e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r;var i={defaultPrevented:{configurable:!0}};return r.prototype.preventDefault=function(){this._defaultPrevented=!0},i.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(r.prototype,i),r}(t.Event),Lr=function(t){function e(e,n,r){t.call(this,e,{originalEvent:r}),this._defaultPrevented=!1}t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e;var n={defaultPrevented:{configurable:!0}};return e.prototype.preventDefault=function(){this._defaultPrevented=!0},n.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(e.prototype,n),e}(t.Event),kr=function(e){this._map=e,this._el=e.getCanvasContainer(),this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,t.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};kr.prototype.setZoomRate=function(t){this._defaultZoomRate=t},kr.prototype.setWheelZoomRate=function(t){this._wheelZoomRate=t},kr.prototype.isEnabled=function(){return!!this._enabled},kr.prototype.isActive=function(){return!!this._active},kr.prototype.isZooming=function(){return!!this._zooming},kr.prototype.enable=function(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},kr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},kr.prototype.onWheel=function(e){if(this.isEnabled()){var n=e.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY,r=t.browser.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%4.000244140625==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),e.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=e,this._delta-=n,this.isActive()||this._start(e)),e.preventDefault()}},kr.prototype._onTimeout=function(t){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(t)},kr.prototype._start=function(e){if(this._delta){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0,this._map.fire(new t.Event("movestart",{originalEvent:e})),this._map.fire(new t.Event("zoomstart",{originalEvent:e}))),this._finishTimeout&&clearTimeout(this._finishTimeout);var r=n.mousePos(this._el,e);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(r)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame))}},kr.prototype._onScrollFrame=function(){var e=this;if(this._frameId=null,this.isActive()){var n=this._map.transform;if(0!==this._delta){var r="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,i=2/(1+Math.exp(-Math.abs(this._delta*r)));this._delta<0&&0!==i&&(i=1/i);var o="number"==typeof this._targetZoom?n.zoomScale(this._targetZoom):n.scale;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(o*i))),"wheel"===this._type&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var a="number"==typeof this._targetZoom?this._targetZoom:n.zoom,s=this._startZoom,u=this._easing,l=!1;if("wheel"===this._type&&s&&u){var c=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),d=u(c);n.zoom=t.number(s,a,d),c<1?this._frameId||(this._frameId=this._map._requestRenderFrame(this._onScrollFrame)):l=!0}else n.zoom=a,l=!0;n.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire(new t.Event("move",{originalEvent:this._lastWheelEvent})),this._map.fire(new t.Event("zoom",{originalEvent:this._lastWheelEvent})),l&&(this._active=!1,this._finishTimeout=setTimeout((function(){e._zooming=!1,e._map.fire(new t.Event("zoomend",{originalEvent:e._lastWheelEvent})),e._map.fire(new t.Event("moveend",{originalEvent:e._lastWheelEvent})),delete e._targetZoom}),200))}},kr.prototype._smoothOutEasing=function(e){var n=t.ease;if(this._prevEase){var r=this._prevEase,i=(t.browser.now()-r.start)/r.duration,o=r.easing(i+.01)-r.easing(i),a=.27/Math.sqrt(o*o+1e-4)*.01,s=Math.sqrt(.0729-a*a);n=t.bezier(a,s,.25,1)}return this._prevEase={start:t.browser.now(),duration:e,easing:n},n};var Tr=function(e,n){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=n.clickTolerance||1,t.bindAll(["_onMouseMove","_onMouseUp","_onKeyDown"],this)};Tr.prototype.isEnabled=function(){return!!this._enabled},Tr.prototype.isActive=function(){return!!this._active},Tr.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Tr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Tr.prototype.onMouseDown=function(e){this.isEnabled()&&e.shiftKey&&0===e.button&&(t.window.document.addEventListener("mousemove",this._onMouseMove,!1),t.window.document.addEventListener("keydown",this._onKeyDown,!1),t.window.document.addEventListener("mouseup",this._onMouseUp,!1),n.disableDrag(),this._startPos=this._lastPos=n.mousePos(this._el,e),this._active=!0)},Tr.prototype._onMouseMove=function(t){var e=n.mousePos(this._el,t);if(!(this._lastPos.equals(e)||!this._box&&e.dist(this._startPos)<this._clickTolerance)){var r=this._startPos;this._lastPos=e,this._box||(this._box=n.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var i=Math.min(r.x,e.x),o=Math.max(r.x,e.x),a=Math.min(r.y,e.y),s=Math.max(r.y,e.y);n.setTransform(this._box,"translate("+i+"px,"+a+"px)"),this._box.style.width=o-i+"px",this._box.style.height=s-a+"px"}},Tr.prototype._onMouseUp=function(e){if(0===e.button){var r=this._startPos,i=n.mousePos(this._el,e);this._finish(),n.suppressClick(),r.x===i.x&&r.y===i.y?this._fireEvent("boxzoomcancel",e):this._map.fitScreenCoordinates(r,i,this._map.getBearing(),{linear:!0}).fire(new t.Event("boxzoomend",{originalEvent:e}))}},Tr.prototype._onKeyDown=function(t){27===t.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",t))},Tr.prototype._finish=function(){this._active=!1,t.window.document.removeEventListener("mousemove",this._onMouseMove,!1),t.window.document.removeEventListener("keydown",this._onKeyDown,!1),t.window.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(n.remove(this._box),this._box=null),n.enableDrag(),delete this._startPos,delete this._lastPos},Tr.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,{originalEvent:n}))};var Sr=t.bezier(0,0,.25,1),Er=function(e,n){this._map=e,this._el=n.element||e.getCanvasContainer(),this._state="disabled",this._button=n.button||"right",this._bearingSnap=n.bearingSnap||0,this._pitchWithRotate=!1!==n.pitchWithRotate,this._clickTolerance=n.clickTolerance||1,t.bindAll(["onMouseDown","_onMouseMove","_onMouseUp","_onBlur","_onDragFrame"],this)};Er.prototype.isEnabled=function(){return"disabled"!==this._state},Er.prototype.isActive=function(){return"active"===this._state},Er.prototype.enable=function(){this.isEnabled()||(this._state="enabled")},Er.prototype.disable=function(){if(this.isEnabled())switch(this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend"),this._pitchWithRotate&&this._fireEvent("pitchend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},Er.prototype.onMouseDown=function(e){if("enabled"===this._state){var r="touchstart"===e.type;if(r)this._startTime=Date.now();else if("right"===this._button){if(this._eventButton=n.mouseButton(e),e.altKey||e.metaKey)return;if(this._eventButton!==(e.ctrlKey?0:2))return}else{if(e.ctrlKey||0!==n.mouseButton(e))return;this._eventButton=0}n.disableDrag(),r?(t.window.document.addEventListener("touchmove",this._onMouseMove,{capture:!0}),t.window.document.addEventListener("touchend",this._onMouseUp)):(t.window.document.addEventListener("mousemove",this._onMouseMove,{capture:!0}),t.window.document.addEventListener("mouseup",this._onMouseUp)),t.window.addEventListener("blur",this._onBlur),this._state="pending",this._inertia=[[t.browser.now(),this._map.getBearing()]],this._startPos=this._prevPos=this._lastPos=n.mousePos(this._el,e),this._center=this._map.transform.centerPoint,e.preventDefault()}},Er.prototype._onMouseMove=function(t){var e=n.mousePos(this._el,t);this._lastPos.equals(e)||"pending"===this._state&&e.dist(this._startPos)<this._clickTolerance||(this._lastMoveEvent=t,this._lastPos=e,"pending"===this._state&&(this._state="active",this._fireEvent("rotatestart",t),this._fireEvent("movestart",t),this._pitchWithRotate&&this._fireEvent("pitchstart",t)),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},Er.prototype._onDragFrame=function(){this._frameId=null;var e=this._lastMoveEvent;if(e){var n=this._map.transform,r=this._prevPos,i=this._lastPos,o=n.bearing-.8*(r.x-i.x),a=n.pitch- -.5*(r.y-i.y),s=this._inertia,u=s[s.length-1];this._drainInertiaBuffer(),s.push([t.browser.now(),this._map._normalizeBearing(o,u[1])]);var l=n.bearing;if(n.bearing=o,this._pitchWithRotate){var c=n.pitch;n.pitch=a,n.pitch!==c&&this._fireEvent("pitch",e)}n.bearing!==l&&this._fireEvent("rotate",e),this._fireEvent("move",e),delete this._lastMoveEvent,this._prevPos=this._lastPos}},Er.prototype._onMouseUp=function(t){var e="touchend"===t.type;if(e&&this._startPos===this._lastPos&&Date.now()-this._startTime<300&&this._el.click(),e||n.mouseButton(t)===this._eventButton)switch(this._state){case"active":this._state="enabled",n.suppressClick(),this._unbind(),this._deactivate(),this._inertialRotate(t);break;case"pending":this._state="enabled",this._unbind()}},Er.prototype._onBlur=function(t){switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._fireEvent("rotateend",t),this._pitchWithRotate&&this._fireEvent("pitchend",t),this._fireEvent("moveend",t);break;case"pending":this._state="enabled",this._unbind()}},Er.prototype._unbind=function(){t.window.document.removeEventListener("mousemove",this._onMouseMove,{capture:!0}),t.window.document.removeEventListener("mouseup",this._onMouseUp),t.window.document.removeEventListener("touchmove",this._onMouseMove,{capture:!0}),t.window.document.removeEventListener("touchend",this._onMouseUp),t.window.removeEventListener("blur",this._onBlur),n.enableDrag()},Er.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._prevPos,delete this._lastPos},Er.prototype._inertialRotate=function(t){var e=this;this._fireEvent("rotateend",t),this._drainInertiaBuffer();var n=this._map,r=n.getBearing(),i=this._inertia,o=function(){Math.abs(r)<e._bearingSnap?n.resetNorth({noMoveStart:!0},{originalEvent:t}):e._fireEvent("moveend",t),e._pitchWithRotate&&e._fireEvent("pitchend",t)};if(i.length<2)o();else{var a=i[0],s=i[i.length-1],u=n._normalizeBearing(r,i[i.length-2][1]),l=s[1]-a[1],c=l<0?-1:1,d=(s[0]-a[0])/1e3;if(0!==l&&0!==d){var h=Math.abs(l*(.25/d));h>180&&(h=180);var f=h/180;u+=c*h*(f/2),Math.abs(n._normalizeBearing(u,0))<this._bearingSnap&&(u=n._normalizeBearing(0,u)),n.rotateTo(u,{duration:1e3*f,easing:Sr,noMoveStart:!0},{originalEvent:t})}else o()}},Er.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))},Er.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,n=t.browser.now();e.length>0&&n-e[0][0]>160;)e.shift()};var Ar={linearity:.3,easing:t.bezier(0,0,.3,1),maxSpeed:1400,deceleration:2500},Dr=function(e,n){this._map=e,this._el=e.getCanvasContainer(),this._state="disabled",this._clickTolerance=n.clickTolerance||1,this._inertiaOptions=Ar,t.bindAll(["_onMove","_onMouseUp","_onTouchEnd","_onBlur","_onDragFrame"],this)};Dr.prototype.isEnabled=function(){return"disabled"!==this._state},Dr.prototype.isActive=function(){return"active"===this._state},Dr.prototype.enable=function(e){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._state="enabled",this._inertiaOptions=t.extend(Ar,e))},Dr.prototype.disable=function(){if(this.isEnabled())switch(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._state){case"active":this._state="disabled",this._unbind(),this._deactivate(),this._fireEvent("dragend"),this._fireEvent("moveend");break;case"pending":this._state="disabled",this._unbind();break;default:this._state="disabled"}},Dr.prototype.onMouseDown=function(e){"enabled"===this._state&&(e.ctrlKey||0!==n.mouseButton(e)||(n.addEventListener(t.window.document,"mousemove",this._onMove,{capture:!0}),n.addEventListener(t.window.document,"mouseup",this._onMouseUp),this._start(e)))},Dr.prototype.onTouchStart=function(e){this.isEnabled()&&(e.touches&&e.touches.length>1&&("pending"===this._state||"active"===this._state)||(n.addEventListener(t.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),n.addEventListener(t.window.document,"touchend",this._onTouchEnd),this._start(e)))},Dr.prototype._start=function(e){t.window.addEventListener("blur",this._onBlur),this._state="pending",this._startPos=this._mouseDownPos=this._prevPos=this._lastPos=n.mousePos(this._el,e),this._startTouch=this._lastTouch=t.window.TouchEvent&&e instanceof t.window.TouchEvent?n.touchPos(this._el,e):null,this._inertia=[[t.browser.now(),this._startPos]]},Dr.prototype._touchesMatch=function(t,e){return!(!t||!e||t.length!==e.length)&&t.every((function(t,n){return e[n]===t}))},Dr.prototype._onMove=function(e){e.preventDefault();var r=t.window.TouchEvent&&e instanceof t.window.TouchEvent?n.touchPos(this._el,e):null,i=n.mousePos(this._el,e);(r?this._touchesMatch(this._lastTouch,r):this._lastPos.equals(i))||"pending"===this._state&&i.dist(this._mouseDownPos)<this._clickTolerance||(this._lastMoveEvent=e,this._lastPos=i,this._lastTouch=r,this._drainInertiaBuffer(),this._inertia.push([t.browser.now(),this._lastPos]),"pending"===this._state&&(this._state="active",this._shouldStart=!0),this._frameId||(this._frameId=this._map._requestRenderFrame(this._onDragFrame)))},Dr.prototype._onDragFrame=function(){this._frameId=null;var t=this._lastMoveEvent;if(t)if(this._map.touchZoomRotate.isActive())this._abort(t);else if(this._shouldStart&&(this._fireEvent("dragstart",t),this._fireEvent("movestart",t),this._shouldStart=!1),this.isActive()){var e=this._map.transform;e.setLocationAtPoint(e.pointLocation(this._prevPos),this._lastPos),this._fireEvent("drag",t),this._fireEvent("move",t),this._prevPos=this._lastPos,delete this._lastMoveEvent}},Dr.prototype._onMouseUp=function(t){if(0===n.mouseButton(t))switch(this._state){case"active":this._state="enabled",n.suppressClick(),this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind()}},Dr.prototype._onTouchEnd=function(t){if(t.touches&&0!==t.touches.length)switch(this._state){case"pending":case"active":break;case"enabled":this.onTouchStart(t)}else switch(this._state){case"active":this._state="enabled",this._unbind(),this._deactivate(),this._inertialPan(t);break;case"pending":this._state="enabled",this._unbind();break;case"enabled":this._unbind()}},Dr.prototype._abort=function(e){switch(this._state){case"active":this._state="enabled",this._shouldStart||(this._fireEvent("dragend",e),this._fireEvent("moveend",e)),this._unbind(),this._deactivate(),t.window.TouchEvent&&e instanceof t.window.TouchEvent&&e.touches.length>1&&n.addEventListener(t.window.document,"touchend",this._onTouchEnd);break;case"pending":this._state="enabled",this._unbind();break;case"enabled":this._unbind()}},Dr.prototype._onBlur=function(t){this._abort(t)},Dr.prototype._unbind=function(){n.removeEventListener(t.window.document,"touchmove",this._onMove,{capture:!0,passive:!1}),n.removeEventListener(t.window.document,"touchend",this._onTouchEnd),n.removeEventListener(t.window.document,"mousemove",this._onMove,{capture:!0}),n.removeEventListener(t.window.document,"mouseup",this._onMouseUp),n.removeEventListener(t.window,"blur",this._onBlur)},Dr.prototype._deactivate=function(){this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._lastMoveEvent,delete this._startPos,delete this._prevPos,delete this._mouseDownPos,delete this._lastPos,delete this._startTouch,delete this._lastTouch,delete this._shouldStart},Dr.prototype._inertialPan=function(t){this._fireEvent("dragend",t),this._drainInertiaBuffer();var e=this._inertia;if(e.length<2)this._fireEvent("moveend",t);else{var n=e[e.length-1],r=e[0],i=n[1].sub(r[1]),o=(n[0]-r[0])/1e3;if(0===o||n[1].equals(r[1]))this._fireEvent("moveend",t);else{var a=this._inertiaOptions,s=a.linearity,u=a.easing,l=a.maxSpeed,c=a.deceleration,d=i.mult(s/o),h=d.mag();h>l&&(h=l,d._unit()._mult(h));var f=h/(c*s),p=d.mult(-f/2);this._map.panBy(p,{duration:1e3*f,easing:u,noMoveStart:!0},{originalEvent:t})}}},Dr.prototype._fireEvent=function(e,n){return this._map.fire(new t.Event(e,n?{originalEvent:n}:{}))},Dr.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,n=t.browser.now();e.length>0&&n-e[0][0]>160;)e.shift()};var Cr=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onKeyDown"],this)};function Pr(t){return t*(2-t)}Cr.prototype.isEnabled=function(){return!!this._enabled},Cr.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},Cr.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},Cr.prototype._onKeyDown=function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=0,n=0,r=0,i=0,o=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?n=-1:(t.preventDefault(),i=-1);break;case 39:t.shiftKey?n=1:(t.preventDefault(),i=1);break;case 38:t.shiftKey?r=1:(t.preventDefault(),o=-1);break;case 40:t.shiftKey?r=-1:(o=1,t.preventDefault());break;default:return}var a=this._map,s=a.getZoom(),u={duration:300,delayEndEvents:500,easing:Pr,zoom:e?Math.round(s)+e*(t.shiftKey?2:1):s,bearing:a.getBearing()+15*n,pitch:a.getPitch()+10*r,offset:[100*-i,100*-o],center:a.getCenter()};a.easeTo(u,{originalEvent:t})}};var Ir=function(e){this._map=e,t.bindAll(["_onDblClick","_onZoomEnd"],this)};Ir.prototype.isEnabled=function(){return!!this._enabled},Ir.prototype.isActive=function(){return!!this._active},Ir.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Ir.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Ir.prototype.onTouchStart=function(t){var e=this;if(this.isEnabled()&&!(t.points.length>1))if(this._tapped){var n=this._tappedPoint;if(n&&n.dist(t.points[0])<=30){t.originalEvent.preventDefault();var r=function(){e._tapped&&e._zoom(t),e._map.off("touchcancel",i),e._resetTapped()},i=function(){e._map.off("touchend",r),e._resetTapped()};this._map.once("touchend",r),this._map.once("touchcancel",i)}else this._resetTapped()}else this._tappedPoint=t.points[0],this._tapped=setTimeout((function(){e._tapped=null,e._tappedPoint=null}),300)},Ir.prototype._resetTapped=function(){clearTimeout(this._tapped),this._tapped=null,this._tappedPoint=null},Ir.prototype.onDblClick=function(t){this.isEnabled()&&(t.originalEvent.preventDefault(),this._zoom(t))},Ir.prototype._zoom=function(t){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(t.originalEvent.shiftKey?-1:1),{around:t.lngLat},t)},Ir.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)};var Or=t.bezier(0,0,.15,1),Rr=function(e){this._map=e,this._el=e.getCanvasContainer(),t.bindAll(["_onMove","_onEnd","_onTouchFrame"],this)};Rr.prototype.isEnabled=function(){return!!this._enabled},Rr.prototype.enable=function(t){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._enabled=!0,this._aroundCenter=!!t&&"center"===t.around)},Rr.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._enabled=!1)},Rr.prototype.disableRotation=function(){this._rotationDisabled=!0},Rr.prototype.enableRotation=function(){this._rotationDisabled=!1},Rr.prototype.isActive=function(){return this.isEnabled()&&!!this._gestureIntent},Rr.prototype.onStart=function(e){if(this.isEnabled()&&2===e.touches.length){var r=n.mousePos(this._el,e.touches[0]),i=n.mousePos(this._el,e.touches[1]),o=r.add(i).div(2);this._startVec=r.sub(i),this._startAround=this._map.transform.pointLocation(o),this._gestureIntent=void 0,this._inertia=[],n.addEventListener(t.window.document,"touchmove",this._onMove,{passive:!1}),n.addEventListener(t.window.document,"touchend",this._onEnd)}},Rr.prototype._getTouchEventData=function(t){var e=n.mousePos(this._el,t.touches[0]),r=n.mousePos(this._el,t.touches[1]),i=e.sub(r);return{vec:i,center:e.add(r).div(2),scale:i.mag()/this._startVec.mag(),bearing:this._rotationDisabled?0:180*i.angleWith(this._startVec)/Math.PI}},Rr.prototype._onMove=function(e){if(2===e.touches.length){var n=this._getTouchEventData(e),r=n.vec,i=n.scale,o=n.bearing;if(!this._gestureIntent){var a=this._rotationDisabled&&1!==i||Math.abs(1-i)>.15;Math.abs(o)>10?this._gestureIntent="rotate":a&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._map.fire(new t.Event(this._gestureIntent+"start",{originalEvent:e})),this._map.fire(new t.Event("movestart",{originalEvent:e})),this._startVec=r)}this._lastTouchEvent=e,this._frameId||(this._frameId=this._map._requestRenderFrame(this._onTouchFrame)),e.preventDefault()}},Rr.prototype._onTouchFrame=function(){this._frameId=null;var e=this._gestureIntent;if(e){var n=this._map.transform;this._startScale||(this._startScale=n.scale,this._startBearing=n.bearing);var r=this._getTouchEventData(this._lastTouchEvent),i=r.center,o=r.bearing,a=r.scale,s=n.pointLocation(i),u=n.locationPoint(s);"rotate"===e&&(n.bearing=this._startBearing+o),n.zoom=n.scaleZoom(this._startScale*a),n.setLocationAtPoint(this._startAround,u),this._map.fire(new t.Event(e,{originalEvent:this._lastTouchEvent})),this._map.fire(new t.Event("move",{originalEvent:this._lastTouchEvent})),this._drainInertiaBuffer(),this._inertia.push([t.browser.now(),a,i])}},Rr.prototype._onEnd=function(e){n.removeEventListener(t.window.document,"touchmove",this._onMove,{passive:!1}),n.removeEventListener(t.window.document,"touchend",this._onEnd);var r=this._gestureIntent,i=this._startScale;if(this._frameId&&(this._map._cancelRenderFrame(this._frameId),this._frameId=null),delete this._gestureIntent,delete this._startScale,delete this._startBearing,delete this._lastTouchEvent,r){this._map.fire(new t.Event(r+"end",{originalEvent:e})),this._drainInertiaBuffer();var o=this._inertia,a=this._map;if(o.length<2)a.snapToNorth({},{originalEvent:e});else{var s=o[o.length-1],u=o[0],l=a.transform.scaleZoom(i*s[1]),c=a.transform.scaleZoom(i*u[1]),d=(s[0]-u[0])/1e3,h=s[2];if(0!==d&&l!==c){var f=.15*(l-c)/d;Math.abs(f)>2.5&&(f=f>0?2.5:-2.5);var p=1e3*Math.abs(f/(12*.15));a.easeTo({zoom:l+f*p/2e3,duration:p,easing:Or,around:this._aroundCenter?a.getCenter():a.unproject(h),noMoveStart:!0},{originalEvent:e})}else a.snapToNorth({},{originalEvent:e})}}},Rr.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,n=t.browser.now();e.length>2&&n-e[0][0]>160;)e.shift()};var Yr={scrollZoom:kr,boxZoom:Tr,dragRotate:Er,dragPan:Dr,keyboard:Cr,doubleClickZoom:Ir,touchZoomRotate:Rr},Fr=function(e){function n(n,r){e.call(this),this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=r.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return e&&(n.__proto__=e),(n.prototype=Object.create(e&&e.prototype)).constructor=n,n.prototype.getCenter=function(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)},n.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e)},n.prototype.panBy=function(e,n,r){return e=t.Point.convert(e).mult(-1),this.panTo(this.transform.center,t.extend({offset:e},n),r)},n.prototype.panTo=function(e,n,r){return this.easeTo(t.extend({center:e},n),r)},n.prototype.getZoom=function(){return this.transform.zoom},n.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},n.prototype.zoomTo=function(e,n,r){return this.easeTo(t.extend({zoom:e},n),r)},n.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},n.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},n.prototype.getBearing=function(){return this.transform.bearing},n.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},n.prototype.getPadding=function(){return this.transform.padding},n.prototype.setPadding=function(t,e){return this.jumpTo({padding:t},e),this},n.prototype.rotateTo=function(e,n,r){return this.easeTo(t.extend({bearing:e},n),r)},n.prototype.resetNorth=function(e,n){return this.rotateTo(0,t.extend({duration:1e3},e),n),this},n.prototype.resetNorthPitch=function(e,n){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},e),n),this},n.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},n.prototype.getPitch=function(){return this.transform.pitch},n.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},n.prototype.cameraForBounds=function(e,n){return e=t.LngLatBounds.convert(e),this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),0,n)},n.prototype._cameraForBoxAndBearing=function(e,n,r,i){var o={top:0,bottom:0,right:0,left:0};if("number"==typeof(i=t.extend({padding:o,offset:[0,0],maxZoom:this.transform.maxZoom},i)).padding){var a=i.padding;i.padding={top:a,bottom:a,right:a,left:a}}i.padding=t.extend(o,i.padding);var s=this.transform,u=s.padding,l=s.project(t.LngLat.convert(e)),c=s.project(t.LngLat.convert(n)),d=l.rotate(-r*Math.PI/180),h=c.rotate(-r*Math.PI/180),f=new t.Point(Math.max(d.x,h.x),Math.max(d.y,h.y)),p=new t.Point(Math.min(d.x,h.x),Math.min(d.y,h.y)),m=f.sub(p),_=(s.width-(u.left+u.right+i.padding.left+i.padding.right))/m.x,y=(s.height-(u.top+u.bottom+i.padding.top+i.padding.bottom))/m.y;if(!(y<0||_<0)){var v=Math.min(s.scaleZoom(s.scale*Math.min(_,y)),i.maxZoom),g=t.Point.convert(i.offset),x=new t.Point(g.x+(i.padding.left-i.padding.right)/2,g.y+(i.padding.top-i.padding.bottom)/2).mult(s.scale/s.zoomScale(v));return{center:s.unproject(l.add(c).div(2).sub(x)),zoom:v,bearing:r}}t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},n.prototype.fitBounds=function(t,e,n){return this._fitInternal(this.cameraForBounds(t,e),e,n)},n.prototype.fitScreenCoordinates=function(e,n,r,i,o){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(e)),this.transform.pointLocation(t.Point.convert(n)),r,i),i,o)},n.prototype._fitInternal=function(e,n,r){return e?(delete(n=t.extend(e,n)).padding,n.linear?this.easeTo(n,r):this.flyTo(n,r)):this},n.prototype.jumpTo=function(e,n){this.stop();var r=this.transform,i=!1,o=!1,a=!1;return"zoom"in e&&r.zoom!==+e.zoom&&(i=!0,r.zoom=+e.zoom),void 0!==e.center&&(r.center=t.LngLat.convert(e.center)),"bearing"in e&&r.bearing!==+e.bearing&&(o=!0,r.bearing=+e.bearing),"pitch"in e&&r.pitch!==+e.pitch&&(a=!0,r.pitch=+e.pitch),null==e.padding||r.isPaddingEqual(e.padding)||(r.padding=e.padding),this.fire(new t.Event("movestart",n)).fire(new t.Event("move",n)),i&&this.fire(new t.Event("zoomstart",n)).fire(new t.Event("zoom",n)).fire(new t.Event("zoomend",n)),o&&this.fire(new t.Event("rotatestart",n)).fire(new t.Event("rotate",n)).fire(new t.Event("rotateend",n)),a&&this.fire(new t.Event("pitchstart",n)).fire(new t.Event("pitch",n)).fire(new t.Event("pitchend",n)),this.fire(new t.Event("moveend",n))},n.prototype.easeTo=function(e,n){var r=this;this.stop(),(!1===(e=t.extend({offset:[0,0],duration:500,easing:t.ease},e)).animate||!e.essential&&t.browser.prefersReducedMotion)&&(e.duration=0);var i=this.transform,o=this.getZoom(),a=this.getBearing(),s=this.getPitch(),u=this.getPadding(),l="zoom"in e?+e.zoom:o,c="bearing"in e?this._normalizeBearing(e.bearing,a):a,d="pitch"in e?+e.pitch:s,h="padding"in e?e.padding:i.padding,f=t.Point.convert(e.offset),p=i.centerPoint.add(f),m=i.pointLocation(p),_=t.LngLat.convert(e.center||m);this._normalizeCenter(_);var y,v,g=i.project(m),x=i.project(_).sub(g),b=i.zoomScale(l-o);return e.around&&(y=t.LngLat.convert(e.around),v=i.locationPoint(y)),this._zooming=l!==o,this._rotating=a!==c,this._pitching=d!==s,this._padding=!i.isPaddingEqual(h),this._prepareEase(n,e.noMoveStart),clearTimeout(this._easeEndTimeoutID),this._ease((function(e){if(r._zooming&&(i.zoom=t.number(o,l,e)),r._rotating&&(i.bearing=t.number(a,c,e)),r._pitching&&(i.pitch=t.number(s,d,e)),r._padding&&(i.interpolatePadding(u,h,e),p=i.centerPoint.add(f)),y)i.setLocationAtPoint(y,v);else{var m=i.zoomScale(i.zoom-o),_=l>o?Math.min(2,b):Math.max(.5,b),w=Math.pow(_,1-e),M=i.unproject(g.add(x.mult(e*w)).mult(m));i.setLocationAtPoint(i.renderWorldCopies?M.wrap():M,p)}r._fireMoveEvents(n)}),(function(){e.delayEndEvents?r._easeEndTimeoutID=setTimeout((function(){return r._afterEase(n)}),e.delayEndEvents):r._afterEase(n)}),e),this},n.prototype._prepareEase=function(e,n){this._moving=!0,n||this.fire(new t.Event("movestart",e)),this._zooming&&this.fire(new t.Event("zoomstart",e)),this._rotating&&this.fire(new t.Event("rotatestart",e)),this._pitching&&this.fire(new t.Event("pitchstart",e))},n.prototype._fireMoveEvents=function(e){this.fire(new t.Event("move",e)),this._zooming&&this.fire(new t.Event("zoom",e)),this._rotating&&this.fire(new t.Event("rotate",e)),this._pitching&&this.fire(new t.Event("pitch",e))},n.prototype._afterEase=function(e){var n=this._zooming,r=this._rotating,i=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,n&&this.fire(new t.Event("zoomend",e)),r&&this.fire(new t.Event("rotateend",e)),i&&this.fire(new t.Event("pitchend",e)),this.fire(new t.Event("moveend",e))},n.prototype.flyTo=function(e,n){var r=this;if(!e.essential&&t.browser.prefersReducedMotion){var i=t.pick(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(i,n)}this.stop(),e=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},e);var o=this.transform,a=this.getZoom(),s=this.getBearing(),u=this.getPitch(),l=this.getPadding(),c="zoom"in e?t.clamp(+e.zoom,o.minZoom,o.maxZoom):a,d="bearing"in e?this._normalizeBearing(e.bearing,s):s,h="pitch"in e?+e.pitch:u,f="padding"in e?e.padding:o.padding,p=o.zoomScale(c-a),m=t.Point.convert(e.offset),_=o.centerPoint.add(m),y=o.pointLocation(_),v=t.LngLat.convert(e.center||y);this._normalizeCenter(v);var g=o.project(y),x=o.project(v).sub(g),b=e.curve,w=Math.max(o.width,o.height),M=w/p,L=x.mag();if("minZoom"in e){var k=t.clamp(Math.min(e.minZoom,a,c),o.minZoom,o.maxZoom),T=w/o.zoomScale(k-a);b=Math.sqrt(T/L*2)}var S=b*b;function E(t){var e=(M*M-w*w+(t?-1:1)*S*S*L*L)/(2*(t?M:w)*S*L);return Math.log(Math.sqrt(e*e+1)-e)}function A(t){return(Math.exp(t)-Math.exp(-t))/2}function D(t){return(Math.exp(t)+Math.exp(-t))/2}var C=E(0),P=function(t){return D(C)/D(C+b*t)},I=function(t){return w*((D(C)*(A(e=C+b*t)/D(e))-A(C))/S)/L;var e},O=(E(1)-C)/b;if(Math.abs(L)<1e-6||!isFinite(O)){if(Math.abs(w-M)<1e-6)return this.easeTo(e,n);var R=M<w?-1:1;O=Math.abs(Math.log(M/w))/b,I=function(){return 0},P=function(t){return Math.exp(R*b*t)}}return e.duration="duration"in e?+e.duration:1e3*O/("screenSpeed"in e?+e.screenSpeed/b:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=s!==d,this._pitching=h!==u,this._padding=!o.isPaddingEqual(f),this._prepareEase(n,!1),this._ease((function(e){var i=e*O,p=1/P(i);o.zoom=1===e?c:a+o.scaleZoom(p),r._rotating&&(o.bearing=t.number(s,d,e)),r._pitching&&(o.pitch=t.number(u,h,e)),r._padding&&(o.interpolatePadding(l,f,e),_=o.centerPoint.add(m));var y=1===e?v:o.unproject(g.add(x.mult(I(i))).mult(p));o.setLocationAtPoint(o.renderWorldCopies?y.wrap():y,_),r._fireMoveEvents(n)}),(function(){return r._afterEase(n)}),e),this},n.prototype.isEasing=function(){return!!this._easeFrameId},n.prototype.stop=function(){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var t=this._onEaseEnd;delete this._onEaseEnd,t.call(this)}return this},n.prototype._ease=function(e,n,r){!1===r.animate||0===r.duration?(e(1),n()):(this._easeStart=t.browser.now(),this._easeOptions=r,this._onEaseFrame=e,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},n.prototype._renderFrameCallback=function(){var e=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(e)),e<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},n.prototype._normalizeBearing=function(e,n){e=t.wrap(e,-180,180);var r=Math.abs(e-n);return Math.abs(e-360-n)<r&&(e-=360),Math.abs(e+360-n)<r&&(e+=360),e},n.prototype._normalizeCenter=function(t){var e=this.transform;if(e.renderWorldCopies&&!e.lngRange){var n=t.lng-e.center.lng;t.lng+=n>180?-360:n<-180?360:0}},n}(t.Evented),jr=function(e){void 0===e&&(e={}),this.options=e,t.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};jr.prototype.getDefaultPosition=function(){return"bottom-right"},jr.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=n.create("div","mapboxgl-ctrl-attrib-inner",this._container),e&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},jr.prototype.onRemove=function(){n.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},jr.prototype._updateEditLink=function(){var e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));var n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(e){var r=n.reduce((function(t,e,r){return e.value&&(t+=e.key+"="+e.value+(r<n.length-1?"&":"")),t}),"?");e.href=t.config.FEEDBACK_URL+"/"+r+(this._map._hash?this._map._hash.getHashString(!0):""),e.rel="noopener nofollow"}},jr.prototype._updateData=function(t){!t||"metadata"!==t.sourceDataType&&"style"!==t.dataType||(this._updateAttributions(),this._updateEditLink())},jr.prototype._updateAttributions=function(){if(this._map.style){var t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map((function(t){return"string"!=typeof t?"":t}))):"string"==typeof this.options.customAttribution&&t.push(this.options.customAttribution)),this._map.style.stylesheet){var e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}var n=this._map.style.sourceCaches;for(var r in n){var i=n[r];if(i.used){var o=i.getSource();o.attribution&&t.indexOf(o.attribution)<0&&t.push(o.attribution)}}t.sort((function(t,e){return t.length-e.length}));var a=(t=t.filter((function(e,n){for(var r=n+1;r<t.length;r++)if(t[r].indexOf(e)>=0)return!1;return!0}))).join(" | ");a!==this._attribHTML&&(this._attribHTML=a,t.length?(this._innerContainer.innerHTML=a,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},jr.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var zr=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};zr.prototype.onAdd=function(t){this._map=t,this._container=n.create("div","mapboxgl-ctrl");var e=n.create("a","mapboxgl-ctrl-logo");return e.target="_blank",e.rel="noopener nofollow",e.href="https://www.mapbox.com/",e.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),e.setAttribute("rel","noopener nofollow"),this._container.appendChild(e),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},zr.prototype.onRemove=function(){n.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},zr.prototype.getDefaultPosition=function(){return"bottom-left"},zr.prototype._updateLogo=function(t){t&&"metadata"!==t.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},zr.prototype._logoRequired=function(){if(this._map.style){var t=this._map.style.sourceCaches;for(var e in t)if(t[e].getSource().mapbox_logo)return!0;return!1}},zr.prototype._updateCompact=function(){var t=this._container.children;if(t.length){var e=t[0];this._map.getCanvasContainer().offsetWidth<250?e.classList.add("mapboxgl-compact"):e.classList.remove("mapboxgl-compact")}};var Nr=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Nr.prototype.add=function(t){var e=++this._id;return this._queue.push({callback:t,id:e,cancelled:!1}),e},Nr.prototype.remove=function(t){for(var e=this._currentlyRunning,n=0,r=e?this._queue.concat(e):this._queue;n<r.length;n+=1){var i=r[n];if(i.id===t)return void(i.cancelled=!0)}},Nr.prototype.run=function(){var t=this._currentlyRunning=this._queue;this._queue=[];for(var e=0,n=t;e<n.length;e+=1){var r=n[e];if(!r.cancelled&&(r.callback(),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Nr.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Br={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Ur=t.window.HTMLImageElement,Hr=t.window.HTMLElement,Vr=t.window.ImageBitmap,Wr=60,Gr={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:Wr,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,clickTolerance:3,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},qr=function(r){function i(e){var i=this;if(null!=(e=t.extend({},Gr,e)).minZoom&&null!=e.maxZoom&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=e.minPitch&&null!=e.maxPitch&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=e.minPitch&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=e.maxPitch&&e.maxPitch>Wr)throw new Error("maxPitch must be less than or equal to 60");var o=new gr(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies);if(r.call(this,o,e),this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._antialias=e.antialias,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=e.collectResourceTiming,this._renderTaskQueue=new Nr,this._controls=[],this._mapId=t.uniqueId(),this._locale=t.extend({},Br,e.locale),this._requestManager=new t.RequestManager(e.transformRequest,e.accessToken),"string"==typeof e.container){if(this._container=t.window.document.getElementById(e.container),!this._container)throw new Error("Container '"+e.container+"' not found.")}else{if(!(e.container instanceof Hr))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(function(){return i._update(!1)})),this.on("moveend",(function(){return i._update(!1)})),this.on("zoom",(function(){return i._update(!0)})),void 0!==t.window&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1)),function(t,e){var r=t.getCanvasContainer(),i=null,o=!1,a=null;for(var s in Yr)t[s]=new Yr[s](t,e),e.interactive&&e[s]&&t[s].enable(e[s]);n.addEventListener(r,"mouseout",(function(e){t.fire(new wr("mouseout",t,e))})),n.addEventListener(r,"mousedown",(function(i){o=!0,a=n.mousePos(r,i);var s=new wr("mousedown",t,i);t.fire(s),s.defaultPrevented||(e.interactive&&!t.doubleClickZoom.isActive()&&t.stop(),t.boxZoom.onMouseDown(i),t.boxZoom.isActive()||t.dragPan.isActive()||t.dragRotate.onMouseDown(i),t.boxZoom.isActive()||t.dragRotate.isActive()||t.dragPan.onMouseDown(i))})),n.addEventListener(r,"mouseup",(function(e){var n=t.dragRotate.isActive();i&&!n&&t.fire(new wr("contextmenu",t,i)),i=null,o=!1,t.fire(new wr("mouseup",t,e))})),n.addEventListener(r,"mousemove",(function(e){if(!t.dragPan.isActive()&&!t.dragRotate.isActive()){for(var n=e.target;n&&n!==r;)n=n.parentNode;n===r&&t.fire(new wr("mousemove",t,e))}})),n.addEventListener(r,"mouseover",(function(e){for(var n=e.target;n&&n!==r;)n=n.parentNode;n===r&&t.fire(new wr("mouseover",t,e))})),n.addEventListener(r,"touchstart",(function(n){var r=new Mr("touchstart",t,n);t.fire(r),r.defaultPrevented||(e.interactive&&t.stop(),t.boxZoom.isActive()||t.dragRotate.isActive()||t.dragPan.onTouchStart(n),t.touchZoomRotate.onStart(n),t.doubleClickZoom.onTouchStart(r))}),{passive:!1}),n.addEventListener(r,"touchmove",(function(e){t.fire(new Mr("touchmove",t,e))}),{passive:!1}),n.addEventListener(r,"touchend",(function(e){t.fire(new Mr("touchend",t,e))})),n.addEventListener(r,"touchcancel",(function(e){t.fire(new Mr("touchcancel",t,e))})),n.addEventListener(r,"click",(function(i){var o=n.mousePos(r,i);(!a||o.equals(a)||o.dist(a)<e.clickTolerance)&&t.fire(new wr("click",t,i))})),n.addEventListener(r,"dblclick",(function(e){var n=new wr("dblclick",t,e);t.fire(n),n.defaultPrevented||t.doubleClickZoom.onDblClick(n)})),n.addEventListener(r,"contextmenu",(function(e){var n=t.dragRotate.isActive();o||n?o&&(i=e):t.fire(new wr("contextmenu",t,e)),(t.dragRotate.isEnabled()||t.listens("contextmenu"))&&e.preventDefault()})),n.addEventListener(r,"wheel",(function(n){e.interactive&&t.stop();var r=new Lr("wheel",t,n);t.fire(r),r.defaultPrevented||t.scrollZoom.onWheel(n)}),{passive:!1})}(this,e),this._hash=e.hash&&new br("string"==typeof e.hash&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,t.extend({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new jr({customAttribution:e.customAttribution})),this.addControl(new zr,e.logoPosition),this.on("style.load",(function(){i.transform.unmodified&&i.jumpTo(i.style.stylesheet)})),this.on("data",(function(e){i._update("style"===e.dataType),i.fire(new t.Event(e.dataType+"data",e))})),this.on("dataloading",(function(e){i.fire(new t.Event(e.dataType+"dataloading",e))}))}r&&(i.__proto__=r),(i.prototype=Object.create(r&&r.prototype)).constructor=i;var o={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return i.prototype._getMapId=function(){return this._mapId},i.prototype.addControl=function(e,n){if(void 0===n&&e.getDefaultPosition&&(n=e.getDefaultPosition()),void 0===n&&(n="top-right"),!e||!e.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var r=e.onAdd(this);this._controls.push(e);var i=this._controlPositions[n];return-1!==n.indexOf("bottom")?i.insertBefore(r,i.firstChild):i.appendChild(r),this},i.prototype.removeControl=function(e){if(!e||!e.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var n=this._controls.indexOf(e);return n>-1&&this._controls.splice(n,1),e.onRemove(this),this},i.prototype.resize=function(e){var n=this._containerDimensions(),r=n[0],i=n[1];return this._resizeCanvas(r,i),this.transform.resize(r,i),this.painter.resize(r,i),this.fire(new t.Event("movestart",e)).fire(new t.Event("move",e)).fire(new t.Event("resize",e)).fire(new t.Event("moveend",e)),this},i.prototype.getBounds=function(){return this.transform.getBounds()},i.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},i.prototype.setMaxBounds=function(e){return this.transform.setMaxBounds(t.LngLatBounds.convert(e)),this._update()},i.prototype.setMinZoom=function(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},i.prototype.getMinZoom=function(){return this.transform.minZoom},i.prototype.setMaxZoom=function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},i.prototype.getMaxZoom=function(){return this.transform.maxZoom},i.prototype.setMinPitch=function(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t&&this.setPitch(t),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},i.prototype.getMinPitch=function(){return this.transform.minPitch},i.prototype.setMaxPitch=function(t){if((t=null==t?Wr:t)>Wr)throw new Error("maxPitch must be less than or equal to 60");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t&&this.setPitch(t),this;throw new Error("maxPitch must be greater than the current minPitch")},i.prototype.getMaxPitch=function(){return this.transform.maxPitch},i.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},i.prototype.setRenderWorldCopies=function(t){return this.transform.renderWorldCopies=t,this._update()},i.prototype.project=function(e){return this.transform.locationPoint(t.LngLat.convert(e))},i.prototype.unproject=function(e){return this.transform.pointLocation(t.Point.convert(e))},i.prototype.isMoving=function(){return this._moving||this.dragPan.isActive()||this.dragRotate.isActive()||this.scrollZoom.isActive()},i.prototype.isZooming=function(){return this._zooming||this.scrollZoom.isZooming()},i.prototype.isRotating=function(){return this._rotating||this.dragRotate.isActive()},i.prototype._createDelegatedListener=function(t,e,n){var r,i=this;if("mouseenter"===t||"mouseover"===t){var o=!1;return{layer:e,listener:n,delegates:{mousemove:function(r){var a=i.getLayer(e)?i.queryRenderedFeatures(r.point,{layers:[e]}):[];a.length?o||(o=!0,n.call(i,new wr(t,i,r.originalEvent,{features:a}))):o=!1},mouseout:function(){o=!1}}}}if("mouseleave"===t||"mouseout"===t){var a=!1;return{layer:e,listener:n,delegates:{mousemove:function(r){(i.getLayer(e)?i.queryRenderedFeatures(r.point,{layers:[e]}):[]).length?a=!0:a&&(a=!1,n.call(i,new wr(t,i,r.originalEvent)))},mouseout:function(e){a&&(a=!1,n.call(i,new wr(t,i,e.originalEvent)))}}}}return{layer:e,listener:n,delegates:(r={},r[t]=function(t){var r=i.getLayer(e)?i.queryRenderedFeatures(t.point,{layers:[e]}):[];r.length&&(t.features=r,n.call(i,t),delete t.features)},r)}},i.prototype.on=function(t,e,n){if(void 0===n)return r.prototype.on.call(this,t,e);var i=this._createDelegatedListener(t,e,n);for(var o in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(i),i.delegates)this.on(o,i.delegates[o]);return this},i.prototype.once=function(t,e,n){if(void 0===n)return r.prototype.once.call(this,t,e);var i=this._createDelegatedListener(t,e,n);for(var o in i.delegates)this.once(o,i.delegates[o]);return this},i.prototype.off=function(t,e,n){var i=this;return void 0===n?r.prototype.off.call(this,t,e):(this._delegatedListeners&&this._delegatedListeners[t]&&function(r){for(var o=r[t],a=0;a<o.length;a++){var s=o[a];if(s.layer===e&&s.listener===n){for(var u in s.delegates)i.off(u,s.delegates[u]);return o.splice(a,1),i}}}(this._delegatedListeners),this)},i.prototype.queryRenderedFeatures=function(e,n){if(!this.style)return[];var r;if(void 0!==n||void 0===e||e instanceof t.Point||Array.isArray(e)||(n=e,e=void 0),n=n||{},(e=e||[[0,0],[this.transform.width,this.transform.height]])instanceof t.Point||"number"==typeof e[0])r=[t.Point.convert(e)];else{var i=t.Point.convert(e[0]),o=t.Point.convert(e[1]);r=[i,new t.Point(o.x,i.y),o,new t.Point(i.x,o.y),i]}return this.style.queryRenderedFeatures(r,n,this.transform)},i.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},i.prototype.setStyle=function(e,n){return!1!==(n=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&e?(this._diffStyle(e,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(e,n))},i.prototype._getUIString=function(t){var e=this._locale[t];if(null==e)throw new Error("Missing UI string '"+t+"'");return e},i.prototype._updateStyle=function(t,e){return this.style&&(this.style.setEventedParent(null),this.style._remove()),t?(this.style=new ze(this,e||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof t?this.style.loadURL(t):this.style.loadJSON(t),this):(delete this.style,this)},i.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new ze(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},i.prototype._diffStyle=function(e,n){var r=this;if("string"==typeof e){var i=this._requestManager.normalizeStyleURL(e),o=this._requestManager.transformRequest(i,t.ResourceType.Style);t.getJSON(o,(function(e,i){e?r.fire(new t.ErrorEvent(e)):i&&r._updateDiff(i,n)}))}else"object"==typeof e&&this._updateDiff(e,n)},i.prototype._updateDiff=function(e,n){try{this.style.setState(e)&&this._update(!0)}catch(r){t.warnOnce("Unable to perform style diff: "+(r.message||r.error||r)+".  Rebuilding the style from scratch."),this._updateStyle(e,n)}},i.prototype.getStyle=function(){if(this.style)return this.style.serialize()},i.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},i.prototype.addSource=function(t,e){return this._lazyInitEmptyStyle(),this.style.addSource(t,e),this._update(!0)},i.prototype.isSourceLoaded=function(e){var n=this.style&&this.style.sourceCaches[e];if(void 0!==n)return n.loaded();this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+e+"'")))},i.prototype.areTilesLoaded=function(){var t=this.style&&this.style.sourceCaches;for(var e in t){var n=t[e]._tiles;for(var r in n){var i=n[r];if("loaded"!==i.state&&"errored"!==i.state)return!1}}return!0},i.prototype.addSourceType=function(t,e,n){return this._lazyInitEmptyStyle(),this.style.addSourceType(t,e,n)},i.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0)},i.prototype.getSource=function(t){return this.style.getSource(t)},i.prototype.addImage=function(e,n,r){void 0===r&&(r={});var i=r.pixelRatio;void 0===i&&(i=1);var o=r.sdf;void 0===o&&(o=!1);var a=r.stretchX,s=r.stretchY,u=r.content;if(this._lazyInitEmptyStyle(),n instanceof Ur||Vr&&n instanceof Vr){var l=t.browser.getImageData(n);this.style.addImage(e,{data:new t.RGBAImage({width:l.width,height:l.height},l.data),pixelRatio:i,stretchX:a,stretchY:s,content:u,sdf:o,version:0})}else{if(void 0===n.width||void 0===n.height)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var c=n;this.style.addImage(e,{data:new t.RGBAImage({width:n.width,height:n.height},new Uint8Array(n.data)),pixelRatio:i,stretchX:a,stretchY:s,content:u,sdf:o,version:0,userImage:c}),c.onAdd&&c.onAdd(this,e)}},i.prototype.updateImage=function(e,n){var r=this.style.getImage(e);if(!r)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var i=n instanceof Ur||Vr&&n instanceof Vr?t.browser.getImageData(n):n,o=i.width,a=i.height,s=i.data;return void 0===o||void 0===a?this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):o!==r.data.width||a!==r.data.height?this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(r.data.replace(s,!(n instanceof Ur||Vr&&n instanceof Vr)),void this.style.updateImage(e,r))},i.prototype.hasImage=function(e){return e?!!this.style.getImage(e):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},i.prototype.removeImage=function(t){this.style.removeImage(t)},i.prototype.loadImage=function(e,n){t.getImage(this._requestManager.transformRequest(e,t.ResourceType.Image),n)},i.prototype.listImages=function(){return this.style.listImages()},i.prototype.addLayer=function(t,e){return this._lazyInitEmptyStyle(),this.style.addLayer(t,e),this._update(!0)},i.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0)},i.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0)},i.prototype.getLayer=function(t){return this.style.getLayer(t)},i.prototype.setLayerZoomRange=function(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0)},i.prototype.setFilter=function(t,e,n){return void 0===n&&(n={}),this.style.setFilter(t,e,n),this._update(!0)},i.prototype.getFilter=function(t){return this.style.getFilter(t)},i.prototype.setPaintProperty=function(t,e,n,r){return void 0===r&&(r={}),this.style.setPaintProperty(t,e,n,r),this._update(!0)},i.prototype.getPaintProperty=function(t,e){return this.style.getPaintProperty(t,e)},i.prototype.setLayoutProperty=function(t,e,n,r){return void 0===r&&(r={}),this.style.setLayoutProperty(t,e,n,r),this._update(!0)},i.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},i.prototype.setLight=function(t,e){return void 0===e&&(e={}),this._lazyInitEmptyStyle(),this.style.setLight(t,e),this._update(!0)},i.prototype.getLight=function(){return this.style.getLight()},i.prototype.setFeatureState=function(t,e){return this.style.setFeatureState(t,e),this._update()},i.prototype.removeFeatureState=function(t,e){return this.style.removeFeatureState(t,e),this._update()},i.prototype.getFeatureState=function(t){return this.style.getFeatureState(t)},i.prototype.getContainer=function(){return this._container},i.prototype.getCanvasContainer=function(){return this._canvasContainer},i.prototype.getCanvas=function(){return this._canvas},i.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.clientWidth||400,e=this._container.clientHeight||300),[t,e]},i.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},i.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map"),(this._missingCSSCanary=n.create("div","mapboxgl-canary",t)).style.visibility="hidden",this._detectMissingCSS();var e=this._canvasContainer=n.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=n.create("canvas","mapboxgl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var r=this._containerDimensions();this._resizeCanvas(r[0],r[1]);var i=this._controlContainer=n.create("div","mapboxgl-control-container",t),o=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(t){o[t]=n.create("div","mapboxgl-ctrl-"+t,i)}))},i.prototype._resizeCanvas=function(e,n){var r=t.browser.devicePixelRatio||1;this._canvas.width=r*e,this._canvas.height=r*n,this._canvas.style.width=e+"px",this._canvas.style.height=n+"px"},i.prototype._setupPainter=function(){var n=t.extend({},e.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),r=this._canvas.getContext("webgl",n)||this._canvas.getContext("experimental-webgl",n);r?(this.painter=new mr(r,this.transform),t.webpSupported.testSupport(r)):this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")))},i.prototype._contextLost=function(e){e.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:e}))},i.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:e}))},i.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},i.prototype._update=function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this.triggerRepaint(),this):this},i.prototype._requestRenderFrame=function(t){return this._update(),this._renderTaskQueue.add(t)},i.prototype._cancelRenderFrame=function(t){this._renderTaskQueue.remove(t)},i.prototype._render=function(){var e,n=this,r=0,i=this.painter.context.extTimerQuery;this.listens("gpu-timing-frame")&&(e=i.createQueryEXT(),i.beginQueryEXT(i.TIME_ELAPSED_EXT,e),r=t.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run();var o=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var a=this.transform.zoom,s=t.browser.now();this.style.zoomHistory.update(a,s);var u=new t.EvaluationParameters(a,{now:s,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),l=u.crossFadingFactor();1===l&&l===this._crossFadingFactor||(o=!0,this._crossFadingFactor=l),this.style.update(u)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||o)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var c=t.browser.now()-r;i.endQueryEXT(i.TIME_ELAPSED_EXT,e),setTimeout((function(){var r=i.getQueryObjectEXT(e,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(e),n.fire(new t.Event("gpu-timing-frame",{cpuTime:c,gpuTime:r}))}),50)}if(this.listens("gpu-timing-layer")){var d=this.painter.collectGpuTimers();setTimeout((function(){var e=n.painter.queryGpuTimers(d);n.fire(new t.Event("gpu-timing-layer",{layerTimes:e}))}),50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new t.Event("idle"))),this},i.prototype.remove=function(){this._hash&&this._hash.remove();for(var e=0,n=this._controls;e<n.length;e+=1)n[e].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.setStyle(null),void 0!==t.window&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),Xr(this._canvasContainer),Xr(this._controlContainer),Xr(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this.fire(new t.Event("remove"))},i.prototype.triggerRepaint=function(){var e=this;this.style&&!this._frame&&(this._frame=t.browser.frame((function(t){e._frame=null,e._render()})))},i.prototype._onWindowOnline=function(){this._update()},i.prototype._onWindowResize=function(t){this._trackResize&&this.resize({originalEvent:t})._update()},o.showTileBoundaries.get=function(){return!!this._showTileBoundaries},o.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},o.showPadding.get=function(){return!!this._showPadding},o.showPadding.set=function(t){this._showPadding!==t&&(this._showPadding=t,this._update())},o.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},o.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,t?this.style._generateCollisionBoxes():this._update())},o.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},o.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},o.repaint.get=function(){return!!this._repaint},o.repaint.set=function(t){this._repaint!==t&&(this._repaint=t,this.triggerRepaint())},o.vertices.get=function(){return!!this._vertices},o.vertices.set=function(t){this._vertices=t,this._update()},i.prototype._setCacheLimits=function(e,n){t.setCacheLimits(e,n)},o.version.get=function(){return t.version},Object.defineProperties(i.prototype,o),i}(Fr);function Xr(t){t.parentNode&&t.parentNode.removeChild(t)}var Zr={showCompass:!0,showZoom:!0,visualizePitch:!1},Kr=function(e){var r=this;this.options=t.extend({},Zr,e),this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(function(t){return r._map.zoomIn({},{originalEvent:t})})),n.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(function(t){return r._map.zoomOut({},{originalEvent:t})})),n.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(function(t){r.options.visualizePitch?r._map.resetNorthPitch({},{originalEvent:t}):r._map.resetNorth({},{originalEvent:t})})),this._compassIcon=n.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};function Jr(e,n,r){if(e=new t.LngLat(e.lng,e.lat),n){var i=new t.LngLat(e.lng-360,e.lat),o=new t.LngLat(e.lng+360,e.lat),a=r.locationPoint(e).distSqr(n);r.locationPoint(i).distSqr(n)<a?e=i:r.locationPoint(o).distSqr(n)<a&&(e=o)}for(;Math.abs(e.lng-r.center.lng)>180;){var s=r.locationPoint(e);if(s.x>=0&&s.y>=0&&s.x<=r.width&&s.y<=r.height)break;e.lng>r.center.lng?e.lng-=360:e.lng+=360}return e}Kr.prototype._updateZoomButtons=function(){var t=this._map.getZoom();this._zoomInButton.disabled=t===this._map.getMaxZoom(),this._zoomOutButton.disabled=t===this._map.getMinZoom()},Kr.prototype._rotateCompassArrow=function(){var t=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=t},Kr.prototype.onAdd=function(t){return this._map=t,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Er(t,{button:"left",element:this._compass,clickTolerance:t.dragRotate._clickTolerance}),n.addEventListener(this._compass,"mousedown",this._handler.onMouseDown),n.addEventListener(this._compass,"touchstart",this._handler.onMouseDown,{passive:!1}),this._handler.enable()),this._container},Kr.prototype.onRemove=function(){n.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),n.removeEventListener(this._compass,"mousedown",this._handler.onMouseDown),n.removeEventListener(this._compass,"touchstart",this._handler.onMouseDown,{passive:!1}),this._handler.disable(),delete this._handler),delete this._map},Kr.prototype._createButton=function(t,e){var r=n.create("button",t,this._container);return r.type="button",r.addEventListener("click",e),r},Kr.prototype._setButtonTitle=function(t,e){var n=this._map._getUIString("NavigationControl."+e);t.title=n,t.setAttribute("aria-label",n)};var $r={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Qr(t,e,n){var r=t.classList;for(var i in $r)r.remove("mapboxgl-"+n+"-anchor-"+i);r.add("mapboxgl-"+n+"-anchor-"+e)}var ti,ei=function(e){function r(r,i){var o=this;if(e.call(this),(r instanceof t.window.HTMLElement||i)&&(r=t.extend({element:r},i)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._draggable=r&&r.draggable||!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&"auto"!==r.pitchAlignment?r.pitchAlignment:this._rotationAlignment,r&&r.element)this._element=r.element,this._offset=t.Point.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=n.create("div"),this._element.setAttribute("aria-label","Map marker");var a=n.createNS("http://www.w3.org/2000/svg","svg");a.setAttributeNS(null,"display","block"),a.setAttributeNS(null,"height","41px"),a.setAttributeNS(null,"width","27px"),a.setAttributeNS(null,"viewBox","0 0 27 41");var s=n.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"stroke","none"),s.setAttributeNS(null,"stroke-width","1"),s.setAttributeNS(null,"fill","none"),s.setAttributeNS(null,"fill-rule","evenodd");var u=n.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"fill-rule","nonzero");var l=n.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");for(var c=0,d=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];c<d.length;c+=1){var h=d[c],f=n.createNS("http://www.w3.org/2000/svg","ellipse");f.setAttributeNS(null,"opacity","0.04"),f.setAttributeNS(null,"cx","10.5"),f.setAttributeNS(null,"cy","5.80029008"),f.setAttributeNS(null,"rx",h.rx),f.setAttributeNS(null,"ry",h.ry),l.appendChild(f)}var p=n.createNS("http://www.w3.org/2000/svg","g");p.setAttributeNS(null,"fill",this._color);var m=n.createNS("http://www.w3.org/2000/svg","path");m.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),p.appendChild(m);var _=n.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"opacity","0.25"),_.setAttributeNS(null,"fill","#000000");var y=n.createNS("http://www.w3.org/2000/svg","path");y.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),_.appendChild(y);var v=n.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"transform","translate(6.0, 7.0)"),v.setAttributeNS(null,"fill","#FFFFFF");var g=n.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"transform","translate(8.0, 8.0)");var x=n.createNS("http://www.w3.org/2000/svg","circle");x.setAttributeNS(null,"fill","#000000"),x.setAttributeNS(null,"opacity","0.25"),x.setAttributeNS(null,"cx","5.5"),x.setAttributeNS(null,"cy","5.5"),x.setAttributeNS(null,"r","5.4999962");var b=n.createNS("http://www.w3.org/2000/svg","circle");b.setAttributeNS(null,"fill","#FFFFFF"),b.setAttributeNS(null,"cx","5.5"),b.setAttributeNS(null,"cy","5.5"),b.setAttributeNS(null,"r","5.4999962"),g.appendChild(x),g.appendChild(b),u.appendChild(l),u.appendChild(p),u.appendChild(_),u.appendChild(v),u.appendChild(g),a.appendChild(u),this._element.appendChild(a),this._offset=t.Point.convert(r&&r.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(function(t){t.preventDefault()})),this._element.addEventListener("mousedown",(function(t){t.preventDefault()})),this._element.addEventListener("focus",(function(){var t=o._map.getContainer();t.scrollTop=0,t.scrollLeft=0})),Qr(this._element,this._anchor,"marker"),this._popup=null}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},r.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),n.remove(this._element),this._popup&&this._popup.remove(),this},r.prototype.getLngLat=function(){return this._lngLat},r.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},r.prototype.getElement=function(){return this._element},r.prototype.setPopup=function(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){var e=Math.sqrt(Math.pow(13.5,2)/2);t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[e,-1*(24.6+e)],"bottom-right":[-e,-1*(24.6+e)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=t,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},r.prototype._onKeyPress=function(t){var e=t.code,n=t.charCode||t.keyCode;"Space"!==e&&"Enter"!==e&&32!==n&&13!==n||this.togglePopup()},r.prototype._onMapClick=function(t){var e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()},r.prototype.getPopup=function(){return this._popup},r.prototype.togglePopup=function(){var t=this._popup;return t?(t.isOpen()?t.remove():t.addTo(this._map),this):this},r.prototype._update=function(t){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Jr(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var e="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?e="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(e="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var r="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?r="rotateX(0deg)":"map"===this._pitchAlignment&&(r="rotateX("+this._map.getPitch()+"deg)"),t&&"moveend"!==t.type||(this._pos=this._pos.round()),n.setTransform(this._element,$r[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+r+" "+e)}},r.prototype.getOffset=function(){return this._offset},r.prototype.setOffset=function(e){return this._offset=t.Point.convert(e),this._update(),this},r.prototype._onMove=function(e){this._pos=e.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))},r.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new t.Event("dragend")),this._state="inactive"},r.prototype._addDragHandler=function(t){this._element.contains(t.originalEvent.target)&&(t.preventDefault(),this._positionDelta=t.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},r.prototype.setDraggable=function(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},r.prototype.isDraggable=function(){return this._draggable},r.prototype.setRotation=function(t){return this._rotation=t||0,this._update(),this},r.prototype.getRotation=function(){return this._rotation},r.prototype.setRotationAlignment=function(t){return this._rotationAlignment=t||"auto",this._update(),this},r.prototype.getRotationAlignment=function(){return this._rotationAlignment},r.prototype.setPitchAlignment=function(t){return this._pitchAlignment=t&&"auto"!==t?t:this._rotationAlignment,this._update(),this},r.prototype.getPitchAlignment=function(){return this._pitchAlignment},r}(t.Evented),ni={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},ri=0,ii=!1,oi=function(e){function r(n){e.call(this),this.options=t.extend({},ni,n),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.onAdd=function(e){var r;return this._map=e,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),r=this._setupUI,void 0!==ti?r(ti):void 0!==t.window.navigator.permissions?t.window.navigator.permissions.query({name:"geolocation"}).then((function(t){r(ti="denied"!==t.state)})):r(ti=!!t.window.navigator.geolocation),this._container},r.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),n.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ri=0,ii=!1},r.prototype._isOutOfMapMaxBounds=function(t){var e=this._map.getMaxBounds(),n=t.coords;return e&&(n.longitude<e.getWest()||n.longitude>e.getEast()||n.latitude<e.getSouth()||n.latitude>e.getNorth())},r.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},r.prototype._onSuccess=function(e){if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new t.Event("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",e)),this._finish()}},r.prototype._updateCamera=function(e){var n=new t.LngLat(e.coords.longitude,e.coords.latitude),r=e.coords.accuracy,i=this._map.getBearing(),o=t.extend({bearing:i},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(r),o,{geolocateSource:!0})},r.prototype._updateMarker=function(e){if(e){var n=new t.LngLat(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},r.prototype._updateCircleRadius=function(){var t=this._map._container.clientHeight/2,e=this._map.unproject([0,t]),n=this._map.unproject([1,t]),r=e.distanceTo(n),i=Math.ceil(2*this._accuracy/r);this._circleElement.style.width=i+"px",this._circleElement.style.height=i+"px"},r.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},r.prototype._onError=function(e){if(this._map){if(this.options.trackUserLocation)if(1===e.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===e.code&&ii)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",e)),this._finish()}},r.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},r.prototype._setupUI=function(e){var r=this;if(this._container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this._geolocateButton=n.create("button","mapboxgl-ctrl-geolocate",this._container),n.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===e){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}else{var o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=n.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new ei(this._dotElement),this._circleElement=n.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ei({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(e){e.geolocateSource||"ACTIVE_LOCK"!==r._watchState||e.originalEvent&&"resize"===e.originalEvent.type||(r._watchState="BACKGROUND",r._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),r._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),r.fire(new t.Event("trackuserlocationend")))}))},r.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ri--,ii=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var e;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++ri>1?(e={maximumAge:6e5,timeout:0},ii=!0):(e=this.options.positionOptions,ii=!1),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,e)}}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},r.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},r}(t.Evented),ai={maxWidth:100,unit:"metric"},si=function(e){this.options=t.extend({},ai,e),t.bindAll(["_onMove","setUnit"],this)};function ui(t,e,n){var r=n&&n.maxWidth||100,i=t._container.clientHeight/2,o=t.unproject([0,i]),a=t.unproject([r,i]),s=o.distanceTo(a);if(n&&"imperial"===n.unit){var u=3.2808*s;u>5280?li(e,r,u/5280,t._getUIString("ScaleControl.Miles")):li(e,r,u,t._getUIString("ScaleControl.Feet"))}else n&&"nautical"===n.unit?li(e,r,s/1852,t._getUIString("ScaleControl.NauticalMiles")):s>=1e3?li(e,r,s/1e3,t._getUIString("ScaleControl.Kilometers")):li(e,r,s,t._getUIString("ScaleControl.Meters"))}function li(t,e,n,r){var i,o,a,s=(i=n,(o=Math.pow(10,(""+Math.floor(i)).length-1))*(a=(a=i/o)>=10?10:a>=5?5:a>=3?3:a>=2?2:a>=1?1:function(t){var e=Math.pow(10,Math.ceil(-Math.log(t)/Math.LN10));return Math.round(t*e)/e}(a)));t.style.width=e*(s/n)+"px",t.innerHTML=s+"&nbsp;"+r}si.prototype.getDefaultPosition=function(){return"bottom-left"},si.prototype._onMove=function(){ui(this._map,this._container,this.options)},si.prototype.onAdd=function(t){return this._map=t,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},si.prototype.onRemove=function(){n.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},si.prototype.setUnit=function(t){this.options.unit=t,ui(this._map,this._container,this.options)};var ci=function(e){this._fullscreen=!1,e&&e.container&&(e.container instanceof t.window.HTMLElement?this._container=e.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange")};ci.prototype.onAdd=function(e){return this._map=e,this._container||(this._container=this._map.getContainer()),this._controlContainer=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},ci.prototype.onRemove=function(){n.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},ci.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},ci.prototype._setupUI=function(){var e=this._fullscreenButton=n.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);n.create("span","mapboxgl-ctrl-icon",e).setAttribute("aria-hidden",!0),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},ci.prototype._updateTitle=function(){var t=this._getTitle();this._fullscreenButton.setAttribute("aria-label",t),this._fullscreenButton.title=t},ci.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},ci.prototype._isFullscreen=function(){return this._fullscreen},ci.prototype._changeIcon=function(){(t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},ci.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var di={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},hi=function(e){function r(n){e.call(this),this.options=t.extend(Object.create(di),n),t.bindAll(["_update","_onClose","remove"],this)}return e&&(r.__proto__=e),(r.prototype=Object.create(e&&e.prototype)).constructor=r,r.prototype.addTo=function(e){var n=this;return this._map=e,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",(function(t){n._update(t.point)})),this._map.on("mouseup",(function(t){n._update(t.point)})),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this},r.prototype.isOpen=function(){return!!this._map},r.prototype.remove=function(){return this._content&&n.remove(this._content),this._container&&(n.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove"),delete this._map),this.fire(new t.Event("close")),this},r.prototype.getLngLat=function(){return this._lngLat},r.prototype.setLngLat=function(e){return this._lngLat=t.LngLat.convert(e),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove"),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},r.prototype.trackPointer=function(){var t=this;return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",(function(e){t._update(e.point)})),this._map.on("drag",(function(e){t._update(e.point)})),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},r.prototype.getElement=function(){return this._container},r.prototype.setText=function(e){return this.setDOMContent(t.window.document.createTextNode(e))},r.prototype.setHTML=function(e){var n,r=t.window.document.createDocumentFragment(),i=t.window.document.createElement("body");for(i.innerHTML=e;n=i.firstChild;)r.appendChild(n);return this.setDOMContent(r)},r.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},r.prototype.setMaxWidth=function(t){return this.options.maxWidth=t,this._update(),this},r.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},r.prototype.addClassName=function(t){this._container&&this._container.classList.add(t)},r.prototype.removeClassName=function(t){this._container&&this._container.classList.remove(t)},r.prototype.toggleClassName=function(t){if(this._container)return this._container.classList.toggle(t)},r.prototype._createContent=function(){this._content&&n.remove(this._content),this._content=n.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=n.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},r.prototype._update=function(e){var r=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=n.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=n.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((function(t){return r._container.classList.add(t)})),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Jr(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||e)){var i=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat),o=this.options.anchor,a=function e(n){if(n){if("number"==typeof n){var r=Math.round(Math.sqrt(.5*Math.pow(n,2)));return{center:new t.Point(0,0),top:new t.Point(0,n),"top-left":new t.Point(r,r),"top-right":new t.Point(-r,r),bottom:new t.Point(0,-n),"bottom-left":new t.Point(r,-r),"bottom-right":new t.Point(-r,-r),left:new t.Point(n,0),right:new t.Point(-n,0)}}if(n instanceof t.Point||Array.isArray(n)){var i=t.Point.convert(n);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:t.Point.convert(n.center||[0,0]),top:t.Point.convert(n.top||[0,0]),"top-left":t.Point.convert(n["top-left"]||[0,0]),"top-right":t.Point.convert(n["top-right"]||[0,0]),bottom:t.Point.convert(n.bottom||[0,0]),"bottom-left":t.Point.convert(n["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(n["bottom-right"]||[0,0]),left:t.Point.convert(n.left||[0,0]),right:t.Point.convert(n.right||[0,0])}}return e(new t.Point(0,0))}(this.options.offset);if(!o){var s,u=this._container.offsetWidth,l=this._container.offsetHeight;s=i.y+a.bottom.y<l?["top"]:i.y>this._map.transform.height-l?["bottom"]:[],i.x<u/2?s.push("left"):i.x>this._map.transform.width-u/2&&s.push("right"),o=0===s.length?"bottom":s.join("-")}var c=i.add(a[o]).round();n.setTransform(this._container,$r[o]+" translate("+c.x+"px,"+c.y+"px)"),Qr(this._container,o,"popup")}},r.prototype._onClose=function(){this.remove()},r}(t.Evented),fi={version:t.version,supported:e,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:qr,NavigationControl:Kr,GeolocateControl:oi,AttributionControl:jr,ScaleControl:si,FullscreenControl:ci,Popup:hi,Marker:ei,Style:ze,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(e){t.config.ACCESS_TOKEN=e},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(e){t.config.API_URL=e},get workerCount(){return Ot.workerCount},set workerCount(t){Ot.workerCount=t},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(e){t.config.MAX_PARALLEL_IMAGE_REQUESTS=e},clearStorage:function(e){t.clearTileCache(e)},workerUrl:""};return fi})),n}()},2307:(t,e,n)=>{"use strict";n.r(e),n.d(e,{createDataGraph:()=>C,createParser:()=>L,expr:()=>r,rel:()=>i});var r={};n.r(r),n.d(r,{alias:()=>P,approxCount:()=>j,avg:()=>I,between:()=>W,caseExpr:()=>V,count:()=>F,countStar:()=>z,dateTrunc:()=>B,extract:()=>N,inExpr:()=>U,max:()=>R,min:()=>O,not:()=>H,sum:()=>Y});var i={};n.r(i),n.d(i,{aggregate:()=>X,bin:()=>$,bottom:()=>nt,filter:()=>Z,filterIn:()=>J,filterRange:()=>K,limit:()=>Q,project:()=>q,sort:()=>tt,top:()=>et});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(t){return t};function s(t,e,n,r){r=n(r,e(t));var i=t.getState().source;return"object"!==(void 0===i?"undefined":o(i))||Array.isArray(i)?r:s(i,e,n,r)}function u(t,e){return s(e,a,(function(e,n){return t.parser.parseDataState(n.getState(),e)}),{select:[],from:"",where:[],groupby:[],having:[],orderby:[],limit:"",offset:"",unresolved:{}})}function l(t){return"string"==typeof t?t.replace(/'/gi,"''"):t}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k;if("string"==typeof t||"object"===!(void 0===t||c(t)))return t;switch(t.type){case"=":case"<>":case"<":case">":case"<=":case">=":return t.left+" "+t.type+" "+("string"==typeof t.right?"'"+t.right+"'":t.right);case"between":case"not between":return t.field+" "+t.type.toUpperCase()+" "+t.left+" AND "+t.right;case"is null":case"is not null":return t.field+" "+t.type.toUpperCase();case"ilike":case"like":case"not like":return t.left+" "+t.type.toUpperCase()+" '%"+t.right+"%'";case"coalesce":return"COALESCE("+t.values.map((function(t){return"'"+t+"'"})).join(", ")+")";case"in":case"not in":return Array.isArray(t.set)?t.expr+" "+t.type.toUpperCase()+" ("+t.set.map((function(t){return"number"==typeof t?t:"'"+l(t)+"'"})).join(", ")+")":"object"!==c(t.set)||"data"!==t.set.type&&"root"!==t.set.type?t:t.expr+" "+t.type.toUpperCase()+" ("+e.writeSQL(t.set)+")";case"not":return"NOT("+d(t.expr)+")";case"and":case"or":return"("+d(t.left)+" "+t.type.toUpperCase()+" "+d(t.right)+")";case"case":var n=null===t.else?"NULL":"'"+t.else+"'";return"CASE WHEN "+t.cond.map((function(t){return d(t[0])+" THEN "+t[1]})).join(" ")+(void 0!==t.else?" ELSE "+n:"")+" END";case"date_trunc":return"date_trunc("+t.unit+", "+t.field+")";case"extract":return"extract("+t.unit+" from "+t.field+")";case"root":return"("+e.writeSQL(t)+")";case"count":return t.distinct&&t.approx?"approx_count_distinct("+t.field+")":t.distinct?"count(distinct "+t.field+" )":"count("+t.field+")";case"stddev":case"stddev_pop":case"stddev_samp":case"var_pop":case"var_samp":return t.type+"("+t.x+")";case"corr":case"covar_pop":case"covar_samp":return t.type+"("+t.x+", "+t.y+")";case"min":case"max":case"sum":case"sample":return t.type+"("+t.field+")";case"average":return"avg("+t.field+")";default:return t}}var h={average:"AVG",count:"COUNT",min:"MIN",max:"MAX",sum:"SUM"};function f(t,e,n){var r="";return(r+=null===t?e:h[t]?h[t]+"("+e+")":t+"("+e+")")+(n?" AS "+n:"")}function p(t,e,n){return"string"==typeof e?(t.select.push(e),t.groupby.push(e)):"bin"===e.type?(t=n.parseTransform(t,e)).groupby.push(e.as):"project"===e.type&&(t.select.push(n.parseExpression(e.expr)+(e.as?" AS "+e.as:"")),e.as&&t.groupby.push(e.as)),t}var m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function _(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k;switch(e.type){case"filter":t.where.push("("+("object"===m(e.expr)?n.parseExpression(e.expr):e.expr)+")");default:return t}}var y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v={ascending:"ASC",descending:"DESC"},g={"greater than or equals":">=","less than or equals":"<=",equals:"=","not equals":"<>"},x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function b(t){switch(t){case"join.left":return"LEFT JOIN";case"join.right":return"RIGHT JOIN";case"join.inner":return"INNER JOIN";case"join":default:return"JOIN"}}function w(t,e,n){switch(e.type){case"aggregate":return function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k;return Array.isArray(e.groupby)?e.groupby.forEach((function(e){t=p(t,e,n)})):t=p(t,e.groupby,n),e.fields.forEach((function(n,r){var i=e.as[r];t.select.push(f(e.ops[r],n,i))})),t}(t,e,n);case"bin":return function(t,e){var n=e.field,r=e.as,i=e.extent,o=e.maxbins,a=i[1]-i[0];return t.select.push("case when\n      "+n+" >= "+i[1]+"\n    then\n      "+(0===a?0:o-1)+"\n    else\n      cast((cast("+n+" as float) - "+i[0]+") * "+o/(a||1)+" as int)\n    end\n    AS "+r),t.where.push("(("+n+" >= "+i[0]+" AND "+n+" <= "+i[1]+") OR ("+n+" IS NULL))"),t.having.push("("+r+" >= 0 AND "+r+" < "+o+" OR "+r+" IS NULL)"),t}(t,e);case"sort":return function(t,e){return e.field.forEach((function(n,r){t.orderby.push(n+(Array.isArray(e.order)?" "+v[e.order[r]]:""))})),t}(t,e);case"limit":return function(t,e){return t.limit+=e.row,t.offset+=e.offset||t.offset,t}(t,e);case"filter":return _(t,e,n);case"postFilter":return function(t,e){switch(e.type){case"postFilter":var n;n="between"===e.ops||"not between"===e.ops?e.ops+" "+e.min+" AND "+e.max:"null"===e.ops||"not null"===e.ops?"is "+e.ops:"AVG"!==e.aggType||"equals"!==e.ops&&"not equals"!==e.ops?function(t,e,n){switch(t){case">=":case"=":case"<>":return t+" "+e;case"<=":return t+" "+n;default:return""}}(g[e.ops],e.min,e.max,e.aggType):g[e.ops]+" cast("+e.min+" as DOUBLE)";var r=e.custom?e.fields[0]+" "+n:e.aggType+"("+e.fields[0]+") "+n;t.having.push(r);default:return t}}(t,e);case"project":return function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k;return t.select.push(n.parseExpression(e.expr)+(e.as?" AS "+e.as:"")),t}(t,e,n);case"sample":return function(t,e){var n=e.size,r=e.limit,i=Math.min(r/n,1);return"multiplicativeRowid"===e.method&&i<1?t.where.push("(SAMPLE_RATIO("+i+") OR ("+e.field+" IN ("+e.expr.map((function(t){return"string"==typeof t?"'"+t+"'":""+t})).join(", ")+")))"):"multiplicative"===e.method&&i<1&&t.where.push("SAMPLE_RATIO("+i+")"),t}(t,e);case"resolvefilter":return function(t,e){switch(e.type){case"resolvefilter":"object"===x(t.unresolved)?t.unresolved[e.filter.signal]=e:t.unresolved=(n={},i=e,(r=e.filter.signal)in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n);default:return t}var n,r,i}(t,e);case"crossfilter":return function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k;switch(e.type){case"crossfilter":"object"===y(t.unresolved)&&t.unresolved.hasOwnProperty(e.signal)&&Object.keys(e.filter).forEach((function(r){var i=e.filter[r];if(t.unresolved){var o=t.unresolved[e.signal].ignore;(Array.isArray(o)?-1===o.indexOf(r):r!==o)&&_(t,i,n)}}));default:return t}}(t,e);case"with":return function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k,r=n.write(n.parseDataState(e.fields));return t.with.push(r?{temp:e.expr,subQuery:r}:""),t}(t,e,n);default:return t}}function M(t){return((s=t.with)&&s.length?"WITH "+s[0].temp+" AS ("+s[0].subQuery+") ":"")+((a=t.select).length?"SELECT "+a.join(", "):"SELECT *")+" FROM "+t.from+((o=t.where).length?" WHERE "+o.join(" AND "):"")+((i=t.groupby).length?" GROUP BY "+i.join(", "):"")+((r=t.having).length?" HAVING "+r.join(" AND "):"")+((n=t.orderby).length?" ORDER BY "+n.join(", "):"")+function(t){return t.length?" LIMIT "+t:""}(t.limit)+((e=t.offset).length?" OFFSET "+e:"");var e,n,r,i,o,a,s}function L(){var t={},e={},n={parseExpression:function(t){return e[t.type]?e[t.type](t,n):d(t,n)},parseTransform:function(e,r){return t[r.type]?t[r.type](e,r,n):w(e,r,n)},parseDataState:function(t,e){return function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{select:[],from:"",where:[],groupby:[],having:[],orderby:[],limit:"",offset:"",unresolved:{},with:[]};return t.transform.reduce((function(t,n){return e.parseTransform(t,n)}),{select:n.select,from:"root"===t.type?"string"==typeof t.source?t.source:e.parseSource(t.source):n.from,where:n.where,groupby:n.groupby,having:n.having,orderby:n.orderby,limit:n.limit,offset:n.offset,unresolved:n.unresolved,with:n.with})}(t,n,e)},parseSource:function(t){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:k;return t.reduce((function(t,n,r){if("string"==typeof n.table&&"scan"===n.type)return t.concat(n.table);if("join"===n.type||"join.inner"===n.type||"join.left"===n.type||"join.right"===n.type){var i=t.pop(),o=t.pop()+" "+b("string"==typeof n.type?n.type:"join")+" "+i,a="string"==typeof n.as?" AS "+n.as:"";return t.concat(o+a)}if("data"===n.type||"root"===n.type){var s=e.writeSQL(n);return t.concat("("+s+")")}return t}),[]).join()}(t,n)},writeSQL:function(t){return function(t,e){return M(e.parseDataState(t))}(t,n)},write:M,registerParser:function(n,r){"expression"===n.meta?e[n.type]=r:"transform"===n.meta&&(t[n.type]=r)}};return n}const k=L();var T=n(1143),S=n.n(T),E=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function A(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={type:e.type||"data",source:e.source,transform:e.transform||[],children:e.children||[]},r={getState:i,transform:o,toSQL:a,values:s,data:l};function i(){return n}function o(t){return n.transform="function"==typeof t?t(n.transform):t,r}function a(){return t.parser.write(u(t,r))}function s(){return t.connector.query(t.parser.write(u(t,r)))}function l(e){var i=A(t,E({},e,{source:r}));return n.children.push(i),i}return r}var D=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function C(t){S()("function"==typeof t.query,"invalid connector");var e={connector:t,parser:L()},n=[];return{registerParser:function(t,n){e.parser.registerParser(t,n)},children:function(){return n},data:function(t){var r=A(e,"string"==typeof t||Array.isArray(t)?{source:t,type:"root"}:D({},t,{type:"root"}));return n.push(r),r}}}function P(t,e){return{expr:e,as:t}}function I(t,e){return{type:"average",field:e,as:t}}function O(t,e){return{type:"min",field:e,as:t}}function R(t,e){return{type:"max",field:e,as:t}}function Y(t,e){return{type:"sum",field:e,as:t}}function F(t,e,n){return{type:"count",distinct:t,approx:!1,field:n,as:e}}function j(t,e,n){return{type:"count",distinct:t,approx:!0,field:n,as:e}}function z(t){return{type:"count",distinct:!1,approx:!1,field:"*",as:t}}function N(t,e){return{type:"extract",unit:t,field:e}}function B(t,e){return{type:"date_trunc",unit:t,field:e}}function U(t,e){return{type:"in",expr:t,set:e}}function H(t){return{type:"not",expr:t}}function V(t,e){return{type:"case",cond:t,else:e}}function W(t,e){return{type:"between",field:t,left:e[0],right:e[1]}}var G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function q(t){return{type:"project",expr:"string"==typeof t?t:t.expr,as:"string"==typeof t?null:t.as}}function X(t,e){var n=function(t){return Array.isArray(t)?{fields:t.map((function(t){return t.field})),ops:t.map((function(t){return t.type})),as:t.map((function(t){return t.as}))}:{fields:[t.field],ops:[t.type],as:[t.as||""]}}(e),r=function(t){return Array.isArray(t)?t.map((function(t){return"object"===(void 0===t?"undefined":G(t))?{type:"project",expr:t.expr,as:t.as}:t})):"object"===(void 0===t?"undefined":G(t))?{type:"project",expr:t.expr,as:t.as}:t}(t);return{type:"aggregate",fields:n.fields,ops:n.ops,as:n.as,groupby:r}}function Z(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{type:"filter",id:e,expr:t}}function K(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return{type:"filter",id:n,expr:{type:"between",field:t,left:e[0],right:e[1]}}}function J(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return{type:"filter",id:n,expr:{type:"in",expr:t,set:e}}}function $(t,e,n,r){return{type:"bin",field:e,extent:n,maxbins:r,as:t}}function Q(t,e){return{type:"limit",row:t,offset:e}}function tt(t,e){return{type:"sort",field:"string"==typeof t?[t]:t,order:"string"==typeof e?[e]:e}}function et(t,e,n){return[{type:"sort",field:[t],order:["descending"]},{type:"limit",row:e,offset:n}]}function nt(t,e,n){return[{type:"sort",field:[t],order:["ascending"]},{type:"limit",row:e,offset:n}]}},2350:(t,e,n)=>{"use strict";n.r(e)},2285:(t,e,n)=>{"use strict";n.r(e)},99:(t,e,n)=>{"use strict";n.r(e)},396:(t,e,n)=>{"use strict";n.r(e)},2786:function(t,e,n){!function(t){"use strict";t.defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mrt_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),meridiemParse:/vm|nm/i,isPM:function(t){return/^nm$/i.test(t)},meridiem:function(t,e,n){return t<12?n?"vm":"VM":n?"nm":"NM"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[Mre om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",ss:"%d sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(t){return t+(1===t||8===t||t>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(381))},4130:function(t,e,n){!function(t){"use strict";t.defineLocale("ar-dz",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:0,doy:4}})}(n(381))},6135:function(t,e,n){!function(t){"use strict";t.defineLocale("ar-kw",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:0,doy:12}})}(n(381))},6440:function(t,e,n){!function(t){"use strict";var e={1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",0:"0"},n=function(t){return 0===t?0:1===t?1:2===t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5},r={s:["  "," ",["",""],"%d ","%d ","%d "],m:["  "," ",["",""],"%d ","%d ","%d "],h:["  "," ",["",""],"%d ","%d ","%d "],d:["  "," ",["",""],"%d ","%d ","%d "],M:["  "," ",["",""],"%d ","%d ","%d "],y:["  "," ",["",""],"%d ","%d ","%d "]},i=function(t){return function(e,i,o,a){var s=n(e),u=r[t][n(e)];return 2===s&&(u=u[i?0:1]),u.replace(/%d/i,e)}},o=["","","","","","","","","","","",""];t.defineLocale("ar-ly",{months:o,monthsShort:o,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(t){return""===t},meridiem:function(t,e,n){return t<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:i("s"),ss:i("s"),m:i("m"),mm:i("m"),h:i("h"),hh:i("h"),d:i("d"),dd:i("d"),M:i("M"),MM:i("M"),y:i("y"),yy:i("y")},preparse:function(t){return t.replace(//g,",")},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]})).replace(/,/g,"")},week:{dow:6,doy:12}})}(n(381))},7702:function(t,e,n){!function(t){"use strict";t.defineLocale("ar-ma",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:6,doy:12}})}(n(381))},6040:function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("ar-sa",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(t){return""===t},meridiem:function(t,e,n){return t<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(t){return t.replace(/[]/g,(function(t){return n[t]})).replace(//g,",")},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]})).replace(/,/g,"")},week:{dow:0,doy:6}})}(n(381))},5671:function(t,e,n){!function(t){"use strict";t.defineLocale("ar-tn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:1,doy:4}})}(n(381))},867:function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},r=function(t){return 0===t?0:1===t?1:2===t?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5},i={s:["  "," ",["",""],"%d ","%d ","%d "],m:["  "," ",["",""],"%d ","%d ","%d "],h:["  "," ",["",""],"%d ","%d ","%d "],d:["  "," ",["",""],"%d ","%d ","%d "],M:["  "," ",["",""],"%d ","%d ","%d "],y:["  "," ",["",""],"%d ","%d ","%d "]},o=function(t){return function(e,n,o,a){var s=r(e),u=i[t][r(e)];return 2===s&&(u=u[n?0:1]),u.replace(/%d/i,e)}},a=["","","","","","","","","","","",""];t.defineLocale("ar",{months:a,monthsShort:a,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(t){return""===t},meridiem:function(t,e,n){return t<12?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:o("s"),ss:o("s"),m:o("m"),mm:o("m"),h:o("h"),hh:o("h"),d:o("d"),dd:o("d"),M:o("M"),MM:o("M"),y:o("y"),yy:o("y")},preparse:function(t){return t.replace(/[]/g,(function(t){return n[t]})).replace(//g,",")},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]})).replace(/,/g,"")},week:{dow:6,doy:12}})}(n(381))},1083:function(t,e,n){!function(t){"use strict";var e={1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-nc",4:"-nc",100:"-nc",6:"-nc",9:"-uncu",10:"-uncu",30:"-uncu",60:"-nc",90:"-nc"};t.defineLocale("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ertsi_rnb axam_rnb_Cm axam_Cm_nb".split("_"),weekdaysShort:"Baz_BzE_Ax_r_CAx_Cm_n".split("_"),weekdaysMin:"Bz_BE_A__CA_C_".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[gln hft] dddd [saat] LT",lastDay:"[dnn] LT",lastWeek:"[ken hft] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s vvl",s:"birne saniy",ss:"%d saniy",m:"bir dqiq",mm:"%d dqiq",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiemParse:/gec|shr|gndz|axam/,isPM:function(t){return/^(gndz|axam)$/.test(t)},meridiem:function(t,e,n){return t<4?"gec":t<12?"shr":t<17?"gndz":"axam"},dayOfMonthOrdinalParse:/\d{1,2}-(nc|inci|nci|nc|nc|uncu)/,ordinal:function(t){if(0===t)return t+"-nc";var n=t%10;return t+(e[n]||e[t%100-n]||e[t>=100?100:null])},week:{dow:1,doy:7}})}(n(381))},9808:function(t,e,n){!function(t){"use strict";function e(t,e,n){return"m"===n?e?"":"":"h"===n?e?"":"":t+" "+(r=+t,i={ss:e?"__":"__",mm:e?"__":"__",hh:e?"__":"__",dd:"__",MM:"__",yy:"__"}[n].split("_"),r%10==1&&r%100!=11?i[0]:r%10>=2&&r%10<=4&&(r%100<10||r%100>=20)?i[1]:i[2]);var r,i}t.defineLocale("be",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:{format:"______".split("_"),standalone:"______".split("_"),isFormat:/\[ ?[] ?(?:|)? ?\] ?dddd/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:function(){return"[] dddd [] LT"},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:e,mm:e,h:e,hh:e,d:"",dd:e,M:"",MM:e,y:"",yy:e},meridiemParse:/|||/,isPM:function(t){return/^(|)$/.test(t)},meridiem:function(t,e,n){return t<4?"":t<12?"":t<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(||)/,ordinal:function(t,e){switch(e){case"M":case"d":case"DDD":case"w":case"W":return t%10!=2&&t%10!=3||t%100==12||t%100==13?t+"-":t+"-";case"D":return t+"-";default:return t}},week:{dow:1,doy:7}})}(n(381))},8338:function(t,e,n){!function(t){"use strict";t.defineLocale("bg",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[ ] dddd [] LT";case 1:case 2:case 4:case 5:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-(|||||)/,ordinal:function(t){var e=t%10,n=t%100;return 0===t?t+"-":0===n?t+"-":n>10&&n<20?t+"-":1===e?t+"-":2===e?t+"-":7===e||8===e?t+"-":t+"-"},week:{dow:1,doy:7}})}(n(381))},7438:function(t,e,n){!function(t){"use strict";t.defineLocale("bm",{months:"Zanwuyekalo_Fewuruyekalo_Marisikalo_Awirilikalo_Mkalo_Zuwnkalo_Zuluyekalo_Utikalo_Stanburukalo_kutburukalo_Nowanburukalo_Desanburukalo".split("_"),monthsShort:"Zan_Few_Mar_Awi_M_Zuw_Zul_Uti_St_ku_Now_Des".split("_"),weekdays:"Kari_Ntnn_Tarata_Araba_Alamisa_Juma_Sibiri".split("_"),weekdaysShort:"Kar_Nt_Tar_Ara_Ala_Jum_Sib".split("_"),weekdaysMin:"Ka_Nt_Ta_Ar_Al_Ju_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"MMMM [tile] D [san] YYYY",LLL:"MMMM [tile] D [san] YYYY [lr] HH:mm",LLLL:"dddd MMMM [tile] D [san] YYYY [lr] HH:mm"},calendar:{sameDay:"[Bi lr] LT",nextDay:"[Sini lr] LT",nextWeek:"dddd [don lr] LT",lastDay:"[Kunu lr] LT",lastWeek:"dddd [tmnen lr] LT",sameElse:"L"},relativeTime:{future:"%s kn",past:"a b %s b",s:"sanga dama dama",ss:"sekondi %d",m:"miniti kelen",mm:"miniti %d",h:"lr kelen",hh:"lr %d",d:"tile kelen",dd:"tile %d",M:"kalo kelen",MM:"kalo %d",y:"san kelen",yy:"san %d"},week:{dow:1,doy:4}})}(n(381))},8905:function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("bn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(t){return t.replace(/[]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/||||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e&&t>=4||""===e&&t<5||""===e?t+12:t},meridiem:function(t,e,n){return t<4?"":t<10?"":t<17?"":t<20?"":""},week:{dow:0,doy:6}})}(n(381))},1560:function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("bo",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[], LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(t){return t.replace(/[]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/||||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e&&t>=4||""===e&&t<5||""===e?t+12:t},meridiem:function(t,e,n){return t<4?"":t<10?"":t<17?"":t<20?"":""},week:{dow:0,doy:6}})}(n(381))},1278:function(t,e,n){!function(t){"use strict";function e(t,e,n){return t+" "+function(t,e){return 2===e?function(t){var e={m:"v",b:"v",d:"z"};return void 0===e[t.charAt(0)]?t:e[t.charAt(0)]+t.substring(1)}(t):t}({mm:"munutenn",MM:"miz",dd:"devezh"}[n],t)}function n(t){return t>9?n(t%10):t}t.defineLocale("br",{months:"Genver_C'hwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_C'hwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Merc'her_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h[e]mm A",LTS:"h[e]mm:ss A",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY h[e]mm A",LLLL:"dddd, D [a viz] MMMM YYYY h[e]mm A"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warc'hoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Dec'h da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s 'zo",s:"un nebeud segondenno",ss:"%d eilenn",m:"ur vunutenn",mm:e,h:"un eur",hh:"%d eur",d:"un devezh",dd:e,M:"ur miz",MM:e,y:"ur bloaz",yy:function(t){switch(n(t)){case 1:case 3:case 4:case 5:case 9:return t+" bloaz";default:return t+" vloaz"}}},dayOfMonthOrdinalParse:/\d{1,2}(a|vet)/,ordinal:function(t){return t+(1===t?"a":"vet")},week:{dow:1,doy:4}})}(n(381))},622:function(t,e,n){!function(t){"use strict";function e(t,e,n){var r=t+" ";switch(n){case"ss":return r+(1===t?"sekunda":2===t||3===t||4===t?"sekunde":"sekundi");case"m":return e?"jedna minuta":"jedne minute";case"mm":return r+(1===t?"minuta":2===t||3===t||4===t?"minute":"minuta");case"h":return e?"jedan sat":"jednog sata";case"hh":return r+(1===t?"sat":2===t||3===t||4===t?"sata":"sati");case"dd":return r+(1===t?"dan":"dana");case"MM":return r+(1===t?"mjesec":2===t||3===t||4===t?"mjeseca":"mjeseci");case"yy":return r+(1===t?"godina":2===t||3===t||4===t?"godine":"godina")}}t.defineLocale("bs",{months:"januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prolu] dddd [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:e,m:e,mm:e,h:e,hh:e,d:"dan",dd:e,M:"mjesec",MM:e,y:"godinu",yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(381))},2468:function(t,e,n){!function(t){"use strict";t.defineLocale("ca",{months:{standalone:"gener_febrer_mar_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),format:"de gener_de febrer_de mar_d'abril_de maig_de juny_de juliol_d'agost_de setembre_d'octubre_de novembre_de desembre".split("_"),isFormat:/D[oD]?(\s)+MMMM/},monthsShort:"gen._febr._mar_abr._maig_juny_jul._ag._set._oct._nov._des.".split("_"),monthsParseExact:!0,weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"dg_dl_dt_dc_dj_dv_ds".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [de] YYYY",ll:"D MMM YYYY",LLL:"D MMMM [de] YYYY [a les] H:mm",lll:"D MMM YYYY, H:mm",LLLL:"dddd D MMMM [de] YYYY [a les] H:mm",llll:"ddd D MMM YYYY, H:mm"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[dem a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"d'aqu %s",past:"fa %s",s:"uns segons",ss:"%d segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},dayOfMonthOrdinalParse:/\d{1,2}(r|n|t||a)/,ordinal:function(t,e){var n=1===t?"r":2===t?"n":3===t?"r":4===t?"t":"";return"w"!==e&&"W"!==e||(n="a"),t+n},week:{dow:1,doy:4}})}(n(381))},5822:function(t,e,n){!function(t){"use strict";var e="leden_nor_bezen_duben_kvten_erven_ervenec_srpen_z_jen_listopad_prosinec".split("_"),n="led_no_be_dub_kv_vn_vc_srp_z_j_lis_pro".split("_"),r=[/^led/i,/^no/i,/^be/i,/^dub/i,/^kv/i,/^(vn|erven$|ervna)/i,/^(vc|ervenec|ervence)/i,/^srp/i,/^z/i,/^j/i,/^lis/i,/^pro/i],i=/^(leden|nor|bezen|duben|kvten|ervenec|ervence|erven|ervna|srpen|z|jen|listopad|prosinec|led|no|be|dub|kv|vn|vc|srp|z|j|lis|pro)/i;function o(t){return t>1&&t<5&&1!=~~(t/10)}function a(t,e,n,r){var i=t+" ";switch(n){case"s":return e||r?"pr sekund":"pr sekundami";case"ss":return e||r?i+(o(t)?"sekundy":"sekund"):i+"sekundami";case"m":return e?"minuta":r?"minutu":"minutou";case"mm":return e||r?i+(o(t)?"minuty":"minut"):i+"minutami";case"h":return e?"hodina":r?"hodinu":"hodinou";case"hh":return e||r?i+(o(t)?"hodiny":"hodin"):i+"hodinami";case"d":return e||r?"den":"dnem";case"dd":return e||r?i+(o(t)?"dny":"dn"):i+"dny";case"M":return e||r?"msc":"mscem";case"MM":return e||r?i+(o(t)?"msce":"msc"):i+"msci";case"y":return e||r?"rok":"rokem";case"yy":return e||r?i+(o(t)?"roky":"let"):i+"lety"}}t.defineLocale("cs",{months:e,monthsShort:n,monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:/^(leden|ledna|nora|nor|bezen|bezna|duben|dubna|kvten|kvtna|ervenec|ervence|erven|ervna|srpen|srpna|z|jen|jna|listopadu|listopad|prosinec|prosince)/i,monthsShortStrictRegex:/^(led|no|be|dub|kv|vn|vc|srp|z|j|lis|pro)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"nedle_pondl_ter_steda_tvrtek_ptek_sobota".split("_"),weekdaysShort:"ne_po_t_st_t_p_so".split("_"),weekdaysMin:"ne_po_t_st_t_p_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm",l:"D. M. YYYY"},calendar:{sameDay:"[dnes v] LT",nextDay:"[ztra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve stedu v] LT";case 4:return"[ve tvrtek v] LT";case 5:return"[v ptek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[vera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou nedli v] LT";case 1:case 2:return"[minul] dddd [v] LT";case 3:return"[minulou stedu v] LT";case 4:case 5:return"[minul] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"ped %s",s:a,ss:a,m:a,mm:a,h:a,hh:a,d:a,dd:a,M:a,MM:a,y:a,yy:a},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},877:function(t,e,n){!function(t){"use strict";t.defineLocale("cv",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"YYYY [] MMMM [] D[-]",LLL:"YYYY [] MMMM [] D[-], HH:mm",LLLL:"dddd, YYYY [] MMMM [] D[-], HH:mm"},calendar:{sameDay:"[] LT []",nextDay:"[] LT []",lastDay:"[] LT []",nextWeek:"[] dddd LT []",lastWeek:"[] dddd LT []",sameElse:"L"},relativeTime:{future:function(t){return t+(/$/i.exec(t)?"":/$/i.exec(t)?"":"")},past:"%s ",s:"- ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-/,ordinal:"%d-",week:{dow:1,doy:7}})}(n(381))},7373:function(t,e,n){!function(t){"use strict";t.defineLocale("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn l",s:"ychydig eiliadau",ss:"%d eiliad",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},dayOfMonthOrdinalParse:/\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,ordinal:function(t){var e="";return t>20?e=40===t||50===t||60===t||80===t||100===t?"fed":"ain":t>0&&(e=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"][t]),t+e},week:{dow:1,doy:4}})}(n(381))},4780:function(t,e,n){!function(t){"use strict";t.defineLocale("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_man_tir_ons_tor_fre_lr".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd [d.] D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"p dddd [kl.] LT",lastDay:"[i gr kl.] LT",lastWeek:"[i] dddd[s kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"f sekunder",ss:"%d sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en mned",MM:"%d mneder",y:"et r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},217:function(t,e,n){!function(t){"use strict";function e(t,e,n,r){var i={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[t+" Tage",t+" Tagen"],M:["ein Monat","einem Monat"],MM:[t+" Monate",t+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[t+" Jahre",t+" Jahren"]};return e?i[n][0]:i[n][1]}t.defineLocale("de-at",{months:"Jnner_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jn._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:e,mm:"%d Minuten",h:e,hh:"%d Stunden",d:e,dd:e,M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},894:function(t,e,n){!function(t){"use strict";function e(t,e,n,r){var i={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[t+" Tage",t+" Tagen"],M:["ein Monat","einem Monat"],MM:[t+" Monate",t+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[t+" Jahre",t+" Jahren"]};return e?i[n][0]:i[n][1]}t.defineLocale("de-ch",{months:"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:e,mm:"%d Minuten",h:e,hh:"%d Stunden",d:e,dd:e,M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},9740:function(t,e,n){!function(t){"use strict";function e(t,e,n,r){var i={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[t+" Tage",t+" Tagen"],M:["ein Monat","einem Monat"],MM:[t+" Monate",t+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[t+" Jahre",t+" Jahren"]};return e?i[n][0]:i[n][1]}t.defineLocale("de",{months:"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._Mrz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:e,mm:"%d Minuten",h:e,hh:"%d Stunden",d:e,dd:e,M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},5300:function(t,e,n){!function(t){"use strict";var e=["","","","","","","","","","","",""],n=["","","","","","",""];t.defineLocale("dv",{months:e,monthsShort:e,weekdays:n,weekdaysShort:n,weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(t){return""===t},meridiem:function(t,e,n){return t<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd LT",lastDay:"[] LT",lastWeek:"[] dddd LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",ss:"d% ",m:"",mm:" %d",h:"",hh:" %d",d:"",dd:" %d",M:"",MM:" %d",y:"",yy:" %d"},preparse:function(t){return t.replace(//g,",")},postformat:function(t){return t.replace(/,/g,"")},week:{dow:7,doy:12}})}(n(381))},837:function(t,e,n){!function(t){"use strict";t.defineLocale("el",{monthsNominativeEl:"___________".split("_"),monthsGenitiveEl:"___________".split("_"),months:function(t,e){return t?"string"==typeof e&&/D/.test(e.substring(0,e.indexOf("MMMM")))?this._monthsGenitiveEl[t.month()]:this._monthsNominativeEl[t.month()]:this._monthsNominativeEl},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),meridiem:function(t,e,n){return t>11?n?"":"":n?"":""},isPM:function(t){return""===(t+"").toLowerCase()[0]},meridiemParse:/[]\.??\.?/i,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendarEl:{sameDay:"[ {}] LT",nextDay:"[ {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[ {}] LT",lastWeek:function(){switch(this.day()){case 6:return"[ ] dddd [{}] LT";default:return"[ ] dddd [{}] LT"}},sameElse:"L"},calendar:function(t,e){var n,r=this._calendarEl[t],i=e&&e.hours();return((n=r)instanceof Function||"[object Function]"===Object.prototype.toString.call(n))&&(r=r.apply(e)),r.replace("{}",i%12==1?"":"")},relativeTime:{future:" %s",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(381))},5383:function(t,e,n){!function(t){"use strict";t.defineLocale("en-SG",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})}(n(381))},8348:function(t,e,n){!function(t){"use strict";t.defineLocale("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})}(n(381))},7925:function(t,e,n){!function(t){"use strict";t.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}})}(n(381))},2243:function(t,e,n){!function(t){"use strict";t.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})}(n(381))},6436:function(t,e,n){!function(t){"use strict";t.defineLocale("en-ie",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})}(n(381))},7207:function(t,e,n){!function(t){"use strict";t.defineLocale("en-il",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}})}(n(381))},6319:function(t,e,n){!function(t){"use strict";t.defineLocale("en-nz",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})}(n(381))},2915:function(t,e,n){!function(t){"use strict";t.defineLocale("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_agusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_ag_sep_okt_nov_dec".split("_"),weekdays:"dimano_lundo_mardo_merkredo_ado_vendredo_sabato".split("_"),weekdaysShort:"dim_lun_mard_merk_a_ven_sab".split("_"),weekdaysMin:"di_lu_ma_me_a_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D[-a de] MMMM, YYYY",LLL:"D[-a de] MMMM, YYYY HH:mm",LLLL:"dddd, [la] D[-a de] MMMM, YYYY HH:mm"},meridiemParse:/[ap]\.t\.m/i,isPM:function(t){return"p"===t.charAt(0).toLowerCase()},meridiem:function(t,e,n){return t>11?n?"p.t.m.":"P.T.M.":n?"a.t.m.":"A.T.M."},calendar:{sameDay:"[Hodia je] LT",nextDay:"[Morga je] LT",nextWeek:"dddd [je] LT",lastDay:"[Hiera je] LT",lastWeek:"[pasinta] dddd [je] LT",sameElse:"L"},relativeTime:{future:"post %s",past:"anta %s",s:"sekundoj",ss:"%d sekundoj",m:"minuto",mm:"%d minutoj",h:"horo",hh:"%d horoj",d:"tago",dd:"%d tagoj",M:"monato",MM:"%d monatoj",y:"jaro",yy:"%d jaroj"},dayOfMonthOrdinalParse:/\d{1,2}a/,ordinal:"%da",week:{dow:1,doy:7}})}(n(381))},5251:function(t,e,n){!function(t){"use strict";var e="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),r=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],i=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;t.defineLocale("es-do",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(t,r){return t?/-MMM-/.test(r)?n[t.month()]:e[t.month()]:e},monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(381))},1146:function(t,e,n){!function(t){"use strict";var e="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),r=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],i=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;t.defineLocale("es-us",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(t,r){return t?/-MMM-/.test(r)?n[t.month()]:e[t.month()]:e},monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"MM/DD/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:0,doy:6}})}(n(381))},5655:function(t,e,n){!function(t){"use strict";var e="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),r=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],i=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;t.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(t,r){return t?/-MMM-/.test(r)?n[t.month()]:e[t.month()]:e},monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(381))},5603:function(t,e,n){!function(t){"use strict";function e(t,e,n,r){var i={s:["mne sekundi","mni sekund","paar sekundit"],ss:[t+"sekundi",t+"sekundit"],m:["he minuti","ks minut"],mm:[t+" minuti",t+" minutit"],h:["he tunni","tund aega","ks tund"],hh:[t+" tunni",t+" tundi"],d:["he peva","ks pev"],M:["kuu aja","kuu aega","ks kuu"],MM:[t+" kuu",t+" kuud"],y:["he aasta","aasta","ks aasta"],yy:[t+" aasta",t+" aastat"]};return e?i[n][2]?i[n][2]:i[n][1]:r?i[n][0]:i[n][1]}t.defineLocale("et",{months:"jaanuar_veebruar_mrts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_mrts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"phapev_esmaspev_teisipev_kolmapev_neljapev_reede_laupev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[Tna,] LT",nextDay:"[Homme,] LT",nextWeek:"[Jrgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s prast",past:"%s tagasi",s:e,ss:e,m:e,mm:e,h:e,hh:e,d:e,dd:"%d peva",M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},7763:function(t,e,n){!function(t){"use strict";t.defineLocale("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),monthsParseExact:!0,weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] HH:mm",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] HH:mm",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] HH:mm",llll:"ddd, YYYY[ko] MMM D[a] HH:mm"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",ss:"%d segundo",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(381))},6959:function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("fa",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/  |  /,isPM:function(t){return/  /.test(t)},meridiem:function(t,e,n){return t<12?"  ":"  "},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",ss:" d%",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(t){return t.replace(/[-]/g,(function(t){return n[t]})).replace(//g,",")},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]})).replace(/,/g,"")},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:6,doy:12}})}(n(381))},1897:function(t,e,n){!function(t){"use strict";var e="nolla yksi kaksi kolme nelj viisi kuusi seitsemn kahdeksan yhdeksn".split(" "),n=["nolla","yhden","kahden","kolmen","neljn","viiden","kuuden",e[7],e[8],e[9]];function r(t,r,i,o){var a="";switch(i){case"s":return o?"muutaman sekunnin":"muutama sekunti";case"ss":return o?"sekunnin":"sekuntia";case"m":return o?"minuutin":"minuutti";case"mm":a=o?"minuutin":"minuuttia";break;case"h":return o?"tunnin":"tunti";case"hh":a=o?"tunnin":"tuntia";break;case"d":return o?"pivn":"piv";case"dd":a=o?"pivn":"piv";break;case"M":return o?"kuukauden":"kuukausi";case"MM":a=o?"kuukauden":"kuukautta";break;case"y":return o?"vuoden":"vuosi";case"yy":a=o?"vuoden":"vuotta"}return function(t,r){return t<10?r?n[t]:e[t]:t}(t,o)+" "+a}t.defineLocale("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_keskuu_heinkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kes_hein_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] HH.mm",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] HH.mm",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] HH.mm",llll:"ddd, Do MMM YYYY, [klo] HH.mm"},calendar:{sameDay:"[tnn] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s pst",past:"%s sitten",s:r,ss:r,m:r,mm:r,h:r,hh:r,d:r,dd:r,M:r,MM:r,y:r,yy:r},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},4694:function(t,e,n){!function(t){"use strict";t.defineLocale("fo",{months:"januar_februar_mars_aprl_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mnadagur_tsdagur_mikudagur_hsdagur_frggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mn_ts_mik_hs_fr_ley".split("_"),weekdaysMin:"su_m_t_mi_h_fr_le".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D. MMMM, YYYY HH:mm"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gjr kl.] LT",lastWeek:"[sstu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s sani",s:"f sekund",ss:"%d sekundir",m:"ein minuttur",mm:"%d minuttir",h:"ein tmi",hh:"%d tmar",d:"ein dagur",dd:"%d dagar",M:"ein mnaur",MM:"%d mnair",y:"eitt r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},3049:function(t,e,n){!function(t){"use strict";t.defineLocale("fr-ca",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourdhui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(t,e){switch(e){default:case"M":case"Q":case"D":case"DDD":case"d":return t+(1===t?"er":"e");case"w":case"W":return t+(1===t?"re":"e")}}})}(n(381))},2330:function(t,e,n){!function(t){"use strict";t.defineLocale("fr-ch",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourdhui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(t,e){switch(e){default:case"M":case"Q":case"D":case"DDD":case"d":return t+(1===t?"er":"e");case"w":case"W":return t+(1===t?"re":"e")}},week:{dow:1,doy:4}})}(n(381))},4470:function(t,e,n){!function(t){"use strict";t.defineLocale("fr",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourdhui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|)/,ordinal:function(t,e){switch(e){case"D":return t+(1===t?"er":"");default:case"M":case"Q":case"DDD":case"d":return t+(1===t?"er":"e");case"w":case"W":return t+(1===t?"re":"e")}},week:{dow:1,doy:4}})}(n(381))},5044:function(t,e,n){!function(t){"use strict";var e="jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.".split("_"),n="jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_");t.defineLocale("fy",{months:"jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber".split("_"),monthsShort:function(t,r){return t?/-MMM-/.test(r)?n[t.month()]:e[t.month()]:e},monthsParseExact:!0,weekdays:"snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon".split("_"),weekdaysShort:"si._mo._ti._wo._to._fr._so.".split("_"),weekdaysMin:"Si_Mo_Ti_Wo_To_Fr_So".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[hjoed om] LT",nextDay:"[moarn om] LT",nextWeek:"dddd [om] LT",lastDay:"[juster om] LT",lastWeek:"[frne] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oer %s",past:"%s lyn",s:"in pear sekonden",ss:"%d sekonden",m:"ien mint",mm:"%d minuten",h:"ien oere",hh:"%d oeren",d:"ien dei",dd:"%d dagen",M:"ien moanne",MM:"%d moannen",y:"ien jier",yy:"%d jierren"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(t){return t+(1===t||8===t||t>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(381))},9295:function(t,e,n){!function(t){"use strict";t.defineLocale("ga",{months:["Eanir","Feabhra","Mrta","Aibren","Bealtaine","Mitheamh","Iil","Lnasa","Men Fmhair","Deaireadh Fmhair","Samhain","Nollaig"],monthsShort:["Ean","Feab","Mrt","Aibr","Beal","Mit","Iil","Lna","Men","Deai","Samh","Noll"],monthsParseExact:!0,weekdays:["D Domhnaigh","D Luain","D Mirt","D Cadaoin","Dardaoin","D hAoine","D Satharn"],weekdaysShort:["Dom","Lua","Mi","Ca","Da","hAo","Sat"],weekdaysMin:["Do","Lu","M","Ce","D","hA","Sa"],longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Inniu ag] LT",nextDay:"[Amrach ag] LT",nextWeek:"dddd [ag] LT",lastDay:"[Inn aig] LT",lastWeek:"dddd [seo caite] [ag] LT",sameElse:"L"},relativeTime:{future:"i %s",past:"%s  shin",s:"cpla soicind",ss:"%d soicind",m:"nimad",mm:"%d nimad",h:"uair an chloig",hh:"%d uair an chloig",d:"l",dd:"%d l",M:"m",MM:"%d m",y:"bliain",yy:"%d bliain"},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(t){return t+(1===t?"d":t%10==2?"na":"mh")},week:{dow:1,doy:4}})}(n(381))},2101:function(t,e,n){!function(t){"use strict";t.defineLocale("gd",{months:["Am Faoilleach","An Gearran","Am Mrt","An Giblean","An Citean","An t-gmhios","An t-Iuchar","An Lnastal","An t-Sultain","An Dmhair","An t-Samhain","An Dbhlachd"],monthsShort:["Faoi","Gear","Mrt","Gibl","Cit","gmh","Iuch","Ln","Sult","Dmh","Samh","Dbh"],monthsParseExact:!0,weekdays:["Didmhnaich","Diluain","Dimirt","Diciadain","Diardaoin","Dihaoine","Disathairne"],weekdaysShort:["Did","Dil","Dim","Dic","Dia","Dih","Dis"],weekdaysMin:["D","Lu","M","Ci","Ar","Ha","Sa"],longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[An-diugh aig] LT",nextDay:"[A-mireach aig] LT",nextWeek:"dddd [aig] LT",lastDay:"[An-d aig] LT",lastWeek:"dddd [seo chaidh] [aig] LT",sameElse:"L"},relativeTime:{future:"ann an %s",past:"bho chionn %s",s:"beagan diogan",ss:"%d diogan",m:"mionaid",mm:"%d mionaidean",h:"uair",hh:"%d uairean",d:"latha",dd:"%d latha",M:"mos",MM:"%d mosan",y:"bliadhna",yy:"%d bliadhna"},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(t){return t+(1===t?"d":t%10==2?"na":"mh")},week:{dow:1,doy:4}})}(n(381))},8794:function(t,e,n){!function(t){"use strict";t.defineLocale("gl",{months:"xaneiro_febreiro_marzo_abril_maio_xuo_xullo_agosto_setembro_outubro_novembro_decembro".split("_"),monthsShort:"xan._feb._mar._abr._mai._xu._xul._ago._set._out._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"domingo_luns_martes_mrcores_xoves_venres_sbado".split("_"),weekdaysShort:"dom._lun._mar._mr._xov._ven._sb.".split("_"),weekdaysMin:"do_lu_ma_m_xo_ve_s".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[ma "+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"s":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"s":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(t){return 0===t.indexOf("un")?"n"+t:"en "+t},past:"hai %s",s:"uns segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(381))},3168:function(t,e,n){!function(t){"use strict";function e(t,e,n,r){var i={s:["thodde secondanim","thodde second"],ss:[t+" secondanim",t+" second"],m:["eka mintan","ek minute"],mm:[t+" mintanim",t+" mintam"],h:["eka voran","ek vor"],hh:[t+" voranim",t+" voram"],d:["eka disan","ek dis"],dd:[t+" disanim",t+" dis"],M:["eka mhoinean","ek mhoino"],MM:[t+" mhoineanim",t+" mhoine"],y:["eka vorsan","ek voros"],yy:[t+" vorsanim",t+" vorsam"]};return e?i[n][0]:i[n][1]}t.defineLocale("gom-latn",{months:"Janer_Febrer_Mars_Abril_Mai_Jun_Julai_Agost_Setembr_Otubr_Novembr_Dezembr".split("_"),monthsShort:"Jan._Feb._Mars_Abr._Mai_Jun_Jul._Ago._Set._Otu._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Aitar_Somar_Mongllar_Budvar_Brestar_Sukrar_Son'var".split("_"),weekdaysShort:"Ait._Som._Mon._Bud._Bre._Suk._Son.".split("_"),weekdaysMin:"Ai_Sm_Mo_Bu_Br_Su_Sn".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm [vazta]",LTS:"A h:mm:ss [vazta]",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY A h:mm [vazta]",LLLL:"dddd, MMMM[achea] Do, YYYY, A h:mm [vazta]",llll:"ddd, D MMM YYYY, A h:mm [vazta]"},calendar:{sameDay:"[Aiz] LT",nextDay:"[Faleam] LT",nextWeek:"[Ieta to] dddd[,] LT",lastDay:"[Kal] LT",lastWeek:"[Fatlo] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s adim",s:e,ss:e,m:e,mm:e,h:e,hh:e,d:e,dd:e,M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2}(er)/,ordinal:function(t,e){switch(e){case"D":return t+"er";default:case"M":case"Q":case"DDD":case"d":case"w":case"W":return t}},week:{dow:1,doy:4},meridiemParse:/rati|sokalli|donparam|sanje/,meridiemHour:function(t,e){return 12===t&&(t=0),"rati"===e?t<4?t:t+12:"sokalli"===e?t:"donparam"===e?t>12?t:t+12:"sanje"===e?t+12:void 0},meridiem:function(t,e,n){return t<4?"rati":t<12?"sokalli":t<16?"donparam":t<20?"sanje":"rati"}})}(n(381))},5349:function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("gu",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(t){return t.replace(/[]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/|||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e?t<4?t:t+12:""===e?t:""===e?t>=10?t:t+12:""===e?t+12:void 0},meridiem:function(t,e,n){return t<4?"":t<10?"":t<17?"":t<20?"":""},week:{dow:0,doy:6}})}(n(381))},4206:function(t,e,n){!function(t){"use strict";t.defineLocale("he",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D []MMMM YYYY",LLL:"D []MMMM YYYY HH:mm",LLLL:"dddd, D []MMMM YYYY HH:mm",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[ ]LT",nextDay:"[ ]LT",nextWeek:"dddd [] LT",lastDay:"[ ]LT",lastWeek:"[] dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",ss:"%d ",m:"",mm:"%d ",h:"",hh:function(t){return 2===t?"":t+" "},d:"",dd:function(t){return 2===t?"":t+" "},M:"",MM:function(t){return 2===t?"":t+" "},y:"",yy:function(t){return 2===t?"":t%10==0&&10!==t?t+" ":t+" "}},meridiemParse:/"|"| | | ||/i,isPM:function(t){return/^("| |)$/.test(t)},meridiem:function(t,e,n){return t<5?" ":t<10?"":t<12?n?'"':" ":t<18?n?'"':" ":""}})}(n(381))},94:function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("hi",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(t){return t.replace(/[]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/|||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e?t<4?t:t+12:""===e?t:""===e?t>=10?t:t+12:""===e?t+12:void 0},meridiem:function(t,e,n){return t<4?"":t<10?"":t<17?"":t<20?"":""},week:{dow:0,doy:6}})}(n(381))},316:function(t,e,n){!function(t){"use strict";function e(t,e,n){var r=t+" ";switch(n){case"ss":return r+(1===t?"sekunda":2===t||3===t||4===t?"sekunde":"sekundi");case"m":return e?"jedna minuta":"jedne minute";case"mm":return r+(1===t?"minuta":2===t||3===t||4===t?"minute":"minuta");case"h":return e?"jedan sat":"jednog sata";case"hh":return r+(1===t?"sat":2===t||3===t||4===t?"sata":"sati");case"dd":return r+(1===t?"dan":"dana");case"MM":return r+(1===t?"mjesec":2===t||3===t||4===t?"mjeseca":"mjeseci");case"yy":return r+(1===t?"godina":2===t||3===t||4===t?"godine":"godina")}}t.defineLocale("hr",{months:{format:"sijenja_veljae_oujka_travnja_svibnja_lipnja_srpnja_kolovoza_rujna_listopada_studenoga_prosinca".split("_"),standalone:"sijeanj_veljaa_oujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_")},monthsShort:"sij._velj._ou._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prolu] dddd [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:e,m:e,mm:e,h:e,hh:e,d:"dan",dd:e,M:"mjesec",MM:e,y:"godinu",yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(381))},2138:function(t,e,n){!function(t){"use strict";var e="vasrnap htfn kedden szerdn cstrtkn pnteken szombaton".split(" ");function n(t,e,n,r){var i=t;switch(n){case"s":return r||e?"nhny msodperc":"nhny msodperce";case"ss":return i+(r||e)?" msodperc":" msodperce";case"m":return"egy"+(r||e?" perc":" perce");case"mm":return i+(r||e?" perc":" perce");case"h":return"egy"+(r||e?" ra":" rja");case"hh":return i+(r||e?" ra":" rja");case"d":return"egy"+(r||e?" nap":" napja");case"dd":return i+(r||e?" nap":" napja");case"M":return"egy"+(r||e?" hnap":" hnapja");case"MM":return i+(r||e?" hnap":" hnapja");case"y":return"egy"+(r||e?" v":" ve");case"yy":return i+(r||e?" v":" ve")}return""}function r(t){return(t?"":"[mlt] ")+"["+e[this.day()]+"] LT[-kor]"}t.defineLocale("hu",{months:"janur_februr_mrcius_prilis_mjus_jnius_jlius_augusztus_szeptember_oktber_november_december".split("_"),monthsShort:"jan_feb_mrc_pr_mj_jn_jl_aug_szept_okt_nov_dec".split("_"),weekdays:"vasrnap_htf_kedd_szerda_cstrtk_pntek_szombat".split("_"),weekdaysShort:"vas_ht_kedd_sze_cst_pn_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D. H:mm",LLLL:"YYYY. MMMM D., dddd H:mm"},meridiemParse:/de|du/i,isPM:function(t){return"u"===t.charAt(1).toLowerCase()},meridiem:function(t,e,n){return t<12?!0===n?"de":"DE":!0===n?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return r.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return r.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s mlva",past:"%s",s:n,ss:n,m:n,mm:n,h:n,hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},1423:function(t,e,n){!function(t){"use strict";t.defineLocale("hy-am",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",lastDay:"[] LT",nextWeek:function(){return"dddd [ ] LT"},lastWeek:function(){return"[] dddd [ ] LT"},sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},meridiemParse:/|||/,isPM:function(t){return/^(|)$/.test(t)},meridiem:function(t){return t<4?"":t<12?"":t<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}|\d{1,2}-(|)/,ordinal:function(t,e){switch(e){case"DDD":case"w":case"W":case"DDDo":return 1===t?t+"-":t+"-";default:return t}},week:{dow:1,doy:7}})}(n(381))},9218:function(t,e,n){!function(t){"use strict";t.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agt_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(t,e){return 12===t&&(t=0),"pagi"===e?t:"siang"===e?t>=11?t:t+12:"sore"===e||"malam"===e?t+12:void 0},meridiem:function(t,e,n){return t<11?"pagi":t<15?"siang":t<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",ss:"%d detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(n(381))},135:function(t,e,n){!function(t){"use strict";function e(t){return t%100==11||t%10!=1}function n(t,n,r,i){var o=t+" ";switch(r){case"s":return n||i?"nokkrar sekndur":"nokkrum sekndum";case"ss":return e(t)?o+(n||i?"sekndur":"sekndum"):o+"seknda";case"m":return n?"mnta":"mntu";case"mm":return e(t)?o+(n||i?"mntur":"mntum"):n?o+"mnta":o+"mntu";case"hh":return e(t)?o+(n||i?"klukkustundir":"klukkustundum"):o+"klukkustund";case"d":return n?"dagur":i?"dag":"degi";case"dd":return e(t)?n?o+"dagar":o+(i?"daga":"dgum"):n?o+"dagur":o+(i?"dag":"degi");case"M":return n?"mnuur":i?"mnu":"mnui";case"MM":return e(t)?n?o+"mnuir":o+(i?"mnui":"mnuum"):n?o+"mnuur":o+(i?"mnu":"mnui");case"y":return n||i?"r":"ri";case"yy":return e(t)?o+(n||i?"r":"rum"):o+(n||i?"r":"ri")}}t.defineLocale("is",{months:"janar_febrar_mars_aprl_ma_jn_jl_gst_september_oktber_nvember_desember".split("_"),monthsShort:"jan_feb_mar_apr_ma_jn_jl_g_sep_okt_nv_des".split("_"),weekdays:"sunnudagur_mnudagur_rijudagur_mivikudagur_fimmtudagur_fstudagur_laugardagur".split("_"),weekdaysShort:"sun_mn_ri_mi_fim_fs_lau".split("_"),weekdaysMin:"Su_M_r_Mi_Fi_F_La".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd, D. MMMM YYYY [kl.] H:mm"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gr kl.] LT",lastWeek:"[sasta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s san",s:n,ss:n,m:n,mm:n,h:"klukkustund",hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},150:function(t,e,n){!function(t){"use strict";t.defineLocale("it-ch",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_luned_marted_mercoled_gioved_venerd_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){switch(this.day()){case 0:return"[la scorsa] dddd [alle] LT";default:return"[lo scorso] dddd [alle] LT"}},sameElse:"L"},relativeTime:{future:function(t){return(/^[0-9].+$/.test(t)?"tra":"in")+" "+t},past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(381))},626:function(t,e,n){!function(t){"use strict";t.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_luned_marted_mercoled_gioved_venerd_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){switch(this.day()){case 0:return"[la scorsa] dddd [alle] LT";default:return"[lo scorso] dddd [alle] LT"}},sameElse:"L"},relativeTime:{future:function(t){return(/^[0-9].+$/.test(t)?"tra":"in")+" "+t},past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(381))},9183:function(t,e,n){!function(t){"use strict";t.defineLocale("ja",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMD dddd HH:mm",l:"YYYY/MM/DD",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMD(ddd) HH:mm"},meridiemParse:/|/i,isPM:function(t){return""===t},meridiem:function(t,e,n){return t<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:function(t){return t.week()<this.week()?"[]dddd LT":"dddd LT"},lastDay:"[] LT",lastWeek:function(t){return this.week()<t.week()?"[]dddd LT":"dddd LT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"";default:return t}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d",m:"1",mm:"%d",h:"1",hh:"%d",d:"1",dd:"%d",M:"1",MM:"%d",y:"1",yy:"%d"}})}(n(381))},4286:function(t,e,n){!function(t){"use strict";t.defineLocale("jv",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des".split("_"),weekdays:"Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu".split("_"),weekdaysShort:"Min_Sen_Sel_Reb_Kem_Jem_Sep".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sp".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/enjing|siyang|sonten|ndalu/,meridiemHour:function(t,e){return 12===t&&(t=0),"enjing"===e?t:"siyang"===e?t>=11?t:t+12:"sonten"===e||"ndalu"===e?t+12:void 0},meridiem:function(t,e,n){return t<11?"enjing":t<15?"siyang":t<19?"sonten":"ndalu"},calendar:{sameDay:"[Dinten puniko pukul] LT",nextDay:"[Mbenjang pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kala wingi pukul] LT",lastWeek:"dddd [kepengker pukul] LT",sameElse:"L"},relativeTime:{future:"wonten ing %s",past:"%s ingkang kepengker",s:"sawetawis detik",ss:"%d detik",m:"setunggal menit",mm:"%d menit",h:"setunggal jam",hh:"%d jam",d:"sedinten",dd:"%d dinten",M:"sewulan",MM:"%d wulan",y:"setaun",yy:"%d taun"},week:{dow:1,doy:7}})}(n(381))},2105:function(t,e,n){!function(t){"use strict";t.defineLocale("ka",{months:{standalone:"___________".split("_"),format:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:{standalone:"______".split("_"),format:"______".split("_"),isFormat:/(|)/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[] LT[-]",nextDay:"[] LT[-]",lastDay:"[] LT[-]",nextWeek:"[] dddd LT[-]",lastWeek:"[] dddd LT-",sameElse:"L"},relativeTime:{future:function(t){return/(|||)/.test(t)?t.replace(/$/,""):t+""},past:function(t){return/(||||)/.test(t)?t.replace(/(|)$/," ")://.test(t)?t.replace(/$/," "):void 0},s:" ",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},dayOfMonthOrdinalParse:/0|1-|-\d{1,2}|\d{1,2}-/,ordinal:function(t){return 0===t?t:1===t?t+"-":t<20||t<=100&&t%20==0||t%100==0?"-"+t:t+"-"},week:{dow:1,doy:7}})}(n(381))},7772:function(t,e,n){!function(t){"use strict";var e={0:"-",1:"-",2:"-",3:"-",4:"-",5:"-",6:"-",7:"-",8:"-",9:"-",10:"-",20:"-",30:"-",40:"-",50:"-",60:"-",70:"-",80:"-",90:"-",100:"-"};t.defineLocale("kk",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"[ ] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-(|)/,ordinal:function(t){return t+(e[t]||e[t%10]||e[t>=100?100:null])},week:{dow:1,doy:7}})}(n(381))},8758:function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("km",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(t){return""===t},meridiem:function(t,e,n){return t<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",preparse:function(t){return t.replace(/[]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},week:{dow:1,doy:4}})}(n(381))},9282:function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("kn",{months:"___________".split("_"),monthsShort:"___________".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(t){return t.replace(/[]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/|||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e?t<4?t:t+12:""===e?t:""===e?t>=10?t:t+12:""===e?t+12:void 0},meridiem:function(t,e,n){return t<4?"":t<10?"":t<17?"":t<20?"":""},dayOfMonthOrdinalParse:/\d{1,2}()/,ordinal:function(t){return t+""},week:{dow:0,doy:6}})}(n(381))},3730:function(t,e,n){!function(t){"use strict";t.defineLocale("ko",{months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY MMMM D",LLL:"YYYY MMMM D A h:mm",LLLL:"YYYY MMMM D dddd A h:mm",l:"YYYY.MM.DD.",ll:"YYYY MMMM D",lll:"YYYY MMMM D A h:mm",llll:"YYYY MMMM D dddd A h:mm"},calendar:{sameDay:" LT",nextDay:" LT",nextWeek:"dddd LT",lastDay:" LT",lastWeek:" dddd LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d",m:"1",mm:"%d",h:" ",hh:"%d",d:"",dd:"%d",M:" ",MM:"%d",y:" ",yy:"%d"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"";case"M":return t+"";case"w":case"W":return t+"";default:return t}},meridiemParse:/|/,isPM:function(t){return""===t},meridiem:function(t,e,n){return t<12?"":""}})}(n(381))},1408:function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},r=[" ","","","","","","","",""," "," "," "];t.defineLocale("ku",{months:r,monthsShort:r,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(t){return//.test(t)},meridiem:function(t,e,n){return t<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:" ",ss:" %d",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(t){return t.replace(/[]/g,(function(t){return n[t]})).replace(//g,",")},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]})).replace(/,/g,"")},week:{dow:6,doy:12}})}(n(381))},3291:function(t,e,n){!function(t){"use strict";var e={0:"-",1:"-",2:"-",3:"-",4:"-",5:"-",6:"-",7:"-",8:"-",9:"-",10:"-",20:"-",30:"-",40:"-",50:"-",60:"-",70:"-",80:"-",90:"-",100:"-"};t.defineLocale("ky",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"[ ] dddd [] [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-(|||)/,ordinal:function(t){return t+(e[t]||e[t%10]||e[t>=100?100:null])},week:{dow:1,doy:7}})}(n(381))},6841:function(t,e,n){!function(t){"use strict";function e(t,e,n,r){var i={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],M:["ee Mount","engem Mount"],y:["ee Joer","engem Joer"]};return e?i[n][0]:i[n][1]}function n(t){if(t=parseInt(t,10),isNaN(t))return!1;if(t<0)return!0;if(t<10)return 4<=t&&t<=7;if(t<100){var e=t%10;return n(0===e?t/10:e)}if(t<1e4){for(;t>=10;)t/=10;return n(t)}return n(t/=1e3)}t.defineLocale("lb",{months:"Januar_Februar_Merz_Abrll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonndeg_Mindeg_Dnschdeg_Mttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._M._D._M._Do._Fr._Sa.".split("_"),weekdaysMin:"So_M_D_M_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm [Auer]",LTS:"H:mm:ss [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm [Auer]",LLLL:"dddd, D. MMMM YYYY H:mm [Auer]"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gschter um] LT",lastWeek:function(){switch(this.day()){case 2:case 4:return"[Leschten] dddd [um] LT";default:return"[Leschte] dddd [um] LT"}}},relativeTime:{future:function(t){return n(t.substr(0,t.indexOf(" ")))?"a "+t:"an "+t},past:function(t){return n(t.substr(0,t.indexOf(" ")))?"viru "+t:"virun "+t},s:"e puer Sekonnen",ss:"%d Sekonnen",m:e,mm:"%d Minutten",h:e,hh:"%d Stonnen",d:e,dd:"%d Deeg",M:e,MM:"%d Mint",y:e,yy:"%d Joer"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},5466:function(t,e,n){!function(t){"use strict";t.defineLocale("lo",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(t){return""===t},meridiem:function(t,e,n){return t<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd[] LT",lastDay:"[] LT",lastWeek:"[]dddd[] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},dayOfMonthOrdinalParse:/()\d{1,2}/,ordinal:function(t){return""+t}})}(n(381))},7010:function(t,e,n){!function(t){"use strict";var e={ss:"sekund_sekundi_sekundes",m:"minut_minuts_minut",mm:"minuts_minui_minutes",h:"valanda_valandos_valand",hh:"valandos_valand_valandas",d:"diena_dienos_dien",dd:"dienos_dien_dienas",M:"mnuo_mnesio_mnes",MM:"mnesiai_mnesi_mnesius",y:"metai_met_metus",yy:"metai_met_metus"};function n(t,e,n,r){return e?i(n)[0]:r?i(n)[1]:i(n)[2]}function r(t){return t%10==0||t>10&&t<20}function i(t){return e[t].split("_")}function o(t,e,o,a){var s=t+" ";return 1===t?s+n(0,e,o[0],a):e?s+(r(t)?i(o)[1]:i(o)[0]):a?s+i(o)[1]:s+(r(t)?i(o)[1]:i(o)[2])}t.defineLocale("lt",{months:{format:"sausio_vasario_kovo_balandio_gegus_birelio_liepos_rugpjio_rugsjo_spalio_lapkriio_gruodio".split("_"),standalone:"sausis_vasaris_kovas_balandis_gegu_birelis_liepa_rugpjtis_rugsjis_spalis_lapkritis_gruodis".split("_"),isFormat:/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?|MMMM?(\[[^\[\]]*\]|\s)+D[oD]?/},monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:{format:"sekmadien_pirmadien_antradien_treiadien_ketvirtadien_penktadien_etadien".split("_"),standalone:"sekmadienis_pirmadienis_antradienis_treiadienis_ketvirtadienis_penktadienis_etadienis".split("_"),isFormat:/dddd HH:mm/},weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_e".split("_"),weekdaysMin:"S_P_A_T_K_Pn_".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], HH:mm [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], HH:mm [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]"},calendar:{sameDay:"[iandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Prajus] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prie %s",s:function(t,e,n,r){return e?"kelios sekunds":r?"keli sekundi":"kelias sekundes"},ss:o,m:n,mm:o,h:n,hh:o,d:n,dd:o,M:n,MM:o,y:n,yy:o},dayOfMonthOrdinalParse:/\d{1,2}-oji/,ordinal:function(t){return t+"-oji"},week:{dow:1,doy:4}})}(n(381))},7595:function(t,e,n){!function(t){"use strict";var e={ss:"sekundes_sekundm_sekunde_sekundes".split("_"),m:"mintes_mintm_minte_mintes".split("_"),mm:"mintes_mintm_minte_mintes".split("_"),h:"stundas_stundm_stunda_stundas".split("_"),hh:"stundas_stundm_stunda_stundas".split("_"),d:"dienas_dienm_diena_dienas".split("_"),dd:"dienas_dienm_diena_dienas".split("_"),M:"mnea_mneiem_mnesis_mnei".split("_"),MM:"mnea_mneiem_mnesis_mnei".split("_"),y:"gada_gadiem_gads_gadi".split("_"),yy:"gada_gadiem_gads_gadi".split("_")};function n(t,e,n){return n?e%10==1&&e%100!=11?t[2]:t[3]:e%10==1&&e%100!=11?t[0]:t[1]}function r(t,r,i){return t+" "+n(e[i],t,r)}function i(t,r,i){return n(e[i],t,r)}t.defineLocale("lv",{months:"janvris_februris_marts_aprlis_maijs_jnijs_jlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jn_jl_aug_sep_okt_nov_dec".split("_"),weekdays:"svtdiena_pirmdiena_otrdiena_trediena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY.",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, HH:mm",LLLL:"YYYY. [gada] D. MMMM, dddd, HH:mm"},calendar:{sameDay:"[odien pulksten] LT",nextDay:"[Rt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pagju] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"pc %s",past:"pirms %s",s:function(t,e){return e?"daas sekundes":"dam sekundm"},ss:r,m:i,mm:r,h:i,hh:r,d:i,dd:r,M:i,MM:r,y:i,yy:r},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},9861:function(t,e,n){!function(t){"use strict";var e={words:{ss:["sekund","sekunda","sekundi"],m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mjesec","mjeseca","mjeseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(t,e){return 1===t?e[0]:t>=2&&t<=4?e[1]:e[2]},translate:function(t,n,r){var i=e.words[r];return 1===r.length?n?i[0]:i[1]:t+" "+e.correctGrammaticalCase(t,i)}};t.defineLocale("me",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sjutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jue u] LT",lastWeek:function(){return["[prole] [nedjelje] [u] LT","[prolog] [ponedjeljka] [u] LT","[prolog] [utorka] [u] LT","[prole] [srijede] [u] LT","[prolog] [etvrtka] [u] LT","[prolog] [petka] [u] LT","[prole] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"nekoliko sekundi",ss:e.translate,m:e.translate,mm:e.translate,h:e.translate,hh:e.translate,d:"dan",dd:e.translate,M:"mjesec",MM:e.translate,y:"godinu",yy:e.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(381))},5493:function(t,e,n){!function(t){"use strict";t.defineLocale("mi",{months:"Kohi-tte_Hui-tanguru_Pout-te-rangi_Paenga-whwh_Haratua_Pipiri_Hngoingoi_Here-turi-kk_Mahuru_Whiringa--nuku_Whiringa--rangi_Hakihea".split("_"),monthsShort:"Kohi_Hui_Pou_Pae_Hara_Pipi_Hngoi_Here_Mahu_Whi-nu_Whi-ra_Haki".split("_"),monthsRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,2}/i,weekdays:"Rtapu_Mane_Trei_Wenerei_Tite_Paraire_Htarei".split("_"),weekdaysShort:"Ta_Ma_T_We_Ti_Pa_H".split("_"),weekdaysMin:"Ta_Ma_T_We_Ti_Pa_H".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [i] HH:mm",LLLL:"dddd, D MMMM YYYY [i] HH:mm"},calendar:{sameDay:"[i teie mahana, i] LT",nextDay:"[apopo i] LT",nextWeek:"dddd [i] LT",lastDay:"[inanahi i] LT",lastWeek:"dddd [whakamutunga i] LT",sameElse:"L"},relativeTime:{future:"i roto i %s",past:"%s i mua",s:"te hkona ruarua",ss:"%d hkona",m:"he meneti",mm:"%d meneti",h:"te haora",hh:"%d haora",d:"he ra",dd:"%d ra",M:"he marama",MM:"%d marama",y:"he tau",yy:"%d tau"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(381))},5966:function(t,e,n){!function(t){"use strict";t.defineLocale("mk",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"e_o_____a".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"[] dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[] dddd [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}-(|||||)/,ordinal:function(t){var e=t%10,n=t%100;return 0===t?t+"-":0===n?t+"-":n>10&&n<20?t+"-":1===e?t+"-":2===e?t+"-":7===e||8===e?t+"-":t+"-"},week:{dow:1,doy:7}})}(n(381))},7341:function(t,e,n){!function(t){"use strict";t.defineLocale("ml",{months:"___________".split("_"),monthsShort:"._._._.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm -",LTS:"A h:mm:ss -",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm -",LLLL:"dddd, D MMMM YYYY, A h:mm -"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},meridiemParse:/|| ||/i,meridiemHour:function(t,e){return 12===t&&(t=0),""===e&&t>=4||" "===e||""===e?t+12:t},meridiem:function(t,e,n){return t<4?"":t<12?"":t<17?" ":t<20?"":""}})}(n(381))},5115:function(t,e,n){!function(t){"use strict";function e(t,e,n,r){switch(n){case"s":return e?" ":" ";case"ss":return t+(e?" ":" ");case"m":case"mm":return t+(e?" ":" ");case"h":case"hh":return t+(e?" ":" ");case"d":case"dd":return t+(e?" ":" ");case"M":case"MM":return t+(e?" ":" ");case"y":case"yy":return t+(e?" ":" ");default:return t}}t.defineLocale("mn",{months:" _ _ _ _ _ _ _ _ _ _  _  ".split("_"),monthsShort:"1 _2 _3 _4 _5 _6 _7 _8 _9 _10 _11 _12 ".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY  MMMM D",LLL:"YYYY  MMMM D HH:mm",LLLL:"dddd, YYYY  MMMM D HH:mm"},meridiemParse:/|/i,isPM:function(t){return""===t},meridiem:function(t,e,n){return t<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd LT",lastDay:"[] LT",lastWeek:"[] dddd LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:e,ss:e,m:e,mm:e,h:e,hh:e,d:e,dd:e,M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2} /,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+" ";default:return t}}})}(n(381))},370:function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};function r(t,e,n,r){var i="";if(e)switch(n){case"s":i=" ";break;case"ss":i="%d ";break;case"m":i=" ";break;case"mm":i="%d ";break;case"h":i=" ";break;case"hh":i="%d ";break;case"d":i=" ";break;case"dd":i="%d ";break;case"M":i=" ";break;case"MM":i="%d ";break;case"y":i=" ";break;case"yy":i="%d "}else switch(n){case"s":i=" ";break;case"ss":i="%d ";break;case"m":i=" ";break;case"mm":i="%d ";break;case"h":i=" ";break;case"hh":i="%d ";break;case"d":i=" ";break;case"dd":i="%d ";break;case"M":i=" ";break;case"MM":i="%d ";break;case"y":i=" ";break;case"yy":i="%d "}return i.replace(/%d/i,t)}t.defineLocale("mr",{months:"___________".split("_"),monthsShort:"._._._._._._._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:r,ss:r,m:r,mm:r,h:r,hh:r,d:r,dd:r,M:r,MM:r,y:r,yy:r},preparse:function(t){return t.replace(/[]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/|||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e?t<4?t:t+12:""===e?t:""===e?t>=10?t:t+12:""===e?t+12:void 0},meridiem:function(t,e,n){return t<4?"":t<10?"":t<17?"":t<20?"":""},week:{dow:0,doy:6}})}(n(381))},1237:function(t,e,n){!function(t){"use strict";t.defineLocale("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(t,e){return 12===t&&(t=0),"pagi"===e?t:"tengahari"===e?t>=11?t:t+12:"petang"===e||"malam"===e?t+12:void 0},meridiem:function(t,e,n){return t<11?"pagi":t<15?"tengahari":t<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(n(381))},9847:function(t,e,n){!function(t){"use strict";t.defineLocale("ms",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(t,e){return 12===t&&(t=0),"pagi"===e?t:"tengahari"===e?t>=11?t:t+12:"petang"===e||"malam"===e?t+12:void 0},meridiem:function(t,e,n){return t<11?"pagi":t<15?"tengahari":t<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(n(381))},2126:function(t,e,n){!function(t){"use strict";t.defineLocale("mt",{months:"Jannar_Frar_Marzu_April_Mejju_unju_Lulju_Awwissu_Settembru_Ottubru_Novembru_Diembru".split("_"),monthsShort:"Jan_Fra_Mar_Apr_Mej_un_Lul_Aww_Set_Ott_Nov_Di".split("_"),weekdays:"Il-add_It-Tnejn_It-Tlieta_L-Erbga_Il-amis_Il-imga_Is-Sibt".split("_"),weekdaysShort:"ad_Tne_Tli_Erb_am_im_Sib".split("_"),weekdaysMin:"a_Tn_Tl_Er_a_i_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Illum fil-]LT",nextDay:"[Gada fil-]LT",nextWeek:"dddd [fil-]LT",lastDay:"[Il-biera fil-]LT",lastWeek:"dddd [li gadda] [fil-]LT",sameElse:"L"},relativeTime:{future:"f %s",past:"%s ilu",s:"ftit sekondi",ss:"%d sekondi",m:"minuta",mm:"%d minuti",h:"siega",hh:"%d siegat",d:"urnata",dd:"%d ranet",M:"xahar",MM:"%d xhur",y:"sena",yy:"%d sni"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(381))},6165:function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("my",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[.] LT []",nextDay:"[] LT []",nextWeek:"dddd LT []",lastDay:"[.] LT []",lastWeek:"[] dddd LT []",sameElse:"L"},relativeTime:{future:" %s ",past:" %s ",s:".",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(t){return t.replace(/[]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},week:{dow:1,doy:4}})}(n(381))},4924:function(t,e,n){!function(t){"use strict";t.defineLocale("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_april_mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:!0,weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"s._ma._ti._on._to._fr._l.".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] HH:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i gr kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"noen sekunder",ss:"%d sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",M:"en mned",MM:"%d mneder",y:"ett r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},6744:function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("ne",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"._._._._._._.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},preparse:function(t){return t.replace(/[]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/|||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e?t<4?t:t+12:""===e?t:""===e?t>=10?t:t+12:""===e?t+12:void 0},meridiem:function(t,e,n){return t<3?"":t<12?"":t<16?"":t<20?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd[,] LT",lastDay:"[] LT",lastWeek:"[] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:0,doy:6}})}(n(381))},9814:function(t,e,n){!function(t){"use strict";var e="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),r=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],i=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;t.defineLocale("nl-be",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(t,r){return t?/-MMM-/.test(r)?n[t.month()]:e[t.month()]:e},monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"n minuut",mm:"%d minuten",h:"n uur",hh:"%d uur",d:"n dag",dd:"%d dagen",M:"n maand",MM:"%d maanden",y:"n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(t){return t+(1===t||8===t||t>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(381))},3901:function(t,e,n){!function(t){"use strict";var e="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),r=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],i=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;t.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(t,r){return t?/-MMM-/.test(r)?n[t.month()]:e[t.month()]:e},monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"n minuut",mm:"%d minuten",h:"n uur",hh:"%d uur",d:"n dag",dd:"%d dagen",M:"n maand",MM:"%d maanden",y:"n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(t){return t+(1===t||8===t||t>=20?"ste":"de")},week:{dow:1,doy:4}})}(n(381))},3877:function(t,e,n){!function(t){"use strict";t.defineLocale("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sundag_mndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"sun_mn_tys_ons_tor_fre_lau".split("_"),weekdaysMin:"su_m_ty_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I gr klokka] LT",lastWeek:"[Fregande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s sidan",s:"nokre sekund",ss:"%d sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",M:"ein mnad",MM:"%d mnader",y:"eit r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},5858:function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("pa-in",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm ",LLLL:"dddd, D MMMM YYYY, A h:mm "},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(t){return t.replace(/[]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/|||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e?t<4?t:t+12:""===e?t:""===e?t>=10?t:t+12:""===e?t+12:void 0},meridiem:function(t,e,n){return t<4?"":t<10?"":t<17?"":t<20?"":""},week:{dow:0,doy:6}})}(n(381))},4495:function(t,e,n){!function(t){"use strict";var e="stycze_luty_marzec_kwiecie_maj_czerwiec_lipiec_sierpie_wrzesie_padziernik_listopad_grudzie".split("_"),n="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrzenia_padziernika_listopada_grudnia".split("_");function r(t){return t%10<5&&t%10>1&&~~(t/10)%10!=1}function i(t,e,n){var i=t+" ";switch(n){case"ss":return i+(r(t)?"sekundy":"sekund");case"m":return e?"minuta":"minut";case"mm":return i+(r(t)?"minuty":"minut");case"h":return e?"godzina":"godzin";case"hh":return i+(r(t)?"godziny":"godzin");case"MM":return i+(r(t)?"miesice":"miesicy");case"yy":return i+(r(t)?"lata":"lat")}}t.defineLocale("pl",{months:function(t,r){return t?""===r?"("+n[t.month()]+"|"+e[t.month()]+")":/D MMMM/.test(r)?n[t.month()]:e[t.month()]:e},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa_lis_gru".split("_"),weekdays:"niedziela_poniedziaek_wtorek_roda_czwartek_pitek_sobota".split("_"),weekdaysShort:"ndz_pon_wt_r_czw_pt_sob".split("_"),weekdaysMin:"Nd_Pn_Wt_r_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dzi o] LT",nextDay:"[Jutro o] LT",nextWeek:function(){switch(this.day()){case 0:return"[W niedziel o] LT";case 2:return"[We wtorek o] LT";case 3:return"[W rod o] LT";case 6:return"[W sobot o] LT";default:return"[W] dddd [o] LT"}},lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zesz niedziel o] LT";case 3:return"[W zesz rod o] LT";case 6:return"[W zesz sobot o] LT";default:return"[W zeszy] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",ss:i,m:i,mm:i,h:i,hh:i,d:"1 dzie",dd:"%d dni",M:"miesic",MM:i,y:"rok",yy:i},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},7971:function(t,e,n){!function(t){"use strict";t.defineLocale("pt-br",{months:"Janeiro_Fevereiro_Maro_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-feira_Tera-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sbado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sb".split("_"),weekdaysMin:"Do_2_3_4_5_6_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [s] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [s] HH:mm"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"h %s",s:"poucos segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d"})}(n(381))},9520:function(t,e,n){!function(t){"use strict";t.defineLocale("pt",{months:"Janeiro_Fevereiro_Maro_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-feira_Tera-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sbado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_Sb".split("_"),weekdaysMin:"Do_2_3_4_5_6_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY HH:mm"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"h %s",s:"segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(381))},6459:function(t,e,n){!function(t){"use strict";function e(t,e,n){var r=" ";return(t%100>=20||t>=100&&t%100==0)&&(r=" de "),t+r+{ss:"secunde",mm:"minute",hh:"ore",dd:"zile",MM:"luni",yy:"ani"}[n]}t.defineLocale("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"duminic_luni_mari_miercuri_joi_vineri_smbt".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_S".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s n urm",s:"cteva secunde",ss:e,m:"un minut",mm:e,h:"o or",hh:e,d:"o zi",dd:e,M:"o lun",MM:e,y:"un an",yy:e},week:{dow:1,doy:7}})}(n(381))},1793:function(t,e,n){!function(t){"use strict";function e(t,e,n){return"m"===n?e?"":"":t+" "+(r=+t,i={ss:e?"__":"__",mm:e?"__":"__",hh:"__",dd:"__",MM:"__",yy:"__"}[n].split("_"),r%10==1&&r%100!=11?i[0]:r%10>=2&&r%10<=4&&(r%100<10||r%100>=20)?i[1]:i[2]);var r,i}var n=[/^/i,/^/i,/^/i,/^/i,/^[]/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i];t.defineLocale("ru",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:{format:"._._._.____._._._._.".split("_"),standalone:"._.__.____._._._._.".split("_")},weekdays:{standalone:"______".split("_"),format:"______".split("_"),isFormat:/\[ ?[] ?(?:||)? ?\] ?dddd/},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),monthsParse:n,longMonthsParse:n,shortMonthsParse:n,monthsRegex:/^([]|\.?|[]|?\.?|?|\.?|[]|\.?|[]|[]|\.?|[]|\.?|?|\.?|[]|?\.?|[]|\.?|[]|?\.?|[]|\.?)/i,monthsShortRegex:/^([]|\.?|[]|?\.?|?|\.?|[]|\.?|[]|[]|\.?|[]|\.?|?|\.?|[]|?\.?|[]|\.?|[]|?\.?|[]|\.?)/i,monthsStrictRegex:/^([]|[]|?|[]|[]|[]|[]|?|[]|[]|[]|[])/i,monthsShortStrictRegex:/^(\.|?\.|[.]|\.|[]|[.]|[.]|\.|?\.|\.|?\.|\.)/i,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., H:mm",LLLL:"dddd, D MMMM YYYY ., H:mm"},calendar:{sameDay:"[, ] LT",nextDay:"[, ] LT",lastDay:"[, ] LT",nextWeek:function(t){if(t.week()===this.week())return 2===this.day()?"[] dddd, [] LT":"[] dddd, [] LT";switch(this.day()){case 0:return"[ ] dddd, [] LT";case 1:case 2:case 4:return"[ ] dddd, [] LT";case 3:case 5:case 6:return"[ ] dddd, [] LT"}},lastWeek:function(t){if(t.week()===this.week())return 2===this.day()?"[] dddd, [] LT":"[] dddd, [] LT";switch(this.day()){case 0:return"[ ] dddd, [] LT";case 1:case 2:case 4:return"[ ] dddd, [] LT";case 3:case 5:case 6:return"[ ] dddd, [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",ss:e,m:e,mm:e,h:"",hh:e,d:"",dd:e,M:"",MM:e,y:"",yy:e},meridiemParse:/|||/i,isPM:function(t){return/^(|)$/.test(t)},meridiem:function(t,e,n){return t<4?"":t<12?"":t<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(||)/,ordinal:function(t,e){switch(e){case"M":case"d":case"DDD":return t+"-";case"D":return t+"-";case"w":case"W":return t+"-";default:return t}},week:{dow:1,doy:4}})}(n(381))},950:function(t,e,n){!function(t){"use strict";var e=["","","","","","","","","","","",""],n=["","","","","","",""];t.defineLocale("sd",{months:e,monthsShort:e,weekdays:n,weekdaysShort:n,weekdaysMin:n,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(t){return""===t},meridiem:function(t,e,n){return t<12?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd [  ] LT",lastDay:"[] LT",lastWeek:"[ ] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(t){return t.replace(//g,",")},postformat:function(t){return t.replace(/,/g,"")},week:{dow:1,doy:4}})}(n(381))},490:function(t,e,n){!function(t){"use strict";t.defineLocale("se",{months:"oajagemnnu_guovvamnnu_njukamnnu_cuoomnnu_miessemnnu_geassemnnu_suoidnemnnu_borgemnnu_akamnnu_golggotmnnu_skbmamnnu_juovlamnnu".split("_"),monthsShort:"oj_guov_njuk_cuo_mies_geas_suoi_borg_ak_golg_skb_juov".split("_"),weekdays:"sotnabeaivi_vuossrga_maebrga_gaskavahkku_duorastat_bearjadat_lvvardat".split("_"),weekdaysShort:"sotn_vuos_ma_gask_duor_bear_lv".split("_"),weekdaysMin:"s_v_m_g_d_b_L".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"MMMM D. [b.] YYYY",LLL:"MMMM D. [b.] YYYY [ti.] HH:mm",LLLL:"dddd, MMMM D. [b.] YYYY [ti.] HH:mm"},calendar:{sameDay:"[otne ti] LT",nextDay:"[ihttin ti] LT",nextWeek:"dddd [ti] LT",lastDay:"[ikte ti] LT",lastWeek:"[ovddit] dddd [ti] LT",sameElse:"L"},relativeTime:{future:"%s geaes",past:"mait %s",s:"moadde sekunddat",ss:"%d sekunddat",m:"okta minuhta",mm:"%d minuhtat",h:"okta diimmu",hh:"%d diimmut",d:"okta beaivi",dd:"%d beaivvit",M:"okta mnnu",MM:"%d mnut",y:"okta jahki",yy:"%d jagit"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},124:function(t,e,n){!function(t){"use strict";t.defineLocale("si",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"a h:mm",LTS:"a h:mm:ss",L:"YYYY/MM/DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D, a h:mm",LLLL:"YYYY MMMM D [] dddd, a h:mm:ss"},calendar:{sameDay:"[] LT[]",nextDay:"[] LT[]",nextWeek:"dddd LT[]",lastDay:"[] LT[]",lastWeek:"[] dddd LT[]",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:" ",ss:" %d",m:"",mm:" %d",h:"",hh:" %d",d:"",dd:" %d",M:"",MM:" %d",y:"",yy:" %d"},dayOfMonthOrdinalParse:/\d{1,2} /,ordinal:function(t){return t+" "},meridiemParse:/ | |.|../,isPM:function(t){return".."===t||" "===t},meridiem:function(t,e,n){return t>11?n?"..":" ":n?"..":" "}})}(n(381))},4249:function(t,e,n){!function(t){"use strict";var e="janur_februr_marec_aprl_mj_jn_jl_august_september_oktber_november_december".split("_"),n="jan_feb_mar_apr_mj_jn_jl_aug_sep_okt_nov_dec".split("_");function r(t){return t>1&&t<5}function i(t,e,n,i){var o=t+" ";switch(n){case"s":return e||i?"pr seknd":"pr sekundami";case"ss":return e||i?o+(r(t)?"sekundy":"seknd"):o+"sekundami";case"m":return e?"minta":i?"mintu":"mintou";case"mm":return e||i?o+(r(t)?"minty":"mint"):o+"mintami";case"h":return e?"hodina":i?"hodinu":"hodinou";case"hh":return e||i?o+(r(t)?"hodiny":"hodn"):o+"hodinami";case"d":return e||i?"de":"dom";case"dd":return e||i?o+(r(t)?"dni":"dn"):o+"dami";case"M":return e||i?"mesiac":"mesiacom";case"MM":return e||i?o+(r(t)?"mesiace":"mesiacov"):o+"mesiacmi";case"y":return e||i?"rok":"rokom";case"yy":return e||i?o+(r(t)?"roky":"rokov"):o+"rokmi"}}t.defineLocale("sk",{months:e,monthsShort:n,weekdays:"nedea_pondelok_utorok_streda_tvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_t_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_t_pi_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo tvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[vera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minul nedeu o] LT";case 1:case 2:return"[minul] dddd [o] LT";case 3:return"[minul stredu o] LT";case 4:case 5:return"[minul] dddd [o] LT";case 6:return"[minul sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:i,ss:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},4985:function(t,e,n){!function(t){"use strict";function e(t,e,n,r){var i=t+" ";switch(n){case"s":return e||r?"nekaj sekund":"nekaj sekundami";case"ss":return i+(1===t?e?"sekundo":"sekundi":2===t?e||r?"sekundi":"sekundah":t<5?e||r?"sekunde":"sekundah":"sekund");case"m":return e?"ena minuta":"eno minuto";case"mm":return i+(1===t?e?"minuta":"minuto":2===t?e||r?"minuti":"minutama":t<5?e||r?"minute":"minutami":e||r?"minut":"minutami");case"h":return e?"ena ura":"eno uro";case"hh":return i+(1===t?e?"ura":"uro":2===t?e||r?"uri":"urama":t<5?e||r?"ure":"urami":e||r?"ur":"urami");case"d":return e||r?"en dan":"enim dnem";case"dd":return i+(1===t?e||r?"dan":"dnem":2===t?e||r?"dni":"dnevoma":e||r?"dni":"dnevi");case"M":return e||r?"en mesec":"enim mesecem";case"MM":return i+(1===t?e||r?"mesec":"mesecem":2===t?e||r?"meseca":"mesecema":t<5?e||r?"mesece":"meseci":e||r?"mesecev":"meseci");case"y":return e||r?"eno leto":"enim letom";case"yy":return i+(1===t?e||r?"leto":"letom":2===t?e||r?"leti":"letoma":t<5?e||r?"leta":"leti":e||r?"let":"leti")}}t.defineLocale("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljek_torek_sreda_etrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._et._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_e_pe_so".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[veraj ob] LT",lastWeek:function(){switch(this.day()){case 0:return"[prejnjo] [nedeljo] [ob] LT";case 3:return"[prejnjo] [sredo] [ob] LT";case 6:return"[prejnjo] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[prejnji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"ez %s",past:"pred %s",s:e,ss:e,m:e,mm:e,h:e,hh:e,d:e,dd:e,M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(381))},1104:function(t,e,n){!function(t){"use strict";t.defineLocale("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nn_Dhj".split("_"),weekdays:"E Diel_E Hn_E Mart_E Mrkur_E Enjte_E Premte_E Shtun".split("_"),weekdaysShort:"Die_Hn_Mar_Mr_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_M_E_P_Sh".split("_"),weekdaysParseExact:!0,meridiemParse:/PD|MD/,isPM:function(t){return"M"===t.charAt(0)},meridiem:function(t,e,n){return t<12?"PD":"MD"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Sot n] LT",nextDay:"[Nesr n] LT",nextWeek:"dddd [n] LT",lastDay:"[Dje n] LT",lastWeek:"dddd [e kaluar n] LT",sameElse:"L"},relativeTime:{future:"n %s",past:"%s m par",s:"disa sekonda",ss:"%d sekonda",m:"nj minut",mm:"%d minuta",h:"nj or",hh:"%d or",d:"nj dit",dd:"%d dit",M:"nj muaj",MM:"%d muaj",y:"nj vit",yy:"%d vite"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},9915:function(t,e,n){!function(t){"use strict";var e={words:{ss:["","",""],m:[" "," "],mm:["","",""],h:[" "," "],hh:["","",""],dd:["","",""],MM:["","",""],yy:["","",""]},correctGrammaticalCase:function(t,e){return 1===t?e[0]:t>=2&&t<=4?e[1]:e[2]},translate:function(t,n,r){var i=e.words[r];return 1===r.length?n?i[0]:i[1]:t+" "+e.correctGrammaticalCase(t,i)}};t.defineLocale("sr-cyrl",{months:"___________".split("_"),monthsShort:"._._._.____._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"______".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:function(){switch(this.day()){case 0:return"[] [] [] LT";case 3:return"[] [] [] LT";case 6:return"[] [] [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},lastDay:"[ ] LT",lastWeek:function(){return["[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT"][this.day()]},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",ss:e.translate,m:e.translate,mm:e.translate,h:e.translate,hh:e.translate,d:"",dd:e.translate,M:"",MM:e.translate,y:"",yy:e.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(381))},9131:function(t,e,n){!function(t){"use strict";var e={words:{ss:["sekunda","sekunde","sekundi"],m:["jedan minut","jedne minute"],mm:["minut","minute","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mesec","meseca","meseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(t,e){return 1===t?e[0]:t>=2&&t<=4?e[1]:e[2]},translate:function(t,n,r){var i=e.words[r];return 1===r.length?n?i[0]:i[1]:t+" "+e.correctGrammaticalCase(t,i)}};t.defineLocale("sr",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljak_utorak_sreda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sre._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jue u] LT",lastWeek:function(){return["[prole] [nedelje] [u] LT","[prolog] [ponedeljka] [u] LT","[prolog] [utorka] [u] LT","[prole] [srede] [u] LT","[prolog] [etvrtka] [u] LT","[prolog] [petka] [u] LT","[prole] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",ss:e.translate,m:e.translate,mm:e.translate,h:e.translate,hh:e.translate,d:"dan",dd:e.translate,M:"mesec",MM:e.translate,y:"godinu",yy:e.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n(381))},5893:function(t,e,n){!function(t){"use strict";t.defineLocale("ss",{months:"Bhimbidvwane_Indlovana_Indlov'lenkhulu_Mabasa_Inkhwekhweti_Inhlaba_Kholwane_Ingci_Inyoni_Imphala_Lweti_Ingongoni".split("_"),monthsShort:"Bhi_Ina_Inu_Mab_Ink_Inh_Kho_Igc_Iny_Imp_Lwe_Igo".split("_"),weekdays:"Lisontfo_Umsombuluko_Lesibili_Lesitsatfu_Lesine_Lesihlanu_Umgcibelo".split("_"),weekdaysShort:"Lis_Umb_Lsb_Les_Lsi_Lsh_Umg".split("_"),weekdaysMin:"Li_Us_Lb_Lt_Ls_Lh_Ug".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Namuhla nga] LT",nextDay:"[Kusasa nga] LT",nextWeek:"dddd [nga] LT",lastDay:"[Itolo nga] LT",lastWeek:"dddd [leliphelile] [nga] LT",sameElse:"L"},relativeTime:{future:"nga %s",past:"wenteka nga %s",s:"emizuzwana lomcane",ss:"%d mzuzwana",m:"umzuzu",mm:"%d emizuzu",h:"lihora",hh:"%d emahora",d:"lilanga",dd:"%d emalanga",M:"inyanga",MM:"%d tinyanga",y:"umnyaka",yy:"%d iminyaka"},meridiemParse:/ekuseni|emini|entsambama|ebusuku/,meridiem:function(t,e,n){return t<11?"ekuseni":t<15?"emini":t<19?"entsambama":"ebusuku"},meridiemHour:function(t,e){return 12===t&&(t=0),"ekuseni"===e?t:"emini"===e?t>=11?t:t+12:"entsambama"===e||"ebusuku"===e?0===t?0:t+12:void 0},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}(n(381))},8760:function(t,e,n){!function(t){"use strict";t.defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mndag_tisdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_mn_tis_ons_tor_fre_lr".split("_"),weekdaysMin:"s_m_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [kl.] HH:mm",LLLL:"dddd D MMMM YYYY [kl.] HH:mm",lll:"D MMM YYYY HH:mm",llll:"ddd D MMM YYYY HH:mm"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igr] LT",nextWeek:"[P] dddd LT",lastWeek:"[I] dddd[s] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"fr %s sedan",s:"ngra sekunder",ss:"%d sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en mnad",MM:"%d mnader",y:"ett r",yy:"%d r"},dayOfMonthOrdinalParse:/\d{1,2}(e|a)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"e":1===e||2===e?"a":"e")},week:{dow:1,doy:4}})}(n(381))},1172:function(t,e,n){!function(t){"use strict";t.defineLocale("sw",{months:"Januari_Februari_Machi_Aprili_Mei_Juni_Julai_Agosti_Septemba_Oktoba_Novemba_Desemba".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ago_Sep_Okt_Nov_Des".split("_"),weekdays:"Jumapili_Jumatatu_Jumanne_Jumatano_Alhamisi_Ijumaa_Jumamosi".split("_"),weekdaysShort:"Jpl_Jtat_Jnne_Jtan_Alh_Ijm_Jmos".split("_"),weekdaysMin:"J2_J3_J4_J5_Al_Ij_J1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[leo saa] LT",nextDay:"[kesho saa] LT",nextWeek:"[wiki ijayo] dddd [saat] LT",lastDay:"[jana] LT",lastWeek:"[wiki iliyopita] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s baadaye",past:"tokea %s",s:"hivi punde",ss:"sekunde %d",m:"dakika moja",mm:"dakika %d",h:"saa limoja",hh:"masaa %d",d:"siku moja",dd:"masiku %d",M:"mwezi mmoja",MM:"miezi %d",y:"mwaka mmoja",yy:"miaka %d"},week:{dow:1,doy:7}})}(n(381))},7333:function(t,e,n){!function(t){"use strict";var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};t.defineLocale("ta",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, HH:mm",LLLL:"dddd, D MMMM YYYY, HH:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[ ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",ss:"%d ",m:" ",mm:"%d ",h:"  ",hh:"%d  ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(t){return t+""},preparse:function(t){return t.replace(/[]/g,(function(t){return n[t]}))},postformat:function(t){return t.replace(/\d/g,(function(t){return e[t]}))},meridiemParse:/|||||/,meridiem:function(t,e,n){return t<2?" ":t<6?" ":t<10?" ":t<14?" ":t<18?" ":t<22?" ":" "},meridiemHour:function(t,e){return 12===t&&(t=0),""===e?t<2?t:t+12:""===e||""===e||""===e&&t>=10?t:t+12},week:{dow:0,doy:6}})}(n(381))},3110:function(t,e,n){!function(t){"use strict";t.defineLocale("te",{months:"___________".split("_"),monthsShort:"._.__.____._._._._.".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",meridiemParse:/|||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e?t<4?t:t+12:""===e?t:""===e?t>=10?t:t+12:""===e?t+12:void 0},meridiem:function(t,e,n){return t<4?"":t<10?"":t<17?"":t<20?"":""},week:{dow:0,doy:6}})}(n(381))},2095:function(t,e,n){!function(t){"use strict";t.defineLocale("tet",{months:"Janeiru_Fevereiru_Marsu_Abril_Maiu_Juu_Jullu_Agustu_Setembru_Outubru_Novembru_Dezembru".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingu_Segunda_Tersa_Kuarta_Kinta_Sesta_Sabadu".split("_"),weekdaysShort:"Dom_Seg_Ters_Kua_Kint_Sest_Sab".split("_"),weekdaysMin:"Do_Seg_Te_Ku_Ki_Ses_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Ohin iha] LT",nextDay:"[Aban iha] LT",nextWeek:"dddd [iha] LT",lastDay:"[Horiseik iha] LT",lastWeek:"dddd [semana kotuk] [iha] LT",sameElse:"L"},relativeTime:{future:"iha %s",past:"%s liuba",s:"minutu balun",ss:"minutu %d",m:"minutu ida",mm:"minutu %d",h:"oras ida",hh:"oras %d",d:"loron ida",dd:"loron %d",M:"fulan ida",MM:"fulan %d",y:"tinan ida",yy:"tinan %d"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})}(n(381))},7321:function(t,e,n){!function(t){"use strict";var e={0:"-",1:"-",2:"-",3:"-",4:"-",5:"-",6:"-",7:"-",8:"-",9:"-",10:"-",12:"-",13:"-",20:"-",30:"-",40:"-",50:"-",60:"-",70:"-",80:"-",90:"-",100:"-"};t.defineLocale("tg",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:"dddd[] [  ] LT",lastWeek:"dddd[] [  ] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},meridiemParse:/|||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e?t<4?t:t+12:""===e?t:""===e?t>=11?t:t+12:""===e?t+12:void 0},meridiem:function(t,e,n){return t<4?"":t<11?"":t<16?"":t<19?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(|)/,ordinal:function(t){return t+(e[t]||e[t%10]||e[t>=100?100:null])},week:{dow:1,doy:7}})}(n(381))},9041:function(t,e,n){!function(t){"use strict";t.defineLocale("th",{months:"___________".split("_"),monthsShort:".._.._.._.._.._.._.._.._.._.._.._..".split("_"),monthsParseExact:!0,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"._._._._._._.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY  H:mm",LLLL:"dddd D MMMM YYYY  H:mm"},meridiemParse:/|/,isPM:function(t){return""===t},meridiem:function(t,e,n){return t<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd[ ] LT",lastDay:"[ ] LT",lastWeek:"[]dddd[ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}})}(n(381))},5768:function(t,e,n){!function(t){"use strict";t.defineLocale("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"LT [ngayong araw]",nextDay:"[Bukas ng] LT",nextWeek:"LT [sa susunod na] dddd",lastDay:"LT [kahapon]",lastWeek:"LT [noong nakaraang] dddd",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",ss:"%d segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(t){return t},week:{dow:1,doy:4}})}(n(381))},9444:function(t,e,n){!function(t){"use strict";var e="pagh_wa_cha_wej_loS_vagh_jav_Soch_chorgh_Hut".split("_");function n(t,n,r,i){var o=function(t){var n=Math.floor(t%1e3/100),r=Math.floor(t%100/10),i=t%10,o="";return n>0&&(o+=e[n]+"vatlh"),r>0&&(o+=(""!==o?" ":"")+e[r]+"maH"),i>0&&(o+=(""!==o?" ":"")+e[i]),""===o?"pagh":o}(t);switch(r){case"ss":return o+" lup";case"mm":return o+" tup";case"hh":return o+" rep";case"dd":return o+" jaj";case"MM":return o+" jar";case"yy":return o+" DIS"}}t.defineLocale("tlh",{months:"tera jar wa_tera jar cha_tera jar wej_tera jar loS_tera jar vagh_tera jar jav_tera jar Soch_tera jar chorgh_tera jar Hut_tera jar wamaH_tera jar wamaH wa_tera jar wamaH cha".split("_"),monthsShort:"jar wa_jar cha_jar wej_jar loS_jar vagh_jar jav_jar Soch_jar chorgh_jar Hut_jar wamaH_jar wamaH wa_jar wamaH cha".split("_"),monthsParseExact:!0,weekdays:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysShort:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysMin:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[DaHjaj] LT",nextDay:"[waleS] LT",nextWeek:"LLL",lastDay:"[waHu] LT",lastWeek:"LLL",sameElse:"L"},relativeTime:{future:function(t){var e=t;return-1!==t.indexOf("jaj")?e.slice(0,-3)+"leS":-1!==t.indexOf("jar")?e.slice(0,-3)+"waQ":-1!==t.indexOf("DIS")?e.slice(0,-3)+"nem":e+" pIq"},past:function(t){var e=t;return-1!==t.indexOf("jaj")?e.slice(0,-3)+"Hu":-1!==t.indexOf("jar")?e.slice(0,-3)+"wen":-1!==t.indexOf("DIS")?e.slice(0,-3)+"ben":e+" ret"},s:"puS lup",ss:n,m:"wa tup",mm:n,h:"wa rep",hh:n,d:"wa jaj",dd:n,M:"wa jar",MM:n,y:"wa DIS",yy:n},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},2397:function(t,e,n){!function(t){"use strict";var e={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'nc",4:"'nc",100:"'nc",6:"'nc",9:"'uncu",10:"'uncu",30:"'uncu",60:"'nc",90:"'nc"};t.defineLocale("tr",{months:"Ocak_ubat_Mart_Nisan_Mays_Haziran_Temmuz_Austos_Eyll_Ekim_Kasm_Aralk".split("_"),monthsShort:"Oca_ub_Mar_Nis_May_Haz_Tem_Au_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Sal_aramba_Perembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_ar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_a_Pe_Cu_Ct".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[yarn saat] LT",nextWeek:"[gelecek] dddd [saat] LT",lastDay:"[dn] LT",lastWeek:"[geen] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s nce",s:"birka saniye",ss:"%d saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",M:"bir ay",MM:"%d ay",y:"bir yl",yy:"%d yl"},ordinal:function(t,n){switch(n){case"d":case"D":case"Do":case"DD":return t;default:if(0===t)return t+"'nc";var r=t%10;return t+(e[r]||e[t%100-r]||e[t>=100?100:null])}},week:{dow:1,doy:7}})}(n(381))},8254:function(t,e,n){!function(t){"use strict";function e(t,e,n,r){var i={s:["viensas secunds","'iensas secunds"],ss:[t+" secunds",t+" secunds"],m:["'n mut","'iens mut"],mm:[t+" muts",t+" muts"],h:["'n ora","'iensa ora"],hh:[t+" oras",t+" oras"],d:["'n ziua","'iensa ziua"],dd:[t+" ziuas",t+" ziuas"],M:["'n mes","'iens mes"],MM:[t+" mesen",t+" mesen"],y:["'n ar","'iens ar"],yy:[t+" ars",t+" ars"]};return r||e?i[n][0]:i[n][1]}t.defineLocale("tzl",{months:"Januar_Fevraglh_Mar_Avru_Mai_Gn_Julia_Guscht_Setemvar_Listopts_Noemvar_Zecemvar".split("_"),monthsShort:"Jan_Fev_Mar_Avr_Mai_Gn_Jul_Gus_Set_Lis_Noe_Zec".split("_"),weekdays:"Sladi_Lnei_Maitzi_Mrcuri_Xhadi_Vineri_Sturi".split("_"),weekdaysShort:"Sl_Ln_Mai_Mr_Xh_Vi_St".split("_"),weekdaysMin:"S_L_Ma_M_Xh_Vi_S".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"D. MMMM [dallas] YYYY",LLL:"D. MMMM [dallas] YYYY HH.mm",LLLL:"dddd, [li] D. MMMM [dallas] YYYY HH.mm"},meridiemParse:/d\'o|d\'a/i,isPM:function(t){return"d'o"===t.toLowerCase()},meridiem:function(t,e,n){return t>11?n?"d'o":"D'O":n?"d'a":"D'A"},calendar:{sameDay:"[oxhi ] LT",nextDay:"[dem ] LT",nextWeek:"dddd [] LT",lastDay:"[ieiri ] LT",lastWeek:"[sr el] dddd [lasteu ] LT",sameElse:"L"},relativeTime:{future:"osprei %s",past:"ja%s",s:e,ss:e,m:e,mm:e,h:e,hh:e,d:e,dd:e,M:e,MM:e,y:e,yy:e},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n(381))},699:function(t,e,n){!function(t){"use strict";t.defineLocale("tzm-latn",{months:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",ss:"%d imik",m:"minu",mm:"%d minu",h:"saa",hh:"%d tassain",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}})}(n(381))},1106:function(t,e,n){!function(t){"use strict";t.defineLocale("tzm",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] LT",sameElse:"L"},relativeTime:{future:"   %s",past:" %s",s:"",ss:"%d ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d o",M:"o",MM:"%d ",y:"",yy:"%d "},week:{dow:6,doy:12}})}(n(381))},9288:function(t,e,n){!function(t){"use strict";t.defineLocale("ug-cn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY-M-D-",LLL:"YYYY-M-D- HH:mm",LLLL:"dddd YYYY-M-D- HH:mm"},meridiemParse:/ || || |/,meridiemHour:function(t,e){return 12===t&&(t=0)," "===e||""===e||" "===e?t:" "===e||""===e?t+12:t>=11?t:t+12},meridiem:function(t,e,n){var r=100*t+e;return r<600?" ":r<900?"":r<1130?" ":r<1230?"":r<1800?" ":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"[] dddd [] LT",lastDay:"[] LT",lastWeek:"[] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},dayOfMonthOrdinalParse:/\d{1,2}(-|-|-)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"-";case"w":case"W":return t+"-";default:return t}},preparse:function(t){return t.replace(//g,",")},postformat:function(t){return t.replace(/,/g,"")},week:{dow:1,doy:7}})}(n(381))},7691:function(t,e,n){!function(t){"use strict";function e(t,e,n){return"m"===n?e?"":"":"h"===n?e?"":"":t+" "+(r=+t,i={ss:e?"__":"__",mm:e?"__":"__",hh:e?"__":"__",dd:"__",MM:"__",yy:"__"}[n].split("_"),r%10==1&&r%100!=11?i[0]:r%10>=2&&r%10<=4&&(r%100<10||r%100>=20)?i[1]:i[2]);var r,i}function n(t){return function(){return t+""+(11===this.hours()?"":"")+"] LT"}}t.defineLocale("uk",{months:{format:"___________".split("_"),standalone:"___________".split("_")},monthsShort:"___________".split("_"),weekdays:function(t,e){var n={nominative:"______".split("_"),accusative:"______".split("_"),genitive:"______".split("_")};return!0===t?n.nominative.slice(1,7).concat(n.nominative.slice(0,1)):t?n[/(\[[]\]) ?dddd/.test(e)?"accusative":/\[?(?:|)? ?\] ?dddd/.test(e)?"genitive":"nominative"][t.day()]:n.nominative},weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., HH:mm",LLLL:"dddd, D MMMM YYYY ., HH:mm"},calendar:{sameDay:n("[ "),nextDay:n("[ "),lastDay:n("[ "),nextWeek:n("[] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return n("[] dddd [").call(this);case 1:case 2:case 4:return n("[] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",ss:e,m:e,mm:e,h:"",hh:e,d:"",dd:e,M:"",MM:e,y:"",yy:e},meridiemParse:/|||/,isPM:function(t){return/^(|)$/.test(t)},meridiem:function(t,e,n){return t<4?"":t<12?"":t<17?"":""},dayOfMonthOrdinalParse:/\d{1,2}-(|)/,ordinal:function(t,e){switch(e){case"M":case"d":case"DDD":case"w":case"W":return t+"-";case"D":return t+"-";default:return t}},week:{dow:1,doy:7}})}(n(381))},3795:function(t,e,n){!function(t){"use strict";var e=["","","","","","","","","","","",""],n=["","","","","","",""];t.defineLocale("ur",{months:e,monthsShort:e,weekdays:n,weekdaysShort:n,weekdaysMin:n,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/|/,isPM:function(t){return""===t},meridiem:function(t,e,n){return t<12?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[  ] LT",lastWeek:"[] dddd [] LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(t){return t.replace(//g,",")},postformat:function(t){return t.replace(/,/g,"")},week:{dow:1,doy:4}})}(n(381))},588:function(t,e,n){!function(t){"use strict";t.defineLocale("uz-latn",{months:"Yanvar_Fevral_Mart_Aprel_May_Iyun_Iyul_Avgust_Sentabr_Oktabr_Noyabr_Dekabr".split("_"),monthsShort:"Yan_Fev_Mar_Apr_May_Iyun_Iyul_Avg_Sen_Okt_Noy_Dek".split("_"),weekdays:"Yakshanba_Dushanba_Seshanba_Chorshanba_Payshanba_Juma_Shanba".split("_"),weekdaysShort:"Yak_Dush_Sesh_Chor_Pay_Jum_Shan".split("_"),weekdaysMin:"Ya_Du_Se_Cho_Pa_Ju_Sha".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[Bugun soat] LT [da]",nextDay:"[Ertaga] LT [da]",nextWeek:"dddd [kuni soat] LT [da]",lastDay:"[Kecha soat] LT [da]",lastWeek:"[O'tgan] dddd [kuni soat] LT [da]",sameElse:"L"},relativeTime:{future:"Yaqin %s ichida",past:"Bir necha %s oldin",s:"soniya",ss:"%d soniya",m:"bir daqiqa",mm:"%d daqiqa",h:"bir soat",hh:"%d soat",d:"bir kun",dd:"%d kun",M:"bir oy",MM:"%d oy",y:"bir yil",yy:"%d yil"},week:{dow:1,doy:7}})}(n(381))},6791:function(t,e,n){!function(t){"use strict";t.defineLocale("uz",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[ ] LT []",nextDay:"[] LT []",nextWeek:"dddd [ ] LT []",lastDay:"[ ] LT []",lastWeek:"[] dddd [ ] LT []",sameElse:"L"},relativeTime:{future:" %s ",past:"  %s ",s:"",ss:"%d ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:1,doy:7}})}(n(381))},5666:function(t,e,n){!function(t){"use strict";t.defineLocale("vi",{months:"thng 1_thng 2_thng 3_thng 4_thng 5_thng 6_thng 7_thng 8_thng 9_thng 10_thng 11_thng 12".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),monthsParseExact:!0,weekdays:"ch nht_th hai_th ba_th t_th nm_th su_th by".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysParseExact:!0,meridiemParse:/sa|ch/i,isPM:function(t){return/^ch$/i.test(t)},meridiem:function(t,e,n){return t<12?n?"sa":"SA":n?"ch":"CH"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [nm] YYYY",LLL:"D MMMM [nm] YYYY HH:mm",LLLL:"dddd, D MMMM [nm] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[Hm nay lc] LT",nextDay:"[Ngy mai lc] LT",nextWeek:"dddd [tun ti lc] LT",lastDay:"[Hm qua lc] LT",lastWeek:"dddd [tun ri lc] LT",sameElse:"L"},relativeTime:{future:"%s ti",past:"%s trc",s:"vi giy",ss:"%d giy",m:"mt pht",mm:"%d pht",h:"mt gi",hh:"%d gi",d:"mt ngy",dd:"%d ngy",M:"mt thng",MM:"%d thng",y:"mt nm",yy:"%d nm"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(t){return t},week:{dow:1,doy:4}})}(n(381))},4378:function(t,e,n){!function(t){"use strict";t.defineLocale("x-pseudo",{months:"J~~r_F~br~r_~Mrc~h_p~rl_~M_~J~_Jl~_~gst~_Sp~tmb~r_~ctb~r_~vm~br_~Dc~mbr".split("_"),monthsShort:"J~_~Fb_~Mr_~pr_~M_~J_~Jl_~g_~Sp_~ct_~v_~Dc".split("_"),monthsParseExact:!0,weekdays:"S~d~_M~d~_T~sd~_Wd~sd~_T~hrs~d_~Frd~_S~tr~d".split("_"),weekdaysShort:"S~_~M_~T_~Wd_~Th_~Fr_~St".split("_"),weekdaysMin:"S~_M~_T_~W_T~h_Fr~_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[T~d~ t] LT",nextDay:"[T~m~rr~w t] LT",nextWeek:"dddd [t] LT",lastDay:"[~st~rd~ t] LT",lastWeek:"[L~st] dddd [t] LT",sameElse:"L"},relativeTime:{future:"~ %s",past:"%s ~g",s:" ~fw ~sc~ds",ss:"%d s~c~ds",m:" ~m~t",mm:"%d m~~ts",h:"~ h~r",hh:"%d h~rs",d:" ~d",dd:"%d d~s",M:" ~m~th",MM:"%d m~t~hs",y:" ~r",yy:"%d ~rs"},dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1==~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")},week:{dow:1,doy:4}})}(n(381))},5805:function(t,e,n){!function(t){"use strict";t.defineLocale("yo",{months:"Sr_Erele_rna_Igbe_Ebibi_Okudu_Agmo_Ogun_Owewe_wara_Belu_p".split("_"),monthsShort:"Sr_Erl_rn_Igb_Ebi_Oku_Ag_Ogu_Owe_wa_Bel_p".split("_"),weekdays:"Aiku_Aje_Isgun_jru_jb_ti_Abamta".split("_"),weekdaysShort:"Aik_Aje_Is_jr_jb_ti_Aba".split("_"),weekdaysMin:"Ai_Aj_Is_r_b_t_Ab".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Oni ni] LT",nextDay:"[la ni] LT",nextWeek:"dddd [s ton'b] [ni] LT",lastDay:"[Ana ni] LT",lastWeek:"dddd [s tol] [ni] LT",sameElse:"L"},relativeTime:{future:"ni %s",past:"%s kja",s:"isju aaya die",ss:"aaya %d",m:"isju kan",mm:"isju %d",h:"wakati kan",hh:"wakati %d",d:"j kan",dd:"j %d",M:"osu kan",MM:"osu %d",y:"dun kan",yy:"dun %d"},dayOfMonthOrdinalParse:/j\s\d{1,2}/,ordinal:"j %d",week:{dow:1,doy:4}})}(n(381))},3839:function(t,e,n){!function(t){"use strict";t.defineLocale("zh-cn",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMDAhmm",LLLL:"YYYYMDddddAhmm",l:"YYYY/M/D",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMDdddd HH:mm"},meridiemParse:/|||||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e||""===e||""===e?t:""===e||""===e?t+12:t>=11?t:t+12},meridiem:function(t,e,n){var r=100*t+e;return r<600?"":r<900?"":r<1130?"":r<1230?"":r<1800?"":""},calendar:{sameDay:"[]LT",nextDay:"[]LT",nextWeek:"[]ddddLT",lastDay:"[]LT",lastWeek:"[]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"";case"M":return t+"";case"w":case"W":return t+"";default:return t}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "},week:{dow:1,doy:4}})}(n(381))},5726:function(t,e,n){!function(t){"use strict";t.defineLocale("zh-hk",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMDdddd HH:mm",l:"YYYY/M/D",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMDdddd HH:mm"},meridiemParse:/|||||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e||""===e||""===e?t:""===e?t>=11?t:t+12:""===e||""===e?t+12:void 0},meridiem:function(t,e,n){var r=100*t+e;return r<600?"":r<900?"":r<1130?"":r<1230?"":r<1800?"":""},calendar:{sameDay:"[]LT",nextDay:"[]LT",nextWeek:"[]ddddLT",lastDay:"[]LT",lastWeek:"[]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"";case"M":return t+"";case"w":case"W":return t+"";default:return t}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}})}(n(381))},4152:function(t,e,n){!function(t){"use strict";t.defineLocale("zh-tw",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMD HH:mm",LLLL:"YYYYMDdddd HH:mm",l:"YYYY/M/D",ll:"YYYYMD",lll:"YYYYMD HH:mm",llll:"YYYYMDdddd HH:mm"},meridiemParse:/|||||/,meridiemHour:function(t,e){return 12===t&&(t=0),""===e||""===e||""===e?t:""===e?t>=11?t:t+12:""===e||""===e?t+12:void 0},meridiem:function(t,e,n){var r=100*t+e;return r<600?"":r<900?"":r<1130?"":r<1230?"":r<1800?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd LT",lastDay:"[] LT",lastWeek:"[]dddd LT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(||)/,ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"";case"M":return t+"";case"w":case"W":return t+"";default:return t}},relativeTime:{future:"%s",past:"%s",s:"",ss:"%d ",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}})}(n(381))},6700:(t,e,n)=>{var r={"./af":2786,"./af.js":2786,"./ar":867,"./ar-dz":4130,"./ar-dz.js":4130,"./ar-kw":6135,"./ar-kw.js":6135,"./ar-ly":6440,"./ar-ly.js":6440,"./ar-ma":7702,"./ar-ma.js":7702,"./ar-sa":6040,"./ar-sa.js":6040,"./ar-tn":5671,"./ar-tn.js":5671,"./ar.js":867,"./az":1083,"./az.js":1083,"./be":9808,"./be.js":9808,"./bg":8338,"./bg.js":8338,"./bm":7438,"./bm.js":7438,"./bn":8905,"./bn.js":8905,"./bo":1560,"./bo.js":1560,"./br":1278,"./br.js":1278,"./bs":622,"./bs.js":622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":877,"./cv.js":877,"./cy":7373,"./cy.js":7373,"./da":4780,"./da.js":4780,"./de":9740,"./de-at":217,"./de-at.js":217,"./de-ch":894,"./de-ch.js":894,"./de.js":9740,"./dv":5300,"./dv.js":5300,"./el":837,"./el.js":837,"./en-SG":5383,"./en-SG.js":5383,"./en-au":8348,"./en-au.js":8348,"./en-ca":7925,"./en-ca.js":7925,"./en-gb":2243,"./en-gb.js":2243,"./en-ie":6436,"./en-ie.js":6436,"./en-il":7207,"./en-il.js":7207,"./en-nz":6319,"./en-nz.js":6319,"./eo":2915,"./eo.js":2915,"./es":5655,"./es-do":5251,"./es-do.js":5251,"./es-us":1146,"./es-us.js":1146,"./es.js":5655,"./et":5603,"./et.js":5603,"./eu":7763,"./eu.js":7763,"./fa":6959,"./fa.js":6959,"./fi":1897,"./fi.js":1897,"./fo":4694,"./fo.js":4694,"./fr":4470,"./fr-ca":3049,"./fr-ca.js":3049,"./fr-ch":2330,"./fr-ch.js":2330,"./fr.js":4470,"./fy":5044,"./fy.js":5044,"./ga":9295,"./ga.js":9295,"./gd":2101,"./gd.js":2101,"./gl":8794,"./gl.js":8794,"./gom-latn":3168,"./gom-latn.js":3168,"./gu":5349,"./gu.js":5349,"./he":4206,"./he.js":4206,"./hi":94,"./hi.js":94,"./hr":316,"./hr.js":316,"./hu":2138,"./hu.js":2138,"./hy-am":1423,"./hy-am.js":1423,"./id":9218,"./id.js":9218,"./is":135,"./is.js":135,"./it":626,"./it-ch":150,"./it-ch.js":150,"./it.js":626,"./ja":9183,"./ja.js":9183,"./jv":4286,"./jv.js":4286,"./ka":2105,"./ka.js":2105,"./kk":7772,"./kk.js":7772,"./km":8758,"./km.js":8758,"./kn":9282,"./kn.js":9282,"./ko":3730,"./ko.js":3730,"./ku":1408,"./ku.js":1408,"./ky":3291,"./ky.js":3291,"./lb":6841,"./lb.js":6841,"./lo":5466,"./lo.js":5466,"./lt":7010,"./lt.js":7010,"./lv":7595,"./lv.js":7595,"./me":9861,"./me.js":9861,"./mi":5493,"./mi.js":5493,"./mk":5966,"./mk.js":5966,"./ml":7341,"./ml.js":7341,"./mn":5115,"./mn.js":5115,"./mr":370,"./mr.js":370,"./ms":9847,"./ms-my":1237,"./ms-my.js":1237,"./ms.js":9847,"./mt":2126,"./mt.js":2126,"./my":6165,"./my.js":6165,"./nb":4924,"./nb.js":4924,"./ne":6744,"./ne.js":6744,"./nl":3901,"./nl-be":9814,"./nl-be.js":9814,"./nl.js":3901,"./nn":3877,"./nn.js":3877,"./pa-in":5858,"./pa-in.js":5858,"./pl":4495,"./pl.js":4495,"./pt":9520,"./pt-br":7971,"./pt-br.js":7971,"./pt.js":9520,"./ro":6459,"./ro.js":6459,"./ru":1793,"./ru.js":1793,"./sd":950,"./sd.js":950,"./se":490,"./se.js":490,"./si":124,"./si.js":124,"./sk":4249,"./sk.js":4249,"./sl":4985,"./sl.js":4985,"./sq":1104,"./sq.js":1104,"./sr":9131,"./sr-cyrl":9915,"./sr-cyrl.js":9915,"./sr.js":9131,"./ss":5893,"./ss.js":5893,"./sv":8760,"./sv.js":8760,"./sw":1172,"./sw.js":1172,"./ta":7333,"./ta.js":7333,"./te":3110,"./te.js":3110,"./tet":2095,"./tet.js":2095,"./tg":7321,"./tg.js":7321,"./th":9041,"./th.js":9041,"./tl-ph":5768,"./tl-ph.js":5768,"./tlh":9444,"./tlh.js":9444,"./tr":2397,"./tr.js":2397,"./tzl":8254,"./tzl.js":8254,"./tzm":1106,"./tzm-latn":699,"./tzm-latn.js":699,"./tzm.js":1106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":7691,"./uk.js":7691,"./ur":3795,"./ur.js":3795,"./uz":6791,"./uz-latn":588,"./uz-latn.js":588,"./uz.js":6791,"./vi":5666,"./vi.js":5666,"./x-pseudo":4378,"./x-pseudo.js":4378,"./yo":5805,"./yo.js":5805,"./zh-cn":3839,"./zh-cn.js":3839,"./zh-hk":5726,"./zh-hk.js":5726,"./zh-tw":4152,"./zh-tw.js":4152};function i(t){var e=o(t);return n(e)}function o(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=o,t.exports=i,i.id=6700},381:function(t,e,n){(t=n.nmd(t)).exports=function(){"use strict";var e,r;function i(){return e.apply(null,arguments)}function o(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function a(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function s(t){return void 0===t}function u(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function l(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function c(t,e){var n,r=[];for(n=0;n<t.length;++n)r.push(e(t[n],n));return r}function d(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function h(t,e){for(var n in e)d(e,n)&&(t[n]=e[n]);return d(e,"toString")&&(t.toString=e.toString),d(e,"valueOf")&&(t.valueOf=e.valueOf),t}function f(t,e,n,r){return Le(t,e,n,r,!0).utc()}function p(t){return null==t._pf&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),t._pf}function m(t){if(null==t._isValid){var e=p(t),n=r.call(e.parsedDateParts,(function(t){return null!=t})),i=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&n);if(t._strict&&(i=i&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return i;t._isValid=i}return t._isValid}function _(t){var e=f(NaN);return null!=t?h(p(e),t):p(e).userInvalidated=!0,e}r=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),n=e.length>>>0,r=0;r<n;r++)if(r in e&&t.call(this,e[r],r,e))return!0;return!1};var y=i.momentProperties=[];function v(t,e){var n,r,i;if(s(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),s(e._i)||(t._i=e._i),s(e._f)||(t._f=e._f),s(e._l)||(t._l=e._l),s(e._strict)||(t._strict=e._strict),s(e._tzm)||(t._tzm=e._tzm),s(e._isUTC)||(t._isUTC=e._isUTC),s(e._offset)||(t._offset=e._offset),s(e._pf)||(t._pf=p(e)),s(e._locale)||(t._locale=e._locale),y.length>0)for(n=0;n<y.length;n++)s(i=e[r=y[n]])||(t[r]=i);return t}var g=!1;function x(t){v(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===g&&(g=!0,i.updateOffset(this),g=!1)}function b(t){return t instanceof x||null!=t&&null!=t._isAMomentObject}function w(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function M(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=w(e)),n}function L(t,e,n){var r,i=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),a=0;for(r=0;r<i;r++)(n&&t[r]!==e[r]||!n&&M(t[r])!==M(e[r]))&&a++;return a+o}function k(t){!1===i.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function T(t,e){var n=!0;return h((function(){if(null!=i.deprecationHandler&&i.deprecationHandler(null,t),n){for(var r,o=[],a=0;a<arguments.length;a++){if(r="","object"==typeof arguments[a]){for(var s in r+="\n["+a+"] ",arguments[0])r+=s+": "+arguments[0][s]+", ";r=r.slice(0,-2)}else r=arguments[a];o.push(r)}k(t+"\nArguments: "+Array.prototype.slice.call(o).join("")+"\n"+(new Error).stack),n=!1}return e.apply(this,arguments)}),e)}var S,E={};function A(t,e){null!=i.deprecationHandler&&i.deprecationHandler(t,e),E[t]||(k(e),E[t]=!0)}function D(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function C(t,e){var n,r=h({},t);for(n in e)d(e,n)&&(a(t[n])&&a(e[n])?(r[n]={},h(r[n],t[n]),h(r[n],e[n])):null!=e[n]?r[n]=e[n]:delete r[n]);for(n in t)d(t,n)&&!d(e,n)&&a(t[n])&&(r[n]=h({},r[n]));return r}function P(t){null!=t&&this.set(t)}i.suppressDeprecationWarnings=!1,i.deprecationHandler=null,S=Object.keys?Object.keys:function(t){var e,n=[];for(e in t)d(t,e)&&n.push(e);return n};var I={};function O(t,e){var n=t.toLowerCase();I[n]=I[n+"s"]=I[e]=t}function R(t){return"string"==typeof t?I[t]||I[t.toLowerCase()]:void 0}function Y(t){var e,n,r={};for(n in t)d(t,n)&&(e=R(n))&&(r[e]=t[n]);return r}var F={};function j(t,e){F[t]=e}function z(t,e,n){var r=""+Math.abs(t),i=e-r.length;return(t>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var N=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,B=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,U={},H={};function V(t,e,n,r){var i=r;"string"==typeof r&&(i=function(){return this[r]()}),t&&(H[t]=i),e&&(H[e[0]]=function(){return z(i.apply(this,arguments),e[1],e[2])}),n&&(H[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),t)})}function W(t,e){return t.isValid()?(e=G(e,t.localeData()),U[e]=U[e]||function(t){var e,n,r,i=t.match(N);for(e=0,n=i.length;e<n;e++)H[i[e]]?i[e]=H[i[e]]:i[e]=(r=i[e]).match(/\[[\s\S]/)?r.replace(/^\[|\]$/g,""):r.replace(/\\/g,"");return function(e){var r,o="";for(r=0;r<n;r++)o+=D(i[r])?i[r].call(e,t):i[r];return o}}(e),U[e](t)):t.localeData().invalidDate()}function G(t,e){var n=5;function r(t){return e.longDateFormat(t)||t}for(B.lastIndex=0;n>=0&&B.test(t);)t=t.replace(B,r),B.lastIndex=0,n-=1;return t}var q=/\d/,X=/\d\d/,Z=/\d{3}/,K=/\d{4}/,J=/[+-]?\d{6}/,$=/\d\d?/,Q=/\d\d\d\d?/,tt=/\d\d\d\d\d\d?/,et=/\d{1,3}/,nt=/\d{1,4}/,rt=/[+-]?\d{1,6}/,it=/\d+/,ot=/[+-]?\d+/,at=/Z|[+-]\d\d:?\d\d/gi,st=/Z|[+-]\d\d(?::?\d\d)?/gi,ut=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,lt={};function ct(t,e,n){lt[t]=D(e)?e:function(t,r){return t&&n?n:e}}function dt(t,e){return d(lt,t)?lt[t](e._strict,e._locale):new RegExp(ht(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(t,e,n,r,i){return e||n||r||i}))))}function ht(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var ft={};function pt(t,e){var n,r=e;for("string"==typeof t&&(t=[t]),u(e)&&(r=function(t,n){n[e]=M(t)}),n=0;n<t.length;n++)ft[t[n]]=r}function mt(t,e){pt(t,(function(t,n,r,i){r._w=r._w||{},e(t,r._w,r,i)}))}function _t(t,e,n){null!=e&&d(ft,t)&&ft[t](e,n._a,n,t)}function yt(t){return vt(t)?366:365}function vt(t){return t%4==0&&t%100!=0||t%400==0}V("Y",0,0,(function(){var t=this.year();return t<=9999?""+t:"+"+t})),V(0,["YY",2],0,(function(){return this.year()%100})),V(0,["YYYY",4],0,"year"),V(0,["YYYYY",5],0,"year"),V(0,["YYYYYY",6,!0],0,"year"),O("year","y"),j("year",1),ct("Y",ot),ct("YY",$,X),ct("YYYY",nt,K),ct("YYYYY",rt,J),ct("YYYYYY",rt,J),pt(["YYYYY","YYYYYY"],0),pt("YYYY",(function(t,e){e[0]=2===t.length?i.parseTwoDigitYear(t):M(t)})),pt("YY",(function(t,e){e[0]=i.parseTwoDigitYear(t)})),pt("Y",(function(t,e){e[0]=parseInt(t,10)})),i.parseTwoDigitYear=function(t){return M(t)+(M(t)>68?1900:2e3)};var gt,xt=bt("FullYear",!0);function bt(t,e){return function(n){return null!=n?(Mt(this,t,n),i.updateOffset(this,e),this):wt(this,t)}}function wt(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function Mt(t,e,n){t.isValid()&&!isNaN(n)&&("FullYear"===e&&vt(t.year())&&1===t.month()&&29===t.date()?t._d["set"+(t._isUTC?"UTC":"")+e](n,t.month(),Lt(n,t.month())):t._d["set"+(t._isUTC?"UTC":"")+e](n))}function Lt(t,e){if(isNaN(t)||isNaN(e))return NaN;var n,r=(e%(n=12)+n)%n;return t+=(e-r)/12,1===r?vt(t)?29:28:31-r%7%2}gt=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},V("M",["MM",2],"Mo",(function(){return this.month()+1})),V("MMM",0,0,(function(t){return this.localeData().monthsShort(this,t)})),V("MMMM",0,0,(function(t){return this.localeData().months(this,t)})),O("month","M"),j("month",8),ct("M",$),ct("MM",$,X),ct("MMM",(function(t,e){return e.monthsShortRegex(t)})),ct("MMMM",(function(t,e){return e.monthsRegex(t)})),pt(["M","MM"],(function(t,e){e[1]=M(t)-1})),pt(["MMM","MMMM"],(function(t,e,n,r){var i=n._locale.monthsParse(t,r,n._strict);null!=i?e[1]=i:p(n).invalidMonth=t}));var kt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Tt="January_February_March_April_May_June_July_August_September_October_November_December".split("_");var St="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function Et(t,e,n){var r,i,o,a=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)o=f([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===e?-1!==(i=gt.call(this._shortMonthsParse,a))?i:null:-1!==(i=gt.call(this._longMonthsParse,a))?i:null:"MMM"===e?-1!==(i=gt.call(this._shortMonthsParse,a))||-1!==(i=gt.call(this._longMonthsParse,a))?i:null:-1!==(i=gt.call(this._longMonthsParse,a))||-1!==(i=gt.call(this._shortMonthsParse,a))?i:null}function At(t,e){var n;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=M(e);else if(!u(e=t.localeData().monthsParse(e)))return t;return n=Math.min(t.date(),Lt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function Dt(t){return null!=t?(At(this,t),i.updateOffset(this,!0),this):wt(this,"Month")}var Ct=ut;var Pt=ut;function It(){function t(t,e){return e.length-t.length}var e,n,r=[],i=[],o=[];for(e=0;e<12;e++)n=f([2e3,e]),r.push(this.monthsShort(n,"")),i.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(r.sort(t),i.sort(t),o.sort(t),e=0;e<12;e++)r[e]=ht(r[e]),i[e]=ht(i[e]);for(e=0;e<24;e++)o[e]=ht(o[e]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function Ot(t,e,n,r,i,o,a){var s;return t<100&&t>=0?(s=new Date(t+400,e,n,r,i,o,a),isFinite(s.getFullYear())&&s.setFullYear(t)):s=new Date(t,e,n,r,i,o,a),s}function Rt(t){var e;if(t<100&&t>=0){var n=Array.prototype.slice.call(arguments);n[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)}else e=new Date(Date.UTC.apply(null,arguments));return e}function Yt(t,e,n){var r=7+e-n;return-(7+Rt(t,0,r).getUTCDay()-e)%7+r-1}function Ft(t,e,n,r,i){var o,a,s=1+7*(e-1)+(7+n-r)%7+Yt(t,r,i);return s<=0?a=yt(o=t-1)+s:s>yt(t)?(o=t+1,a=s-yt(t)):(o=t,a=s),{year:o,dayOfYear:a}}function jt(t,e,n){var r,i,o=Yt(t.year(),e,n),a=Math.floor((t.dayOfYear()-o-1)/7)+1;return a<1?r=a+zt(i=t.year()-1,e,n):a>zt(t.year(),e,n)?(r=a-zt(t.year(),e,n),i=t.year()+1):(i=t.year(),r=a),{week:r,year:i}}function zt(t,e,n){var r=Yt(t,e,n),i=Yt(t+1,e,n);return(yt(t)-r+i)/7}V("w",["ww",2],"wo","week"),V("W",["WW",2],"Wo","isoWeek"),O("week","w"),O("isoWeek","W"),j("week",5),j("isoWeek",5),ct("w",$),ct("ww",$,X),ct("W",$),ct("WW",$,X),mt(["w","ww","W","WW"],(function(t,e,n,r){e[r.substr(0,1)]=M(t)}));function Nt(t,e){return t.slice(e,7).concat(t.slice(0,e))}V("d",0,"do","day"),V("dd",0,0,(function(t){return this.localeData().weekdaysMin(this,t)})),V("ddd",0,0,(function(t){return this.localeData().weekdaysShort(this,t)})),V("dddd",0,0,(function(t){return this.localeData().weekdays(this,t)})),V("e",0,0,"weekday"),V("E",0,0,"isoWeekday"),O("day","d"),O("weekday","e"),O("isoWeekday","E"),j("day",11),j("weekday",11),j("isoWeekday",11),ct("d",$),ct("e",$),ct("E",$),ct("dd",(function(t,e){return e.weekdaysMinRegex(t)})),ct("ddd",(function(t,e){return e.weekdaysShortRegex(t)})),ct("dddd",(function(t,e){return e.weekdaysRegex(t)})),mt(["dd","ddd","dddd"],(function(t,e,n,r){var i=n._locale.weekdaysParse(t,r,n._strict);null!=i?e.d=i:p(n).invalidWeekday=t})),mt(["d","e","E"],(function(t,e,n,r){e[r]=M(t)}));var Bt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");var Ut="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");var Ht="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function Vt(t,e,n){var r,i,o,a=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)o=f([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===e?-1!==(i=gt.call(this._weekdaysParse,a))?i:null:"ddd"===e?-1!==(i=gt.call(this._shortWeekdaysParse,a))?i:null:-1!==(i=gt.call(this._minWeekdaysParse,a))?i:null:"dddd"===e?-1!==(i=gt.call(this._weekdaysParse,a))||-1!==(i=gt.call(this._shortWeekdaysParse,a))||-1!==(i=gt.call(this._minWeekdaysParse,a))?i:null:"ddd"===e?-1!==(i=gt.call(this._shortWeekdaysParse,a))||-1!==(i=gt.call(this._weekdaysParse,a))||-1!==(i=gt.call(this._minWeekdaysParse,a))?i:null:-1!==(i=gt.call(this._minWeekdaysParse,a))||-1!==(i=gt.call(this._weekdaysParse,a))||-1!==(i=gt.call(this._shortWeekdaysParse,a))?i:null}var Wt=ut;var Gt=ut;var qt=ut;function Xt(){function t(t,e){return e.length-t.length}var e,n,r,i,o,a=[],s=[],u=[],l=[];for(e=0;e<7;e++)n=f([2e3,1]).day(e),r=this.weekdaysMin(n,""),i=this.weekdaysShort(n,""),o=this.weekdays(n,""),a.push(r),s.push(i),u.push(o),l.push(r),l.push(i),l.push(o);for(a.sort(t),s.sort(t),u.sort(t),l.sort(t),e=0;e<7;e++)s[e]=ht(s[e]),u[e]=ht(u[e]),l[e]=ht(l[e]);this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Zt(){return this.hours()%12||12}function Kt(t,e){V(t,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)}))}function Jt(t,e){return e._meridiemParse}V("H",["HH",2],0,"hour"),V("h",["hh",2],0,Zt),V("k",["kk",2],0,(function(){return this.hours()||24})),V("hmm",0,0,(function(){return""+Zt.apply(this)+z(this.minutes(),2)})),V("hmmss",0,0,(function(){return""+Zt.apply(this)+z(this.minutes(),2)+z(this.seconds(),2)})),V("Hmm",0,0,(function(){return""+this.hours()+z(this.minutes(),2)})),V("Hmmss",0,0,(function(){return""+this.hours()+z(this.minutes(),2)+z(this.seconds(),2)})),Kt("a",!0),Kt("A",!1),O("hour","h"),j("hour",13),ct("a",Jt),ct("A",Jt),ct("H",$),ct("h",$),ct("k",$),ct("HH",$,X),ct("hh",$,X),ct("kk",$,X),ct("hmm",Q),ct("hmmss",tt),ct("Hmm",Q),ct("Hmmss",tt),pt(["H","HH"],3),pt(["k","kk"],(function(t,e,n){var r=M(t);e[3]=24===r?0:r})),pt(["a","A"],(function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t})),pt(["h","hh"],(function(t,e,n){e[3]=M(t),p(n).bigHour=!0})),pt("hmm",(function(t,e,n){var r=t.length-2;e[3]=M(t.substr(0,r)),e[4]=M(t.substr(r)),p(n).bigHour=!0})),pt("hmmss",(function(t,e,n){var r=t.length-4,i=t.length-2;e[3]=M(t.substr(0,r)),e[4]=M(t.substr(r,2)),e[5]=M(t.substr(i)),p(n).bigHour=!0})),pt("Hmm",(function(t,e,n){var r=t.length-2;e[3]=M(t.substr(0,r)),e[4]=M(t.substr(r))})),pt("Hmmss",(function(t,e,n){var r=t.length-4,i=t.length-2;e[3]=M(t.substr(0,r)),e[4]=M(t.substr(r,2)),e[5]=M(t.substr(i))}));var $t,Qt=bt("Hours",!0),te={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Tt,monthsShort:St,week:{dow:0,doy:6},weekdays:Bt,weekdaysMin:Ht,weekdaysShort:Ut,meridiemParse:/[ap]\.?m?\.?/i},ee={},ne={};function re(t){return t?t.toLowerCase().replace("_","-"):t}function ie(e){var r=null;if(!ee[e]&&t&&t.exports)try{r=$t._abbr,n(6700)("./"+e),oe(r)}catch(t){}return ee[e]}function oe(t,e){var n;return t&&((n=s(e)?se(t):ae(t,e))?$t=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),$t._abbr}function ae(t,e){if(null!==e){var n,r=te;if(e.abbr=t,null!=ee[t])A("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=ee[t]._config;else if(null!=e.parentLocale)if(null!=ee[e.parentLocale])r=ee[e.parentLocale]._config;else{if(null==(n=ie(e.parentLocale)))return ne[e.parentLocale]||(ne[e.parentLocale]=[]),ne[e.parentLocale].push({name:t,config:e}),null;r=n._config}return ee[t]=new P(C(r,e)),ne[t]&&ne[t].forEach((function(t){ae(t.name,t.config)})),oe(t),ee[t]}return delete ee[t],null}function se(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return $t;if(!o(t)){if(e=ie(t))return e;t=[t]}return function(t){for(var e,n,r,i,o=0;o<t.length;){for(e=(i=re(t[o]).split("-")).length,n=(n=re(t[o+1]))?n.split("-"):null;e>0;){if(r=ie(i.slice(0,e).join("-")))return r;if(n&&n.length>=e&&L(i,n,!0)>=e-1)break;e--}o++}return $t}(t)}function ue(t){var e,n=t._a;return n&&-2===p(t).overflow&&(e=n[1]<0||n[1]>11?1:n[2]<1||n[2]>Lt(n[0],n[1])?2:n[3]<0||n[3]>24||24===n[3]&&(0!==n[4]||0!==n[5]||0!==n[6])?3:n[4]<0||n[4]>59?4:n[5]<0||n[5]>59?5:n[6]<0||n[6]>999?6:-1,p(t)._overflowDayOfYear&&(e<0||e>2)&&(e=2),p(t)._overflowWeeks&&-1===e&&(e=7),p(t)._overflowWeekday&&-1===e&&(e=8),p(t).overflow=e),t}function le(t,e,n){return null!=t?t:null!=e?e:n}function ce(t){var e,n,r,o,a,s=[];if(!t._d){for(r=function(t){var e=new Date(i.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}(t),t._w&&null==t._a[2]&&null==t._a[1]&&function(t){var e,n,r,i,o,a,s,u;if(null!=(e=t._w).GG||null!=e.W||null!=e.E)o=1,a=4,n=le(e.GG,t._a[0],jt(ke(),1,4).year),r=le(e.W,1),((i=le(e.E,1))<1||i>7)&&(u=!0);else{o=t._locale._week.dow,a=t._locale._week.doy;var l=jt(ke(),o,a);n=le(e.gg,t._a[0],l.year),r=le(e.w,l.week),null!=e.d?((i=e.d)<0||i>6)&&(u=!0):null!=e.e?(i=e.e+o,(e.e<0||e.e>6)&&(u=!0)):i=o}r<1||r>zt(n,o,a)?p(t)._overflowWeeks=!0:null!=u?p(t)._overflowWeekday=!0:(s=Ft(n,r,i,o,a),t._a[0]=s.year,t._dayOfYear=s.dayOfYear)}(t),null!=t._dayOfYear&&(a=le(t._a[0],r[0]),(t._dayOfYear>yt(a)||0===t._dayOfYear)&&(p(t)._overflowDayOfYear=!0),n=Rt(a,0,t._dayOfYear),t._a[1]=n.getUTCMonth(),t._a[2]=n.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=s[e]=r[e];for(;e<7;e++)t._a[e]=s[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[3]&&0===t._a[4]&&0===t._a[5]&&0===t._a[6]&&(t._nextDay=!0,t._a[3]=0),t._d=(t._useUTC?Rt:Ot).apply(null,s),o=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[3]=24),t._w&&void 0!==t._w.d&&t._w.d!==o&&(p(t).weekdayMismatch=!0)}}var de=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,he=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,fe=/Z|[+-]\d\d(?::?\d\d)?/,pe=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],me=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],_e=/^\/?Date\((\-?\d+)/i;function ye(t){var e,n,r,i,o,a,s=t._i,u=de.exec(s)||he.exec(s);if(u){for(p(t).iso=!0,e=0,n=pe.length;e<n;e++)if(pe[e][1].exec(u[1])){i=pe[e][0],r=!1!==pe[e][2];break}if(null==i)return void(t._isValid=!1);if(u[3]){for(e=0,n=me.length;e<n;e++)if(me[e][1].exec(u[3])){o=(u[2]||" ")+me[e][0];break}if(null==o)return void(t._isValid=!1)}if(!r&&null!=o)return void(t._isValid=!1);if(u[4]){if(!fe.exec(u[4]))return void(t._isValid=!1);a="Z"}t._f=i+(o||"")+(a||""),we(t)}else t._isValid=!1}var ve=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function ge(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}var xe={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function be(t){var e,n,r,i,o,a,s,u=ve.exec(t._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(u){var l=(e=u[4],n=u[3],r=u[2],i=u[5],o=u[6],a=u[7],s=[ge(e),St.indexOf(n),parseInt(r,10),parseInt(i,10),parseInt(o,10)],a&&s.push(parseInt(a,10)),s);if(!function(t,e,n){return!t||Ut.indexOf(t)===new Date(e[0],e[1],e[2]).getDay()||(p(n).weekdayMismatch=!0,n._isValid=!1,!1)}(u[1],l,t))return;t._a=l,t._tzm=function(t,e,n){if(t)return xe[t];if(e)return 0;var r=parseInt(n,10),i=r%100;return(r-i)/100*60+i}(u[8],u[9],u[10]),t._d=Rt.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),p(t).rfc2822=!0}else t._isValid=!1}function we(t){if(t._f!==i.ISO_8601)if(t._f!==i.RFC_2822){t._a=[],p(t).empty=!0;var e,n,r,o,a,s=""+t._i,u=s.length,l=0;for(r=G(t._f,t._locale).match(N)||[],e=0;e<r.length;e++)o=r[e],(n=(s.match(dt(o,t))||[])[0])&&((a=s.substr(0,s.indexOf(n))).length>0&&p(t).unusedInput.push(a),s=s.slice(s.indexOf(n)+n.length),l+=n.length),H[o]?(n?p(t).empty=!1:p(t).unusedTokens.push(o),_t(o,n,t)):t._strict&&!n&&p(t).unusedTokens.push(o);p(t).charsLeftOver=u-l,s.length>0&&p(t).unusedInput.push(s),t._a[3]<=12&&!0===p(t).bigHour&&t._a[3]>0&&(p(t).bigHour=void 0),p(t).parsedDateParts=t._a.slice(0),p(t).meridiem=t._meridiem,t._a[3]=function(t,e,n){var r;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?((r=t.isPM(n))&&e<12&&(e+=12),r||12!==e||(e=0),e):e}(t._locale,t._a[3],t._meridiem),ce(t),ue(t)}else be(t);else ye(t)}function Me(t){var e=t._i,n=t._f;return t._locale=t._locale||se(t._l),null===e||void 0===n&&""===e?_({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),b(e)?new x(ue(e)):(l(e)?t._d=e:o(n)?function(t){var e,n,r,i,o;if(0===t._f.length)return p(t).invalidFormat=!0,void(t._d=new Date(NaN));for(i=0;i<t._f.length;i++)o=0,e=v({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[i],we(e),m(e)&&(o+=p(e).charsLeftOver,o+=10*p(e).unusedTokens.length,p(e).score=o,(null==r||o<r)&&(r=o,n=e));h(t,n||e)}(t):n?we(t):function(t){var e=t._i;s(e)?t._d=new Date(i.now()):l(e)?t._d=new Date(e.valueOf()):"string"==typeof e?function(t){var e=_e.exec(t._i);null===e?(ye(t),!1===t._isValid&&(delete t._isValid,be(t),!1===t._isValid&&(delete t._isValid,i.createFromInputFallback(t)))):t._d=new Date(+e[1])}(t):o(e)?(t._a=c(e.slice(0),(function(t){return parseInt(t,10)})),ce(t)):a(e)?function(t){if(!t._d){var e=Y(t._i);t._a=c([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],(function(t){return t&&parseInt(t,10)})),ce(t)}}(t):u(e)?t._d=new Date(e):i.createFromInputFallback(t)}(t),m(t)||(t._d=null),t))}function Le(t,e,n,r,i){var s,u={};return!0!==n&&!1!==n||(r=n,n=void 0),(a(t)&&function(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(t.hasOwnProperty(e))return!1;return!0}(t)||o(t)&&0===t.length)&&(t=void 0),u._isAMomentObject=!0,u._useUTC=u._isUTC=i,u._l=n,u._i=t,u._f=e,u._strict=r,(s=new x(ue(Me(u))))._nextDay&&(s.add(1,"d"),s._nextDay=void 0),s}function ke(t,e,n,r){return Le(t,e,n,r,!1)}i.createFromInputFallback=T("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))})),i.ISO_8601=function(){},i.RFC_2822=function(){};var Te=T("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=ke.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:_()})),Se=T("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=ke.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:_()}));function Ee(t,e){var n,r;if(1===e.length&&o(e[0])&&(e=e[0]),!e.length)return ke();for(n=e[0],r=1;r<e.length;++r)e[r].isValid()&&!e[r][t](n)||(n=e[r]);return n}var Ae=["year","quarter","month","week","day","hour","minute","second","millisecond"];function De(t){var e=Y(t),n=e.year||0,r=e.quarter||0,i=e.month||0,o=e.week||e.isoWeek||0,a=e.day||0,s=e.hour||0,u=e.minute||0,l=e.second||0,c=e.millisecond||0;this._isValid=function(t){for(var e in t)if(-1===gt.call(Ae,e)||null!=t[e]&&isNaN(t[e]))return!1;for(var n=!1,r=0;r<Ae.length;++r)if(t[Ae[r]]){if(n)return!1;parseFloat(t[Ae[r]])!==M(t[Ae[r]])&&(n=!0)}return!0}(e),this._milliseconds=+c+1e3*l+6e4*u+1e3*s*60*60,this._days=+a+7*o,this._months=+i+3*r+12*n,this._data={},this._locale=se(),this._bubble()}function Ce(t){return t instanceof De}function Pe(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function Ie(t,e){V(t,0,0,(function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+z(~~(t/60),2)+e+z(~~t%60,2)}))}Ie("Z",":"),Ie("ZZ",""),ct("Z",st),ct("ZZ",st),pt(["Z","ZZ"],(function(t,e,n){n._useUTC=!0,n._tzm=Re(st,t)}));var Oe=/([\+\-]|\d\d)/gi;function Re(t,e){var n=(e||"").match(t);if(null===n)return null;var r=((n[n.length-1]||[])+"").match(Oe)||["-",0,0],i=60*r[1]+M(r[2]);return 0===i?0:"+"===r[0]?i:-i}function Ye(t,e){var n,r;return e._isUTC?(n=e.clone(),r=(b(t)||l(t)?t.valueOf():ke(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),i.updateOffset(n,!1),n):ke(t).local()}function Fe(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function je(){return!!this.isValid()&&this._isUTC&&0===this._offset}i.updateOffset=function(){};var ze=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Ne=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Be(t,e){var n,r,i,o,a,s,l=t,c=null;return Ce(t)?l={ms:t._milliseconds,d:t._days,M:t._months}:u(t)?(l={},e?l[e]=t:l.milliseconds=t):(c=ze.exec(t))?(n="-"===c[1]?-1:1,l={y:0,d:M(c[2])*n,h:M(c[3])*n,m:M(c[4])*n,s:M(c[5])*n,ms:M(Pe(1e3*c[6]))*n}):(c=Ne.exec(t))?(n="-"===c[1]?-1:1,l={y:Ue(c[2],n),M:Ue(c[3],n),w:Ue(c[4],n),d:Ue(c[5],n),h:Ue(c[6],n),m:Ue(c[7],n),s:Ue(c[8],n)}):null==l?l={}:"object"==typeof l&&("from"in l||"to"in l)&&(o=ke(l.from),a=ke(l.to),i=o.isValid()&&a.isValid()?(a=Ye(a,o),o.isBefore(a)?s=He(o,a):((s=He(a,o)).milliseconds=-s.milliseconds,s.months=-s.months),s):{milliseconds:0,months:0},(l={}).ms=i.milliseconds,l.M=i.months),r=new De(l),Ce(t)&&d(t,"_locale")&&(r._locale=t._locale),r}function Ue(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function He(t,e){var n={};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Ve(t,e){return function(n,r){var i;return null===r||isNaN(+r)||(A(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),We(this,Be(n="string"==typeof n?+n:n,r),t),this}}function We(t,e,n,r){var o=e._milliseconds,a=Pe(e._days),s=Pe(e._months);t.isValid()&&(r=null==r||r,s&&At(t,wt(t,"Month")+s*n),a&&Mt(t,"Date",wt(t,"Date")+a*n),o&&t._d.setTime(t._d.valueOf()+o*n),r&&i.updateOffset(t,a||s))}Be.fn=De.prototype,Be.invalid=function(){return Be(NaN)};var Ge=Ve(1,"add"),qe=Ve(-1,"subtract");function Xe(t,e){var n=12*(e.year()-t.year())+(e.month()-t.month()),r=t.clone().add(n,"months");return-(n+(e-r<0?(e-r)/(r-t.clone().add(n-1,"months")):(e-r)/(t.clone().add(n+1,"months")-r)))||0}function Ze(t){var e;return void 0===t?this._locale._abbr:(null!=(e=se(t))&&(this._locale=e),this)}i.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",i.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Ke=T("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(t){return void 0===t?this.localeData():this.locale(t)}));function Je(){return this._locale}var $e=1e3,Qe=6e4,tn=36e5,en=126227808e5;function nn(t,e){return(t%e+e)%e}function rn(t,e,n){return t<100&&t>=0?new Date(t+400,e,n)-en:new Date(t,e,n).valueOf()}function on(t,e,n){return t<100&&t>=0?Date.UTC(t+400,e,n)-en:Date.UTC(t,e,n)}function an(t,e){V(0,[t,t.length],0,e)}function sn(t,e,n,r,i){var o;return null==t?jt(this,r,i).year:(e>(o=zt(t,r,i))&&(e=o),un.call(this,t,e,n,r,i))}function un(t,e,n,r,i){var o=Ft(t,e,n,r,i),a=Rt(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}V(0,["gg",2],0,(function(){return this.weekYear()%100})),V(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),an("gggg","weekYear"),an("ggggg","weekYear"),an("GGGG","isoWeekYear"),an("GGGGG","isoWeekYear"),O("weekYear","gg"),O("isoWeekYear","GG"),j("weekYear",1),j("isoWeekYear",1),ct("G",ot),ct("g",ot),ct("GG",$,X),ct("gg",$,X),ct("GGGG",nt,K),ct("gggg",nt,K),ct("GGGGG",rt,J),ct("ggggg",rt,J),mt(["gggg","ggggg","GGGG","GGGGG"],(function(t,e,n,r){e[r.substr(0,2)]=M(t)})),mt(["gg","GG"],(function(t,e,n,r){e[r]=i.parseTwoDigitYear(t)})),V("Q",0,"Qo","quarter"),O("quarter","Q"),j("quarter",7),ct("Q",q),pt("Q",(function(t,e){e[1]=3*(M(t)-1)})),V("D",["DD",2],"Do","date"),O("date","D"),j("date",9),ct("D",$),ct("DD",$,X),ct("Do",(function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient})),pt(["D","DD"],2),pt("Do",(function(t,e){e[2]=M(t.match($)[0])}));var ln=bt("Date",!0);V("DDD",["DDDD",3],"DDDo","dayOfYear"),O("dayOfYear","DDD"),j("dayOfYear",4),ct("DDD",et),ct("DDDD",Z),pt(["DDD","DDDD"],(function(t,e,n){n._dayOfYear=M(t)})),V("m",["mm",2],0,"minute"),O("minute","m"),j("minute",14),ct("m",$),ct("mm",$,X),pt(["m","mm"],4);var cn=bt("Minutes",!1);V("s",["ss",2],0,"second"),O("second","s"),j("second",15),ct("s",$),ct("ss",$,X),pt(["s","ss"],5);var dn,hn=bt("Seconds",!1);for(V("S",0,0,(function(){return~~(this.millisecond()/100)})),V(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),V(0,["SSS",3],0,"millisecond"),V(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),V(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),V(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),V(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),V(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),V(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),O("millisecond","ms"),j("millisecond",16),ct("S",et,q),ct("SS",et,X),ct("SSS",et,Z),dn="SSSS";dn.length<=9;dn+="S")ct(dn,it);function fn(t,e){e[6]=M(1e3*("0."+t))}for(dn="S";dn.length<=9;dn+="S")pt(dn,fn);var pn=bt("Milliseconds",!1);V("z",0,0,"zoneAbbr"),V("zz",0,0,"zoneName");var mn=x.prototype;function _n(t){return t}mn.add=Ge,mn.calendar=function(t,e){var n=t||ke(),r=Ye(n,this).startOf("day"),o=i.calendarFormat(this,r)||"sameElse",a=e&&(D(e[o])?e[o].call(this,n):e[o]);return this.format(a||this.localeData().calendar(o,this,ke(n)))},mn.clone=function(){return new x(this)},mn.diff=function(t,e,n){var r,i,o;if(!this.isValid())return NaN;if(!(r=Ye(t,this)).isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),e=R(e)){case"year":o=Xe(this,r)/12;break;case"month":o=Xe(this,r);break;case"quarter":o=Xe(this,r)/3;break;case"second":o=(this-r)/1e3;break;case"minute":o=(this-r)/6e4;break;case"hour":o=(this-r)/36e5;break;case"day":o=(this-r-i)/864e5;break;case"week":o=(this-r-i)/6048e5;break;default:o=this-r}return n?o:w(o)},mn.endOf=function(t){var e;if(void 0===(t=R(t))||"millisecond"===t||!this.isValid())return this;var n=this._isUTC?on:rn;switch(t){case"year":e=n(this.year()+1,0,1)-1;break;case"quarter":e=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=n(this.year(),this.month()+1,1)-1;break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=tn-nn(e+(this._isUTC?0:this.utcOffset()*Qe),tn)-1;break;case"minute":e=this._d.valueOf(),e+=Qe-nn(e,Qe)-1;break;case"second":e=this._d.valueOf(),e+=$e-nn(e,$e)-1}return this._d.setTime(e),i.updateOffset(this,!0),this},mn.format=function(t){t||(t=this.isUtc()?i.defaultFormatUtc:i.defaultFormat);var e=W(this,t);return this.localeData().postformat(e)},mn.from=function(t,e){return this.isValid()&&(b(t)&&t.isValid()||ke(t).isValid())?Be({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},mn.fromNow=function(t){return this.from(ke(),t)},mn.to=function(t,e){return this.isValid()&&(b(t)&&t.isValid()||ke(t).isValid())?Be({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},mn.toNow=function(t){return this.to(ke(),t)},mn.get=function(t){return D(this[t=R(t)])?this[t]():this},mn.invalidAt=function(){return p(this).overflow},mn.isAfter=function(t,e){var n=b(t)?t:ke(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=R(e)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf())},mn.isBefore=function(t,e){var n=b(t)?t:ke(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=R(e)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf())},mn.isBetween=function(t,e,n,r){var i=b(t)?t:ke(t),o=b(e)?e:ke(e);return!!(this.isValid()&&i.isValid()&&o.isValid())&&("("===(r=r||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===r[1]?this.isBefore(o,n):!this.isAfter(o,n))},mn.isSame=function(t,e){var n,r=b(t)?t:ke(t);return!(!this.isValid()||!r.isValid())&&("millisecond"===(e=R(e)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf()))},mn.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},mn.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},mn.isValid=function(){return m(this)},mn.lang=Ke,mn.locale=Ze,mn.localeData=Je,mn.max=Se,mn.min=Te,mn.parsingFlags=function(){return h({},p(this))},mn.set=function(t,e){if("object"==typeof t)for(var n=function(t){var e=[];for(var n in t)e.push({unit:n,priority:F[n]});return e.sort((function(t,e){return t.priority-e.priority})),e}(t=Y(t)),r=0;r<n.length;r++)this[n[r].unit](t[n[r].unit]);else if(D(this[t=R(t)]))return this[t](e);return this},mn.startOf=function(t){var e;if(void 0===(t=R(t))||"millisecond"===t||!this.isValid())return this;var n=this._isUTC?on:rn;switch(t){case"year":e=n(this.year(),0,1);break;case"quarter":e=n(this.year(),this.month()-this.month()%3,1);break;case"month":e=n(this.year(),this.month(),1);break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=n(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=nn(e+(this._isUTC?0:this.utcOffset()*Qe),tn);break;case"minute":e=this._d.valueOf(),e-=nn(e,Qe);break;case"second":e=this._d.valueOf(),e-=nn(e,$e)}return this._d.setTime(e),i.updateOffset(this,!0),this},mn.subtract=qe,mn.toArray=function(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]},mn.toObject=function(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}},mn.toDate=function(){return new Date(this.valueOf())},mn.toISOString=function(t){if(!this.isValid())return null;var e=!0!==t,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?W(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):D(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",W(n,"Z")):W(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},mn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="";this.isLocal()||(t=0===this.utcOffset()?"moment.utc":"moment.parseZone",e="Z");var n="["+t+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i=e+'[")]';return this.format(n+r+"-MM-DD[T]HH:mm:ss.SSS"+i)},mn.toJSON=function(){return this.isValid()?this.toISOString():null},mn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},mn.unix=function(){return Math.floor(this.valueOf()/1e3)},mn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},mn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},mn.year=xt,mn.isLeapYear=function(){return vt(this.year())},mn.weekYear=function(t){return sn.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},mn.isoWeekYear=function(t){return sn.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},mn.quarter=mn.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},mn.month=Dt,mn.daysInMonth=function(){return Lt(this.year(),this.month())},mn.week=mn.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},mn.isoWeek=mn.isoWeeks=function(t){var e=jt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},mn.weeksInYear=function(){var t=this.localeData()._week;return zt(this.year(),t.dow,t.doy)},mn.isoWeeksInYear=function(){return zt(this.year(),1,4)},mn.date=ln,mn.day=mn.days=function(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=function(t,e){return"string"!=typeof t?t:isNaN(t)?"number"==typeof(t=e.weekdaysParse(t))?t:null:parseInt(t,10)}(t,this.localeData()),this.add(t-e,"d")):e},mn.weekday=function(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},mn.isoWeekday=function(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=function(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7},mn.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},mn.hour=mn.hours=Qt,mn.minute=mn.minutes=cn,mn.second=mn.seconds=hn,mn.millisecond=mn.milliseconds=pn,mn.utcOffset=function(t,e,n){var r,o=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(null===(t=Re(st,t)))return this}else Math.abs(t)<16&&!n&&(t*=60);return!this._isUTC&&e&&(r=Fe(this)),this._offset=t,this._isUTC=!0,null!=r&&this.add(r,"m"),o!==t&&(!e||this._changeInProgress?We(this,Be(t-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,i.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:Fe(this)},mn.utc=function(t){return this.utcOffset(0,t)},mn.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Fe(this),"m")),this},mn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=Re(at,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this},mn.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?ke(t).utcOffset():0,(this.utcOffset()-t)%60==0)},mn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},mn.isLocal=function(){return!!this.isValid()&&!this._isUTC},mn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},mn.isUtc=je,mn.isUTC=je,mn.zoneAbbr=function(){return this._isUTC?"UTC":""},mn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},mn.dates=T("dates accessor is deprecated. Use date instead.",ln),mn.months=T("months accessor is deprecated. Use month instead",Dt),mn.years=T("years accessor is deprecated. Use year instead",xt),mn.zone=T("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()})),mn.isDSTShifted=T("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!s(this._isDSTShifted))return this._isDSTShifted;var t={};if(v(t,this),(t=Me(t))._a){var e=t._isUTC?f(t._a):ke(t._a);this._isDSTShifted=this.isValid()&&L(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}));var yn=P.prototype;function vn(t,e,n,r){var i=se(),o=f().set(r,e);return i[n](o,t)}function gn(t,e,n){if(u(t)&&(e=t,t=void 0),t=t||"",null!=e)return vn(t,e,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=vn(t,r,n,"month");return i}function xn(t,e,n,r){"boolean"==typeof t?(u(e)&&(n=e,e=void 0),e=e||""):(n=e=t,t=!1,u(e)&&(n=e,e=void 0),e=e||"");var i,o=se(),a=t?o._week.dow:0;if(null!=n)return vn(e,(n+a)%7,r,"day");var s=[];for(i=0;i<7;i++)s[i]=vn(e,(i+a)%7,r,"day");return s}yn.calendar=function(t,e,n){var r=this._calendar[t]||this._calendar.sameElse;return D(r)?r.call(e,n):r},yn.longDateFormat=function(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.replace(/MMMM|MM|DD|dddd/g,(function(t){return t.slice(1)})),this._longDateFormat[t])},yn.invalidDate=function(){return this._invalidDate},yn.ordinal=function(t){return this._ordinal.replace("%d",t)},yn.preparse=_n,yn.postformat=_n,yn.relativeTime=function(t,e,n,r){var i=this._relativeTime[n];return D(i)?i(t,e,n,r):i.replace(/%d/i,t)},yn.pastFuture=function(t,e){var n=this._relativeTime[t>0?"future":"past"];return D(n)?n(e):n.replace(/%s/i,e)},yn.set=function(t){var e,n;for(n in t)D(e=t[n])?this[n]=e:this["_"+n]=e;this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},yn.months=function(t,e){return t?o(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||kt).test(e)?"format":"standalone"][t.month()]:o(this._months)?this._months:this._months.standalone},yn.monthsShort=function(t,e){return t?o(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[kt.test(e)?"format":"standalone"][t.month()]:o(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},yn.monthsParse=function(t,e,n){var r,i,o;if(this._monthsParseExact)return Et.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=f([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[r].test(t))return r;if(n&&"MMM"===e&&this._shortMonthsParse[r].test(t))return r;if(!n&&this._monthsParse[r].test(t))return r}},yn.monthsRegex=function(t){return this._monthsParseExact?(d(this,"_monthsRegex")||It.call(this),t?this._monthsStrictRegex:this._monthsRegex):(d(this,"_monthsRegex")||(this._monthsRegex=Pt),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},yn.monthsShortRegex=function(t){return this._monthsParseExact?(d(this,"_monthsRegex")||It.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(d(this,"_monthsShortRegex")||(this._monthsShortRegex=Ct),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},yn.week=function(t){return jt(t,this._week.dow,this._week.doy).week},yn.firstDayOfYear=function(){return this._week.doy},yn.firstDayOfWeek=function(){return this._week.dow},yn.weekdays=function(t,e){var n=o(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(e)?"format":"standalone"];return!0===t?Nt(n,this._week.dow):t?n[t.day()]:n},yn.weekdaysMin=function(t){return!0===t?Nt(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin},yn.weekdaysShort=function(t){return!0===t?Nt(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort},yn.weekdaysParse=function(t,e,n){var r,i,o;if(this._weekdaysParseExact)return Vt.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=f([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[r].test(t))return r;if(n&&"ddd"===e&&this._shortWeekdaysParse[r].test(t))return r;if(n&&"dd"===e&&this._minWeekdaysParse[r].test(t))return r;if(!n&&this._weekdaysParse[r].test(t))return r}},yn.weekdaysRegex=function(t){return this._weekdaysParseExact?(d(this,"_weekdaysRegex")||Xt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(d(this,"_weekdaysRegex")||(this._weekdaysRegex=Wt),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},yn.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(d(this,"_weekdaysRegex")||Xt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(d(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Gt),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},yn.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(d(this,"_weekdaysRegex")||Xt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(d(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=qt),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},yn.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},yn.meridiem=function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},oe("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===M(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),i.lang=T("moment.lang is deprecated. Use moment.locale instead.",oe),i.langData=T("moment.langData is deprecated. Use moment.localeData instead.",se);var bn=Math.abs;function wn(t,e,n,r){var i=Be(e,n);return t._milliseconds+=r*i._milliseconds,t._days+=r*i._days,t._months+=r*i._months,t._bubble()}function Mn(t){return t<0?Math.floor(t):Math.ceil(t)}function Ln(t){return 4800*t/146097}function kn(t){return 146097*t/4800}function Tn(t){return function(){return this.as(t)}}var Sn=Tn("ms"),En=Tn("s"),An=Tn("m"),Dn=Tn("h"),Cn=Tn("d"),Pn=Tn("w"),In=Tn("M"),On=Tn("Q"),Rn=Tn("y");function Yn(t){return function(){return this.isValid()?this._data[t]:NaN}}var Fn=Yn("milliseconds"),jn=Yn("seconds"),zn=Yn("minutes"),Nn=Yn("hours"),Bn=Yn("days"),Un=Yn("months"),Hn=Yn("years");var Vn=Math.round,Wn={ss:44,s:45,m:45,h:22,d:26,M:11};function Gn(t,e,n,r,i){return i.relativeTime(e||1,!!n,t,r)}var qn=Math.abs;function Xn(t){return(t>0)-(t<0)||+t}function Zn(){if(!this.isValid())return this.localeData().invalidDate();var t,e,n=qn(this._milliseconds)/1e3,r=qn(this._days),i=qn(this._months);t=w(n/60),e=w(t/60),n%=60,t%=60;var o=w(i/12),a=i%=12,s=r,u=e,l=t,c=n?n.toFixed(3).replace(/\.?0+$/,""):"",d=this.asSeconds();if(!d)return"P0D";var h=d<0?"-":"",f=Xn(this._months)!==Xn(d)?"-":"",p=Xn(this._days)!==Xn(d)?"-":"",m=Xn(this._milliseconds)!==Xn(d)?"-":"";return h+"P"+(o?f+o+"Y":"")+(a?f+a+"M":"")+(s?p+s+"D":"")+(u||l||c?"T":"")+(u?m+u+"H":"")+(l?m+l+"M":"")+(c?m+c+"S":"")}var Kn=De.prototype;return Kn.isValid=function(){return this._isValid},Kn.abs=function(){var t=this._data;return this._milliseconds=bn(this._milliseconds),this._days=bn(this._days),this._months=bn(this._months),t.milliseconds=bn(t.milliseconds),t.seconds=bn(t.seconds),t.minutes=bn(t.minutes),t.hours=bn(t.hours),t.months=bn(t.months),t.years=bn(t.years),this},Kn.add=function(t,e){return wn(this,t,e,1)},Kn.subtract=function(t,e){return wn(this,t,e,-1)},Kn.as=function(t){if(!this.isValid())return NaN;var e,n,r=this._milliseconds;if("month"===(t=R(t))||"quarter"===t||"year"===t)switch(e=this._days+r/864e5,n=this._months+Ln(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(kn(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return 24*e+r/36e5;case"minute":return 1440*e+r/6e4;case"second":return 86400*e+r/1e3;case"millisecond":return Math.floor(864e5*e)+r;default:throw new Error("Unknown unit "+t)}},Kn.asMilliseconds=Sn,Kn.asSeconds=En,Kn.asMinutes=An,Kn.asHours=Dn,Kn.asDays=Cn,Kn.asWeeks=Pn,Kn.asMonths=In,Kn.asQuarters=On,Kn.asYears=Rn,Kn.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*M(this._months/12):NaN},Kn._bubble=function(){var t,e,n,r,i,o=this._milliseconds,a=this._days,s=this._months,u=this._data;return o>=0&&a>=0&&s>=0||o<=0&&a<=0&&s<=0||(o+=864e5*Mn(kn(s)+a),a=0,s=0),u.milliseconds=o%1e3,t=w(o/1e3),u.seconds=t%60,e=w(t/60),u.minutes=e%60,n=w(e/60),u.hours=n%24,a+=w(n/24),s+=i=w(Ln(a)),a-=Mn(kn(i)),r=w(s/12),s%=12,u.days=a,u.months=s,u.years=r,this},Kn.clone=function(){return Be(this)},Kn.get=function(t){return t=R(t),this.isValid()?this[t+"s"]():NaN},Kn.milliseconds=Fn,Kn.seconds=jn,Kn.minutes=zn,Kn.hours=Nn,Kn.days=Bn,Kn.weeks=function(){return w(this.days()/7)},Kn.months=Un,Kn.years=Hn,Kn.humanize=function(t){if(!this.isValid())return this.localeData().invalidDate();var e=this.localeData(),n=function(t,e,n){var r=Be(t).abs(),i=Vn(r.as("s")),o=Vn(r.as("m")),a=Vn(r.as("h")),s=Vn(r.as("d")),u=Vn(r.as("M")),l=Vn(r.as("y")),c=i<=Wn.ss&&["s",i]||i<Wn.s&&["ss",i]||o<=1&&["m"]||o<Wn.m&&["mm",o]||a<=1&&["h"]||a<Wn.h&&["hh",a]||s<=1&&["d"]||s<Wn.d&&["dd",s]||u<=1&&["M"]||u<Wn.M&&["MM",u]||l<=1&&["y"]||["yy",l];return c[2]=e,c[3]=+t>0,c[4]=n,Gn.apply(null,c)}(this,!t,e);return t&&(n=e.pastFuture(+this,n)),e.postformat(n)},Kn.toISOString=Zn,Kn.toString=Zn,Kn.toJSON=Zn,Kn.locale=Ze,Kn.localeData=Je,Kn.toIsoString=T("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Zn),Kn.lang=Ke,V("X",0,0,"unix"),V("x",0,0,"valueOf"),ct("x",ot),ct("X",/[+-]?\d+(\.\d{1,3})?/),pt("X",(function(t,e,n){n._d=new Date(1e3*parseFloat(t,10))})),pt("x",(function(t,e,n){n._d=new Date(M(t))})),i.version="2.24.0",e=ke,i.fn=mn,i.min=function(){return Ee("isBefore",[].slice.call(arguments,0))},i.max=function(){return Ee("isAfter",[].slice.call(arguments,0))},i.now=function(){return Date.now?Date.now():+new Date},i.utc=f,i.unix=function(t){return ke(1e3*t)},i.months=function(t,e){return gn(t,e,"months")},i.isDate=l,i.locale=oe,i.invalid=_,i.duration=Be,i.isMoment=b,i.weekdays=function(t,e,n){return xn(t,e,n,"weekdays")},i.parseZone=function(){return ke.apply(null,arguments).parseZone()},i.localeData=se,i.isDuration=Ce,i.monthsShort=function(t,e){return gn(t,e,"monthsShort")},i.weekdaysMin=function(t,e,n){return xn(t,e,n,"weekdaysMin")},i.defineLocale=ae,i.updateLocale=function(t,e){if(null!=e){var n,r,i=te;null!=(r=ie(t))&&(i=r._config),(n=new P(e=C(i,e))).parentLocale=ee[t],ee[t]=n,oe(t)}else null!=ee[t]&&(null!=ee[t].parentLocale?ee[t]=ee[t].parentLocale:null!=ee[t]&&delete ee[t]);return ee[t]},i.locales=function(){return S(ee)},i.weekdaysShort=function(t,e,n){return xn(t,e,n,"weekdaysShort")},i.normalizeUnits=R,i.relativeTimeRounding=function(t){return void 0===t?Vn:"function"==typeof t&&(Vn=t,!0)},i.relativeTimeThreshold=function(t,e){return void 0!==Wn[t]&&(void 0===e?Wn[t]:(Wn[t]=e,"s"===t&&(Wn.ss=e-1),!0))},i.calendarFormat=function(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},i.prototype=mn,i.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},i}()},9133:function(t){(function(){"use strict";var e,n,r,i,o,a,s,u=function(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(t){return e.apply(this,arguments)};case 2:return function(t,n){return e.apply(this,arguments)};case 3:return function(t,n,r){return e.apply(this,arguments)};case 4:return function(t,n,r,i){return e.apply(this,arguments)};case 5:return function(t,n,r,i,o){return e.apply(this,arguments)};case 6:return function(t,n,r,i,o,a){return e.apply(this,arguments)};case 7:return function(t,n,r,i,o,a,s){return e.apply(this,arguments)};case 8:return function(t,n,r,i,o,a,s,u){return e.apply(this,arguments)};case 9:return function(t,n,r,i,o,a,s,u,l){return e.apply(this,arguments)};case 10:return function(t,n,r,i,o,a,s,u,l,c){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}},l=function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n},c=function(){return Array.prototype.slice.call(arguments)},d=function(t){return new RegExp(t.source,(t.global?"g":"")+(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.sticky?"y":"")+(t.unicode?"u":""))},h=function(t){return function(){return!t.apply(this,arguments)}},f=function(t,e){var n;e=e||[];var r=(t=t||[]).length,i=e.length,o=[];for(n=0;n<r;)o[o.length]=t[n],n+=1;for(n=0;n<i;)o[o.length]=e[n],n+=1;return o},p=function(t,e,n){for(var r=0,i=n.length;r<i;){if(t(e,n[r]))return!0;r+=1}return!1},m=function(t,e){for(var n=0,r=e.length,i=[];n<r;)t(e[n])&&(i[i.length]=e[n]),n+=1;return i},_=function(t,e){return Object.prototype.hasOwnProperty.call(e,t)},y=function(t){return t},v=function(){var t=Object.prototype.toString;return"[object Arguments]"===t.call(arguments)?function(e){return"[object Arguments]"===t.call(e)}:function(t){return _("callee",t)}}(),g=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)},x=function(t){return"[object Function]"===Object.prototype.toString.call(t)},b=Number.isInteger||function(t){return t<<0===t},w=function(t){return"[object Number]"===Object.prototype.toString.call(t)},M=function(t){return"[object Object]"===Object.prototype.toString.call(t)},L=function(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]},k=function(t){return"[object String]"===Object.prototype.toString.call(t)},T=function(t){return"function"==typeof t["@@transducer/step"]},S=function(t,e){for(var n=0,r=e.length,i=Array(r);n<r;)i[n]=t(e[n]),n+=1;return i},E=function(t,e){return function(){return e.call(this,t.apply(this,arguments))}},A=function(t,e){return function(){var n=this;return t.apply(n,arguments).then((function(t){return e.call(n,t)}))}},D=function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0").replace(/"/g,'\\"')+'"'},C=function(t){return t&&t["@@transducer/reduced"]?t:{"@@transducer/value":t,"@@transducer/reduced":!0}},P=function t(e,n,r){switch(arguments.length){case 1:return t(e,0,e.length);case 2:return t(e,n,e.length);default:for(var i=[],o=0,a=Math.max(0,Math.min(e.length,r)-n);o<a;)i[o]=e[n+o],o+=1;return i}},I=(e=function(t){return(t<10?"0":"")+t},"function"==typeof Date.prototype.toISOString?function(t){return t.toISOString()}:function(t){return t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())+"."+(t.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}),O={init:function(){return this.xf["@@transducer/init"]()},result:function(t){return this.xf["@@transducer/result"](t)}},R=function(){function t(t){this.f=t}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(t){return t},t.prototype["@@transducer/step"]=function(t,e){return this.f(t,e)},function(e){return new t(e)}}(),Y="function"==typeof Object.assign?Object.assign:function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1,r=arguments.length;n<r;){var i=arguments[n];if(null!=i)for(var o in i)_(o,i)&&(e[o]=i[o]);n+=1}return e},F=function(t,e){return function(){var n=arguments.length;if(0===n)return e();var r=arguments[n-1];return g(r)||"function"!=typeof r[t]?e.apply(this,arguments):r[t].apply(r,P(arguments,0,n-1))}},j=function(t){return function e(n){return 0===arguments.length||L(n)?e:t.apply(this,arguments)}},z=function(t){return function e(n,r){switch(arguments.length){case 0:return e;case 1:return L(n)?e:j((function(e){return t(n,e)}));default:return L(n)&&L(r)?e:L(n)?j((function(e){return t(e,r)})):L(r)?j((function(e){return t(n,e)})):t(n,r)}}},N=function(t){return function e(n,r,i){switch(arguments.length){case 0:return e;case 1:return L(n)?e:z((function(e,r){return t(n,e,r)}));case 2:return L(n)&&L(r)?e:L(n)?z((function(e,n){return t(e,r,n)})):L(r)?z((function(e,r){return t(n,e,r)})):j((function(e){return t(n,r,e)}));default:return L(n)&&L(r)&&L(i)?e:L(n)&&L(r)?z((function(e,n){return t(e,n,i)})):L(n)&&L(i)?z((function(e,n){return t(e,r,n)})):L(r)&&L(i)?z((function(e,r){return t(n,e,r)})):L(n)?j((function(e){return t(e,r,i)})):L(r)?j((function(e){return t(n,e,i)})):L(i)?j((function(e){return t(n,r,e)})):t(n,r,i)}}},B=function t(e,n,r){return function(){for(var i=[],o=0,a=e,s=0;s<n.length||o<arguments.length;){var l;s<n.length&&(!L(n[s])||o>=arguments.length)?l=n[s]:(l=arguments[o],o+=1),i[s]=l,L(l)||(a-=1),s+=1}return a<=0?r.apply(this,i):u(a,t(e,i,r))}},U=function(t,e,n){return function(){var r=arguments.length;if(0===r)return n();var i=arguments[r-1];if(!g(i)){var o=P(arguments,0,r-1);if("function"==typeof i[t])return i[t].apply(i,o);if(T(i)){var a=e.apply(null,o);return a(i)}}return n.apply(this,arguments)}},H=function(){function t(t,e){this.xf=e,this.f=t,this.all=!0}return t.prototype["@@transducer/init"]=O.init,t.prototype["@@transducer/result"]=function(t){return this.all&&(t=this.xf["@@transducer/step"](t,!0)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)||(this.all=!1,t=C(this.xf["@@transducer/step"](t,!1))),t},z((function(e,n){return new t(e,n)}))}(),V=function(){function t(t,e){this.xf=e,this.f=t,this.any=!1}return t.prototype["@@transducer/init"]=O.init,t.prototype["@@transducer/result"]=function(t){return this.any||(t=this.xf["@@transducer/step"](t,!1)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)&&(this.any=!0,t=C(this.xf["@@transducer/step"](t,!0))),t},z((function(e,n){return new t(e,n)}))}(),W=function(){function t(t,e){this.xf=e,this.pos=0,this.full=!1,this.acc=new Array(t)}return t.prototype["@@transducer/init"]=O.init,t.prototype["@@transducer/result"]=function(t){return this.acc=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.store(e),this.full?this.xf["@@transducer/step"](t,this.getCopy()):t},t.prototype.store=function(t){this.acc[this.pos]=t,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},t.prototype.getCopy=function(){return f(P(this.acc,this.pos),P(this.acc,0,this.pos))},z((function(e,n){return new t(e,n)}))}(),G=function(){function t(t,e){this.xf=e,this.n=t}return t.prototype["@@transducer/init"]=O.init,t.prototype["@@transducer/result"]=O.result,t.prototype["@@transducer/step"]=function(t,e){return this.n>0?(this.n-=1,t):this.xf["@@transducer/step"](t,e)},z((function(e,n){return new t(e,n)}))}(),q=function(){function t(t,e){this.xf=e,this.pos=0,this.full=!1,this.acc=new Array(t)}return t.prototype["@@transducer/init"]=O.init,t.prototype["@@transducer/result"]=function(t){return this.acc=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.full&&(t=this.xf["@@transducer/step"](t,this.acc[this.pos])),this.store(e),t},t.prototype.store=function(t){this.acc[this.pos]=t,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},z((function(e,n){return new t(e,n)}))}(),X=function(){function t(t,e){this.xf=e,this.pred=t,this.lastValue=void 0,this.seenFirstValue=!1}return t.prototype["@@transducer/init"]=function(){return this.xf["@@transducer/init"]()},t.prototype["@@transducer/result"]=function(t){return this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){var n=!1;return this.seenFirstValue?this.pred(this.lastValue,e)&&(n=!0):this.seenFirstValue=!0,this.lastValue=e,n?t:this.xf["@@transducer/step"](t,e)},z((function(e,n){return new t(e,n)}))}(),Z=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=O.init,t.prototype["@@transducer/result"]=O.result,t.prototype["@@transducer/step"]=function(t,e){if(this.f){if(this.f(e))return t;this.f=null}return this.xf["@@transducer/step"](t,e)},z((function(e,n){return new t(e,n)}))}(),K=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=O.init,t.prototype["@@transducer/result"]=O.result,t.prototype["@@transducer/step"]=function(t,e){return this.f(e)?this.xf["@@transducer/step"](t,e):t},z((function(e,n){return new t(e,n)}))}(),J=function(){function t(t,e){this.xf=e,this.f=t,this.found=!1}return t.prototype["@@transducer/init"]=O.init,t.prototype["@@transducer/result"]=function(t){return this.found||(t=this.xf["@@transducer/step"](t,void 0)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)&&(this.found=!0,t=C(this.xf["@@transducer/step"](t,e))),t},z((function(e,n){return new t(e,n)}))}(),$=function(){function t(t,e){this.xf=e,this.f=t,this.idx=-1,this.found=!1}return t.prototype["@@transducer/init"]=O.init,t.prototype["@@transducer/result"]=function(t){return this.found||(t=this.xf["@@transducer/step"](t,-1)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.idx+=1,this.f(e)&&(this.found=!0,t=C(this.xf["@@transducer/step"](t,this.idx))),t},z((function(e,n){return new t(e,n)}))}(),Q=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=O.init,t.prototype["@@transducer/result"]=function(t){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](t,this.last))},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)&&(this.last=e),t},z((function(e,n){return new t(e,n)}))}(),tt=function(){function t(t,e){this.xf=e,this.f=t,this.idx=-1,this.lastIdx=-1}return t.prototype["@@transducer/init"]=O.init,t.prototype["@@transducer/result"]=function(t){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](t,this.lastIdx))},t.prototype["@@transducer/step"]=function(t,e){return this.idx+=1,this.f(e)&&(this.lastIdx=this.idx),t},z((function(e,n){return new t(e,n)}))}(),et=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=O.init,t.prototype["@@transducer/result"]=O.result,t.prototype["@@transducer/step"]=function(t,e){return this.xf["@@transducer/step"](t,this.f(e))},z((function(e,n){return new t(e,n)}))}(),nt=function(){function t(t,e){this.xf=e,this.n=t}return t.prototype["@@transducer/init"]=O.init,t.prototype["@@transducer/result"]=O.result,t.prototype["@@transducer/step"]=function(t,e){return 0===this.n?C(t):(this.n-=1,this.xf["@@transducer/step"](t,e))},z((function(e,n){return new t(e,n)}))}(),rt=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=O.init,t.prototype["@@transducer/result"]=O.result,t.prototype["@@transducer/step"]=function(t,e){return this.f(e)?this.xf["@@transducer/step"](t,e):C(t)},z((function(e,n){return new t(e,n)}))}(),it=z((function(t,e){return Number(t)+Number(e)})),ot=N((function(t,e,n){if(e>=n.length||e<-n.length)return n;var r=(e<0?n.length:0)+e,i=f(n);return i[r]=t(n[r]),i})),at=z(U("all",H,(function(t,e){for(var n=0;n<e.length;){if(!t(e[n]))return!1;n+=1}return!0}))),st=j((function(t){return function(){return t}})),ut=z((function(t,e){return t&&e})),lt=z(U("any",V,(function(t,e){for(var n=0;n<e.length;){if(t(e[n]))return!0;n+=1}return!1}))),ct=z(U("aperture",W,(function(t,e){for(var n=0,r=e.length-(t-1),i=new Array(r>=0?r:0);n<r;)i[n]=P(e,n,n+t),n+=1;return i}))),dt=z((function(t,e){return f(e,[t])})),ht=z((function(t,e){return t.apply(this,e)})),ft=N((function(t,e,n){var r={};for(var i in n)r[i]=n[i];return r[t]=e,r})),pt=N((function t(e,n,r){switch(e.length){case 0:return n;case 1:return ft(e[0],n,r);default:return ft(e[0],t(P(e,1),n,Object(r[e[0]])),r)}})),mt=z((function(t,e){return u(t.length,(function(){return t.apply(e,arguments)}))})),_t=N((function(t,e,n){if(t>e)throw new Error("min must not be greater than max in clamp(min, max, value)");return n<t?t:n>e?e:n})),yt=j((function(t){return function(e,n){return t(e,n)?-1:t(n,e)?1:0}})),vt=z((function(t,e){return 1===t?j(e):u(t,B(t,[],e))})),gt=it(-1),xt=z((function(t,e){return null==e||e!=e?t:e})),bt=N((function(t,e,n){for(var r=[],i=0,o=e.length;i<o;)p(t,e[i],n)||p(t,e[i],r)||r.push(e[i]),i+=1;return r})),wt=z((function(t,e){var n={};for(var r in e)r!==t&&(n[r]=e[r]);return n})),Mt=z((function t(e,n){switch(e.length){case 0:return n;case 1:return wt(e[0],n);default:var r=e[0],i=P(e,1);return null==n[r]?n:ft(r,t(i,n[r]),n)}})),Lt=z((function(t,e){return t/e})),kt=z(U("dropWhile",Z,(function(t,e){for(var n=0,r=e.length;n<r&&t(e[n]);)n+=1;return P(e,n)}))),Tt=j((function(t){return null!=t&&"function"==typeof t.empty?t.empty():null!=t&&null!=t.constructor&&"function"==typeof t.constructor.empty?t.constructor.empty():g(t)?[]:k(t)?"":M(t)?{}:v(t)?function(){return arguments}():void 0})),St=z((function t(e,n){var r,i,o,a={};for(i in n)o=typeof(r=e[i]),a[i]="function"===o?r(n[i]):"object"===o?t(e[i],n[i]):n[i];return a})),Et=z(U("find",J,(function(t,e){for(var n=0,r=e.length;n<r;){if(t(e[n]))return e[n];n+=1}}))),At=z(U("findIndex",$,(function(t,e){for(var n=0,r=e.length;n<r;){if(t(e[n]))return n;n+=1}return-1}))),Dt=z(U("findLast",Q,(function(t,e){for(var n=e.length-1;n>=0;){if(t(e[n]))return e[n];n-=1}}))),Ct=z(U("findLastIndex",tt,(function(t,e){for(var n=e.length-1;n>=0;){if(t(e[n]))return n;n-=1}return-1}))),Pt=z(F("forEach",(function(t,e){for(var n=e.length,r=0;r<n;)t(e[r]),r+=1;return e}))),It=j((function(t){for(var e=0,n=t.length,r={};e<n;)g(t[e])&&t[e].length&&(r[t[e][0]]=t[e][1]),e+=1;return r})),Ot=z((function(t,e){for(var n=[],r=0,i=e.length;r<i;){for(var o=r+1;o<i&&t(e[r],e[o]);)o+=1;n.push(e.slice(r,o)),r=o}return n})),Rt=z((function(t,e){return t>e})),Yt=z((function(t,e){return t>=e})),Ft=z(_),jt=z((function(t,e){return t in e})),zt=z((function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e})),Nt=j(y),Bt=N((function(t,e,n){return vt(Math.max(t.length,e.length,n.length),(function(){return t.apply(this,arguments)?e.apply(this,arguments):n.apply(this,arguments)}))})),Ut=it(1),Ht=N((function(t,e,n){t=t<n.length&&t>=0?t:n.length;var r=P(n);return r.splice(t,0,e),r})),Vt=N((function(t,e,n){return t=t<n.length&&t>=0?t:n.length,f(f(P(n,0,t),e),P(n,t))})),Wt=z(F("intersperse",(function(t,e){for(var n=[],r=0,i=e.length;r<i;)r===i-1?n.push(e[r]):n.push(e[r],t),r+=1;return n}))),Gt=z((function(t,e){return null!=e&&e.constructor===t||e instanceof t})),qt=j((function(t){return!!g(t)||!!t&&"object"==typeof t&&!(t instanceof String)&&(1===t.nodeType?!!t.length:0===t.length||t.length>0&&t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1))})),Xt=j((function(t){return null==t})),Zt=function(){var t=!{toString:null}.propertyIsEnumerable("toString"),e=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],n=function(){return arguments.propertyIsEnumerable("length")}(),r=function(t,e){for(var n=0;n<t.length;){if(t[n]===e)return!0;n+=1}return!1};return"function"!=typeof Object.keys||n?j((function(i){if(Object(i)!==i)return[];var o,a,s=[],u=n&&v(i);for(o in i)!_(o,i)||u&&"length"===o||(s[s.length]=o);if(t)for(a=e.length-1;a>=0;)_(o=e[a],i)&&!r(s,o)&&(s[s.length]=o),a-=1;return s})):j((function(t){return Object(t)!==t?[]:Object.keys(t)}))}(),Kt=j((function(t){var e,n=[];for(e in t)n[n.length]=e;return n})),Jt=j((function(t){return null!=t&&Gt(Number,t.length)?t.length:NaN})),$t=z((function(t,e){return t<e})),Qt=z((function(t,e){return t<=e})),te=N((function(t,e,n){for(var r=0,i=n.length,o=[],a=[e];r<i;)a=t(a[0],n[r]),o[r]=a[1],r+=1;return[a[0],o]})),ee=N((function(t,e,n){for(var r=n.length-1,i=[],o=[e];r>=0;)o=t(o[0],n[r]),i[r]=o[1],r-=1;return[o[0],i]})),ne=z((function(t,e){return e.match(t)||[]})),re=z((function(t,e){return b(t)?!b(e)||e<1?NaN:(t%e+e)%e:NaN})),ie=z((function(t,e){return e>t?e:t})),oe=N((function(t,e,n){return t(n)>t(e)?n:e})),ae=z((function(t,e){return Y({},t,e)})),se=j((function(t){return Y.apply(null,[{}].concat(t))})),ue=N((function(t,e,n){var r,i={};for(r in e)_(r,e)&&(i[r]=_(r,n)?t(r,e[r],n[r]):e[r]);for(r in n)_(r,n)&&!_(r,i)&&(i[r]=n[r]);return i})),le=z((function(t,e){return e<t?e:t})),ce=N((function(t,e,n){return t(n)<t(e)?n:e})),de=z((function(t,e){return t%e})),he=z((function(t,e){return t*e})),fe=z((function(t,e){switch(t){case 0:return function(){return e.call(this)};case 1:return function(t){return e.call(this,t)};case 2:return function(t,n){return e.call(this,t,n)};case 3:return function(t,n,r){return e.call(this,t,n,r)};case 4:return function(t,n,r,i){return e.call(this,t,n,r,i)};case 5:return function(t,n,r,i,o){return e.call(this,t,n,r,i,o)};case 6:return function(t,n,r,i,o,a){return e.call(this,t,n,r,i,o,a)};case 7:return function(t,n,r,i,o,a,s){return e.call(this,t,n,r,i,o,a,s)};case 8:return function(t,n,r,i,o,a,s,u){return e.call(this,t,n,r,i,o,a,s,u)};case 9:return function(t,n,r,i,o,a,s,u,l){return e.call(this,t,n,r,i,o,a,s,u,l)};case 10:return function(t,n,r,i,o,a,s,u,l,c){return e.call(this,t,n,r,i,o,a,s,u,l,c)};default:throw new Error("First argument to nAry must be a non-negative integer no greater than ten")}})),pe=j((function(t){return-t})),me=z(h(U("any",V,lt))),_e=j((function(t){return!t})),ye=z((function(t,e){var n=t<0?e.length+t:t;return k(e)?e.charAt(n):e[n]})),ve=j((function(t){return function(){return ye(t,arguments)}})),ge=z((function(t,e){var n={};return n[t]=e,n})),xe=j((function(t){return[t]})),be=j((function(t){var e,n=!1;return u(t.length,(function(){return n?e:(n=!0,e=t.apply(this,arguments))}))})),we=z((function(t,e){return t||e})),Me=(n=function(t){return{value:t,map:function(e){return n(e(t))}}},N((function(t,e,r){return t((function(t){return n(e(t))}))(r).value}))),Le=z((function(t,e){return[t,e]})),ke=z((function(t,e){for(var n=e,r=0;r<t.length;){if(null==n)return;n=n[t[r]],r+=1}return n})),Te=N((function(t,e,n){return xt(t,ke(e,n))})),Se=N((function(t,e,n){return e.length>0&&t(ke(e,n))})),Ee=z((function(t,e){for(var n={},r=0;r<t.length;)t[r]in e&&(n[t[r]]=e[t[r]]),r+=1;return n})),Ae=z((function(t,e){for(var n={},r=0,i=t.length;r<i;){var o=t[r];n[o]=e[o],r+=1}return n})),De=z((function(t,e){var n={};for(var r in e)t(e[r],r,e)&&(n[r]=e[r]);return n})),Ce=z((function(t,e){return f([t],e)})),Pe=z((function(t,e){return e[t]})),Ie=N((function(t,e,n){return null!=n&&_(e,n)?n[e]:t})),Oe=N((function(t,e,n){return t(n[e])})),Re=z((function(t,e){for(var n=t.length,r=[],i=0;i<n;)r[i]=e[t[i]],i+=1;return r})),Ye=z((function(t,e){if(!w(t)||!w(e))throw new TypeError("Both arguments to range must be numbers");for(var n=[],r=t;r<e;)n.push(r),r+=1;return n})),Fe=N((function(t,e,n){for(var r=n.length-1;r>=0;)e=t(e,n[r]),r-=1;return e})),je=j(C),ze=N((function(t,e,n){return f(P(n,0,Math.min(t,n.length)),P(n,Math.min(n.length,t+e)))})),Ne=N((function(t,e,n){return n.replace(t,e)})),Be=j((function(t){return k(t)?t.split("").reverse().join(""):P(t).reverse()})),Ue=N((function(t,e,n){for(var r=0,i=n.length,o=[e];r<i;)e=t(e,n[r]),o[r+1]=e,r+=1;return o})),He=N((function(t,e,n){return Me(t,st(e),n)})),Ve=N(F("slice",(function(t,e,n){return Array.prototype.slice.call(n,t,e)}))),We=z((function(t,e){return P(e).sort(t)})),Ge=z((function(t,e){return P(e).sort((function(e,n){var r=t(e),i=t(n);return r<i?-1:r>i?1:0}))})),qe=z((function(t,e){return[Ve(0,t,e),Ve(t,Jt(e),e)]})),Xe=z((function(t,e){if(t<=0)throw new Error("First argument to splitEvery must be a positive integer");for(var n=[],r=0;r<e.length;)n.push(Ve(r,r+=t,e));return n})),Ze=z((function(t,e){for(var n=0,r=e.length,i=[];n<r&&!t(e[n]);)i.push(e[n]),n+=1;return[i,P(e,n)]})),Ke=z((function(t,e){return Number(t)-Number(e)})),Je=F("tail",Ve(1,1/0)),$e=z(U("take",nt,(function(t,e){return Ve(0,t<0?1/0:t,e)}))),Qe=z((function(t,e){for(var n=e.length-1;n>=0&&t(e[n]);)n-=1;return P(e,n+1,1/0)})),tn=z(U("takeWhile",rt,(function(t,e){for(var n=0,r=e.length;n<r&&t(e[n]);)n+=1;return P(e,0,n)}))),en=z((function(t,e){return t(e),e})),nn=z((function(t,e){var n,r=Number(e),i=0;if(r<0||isNaN(r))throw new RangeError("n must be a non-negative number");for(n=new Array(r);i<r;)n[i]=t(i),i+=1;return n})),rn=j((function(t){var e=[];for(var n in t)_(n,t)&&(e[e.length]=[n,t[n]]);return e})),on=j((function(t){var e=[];for(var n in t)e[e.length]=[n,t[n]];return e})),an=j((function(t){for(var e=0,n=[];e<t.length;){for(var r=t[e],i=0;i<r.length;)void 0===n[i]&&(n[i]=[]),n[i].push(r[i]),i+=1;e+=1}return n})),sn=(r="\t\n\v\f\r \u2028\u2029\ufeff","function"==typeof String.prototype.trim&&!r.trim()&&"".trim()?j((function(t){return t.trim()})):j((function(t){var e=new RegExp("^["+r+"]["+r+"]*"),n=new RegExp("["+r+"]["+r+"]*$");return t.replace(e,"").replace(n,"")}))),un=z((function(t,e){return u(t.length,(function(){try{return t.apply(this,arguments)}catch(t){return e.apply(this,f([t],arguments))}}))})),ln=j((function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)})),cn=j((function(t){return function(){return t(P(arguments))}})),dn=j((function(t){return fe(1,t)})),hn=z((function(t,e){return vt(t,(function(){for(var n,r=1,i=e,o=0;r<=t&&"function"==typeof i;)n=r===t?arguments.length:o+i.length,i=i.apply(this,P(arguments,o,n)),r+=1,o=n;return i}))})),fn=z((function(t,e){for(var n=t(e),r=[];n&&n.length;)r[r.length]=n[0],n=t(n[1]);return r})),pn=z((function(t,e){for(var n,r=0,i=e.length,o=[];r<i;)n=e[r],p(t,n,o)||(o[o.length]=n),r+=1;return o})),mn=N((function(t,e,n){return t(n)?n:e(n)})),_n=N((function(t,e,n){for(var r=n;!t(r);)r=e(r);return r})),yn=N((function(t,e,n){return ot(st(e),t,n)})),vn=z((function(t,e){return vt(e.length,(function(){for(var n=[],r=0;r<e.length;)n.push(e[r].call(this,arguments[r])),r+=1;return t.apply(this,n.concat(P(arguments,e.length)))}))})),gn=j((function(t){for(var e=Zt(t),n=e.length,r=[],i=0;i<n;)r[i]=t[e[i]],i+=1;return r})),xn=j((function(t){var e,n=[];for(e in t)n[n.length]=t[e];return n})),bn=(i=function(t){return{value:t,map:function(){return this}}},z((function(t,e){return t(i)(e).value}))),wn=N((function(t,e,n){return t(n)?e(n):n})),Mn=z((function(t,e){for(var n in t)if(_(n,t)&&!t[n](e[n]))return!1;return!0})),Ln=z((function(t,e){return vt(t.length,(function(){return e.apply(this,f([t],arguments))}))})),kn=z((function(t,e){for(var n,r=0,i=t.length,o=e.length,a=[];r<i;){for(n=0;n<o;)a[a.length]=[t[r],e[n]],n+=1;r+=1}return a})),Tn=z((function(t,e){for(var n=[],r=0,i=Math.min(t.length,e.length);r<i;)n[r]=[t[r],e[r]],r+=1;return n})),Sn=z((function(t,e){for(var n=0,r=Math.min(t.length,e.length),i={};n<r;)i[t[n]]=e[n],n+=1;return i})),En=N((function(t,e,n){for(var r=[],i=0,o=Math.min(e.length,n.length);i<o;)r[i]=t(e[i],n[i]),i+=1;return r})),An=st(!1),Dn=st(!0),Cn=function t(e,n,r,i){var o=function(o){for(var a=n.length,s=0;s<a;){if(e===n[s])return r[s];s+=1}for(var u in n[s+1]=e,r[s+1]=o,e)o[u]=i?t(e[u],n,r,!0):e[u];return o};switch(ln(e)){case"Object":return o({});case"Array":return o([]);case"Date":return new Date(e.valueOf());case"RegExp":return d(e);default:return e}},Pn=function(t){return z((function(e,n){return u(Math.max(0,e.length-n.length),(function(){return e.apply(this,t(n,arguments))}))}))},In=function t(e,n,r,i){if(zt(e,n))return!0;if(ln(e)!==ln(n))return!1;if(null==e||null==n)return!1;if("function"==typeof e.equals||"function"==typeof n.equals)return"function"==typeof e.equals&&e.equals(n)&&"function"==typeof n.equals&&n.equals(e);switch(ln(e)){case"Arguments":case"Array":case"Object":if("function"==typeof e.constructor&&"Promise"===function(t){var e=String(t).match(/^function (\w*)/);return null==e?"":e[1]}(e.constructor))return e===n;break;case"Boolean":case"Number":case"String":if(typeof e!=typeof n||!zt(e.valueOf(),n.valueOf()))return!1;break;case"Date":if(!zt(e.valueOf(),n.valueOf()))return!1;break;case"Error":return e.name===n.name&&e.message===n.message;case"RegExp":if(e.source!==n.source||e.global!==n.global||e.ignoreCase!==n.ignoreCase||e.multiline!==n.multiline||e.sticky!==n.sticky||e.unicode!==n.unicode)return!1;break;case"Map":case"Set":if(!t(l(e.entries()),l(n.entries()),r,i))return!1;break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var o=Zt(e);if(o.length!==Zt(n).length)return!1;for(var a=r.length-1;a>=0;){if(r[a]===e)return i[a]===n;a-=1}for(r.push(e),i.push(n),a=o.length-1;a>=0;){var s=o[a];if(!_(s,n)||!t(n[s],e[s],r,i))return!1;a-=1}return r.pop(),i.pop(),!0},On=function(t){return function e(n){for(var r,i,o,a=[],s=0,u=n.length;s<u;){if(qt(n[s]))for(o=0,i=(r=t?e(n[s]):n[s]).length;o<i;)a[a.length]=r[o],o+=1;else a[a.length]=n[s];s+=1}return a}},Rn=function(){function t(t,e,n){for(var r=n.next();!r.done;){if((e=t["@@transducer/step"](e,r.value))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r=n.next()}return t["@@transducer/result"](e)}var e="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";return function(n,r,i){if("function"==typeof n&&(n=R(n)),qt(i))return function(t,e,n){for(var r=0,i=n.length;r<i;){if((e=t["@@transducer/step"](e,n[r]))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r+=1}return t["@@transducer/result"](e)}(n,r,i);if("function"==typeof i.reduce)return function(t,e,n){return t["@@transducer/result"](n.reduce(mt(t["@@transducer/step"],t),e))}(n,r,i);if(null!=i[e])return t(n,r,i[e]());if("function"==typeof i.next)return t(n,r,i);throw new TypeError("reduce: list must be array or iterable")}}(),Yn=(o={"@@transducer/init":Array,"@@transducer/step":function(t,e){return t.push(e),t},"@@transducer/result":y},a={"@@transducer/init":String,"@@transducer/step":function(t,e){return t+e},"@@transducer/result":y},s={"@@transducer/init":Object,"@@transducer/step":function(t,e){return Y(t,qt(e)?ge(e[0],e[1]):e)},"@@transducer/result":y},function(t){if(T(t))return t;if(qt(t))return o;if("string"==typeof t)return a;if("object"==typeof t)return s;throw new Error("Cannot create transformer for "+t)}),Fn=function(){function t(t,e){this.f=t,this.retained=[],this.xf=e}return t.prototype["@@transducer/init"]=O.init,t.prototype["@@transducer/result"]=function(t){return this.retained=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)?this.retain(t,e):this.flush(t,e)},t.prototype.flush=function(t,e){return t=Rn(this.xf["@@transducer/step"],t,this.retained),this.retained=[],this.xf["@@transducer/step"](t,e)},t.prototype.retain=function(t,e){return this.retained.push(e),t},z((function(e,n){return new t(e,n)}))}(),jn=function(){function t(t,e){this.xf=e,this.f=t,this.inputs={}}return t.prototype["@@transducer/init"]=O.init,t.prototype["@@transducer/result"]=function(t){var e;for(e in this.inputs)if(_(e,this.inputs)&&(t=this.xf["@@transducer/step"](t,this.inputs[e]))["@@transducer/reduced"]){t=t["@@transducer/value"];break}return this.inputs=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){var n=this.f(e);return this.inputs[n]=this.inputs[n]||[n,[]],this.inputs[n][1]=dt(e,this.inputs[n][1]),t},z((function(e,n){return new t(e,n)}))}(),zn=j((function(t){return vt(t.length,(function(){var e=0,n=arguments[0],r=arguments[arguments.length-1],i=P(arguments);return i[0]=function(){var t=n.apply(this,f(arguments,[e,r]));return e+=1,t},t.apply(this,i)}))})),Nn=j((function(t){return fe(2,t)})),Bn=j((function(t){return null!=t&&"function"==typeof t.clone?t.clone():Cn(t,[],[],!0)})),Un=j((function(t){return vt(t.length,t)})),Hn=z(U("drop",G,(function(t,e){return Ve(Math.max(0,t),1/0,e)}))),Vn=z(U("dropLast",q,(function(t,e){return $e(t<e.length?e.length-t:0,e)}))),Wn=z(U("dropLastWhile",Fn,(function(t,e){for(var n=e.length-1;n>=0&&t(e[n]);)n-=1;return P(e,0,n+1)}))),Gn=z((function(t,e){return In(t,e,[],[])})),qn=z(U("filter",K,(function(t,e){return M(e)?Rn((function(n,r){return t(e[r])&&(n[r]=e[r]),n}),{},Zt(e)):m(t,e)}))),Xn=j(On(!0)),Zn=j((function(t){return Un((function(e,n){var r=P(arguments);return r[0]=n,r[1]=e,t.apply(this,r)}))})),Kn=ye(0),Jn=Ve(0,-1),$n=N((function(t,e,n){var r,i;e.length>n.length?(r=e,i=n):(r=n,i=e);for(var o=[],a=0;a<i.length;)p(t,i[a],r)&&(o[o.length]=i[a]),a+=1;return pn(t,o)})),Qn=N((function(t,e,n){return T(t)?Rn(e(t),t["@@transducer/init"](),n):Rn(e(Yn(t)),Cn(t,[],[],!1),n)})),tr=j((function(t){for(var e=Zt(t),n=e.length,r=0,i={};r<n;){var o=e[r],a=t[o],s=_(a,i)?i[a]:i[a]=[];s[s.length]=o,r+=1}return i})),er=j((function(t){for(var e=Zt(t),n=e.length,r=0,i={};r<n;){var o=e[r];i[t[o]]=o,r+=1}return i})),nr=j((function(t){return null!=t&&Gn(t,Tt(t))})),rr=ye(-1),ir=z((function(t,e){if("function"!=typeof e.lastIndexOf||g(e)){for(var n=e.length-1;n>=0;){if(Gn(e[n],t))return n;n-=1}return-1}return e.lastIndexOf(t)})),or=z(U("map",et,(function(t,e){switch(Object.prototype.toString.call(e)){case"[object Function]":return vt(e.length,(function(){return t.call(this,e.apply(this,arguments))}));case"[object Object]":return Rn((function(n,r){return n[r]=t(e[r]),n}),{},Zt(e));default:return S(t,e)}}))),ar=z((function(t,e){return Rn((function(n,r){return n[r]=t(e[r],r,e),n}),{},Zt(e))})),sr=N((function(t,e,n){return ue((function(e,n,r){return t(n,r)}),e,n)})),ur=Pn(f),lr=Pn(Zn(f)),cr=N((function(t,e,n){return Gn(ke(t,n),e)})),dr=z((function(t,e){return or(Pe(t),e)})),hr=vn(S,[Ae,Nt]),fr=N((function(t,e,n){return Oe(Gn(e),t,n)})),pr=N((function(t,e,n){return Oe(Gt(t),e,n)})),mr=N(Rn),_r=B(4,[],(function(t,e,n,r){return Rn((function(r,i){var o=n(i);return r[o]=t(_(o,r)?r[o]:e,i),r}),{},r)})),yr=z((function(t,e){return qn(h(t),e)})),vr=z((function(t,e){return nn(st(t),e)})),gr=mr(it,0),xr=z((function(t,e){return Hn(t>=0?e.length-t:0,e)})),br=vt(4,(function(t,e,n,r){return Rn(t("function"==typeof e?R(e):e),n,r)})),wr=N((function(t,e,n){return pn(t,f(e,n))})),Mr=z((function(t,e){return Mn(or(Gn,t),e)})),Lr=function(t,e,n){var r,i;if("function"==typeof t.indexOf)switch(typeof e){case"number":if(0===e){for(r=1/e;n<t.length;){if(0===(i=t[n])&&1/i===r)return n;n+=1}return-1}if(e!=e){for(;n<t.length;){if("number"==typeof(i=t[n])&&i!=i)return n;n+=1}return-1}return t.indexOf(e,n);case"string":case"boolean":case"function":case"undefined":return t.indexOf(e,n);case"object":if(null===e)return t.indexOf(e,n)}for(;n<t.length;){if(Gn(t[n],e))return n;n+=1}return-1},kr=z((function(t,e){return or(t,function(t){var e=function(t){return{"@@transducer/init":O.init,"@@transducer/result":function(e){return t["@@transducer/result"](e)},"@@transducer/step":function(e,n){var r=t["@@transducer/step"](e,n);return r["@@transducer/reduced"]?{"@@transducer/value":r,"@@transducer/reduced":!0}:r}}}(t);return{"@@transducer/init":O.init,"@@transducer/result":function(t){return e["@@transducer/result"](t)},"@@transducer/step":function(t,n){return qt(n)?Rn(e,t,n):Rn(e,t,[n])}}}(e))})),Tr=j((function(t){return vt(mr(ie,0,dr("length",t)),(function(){for(var e=0,n=t.length;e<n;){if(!t[e].apply(this,arguments))return!1;e+=1}return!0}))})),Sr=j((function(t){for(var e=t.length,n=0;n<e;){if(Lr(t,t[n],n+1)>=0)return!1;n+=1}return!0})),Er=j((function(t){return vt(mr(ie,0,dr("length",t)),(function(){for(var e=0,n=t.length;e<n;){if(t[e].apply(this,arguments))return!0;e+=1}return!1}))})),Ar=z((function(t,e){return"function"==typeof t.ap?t.ap(e):"function"==typeof t?vt(Math.max(t.length,e.length),(function(){return t.apply(this,arguments)(e.apply(this,arguments))})):Rn((function(t,n){return f(t,or(n,e))}),[],t)})),Dr=j((function t(e){return e=or((function(e){return"function"==typeof e?e:t(e)}),e),vt(mr(ie,0,dr("length",gn(e))),(function(){var t=arguments;return or((function(e){return ht(e,t)}),e)}))})),Cr=Un((function(t){return t.apply(this,P(arguments,1))})),Pr=z(U("chain",kr,(function(t,e){return"function"==typeof e?function(){return e.call(this,t.apply(this,arguments)).apply(this,arguments)}:On(!1)(or(t,e))}))),Ir=j((function(t){var e=mr(ie,0,or((function(t){return t[0].length}),t));return u(e,(function(){for(var e=0;e<t.length;){if(t[e][0].apply(this,arguments))return t[e][1].apply(this,arguments);e+=1}}))})),Or=z((function(t,e){if(t>10)throw new Error("Constructor with greater than ten arguments");return 0===t?function(){return new e}:Un(fe(t,(function(t,n,r,i,o,a,s,u,l,c){switch(arguments.length){case 1:return new e(t);case 2:return new e(t,n);case 3:return new e(t,n,r);case 4:return new e(t,n,r,i);case 5:return new e(t,n,r,i,o);case 6:return new e(t,n,r,i,o,a);case 7:return new e(t,n,r,i,o,a,s);case 8:return new e(t,n,r,i,o,a,s,u);case 9:return new e(t,n,r,i,o,a,s,u,l);case 10:return new e(t,n,r,i,o,a,s,u,l,c)}})))})),Rr=z((function(t,e){return vt(mr(ie,0,dr("length",e)),(function(){var n=arguments,r=this;return t.apply(r,S((function(t){return t.apply(r,n)}),e))}))})),Yr=_r((function(t,e){return t+1}),0),Fr=z(U("dropRepeatsWith",X,(function(t,e){var n=[],r=1,i=e.length;if(0!==i)for(n[0]=e[0];r<i;)t(rr(n),e[r])||(n[n.length]=e[r]),r+=1;return n}))),jr=N((function(t,e,n){return Gn(t(e),t(n))})),zr=N((function(t,e,n){return Gn(e[t],n[t])})),Nr=z(U("groupBy",jn,_r((function(t,e){return null==t&&(t=[]),t.push(e),t}),null))),Br=_r((function(t,e){return e}),null),Ur=z((function(t,e){return"function"!=typeof e.indexOf||g(e)?Lr(e,t,0):e.indexOf(t)})),Hr=j((function(t){return Rr(c,t)})),Vr=z((function(t,e){return function(n){return function(r){return or((function(t){return e(t,r)}),n(t(r)))}}})),Wr=j((function(t){return Vr(ye(t),yn(t))})),Gr=j((function(t){return Vr(ke(t),pt(t))})),qr=j((function(t){return Vr(Pe(t),ft(t))})),Xr=z((function(t,e){var n=vt(t,e);return vt(t,(function(){return Rn(Ar,or(n,arguments[0]),P(arguments,1))}))})),Zr=j((function(t){return gr(t)/t.length})),Kr=j((function(t){var e=t.length;if(0===e)return NaN;var n=2-e%2,r=(e-n)/2;return Zr(P(t).sort((function(t,e){return t<e?-1:t>e?1:0})).slice(r,r+n))})),Jr=Hr([qn,yr]),$r=function(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return u(arguments[0].length,mr(E,arguments[0],Je(arguments)))},Qr=function(){if(0===arguments.length)throw new Error("pipeP requires at least one argument");return u(arguments[0].length,mr(A,arguments[0],Je(arguments)))},ti=mr(he,1),ei=z((function(t,e){return"function"==typeof e.sequence?e.sequence(t):Fe((function(t,e){return Ar(or(Ce,e),t)}),t([]),e)})),ni=N((function(t,e,n){return ei(t,or(e,n))})),ri=Pr(y),ii=function(t,e){return Lr(e,t,0)>=0},oi=function t(e,n){var r=function(r){var i=n.concat([e]);return ii(r,i)?"<Circular>":t(r,i)},i=function(t,e){return S((function(e){return D(e)+": "+r(t[e])}),e.slice().sort())};switch(Object.prototype.toString.call(e)){case"[object Arguments]":return"(function() { return arguments; }("+S(r,e).join(", ")+"))";case"[object Array]":return"["+S(r,e).concat(i(e,yr((function(t){return/^\d+$/.test(t)}),Zt(e)))).join(", ")+"]";case"[object Boolean]":return"object"==typeof e?"new Boolean("+r(e.valueOf())+")":e.toString();case"[object Date]":return"new Date("+(isNaN(e.valueOf())?r(NaN):D(I(e)))+")";case"[object Null]":return"null";case"[object Number]":return"object"==typeof e?"new Number("+r(e.valueOf())+")":1/e==-1/0?"-0":e.toString(10);case"[object String]":return"object"==typeof e?"new String("+r(e.valueOf())+")":D(e);case"[object Undefined]":return"undefined";default:if("function"==typeof e.toString){var o=e.toString();if("[object Object]"!==o)return o}return"{"+i(e,Zt(e)).join(", ")+"}"}},ai=function(){if(0===arguments.length)throw new Error("compose requires at least one argument");return $r.apply(this,Be(arguments))},si=function(){return ai.apply(this,Ce(Nt,or(Pr,arguments)))},ui=j((function(t){return Or(t.length,t)})),li=z(ii),ci=z((function(t,e){for(var n=[],r=0,i=t.length;r<i;)ii(t[r],e)||ii(t[r],n)||(n[n.length]=t[r]),r+=1;return n})),di=j(U("dropRepeats",X(Gn),Fr(Gn))),hi=j((function(t){return Xr(t.length,t)})),fi=z((function(t,e){var n={};for(var r in e)ii(r,t)||(n[r]=e[r]);return n})),pi=j((function(t){return oi(t,[])})),mi=z((function(t,e){return yr(Zn(ii)(t),e)})),_i=function(){function t(){this._nativeSet="function"==typeof Set?new Set:null,this._items={}}function e(t,e,n){var r,i=typeof t;switch(i){case"string":case"number":return 0!==t||n._items["-0"]||1/t!=-1/0?null!==n._nativeSet?e?(r=n._nativeSet.size,n._nativeSet.add(t),n._nativeSet.size>r):n._nativeSet.has(t):i in n._items?t in n._items[i]?!e:(e&&(n._items[i][t]=!0),e):(e&&(n._items[i]={},n._items[i][t]=!0),e):(e&&(n._items["-0"]=!0),e);case"boolean":if(i in n._items){var o=t?1:0;return n._items[i][o]?!e:(e&&(n._items[i][o]=!0),e)}return e&&(n._items[i]=t?[!1,!0]:[!0,!1]),e;case"function":return null!==n._nativeSet?e?(r=n._nativeSet.size,n._nativeSet.add(t),n._nativeSet.size>r):n._nativeSet.has(t):i in n._items?ii(t,n._items[i])?!e:(e&&n._items[i].push(t),e):(e&&(n._items[i]=[t]),e);case"undefined":return n._items[i]?!e:(e&&(n._items[i]=!0),e);case"object":if(null===t)return n._items.null?!e:(e&&(n._items.null=!0),e);default:return(i=Object.prototype.toString.call(t))in n._items?ii(t,n._items[i])?!e:(e&&n._items[i].push(t),e):(e&&(n._items[i]=[t]),e)}}return t.prototype.add=function(t){return e(t,!0,this)},t.prototype.has=function(t){return e(t,!1,this)},t}(),yi=z((function(t,e){return x(t)?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:hi(ut)(t,e)})),vi=hi(_e),gi=z((function(t,e){return x(t)?function(){return t.apply(this,arguments)||e.apply(this,arguments)}:hi(we)(t,e)})),xi=z((function(t,e){return vt(t+1,(function(){var n=arguments[t];if(null!=n&&Gt(Function,n[e]))return n[e].apply(n,P(arguments,0,t));throw new TypeError(pi(n)+' does not have a method named "'+e+'"')}))})),bi=xi(1,"join"),wi=j((function(t){var e={};return u(t.length,(function(){var n=pi(arguments);return _(n,e)||(e[n]=t.apply(this,arguments)),e[n]}))})),Mi=xi(1,"split"),Li=z((function(t,e){if(n=t,"[object RegExp]"!==Object.prototype.toString.call(n))throw new TypeError("test requires a value of type RegExp as its first argument; received "+pi(t));var n;return d(t).test(e)})),ki=xi(0,"toLowerCase"),Ti=xi(0,"toUpperCase"),Si=z((function(t,e){for(var n,r,i=new _i,o=[],a=0;a<e.length;)n=t(r=e[a]),i.add(n)&&o.push(r),a+=1;return o})),Ei=Zn(xi(1,"concat")),Ai=z((function(t,e){return Ei(ci(t,e),ci(e,t))})),Di=N((function(t,e,n){return Ei(bt(t,e,n),bt(t,n,e))})),Ci=Si(Nt),Pi=z((function(t,e){var n,r;return t.length>e.length?(n=t,r=e):(n=e,r=t),Ci(m(Zn(ii)(n),r))})),Ii=z(ai(Ci,f)),Oi={F:An,T:Dn,__:{"@@functional/placeholder":!0},add:it,addIndex:zn,adjust:ot,all:at,allPass:Tr,allUniq:Sr,always:st,and:ut,any:lt,anyPass:Er,ap:Ar,aperture:ct,append:dt,apply:ht,applySpec:Dr,assoc:ft,assocPath:pt,binary:Nn,bind:mt,both:yi,call:Cr,chain:Pr,clamp:_t,clone:Bn,comparator:yt,complement:vi,compose:ai,composeK:si,composeP:function(){if(0===arguments.length)throw new Error("composeP requires at least one argument");return Qr.apply(this,Be(arguments))},concat:Ei,cond:Ir,construct:ui,constructN:Or,contains:li,converge:Rr,countBy:Yr,curry:Un,curryN:vt,dec:gt,defaultTo:xt,difference:ci,differenceWith:bt,dissoc:wt,dissocPath:Mt,divide:Lt,drop:Hn,dropLast:Vn,dropLastWhile:Wn,dropRepeats:di,dropRepeatsWith:Fr,dropWhile:kt,either:gi,empty:Tt,eqBy:jr,eqProps:zr,equals:Gn,evolve:St,filter:qn,find:Et,findIndex:At,findLast:Dt,findLastIndex:Ct,flatten:Xn,flip:Zn,forEach:Pt,fromPairs:It,groupBy:Nr,groupWith:Ot,gt:Rt,gte:Yt,has:Ft,hasIn:jt,head:Kn,identical:zt,identity:Nt,ifElse:Bt,inc:Ut,indexBy:Br,indexOf:Ur,init:Jn,insert:Ht,insertAll:Vt,intersection:Pi,intersectionWith:$n,intersperse:Wt,into:Qn,invert:tr,invertObj:er,invoker:xi,is:Gt,isArrayLike:qt,isEmpty:nr,isNil:Xt,join:bi,juxt:Hr,keys:Zt,keysIn:Kt,last:rr,lastIndexOf:ir,length:Jt,lens:Vr,lensIndex:Wr,lensPath:Gr,lensProp:qr,lift:hi,liftN:Xr,lt:$t,lte:Qt,map:or,mapAccum:te,mapAccumRight:ee,mapObjIndexed:ar,match:ne,mathMod:re,max:ie,maxBy:oe,mean:Zr,median:Kr,memoize:wi,merge:ae,mergeAll:se,mergeWith:sr,mergeWithKey:ue,min:le,minBy:ce,modulo:de,multiply:he,nAry:fe,negate:pe,none:me,not:_e,nth:ye,nthArg:ve,objOf:ge,of:xe,omit:fi,once:be,or:we,over:Me,pair:Le,partial:ur,partialRight:lr,partition:Jr,path:ke,pathEq:cr,pathOr:Te,pathSatisfies:Se,pick:Ee,pickAll:Ae,pickBy:De,pipe:$r,pipeK:function(){return si.apply(this,Be(arguments))},pipeP:Qr,pluck:dr,prepend:Ce,product:ti,project:hr,prop:Pe,propEq:fr,propIs:pr,propOr:Ie,propSatisfies:Oe,props:Re,range:Ye,reduce:mr,reduceBy:_r,reduceRight:Fe,reduced:je,reject:yr,remove:ze,repeat:vr,replace:Ne,reverse:Be,scan:Ue,sequence:ei,set:He,slice:Ve,sort:We,sortBy:Ge,split:Mi,splitAt:qe,splitEvery:Xe,splitWhen:Ze,subtract:Ke,sum:gr,symmetricDifference:Ai,symmetricDifferenceWith:Di,tail:Je,take:$e,takeLast:xr,takeLastWhile:Qe,takeWhile:tn,tap:en,test:Li,times:nn,toLower:ki,toPairs:rn,toPairsIn:on,toString:pi,toUpper:Ti,transduce:br,transpose:an,traverse:ni,trim:sn,tryCatch:un,type:ln,unapply:cn,unary:dn,uncurryN:hn,unfold:fn,union:Ii,unionWith:wr,uniq:Ci,uniqBy:Si,uniqWith:pn,unless:mn,unnest:ri,until:_n,update:yn,useWith:vn,values:gn,valuesIn:xn,view:bn,when:wn,where:Mn,whereEq:Mr,without:mi,wrap:Ln,xprod:kn,zip:Tn,zipObj:Sn,zipWith:En};t.exports=Oi}).call(this)},4556:function(t,e){var n,r;"undefined"!=typeof self&&self,void 0===(r="function"==typeof(n=function(){function t(){}t.prototype.saveState=function(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}},t.prototype.restoreState=function(t){this.idx=t.idx,this.input=t.input,this.groupIdx=t.groupIdx},t.prototype.pattern=function(t){this.idx=0,this.input=t,this.groupIdx=0,this.consumeChar("/");var e=this.disjunction();this.consumeChar("/");for(var n={type:"Flags",global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};this.isRegExpFlag();)switch(this.popChar()){case"g":s(n,"global");break;case"i":s(n,"ignoreCase");break;case"m":s(n,"multiLine");break;case"u":s(n,"unicode");break;case"y":s(n,"sticky")}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:n,value:e}},t.prototype.disjunction=function(){var t=[];for(t.push(this.alternative());"|"===this.peekChar();)this.consumeChar("|"),t.push(this.alternative());return{type:"Disjunction",value:t}},t.prototype.alternative=function(){for(var t=[];this.isTerm();)t.push(this.term());return{type:"Alternative",value:t}},t.prototype.term=function(){return this.isAssertion()?this.assertion():this.atom()},t.prototype.assertion=function(){switch(this.popChar()){case"^":return{type:"StartAnchor"};case"$":return{type:"EndAnchor"};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary"};case"B":return{type:"NonWordBoundary"}}throw Error("Invalid Assertion Escape");case"(":var t;switch(this.consumeChar("?"),this.popChar()){case"=":t="Lookahead";break;case"!":t="NegativeLookahead"}u(t);var e=this.disjunction();return this.consumeChar(")"),{type:t,value:e}}!function(){throw Error("Internal Error - Should never get here!")}()},t.prototype.quantifier=function(t){var e;switch(this.popChar()){case"*":e={atLeast:0,atMost:1/0};break;case"+":e={atLeast:1,atMost:1/0};break;case"?":e={atLeast:0,atMost:1};break;case"{":var n=this.integerIncludingZero();switch(this.popChar()){case"}":e={atLeast:n,atMost:n};break;case",":e=this.isDigit()?{atLeast:n,atMost:this.integerIncludingZero()}:{atLeast:n,atMost:1/0},this.consumeChar("}")}if(!0===t&&void 0===e)return;u(e)}if(!0!==t||void 0!==e)return u(e),"?"===this.peekChar(0)?(this.consumeChar("?"),e.greedy=!1):e.greedy=!0,e.type="Quantifier",e},t.prototype.atom=function(){var t;switch(this.peekChar()){case".":t=this.dotAll();break;case"\\":t=this.atomEscape();break;case"[":t=this.characterClass();break;case"(":t=this.group()}return void 0===t&&this.isPatternCharacter()&&(t=this.patternCharacter()),u(t),this.isQuantifier()&&(t.quantifier=this.quantifier()),t},t.prototype.dotAll=function(){return this.consumeChar("."),{type:"Set",complement:!0,value:[o("\n"),o("\r"),o("\u2028"),o("\u2029")]}},t.prototype.atomEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},t.prototype.decimalEscapeAtom=function(){return{type:"GroupBackReference",value:this.positiveInteger()}},t.prototype.characterClassEscape=function(){var t,e=!1;switch(this.popChar()){case"d":t=l;break;case"D":t=l,e=!0;break;case"s":t=d;break;case"S":t=d,e=!0;break;case"w":t=c;break;case"W":t=c,e=!0}return u(t),{type:"Set",value:t,complement:e}},t.prototype.controlEscapeAtom=function(){var t;switch(this.popChar()){case"f":t=o("\f");break;case"n":t=o("\n");break;case"r":t=o("\r");break;case"t":t=o("\t");break;case"v":t=o("\v")}return u(t),{type:"Character",value:t}},t.prototype.controlLetterEscapeAtom=function(){this.consumeChar("c");var t=this.popChar();if(!1===/[a-zA-Z]/.test(t))throw Error("Invalid ");return{type:"Character",value:t.toUpperCase().charCodeAt(0)-64}},t.prototype.nulCharacterAtom=function(){return this.consumeChar("0"),{type:"Character",value:o("\0")}},t.prototype.hexEscapeSequenceAtom=function(){return this.consumeChar("x"),this.parseHexDigits(2)},t.prototype.regExpUnicodeEscapeSequenceAtom=function(){return this.consumeChar("u"),this.parseHexDigits(4)},t.prototype.identityEscapeAtom=function(){return{type:"Character",value:o(this.popChar())}},t.prototype.classPatternCharacterAtom=function(){switch(this.peekChar()){case"\n":case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:return{type:"Character",value:o(this.popChar())}}},t.prototype.characterClass=function(){var t=[],e=!1;for(this.consumeChar("["),"^"===this.peekChar(0)&&(this.consumeChar("^"),e=!0);this.isClassAtom();){var n=this.classAtom();if("Character"===n.type&&this.isRangeDash()){this.consumeChar("-");var r=this.classAtom();if("Character"===r.type){if(r.value<n.value)throw Error("Range out of order in character class");t.push({from:n.value,to:r.value})}else a(n.value,t),t.push(o("-")),a(r.value,t)}else a(n.value,t)}return this.consumeChar("]"),{type:"Set",complement:e,value:t}},t.prototype.classAtom=function(){switch(this.peekChar()){case"]":case"\n":case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}},t.prototype.classEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:o("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},t.prototype.group=function(){var t=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),t=!1;break;default:this.groupIdx++}var e=this.disjunction();this.consumeChar(")");var n={type:"Group",capturing:t,value:e};return t&&(n.idx=this.groupIdx),n},t.prototype.positiveInteger=function(){var t=this.popChar();if(!1===i.test(t))throw Error("Expecting a positive integer");for(;r.test(this.peekChar(0));)t+=this.popChar();return parseInt(t,10)},t.prototype.integerIncludingZero=function(){var t=this.popChar();if(!1===r.test(t))throw Error("Expecting an integer");for(;r.test(this.peekChar(0));)t+=this.popChar();return parseInt(t,10)},t.prototype.patternCharacter=function(){var t=this.popChar();switch(t){case"\n":case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:o(t)}}},t.prototype.isRegExpFlag=function(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}},t.prototype.isRangeDash=function(){return"-"===this.peekChar()&&this.isClassAtom(1)},t.prototype.isDigit=function(){return r.test(this.peekChar(0))},t.prototype.isClassAtom=function(t){switch(void 0===t&&(t=0),this.peekChar(t)){case"]":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},t.prototype.isTerm=function(){return this.isAtom()||this.isAssertion()},t.prototype.isAtom=function(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}},t.prototype.isAssertion=function(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return"?"===this.peekChar(1)&&("="===this.peekChar(2)||"!"===this.peekChar(2));default:return!1}},t.prototype.isQuantifier=function(){var t=this.saveState();try{return void 0!==this.quantifier(!0)}catch(t){return!1}finally{this.restoreState(t)}},t.prototype.isPatternCharacter=function(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case"\n":case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},t.prototype.parseHexDigits=function(t){for(var e="",r=0;r<t;r++){var i=this.popChar();if(!1===n.test(i))throw Error("Expecting a HexDecimal digits");e+=i}return{type:"Character",value:parseInt(e,16)}},t.prototype.peekChar=function(t){return void 0===t&&(t=0),this.input[this.idx+t]},t.prototype.popChar=function(){var t=this.peekChar(0);return this.consumeChar(),t},t.prototype.consumeChar=function(t){if(void 0!==t&&this.input[this.idx]!==t)throw Error("Expected: '"+t+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++};var e,n=/[0-9a-fA-F]/,r=/[0-9]/,i=/[1-9]/;function o(t){return t.charCodeAt(0)}function a(t,e){void 0!==t.length?t.forEach((function(t){e.push(t)})):e.push(t)}function s(t,e){if(!0===t[e])throw"duplicate flag "+e;t[e]=!0}function u(t){if(void 0===t)throw Error("Internal Error - Should never get here!")}var l=[];for(e=o("0");e<=o("9");e++)l.push(e);var c=[o("_")].concat(l);for(e=o("a");e<=o("z");e++)c.push(e);for(e=o("A");e<=o("Z");e++)c.push(e);var d=[o(" "),o("\f"),o("\n"),o("\r"),o("\t"),o("\v"),o("\t"),o(""),o(""),o(""),o(""),o(""),o(""),o(""),o(""),o(""),o(""),o(""),o(""),o(""),o("\u2028"),o("\u2029"),o(""),o(""),o(""),o("\ufeff")];function h(){}return h.prototype.visitChildren=function(t){for(var e in t){var n=t[e];t.hasOwnProperty(e)&&(void 0!==n.type?this.visit(n):Array.isArray(n)&&n.forEach((function(t){this.visit(t)}),this))}},h.prototype.visit=function(t){switch(t.type){case"Pattern":this.visitPattern(t);break;case"Flags":this.visitFlags(t);break;case"Disjunction":this.visitDisjunction(t);break;case"Alternative":this.visitAlternative(t);break;case"StartAnchor":this.visitStartAnchor(t);break;case"EndAnchor":this.visitEndAnchor(t);break;case"WordBoundary":this.visitWordBoundary(t);break;case"NonWordBoundary":this.visitNonWordBoundary(t);break;case"Lookahead":this.visitLookahead(t);break;case"NegativeLookahead":this.visitNegativeLookahead(t);break;case"Character":this.visitCharacter(t);break;case"Set":this.visitSet(t);break;case"Group":this.visitGroup(t);break;case"GroupBackReference":this.visitGroupBackReference(t);break;case"Quantifier":this.visitQuantifier(t)}this.visitChildren(t)},h.prototype.visitPattern=function(t){},h.prototype.visitFlags=function(t){},h.prototype.visitDisjunction=function(t){},h.prototype.visitAlternative=function(t){},h.prototype.visitStartAnchor=function(t){},h.prototype.visitEndAnchor=function(t){},h.prototype.visitWordBoundary=function(t){},h.prototype.visitNonWordBoundary=function(t){},h.prototype.visitLookahead=function(t){},h.prototype.visitNegativeLookahead=function(t){},h.prototype.visitCharacter=function(t){},h.prototype.visitSet=function(t){},h.prototype.visitGroup=function(t){},h.prototype.visitGroupBackReference=function(t){},h.prototype.visitQuantifier=function(t){},{RegExpParser:t,BaseRegExpVisitor:h,VERSION:"0.4.0"}})?n.apply(e,[]):n)||(t.exports=r)},6479:(t,e,n)=>{var r;!function(){"use strict";function i(t,e,n){var r=e.x,i=e.y,o=n.x-r,a=n.y-i;if(0!==o||0!==a){var s=((t.x-r)*o+(t.y-i)*a)/(o*o+a*a);s>1?(r=n.x,i=n.y):s>0&&(r+=o*s,i+=a*s)}return(o=t.x-r)*o+(a=t.y-i)*a}function o(t,e,n,r,a){for(var s,u=r,l=e+1;l<n;l++){var c=i(t[l],t[e],t[n]);c>u&&(s=l,u=c)}u>r&&(s-e>1&&o(t,e,s,r,a),a.push(t[s]),n-s>1&&o(t,s,n,r,a))}function a(t,e){var n=t.length-1,r=[t[0]];return o(t,0,n,e,r),r.push(t[n]),r}function s(t,e,n){if(t.length<=2)return t;var r=void 0!==e?e*e:1;return a(t=n?t:function(t,e){for(var n,r,i,o,a,s=t[0],u=[s],l=1,c=t.length;l<c;l++)i=s,void 0,void 0,(o=(r=n=t[l]).x-i.x)*o+(a=r.y-i.y)*a>e&&(u.push(n),s=n);return s!==n&&u.push(n),u}(t,r),r)}void 0===(r=function(){return s}.call(e,n,e,t))||(t.exports=r)}()},1107:(t,e,n)=>{"use strict";function r(t,e,n,r,i){return{sel:t,data:e,children:n,text:r,elm:i,key:void 0===e?void 0:e.key}}n.r(e),n.d(e,{h:()=>l,init:()=>x,thunk:()=>f});const i=r;var o=Array.isArray;function a(t){return"string"==typeof t||"number"==typeof t}const s={createElement:function(t){return document.createElement(t)},createElementNS:function(t,e){return document.createElementNS(t,e)},createTextNode:function(t){return document.createTextNode(t)},createComment:function(t){return document.createComment(t)},insertBefore:function(t,e,n){t.insertBefore(e,n)},removeChild:function(t,e){t.removeChild(e)},appendChild:function(t,e){t.appendChild(e)},parentNode:function(t){return t.parentNode},nextSibling:function(t){return t.nextSibling},tagName:function(t){return t.tagName},setTextContent:function(t,e){t.textContent=e},getTextContent:function(t){return t.textContent},isElement:function(t){return 1===t.nodeType},isText:function(t){return 3===t.nodeType},isComment:function(t){return 8===t.nodeType}};function u(t,e,n){if(t.ns="http://www.w3.org/2000/svg","foreignObject"!==n&&void 0!==e)for(var r=0;r<e.length;++r){var i=e[r].data;void 0!==i&&u(i,e[r].children,e[r].sel)}}function l(t,e,n){var i,s,l,c={};if(void 0!==n?(c=e,o(n)?i=n:a(n)?s=n:n&&n.sel&&(i=[n])):void 0!==e&&(o(e)?i=e:a(e)?s=e:e&&e.sel?i=[e]:c=e),void 0!==i)for(l=0;l<i.length;++l)a(i[l])&&(i[l]=r(void 0,void 0,void 0,i[l],void 0));return"s"!==t[0]||"v"!==t[1]||"g"!==t[2]||3!==t.length&&"."!==t[3]&&"#"!==t[3]||u(c,i,t),r(t,c,i,s,void 0)}function c(t,e){e.elm=t.elm,t.data.fn=e.data.fn,t.data.args=e.data.args,e.data=t.data,e.children=t.children,e.text=t.text,e.elm=t.elm}function d(t){var e=t.data;c(e.fn.apply(void 0,e.args),t)}function h(t,e){var n,r=t.data,i=e.data,o=r.args,a=i.args;if(r.fn===i.fn&&o.length===a.length){for(n=0;n<a.length;++n)if(o[n]!==a[n])return void c(i.fn.apply(void 0,a),e);c(t,e)}else c(i.fn.apply(void 0,a),e)}var f=function(t,e,n,r){return void 0===r&&(r=n,n=e,e=void 0),l(t,{key:e,hook:{init:d,prepatch:h},fn:n,args:r})};function p(t){return void 0===t}function m(t){return void 0!==t}var _=i("",{},[],void 0,void 0);function y(t,e){return t.key===e.key&&t.sel===e.sel}function v(t,e,n){var r,i,o,a={};for(r=e;r<=n;++r)null!=(o=t[r])&&void 0!==(i=o.key)&&(a[i]=r);return a}var g=["create","update","remove","destroy","pre","post"];function x(t,e){var n,r,u={},l=void 0!==e?e:s;for(n=0;n<g.length;++n)for(u[g[n]]=[],r=0;r<t.length;++r){var c=t[r][g[n]];void 0!==c&&u[g[n]].push(c)}function d(t,e){return function(){if(0==--e){var n=l.parentNode(t);l.removeChild(n,t)}}}function h(t,e){var n,r=t.data;void 0!==r&&m(n=r.hook)&&m(n=n.init)&&(n(t),r=t.data);var i=t.children,s=t.sel;if("!"===s)p(t.text)&&(t.text=""),t.elm=l.createComment(t.text);else if(void 0!==s){var c=s.indexOf("#"),d=s.indexOf(".",c),f=c>0?c:s.length,y=d>0?d:s.length,v=-1!==c||-1!==d?s.slice(0,Math.min(f,y)):s,g=t.elm=m(r)&&m(n=r.ns)?l.createElementNS(n,v):l.createElement(v);for(f<y&&g.setAttribute("id",s.slice(f+1,y)),d>0&&g.setAttribute("class",s.slice(y+1).replace(/\./g," ")),n=0;n<u.create.length;++n)u.create[n](_,t);if(o(i))for(n=0;n<i.length;++n){var x=i[n];null!=x&&l.appendChild(g,h(x,e))}else a(t.text)&&l.appendChild(g,l.createTextNode(t.text));m(n=t.data.hook)&&(n.create&&n.create(_,t),n.insert&&e.push(t))}else t.elm=l.createTextNode(t.text);return t.elm}function f(t,e,n,r,i,o){for(;r<=i;++r){var a=n[r];null!=a&&l.insertBefore(t,h(a,o),e)}}function x(t){var e,n,r=t.data;if(void 0!==r){for(m(e=r.hook)&&m(e=e.destroy)&&e(t),e=0;e<u.destroy.length;++e)u.destroy[e](t);if(void 0!==t.children)for(n=0;n<t.children.length;++n)null!=(e=t.children[n])&&"string"!=typeof e&&x(e)}}function b(t,e,n,r){for(;n<=r;++n){var i=void 0,o=void 0,a=void 0,s=e[n];if(null!=s)if(m(s.sel)){for(x(s),o=u.remove.length+1,a=d(s.elm,o),i=0;i<u.remove.length;++i)u.remove[i](s,a);m(i=s.data)&&m(i=i.hook)&&m(i=i.remove)?i(s,a):a()}else l.removeChild(t,s.elm)}}function w(t,e,n){var r,i;m(r=e.data)&&m(i=r.hook)&&m(r=i.prepatch)&&r(t,e);var o=e.elm=t.elm,a=t.children,s=e.children;if(t!==e){if(void 0!==e.data){for(r=0;r<u.update.length;++r)u.update[r](t,e);m(r=e.data.hook)&&m(r=r.update)&&r(t,e)}p(e.text)?m(a)&&m(s)?a!==s&&function(t,e,n,r){for(var i,o,a,s=0,u=0,c=e.length-1,d=e[0],m=e[c],_=n.length-1,g=n[0],x=n[_];s<=c&&u<=_;)null==d?d=e[++s]:null==m?m=e[--c]:null==g?g=n[++u]:null==x?x=n[--_]:y(d,g)?(w(d,g,r),d=e[++s],g=n[++u]):y(m,x)?(w(m,x,r),m=e[--c],x=n[--_]):y(d,x)?(w(d,x,r),l.insertBefore(t,d.elm,l.nextSibling(m.elm)),d=e[++s],x=n[--_]):y(m,g)?(w(m,g,r),l.insertBefore(t,m.elm,d.elm),m=e[--c],g=n[++u]):(void 0===i&&(i=v(e,s,c)),p(o=i[g.key])?(l.insertBefore(t,h(g,r),d.elm),g=n[++u]):((a=e[o]).sel!==g.sel?l.insertBefore(t,h(g,r),d.elm):(w(a,g,r),e[o]=void 0,l.insertBefore(t,a.elm,d.elm)),g=n[++u]));(s<=c||u<=_)&&(s>c?f(t,null==n[_+1]?null:n[_+1].elm,n,u,_,r):b(t,e,s,c))}(o,a,s,n):m(s)?(m(t.text)&&l.setTextContent(o,""),f(o,null,s,0,s.length-1,n)):m(a)?b(o,a,0,a.length-1):m(t.text)&&l.setTextContent(o,""):t.text!==e.text&&l.setTextContent(o,e.text),m(i)&&m(r=i.postpatch)&&r(t,e)}}return function(t,e){var n,r,o,a=[];for(n=0;n<u.pre.length;++n)u.pre[n]();for(function(t){return void 0!==t.sel}(t)||(t=function(t){var e=t.id?"#"+t.id:"",n=t.className?"."+t.className.split(" ").join("."):"";return i(l.tagName(t).toLowerCase()+e+n,{},[],void 0,t)}(t)),y(t,e)?w(t,e,a):(r=t.elm,o=l.parentNode(r),h(e,a),null!==o&&(l.insertBefore(o,e.elm,l.nextSibling(r)),b(o,[t],0,0))),n=0;n<a.length;++n)a[n].data.hook.insert(a[n]);for(n=0;n<u.post.length;++n)u.post[n]();return e}}},1148:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1688),i=n(3356);function o(t,e,n){if(t.ns="http://www.w3.org/2000/svg","foreignObject"!==n&&void 0!==e)for(var r=0;r<e.length;++r){var i=e[r].data;void 0!==i&&o(i,e[r].children,e[r].sel)}}function a(t,e,n){var a,s,u,l={};if(void 0!==n?(l=e,i.array(n)?a=n:i.primitive(n)?s=n:n&&n.sel&&(a=[n])):void 0!==e&&(i.array(e)?a=e:i.primitive(e)?s=e:e&&e.sel?a=[e]:l=e),void 0!==a)for(u=0;u<a.length;++u)i.primitive(a[u])&&(a[u]=r.vnode(void 0,void 0,void 0,a[u],void 0));return"s"!==t[0]||"v"!==t[1]||"g"!==t[2]||3!==t.length&&"."!==t[3]&&"#"!==t[3]||o(l,a,t),r.vnode(t,l,a,s,void 0)}e.h=a,e.default=a},3356:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.array=Array.isArray,e.primitive=function(t){return"string"==typeof t||"number"==typeof t}},9169:(t,e)=>{"use strict";function n(t,e){var n,r=e.elm,i=t.data.attrs,o=e.data.attrs;if((i||o)&&i!==o){for(n in i=i||{},o=o||{}){var a=o[n];i[n]!==a&&(!0===a?r.setAttribute(n,""):!1===a?r.removeAttribute(n):120!==n.charCodeAt(0)?r.setAttribute(n,a):58===n.charCodeAt(3)?r.setAttributeNS("http://www.w3.org/XML/1998/namespace",n,a):58===n.charCodeAt(5)?r.setAttributeNS("http://www.w3.org/1999/xlink",n,a):r.setAttribute(n,a))}for(n in i)n in o||r.removeAttribute(n)}}Object.defineProperty(e,"__esModule",{value:!0}),e.attributesModule={create:n,update:n},e.default=e.attributesModule},8463:(t,e)=>{"use strict";function n(t,e){var n,r,i=e.elm,o=t.data.class,a=e.data.class;if((o||a)&&o!==a){for(r in a=a||{},o=o||{})a[r]||i.classList.remove(r);for(r in a)(n=a[r])!==o[r]&&i.classList[n?"add":"remove"](r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.classModule={create:n,update:n},e.default=e.classModule},4789:(t,e)=>{"use strict";function n(t,e,r){if("function"==typeof t)t.call(e,r,e);else if("object"==typeof t)if("function"==typeof t[0])if(2===t.length)t[0].call(e,t[1],r,e);else{var i=t.slice(1);i.push(r),i.push(e),t[0].apply(e,i)}else for(var o=0;o<t.length;o++)n(t[o])}function r(t,e){var r=t.type,i=e.data.on;i&&i[r]&&n(i[r],e,t)}function i(t,e){var n,i=t.data.on,o=t.listener,a=t.elm,s=e&&e.data.on,u=e&&e.elm;if(i!==s){if(i&&o)if(s)for(n in i)s[n]||a.removeEventListener(n,o,!1);else for(n in i)a.removeEventListener(n,o,!1);if(s){var l=e.listener=t.listener||function t(e){r(e,t.vnode)};if(l.vnode=e,i)for(n in s)i[n]||u.addEventListener(n,l,!1);else for(n in s)u.addEventListener(n,l,!1)}}}Object.defineProperty(e,"__esModule",{value:!0}),e.eventListenersModule={create:i,update:i,destroy:i},e.default=e.eventListenersModule},100:(t,e)=>{"use strict";function n(t,e){var n,r,i=e.elm,o=t.data.props,a=e.data.props;if((o||a)&&o!==a){for(n in a=a||{},o=o||{})a[n]||delete i[n];for(n in a)r=a[n],o[n]===r||"value"===n&&i[n]===r||(i[n]=r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.propsModule={create:n,update:n},e.default=e.propsModule},9714:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="undefined"!=typeof window&&window.requestAnimationFrame||setTimeout,r=!1;function i(t,e,r){var i;i=function(){t[e]=r},n((function(){n(i)}))}function o(t,e){var n,r,o=e.elm,a=t.data.style,s=e.data.style;if((a||s)&&a!==s){s=s||{};var u="delayed"in(a=a||{});for(r in a)s[r]||("-"===r[0]&&"-"===r[1]?o.style.removeProperty(r):o.style[r]="");for(r in s)if(n=s[r],"delayed"===r&&s.delayed)for(var l in s.delayed)n=s.delayed[l],u&&n===a.delayed[l]||i(o.style,l,n);else"remove"!==r&&n!==a[r]&&("-"===r[0]&&"-"===r[1]?o.style.setProperty(r,n):o.style[r]=n)}}e.styleModule={pre:function(){r=!1},create:o,update:o,destroy:function(t){var e,n,r=t.elm,i=t.data.style;if(i&&(e=i.destroy))for(n in e)r.style[n]=e[n]},remove:function(t,e){var n=t.data.style;if(n&&n.remove){r||(getComputedStyle(document.body).transform,r=!0);var i,o=t.elm,a=0,s=n.remove,u=0,l=[];for(i in s)l.push(i),o.style[i]=s[i];for(var c=getComputedStyle(o)["transition-property"].split(", ");a<c.length;++a)-1!==l.indexOf(c[a])&&u++;o.addEventListener("transitionend",(function(t){t.target===o&&--u,0===u&&e()}))}else e()}},e.default=e.styleModule},1688:(t,e)=>{"use strict";function n(t,e,n,r,i){return{sel:t,data:e,children:n,text:r,elm:i,key:void 0===e?void 0:e.key}}Object.defineProperty(e,"__esModule",{value:!0}),e.vnode=n,e.default=n},1545:t=>{t.exports=r,t.exports.parse=r,t.exports.stringify=function t(e){function n(t){return t.join(" ")}function r(t){return t.map(n).join(", ")}function i(t){return t.map(r).map(o).join(", ")}function o(t){return"("+t+")"}switch("Feature"===e.type&&(e=e.geometry),e.type){case"Point":return"POINT ("+n(e.coordinates)+")";case"LineString":return"LINESTRING ("+r(e.coordinates)+")";case"Polygon":return"POLYGON ("+i(e.coordinates)+")";case"MultiPoint":return"MULTIPOINT ("+r(e.coordinates)+")";case"MultiPolygon":return"MULTIPOLYGON ("+e.coordinates.map(i).map(o).join(", ")+")";case"MultiLineString":return"MULTILINESTRING ("+i(e.coordinates)+")";case"GeometryCollection":return"GEOMETRYCOLLECTION ("+e.geometries.map(t).join(", ")+")";default:throw new Error("stringify requires a valid GeoJSON Feature or geometry object as input")}};var e=/[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/,n=new RegExp("^"+e.source+"(\\s"+e.source+"){1,}");function r(t){var e,r=t.split(";"),i=r.pop(),o=(r.shift()||"").split("=").pop(),a=0;function s(t){var e=i.substring(a).match(t);return e?(a+=e[0].length,e[0]):null}function u(){s(/^\s*/)}function l(){u();for(var t,e=0,r=[],i=[r],o=r;t=s(/^(\()/)||s(/^(\))/)||s(/^(,)/)||s(n);){if("("===t)i.push(o),o=[],i[i.length-1].push(o),e++;else if(")"===t){if(0===o.length)return null;if(!(o=i.pop()))return null;if(0==--e)break}else if(","===t)o=[],i[i.length-1].push(o);else{if(t.split(/\s/g).some(isNaN))return null;Array.prototype.push.apply(o,t.split(/\s/g).map(parseFloat))}u()}return 0!==e?null:r}function c(){for(var t,e,r=[];e=s(n)||s(/^(,)/);)","===e?(r.push(t),t=[]):e.split(/\s/g).some(isNaN)||(t||(t=[]),Array.prototype.push.apply(t,e.split(/\s/g).map(parseFloat))),u();return t?(r.push(t),r.length?r:null):null}return(e=function t(){return function(){if(!s(/^(point(\sz)?)/i))return null;if(u(),!s(/^(\()/))return null;var t=c();return t?(u(),s(/^(\))/)?{type:"Point",coordinates:t[0]}:null):null}()||function(){if(!s(/^(linestring(\sz)?)/i))return null;if(u(),!s(/^(\()/))return null;var t=c();return t&&s(/^(\))/)?{type:"LineString",coordinates:t}:null}()||function(){if(!s(/^(polygon(\sz)?)/i))return null;u();var t=l();return t?{type:"Polygon",coordinates:t}:null}()||function(){if(!s(/^(multipoint)/i))return null;u();var t=i.substring(i.indexOf("(")+1,i.length-1).replace(/\(/g,"").replace(/\)/g,"");i="MULTIPOINT ("+t+")";var e=l();return e?(u(),{type:"MultiPoint",coordinates:e}):null}()||function(){if(!s(/^(multilinestring)/i))return null;u();var t=l();return t?(u(),{type:"MultiLineString",coordinates:t}):null}()||function(){if(!s(/^(multipolygon)/i))return null;u();var t=l();return t?{type:"MultiPolygon",coordinates:t}:null}()||function(){var e,n=[];if(!s(/^(geometrycollection)/i))return null;if(u(),!s(/^(\()/))return null;for(;e=t();)n.push(e),u(),s(/^(,)/),u();return s(/^(\))/)?{type:"GeometryCollection",geometries:n}:null}()}())&&o.match(/\d+/)&&(e.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+o}}),e}},5680:e=>{"use strict";e.exports=t}},n={};function r(t){if(n[t])return n[t].exports;var i=n[t]={id:t,loaded:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}return r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),r(5579)})()}));