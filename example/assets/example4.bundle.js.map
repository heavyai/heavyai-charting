{"version":3,"sources":["webpack:///webpack/bootstrap b20a8bf1b34549eab972","webpack:///./example/example4.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;AC7DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;;AAEf;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;;AAEA;AACA,SAAS;AACT,KAAK;;AAEL;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,qBAAqB,uBAAuB;AAC5C;AACA;AACA;AACA;AACA,CAAC","file":"example4.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/assets/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 224);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b20a8bf1b34549eab972","document.addEventListener(\"DOMContentLoaded\", function init() {\n    // A MapdCon instance is used for performing raw queries on a MapD GPU database.\n    new MapdCon()\n      .protocol(\"https\")\n      .host(\"metis.mapd.com\")\n      .port(\"443\")\n      .dbName(\"mapd\")\n      .user(\"mapd\")\n      .password(\"HyperInteractive\")\n      .connect(function(error, con) {\n        // Get a table from the database\n        var tableName = 'tweets_nov_feb';\n        // A CrossFilter instance is used for generating the raw query strings for your MapdCon.\n        var crossFilter = crossfilter.crossfilter(con, tableName)\n          .then(function(cf) {\n            createCharts(cf, con, tableName)\n          })\n        // Pass instance of crossfilter into our CreateCharts.\n        ;\n      });\n\n  /*\n   * This is example code that shows how to make a cross-filtered dashboard with a\n   * backend-rendered scatterplot using the mapdc.js API. This example is not\n   * meant to be a replacement for dc.js documentation.  For the dc.js API docs,\n   * see here:\n   * - https://github.com/dc-js/dc.js/blob/master/web/docs/api-latest.md.\n   *   For an annotated example of using dc.js - see here:\n   *   https://dc-js.github.io/dc.js/docs/stock.html.\n   */\n  function createCharts(crossFilter, con, tableName) {\n    var w = document.documentElement.clientWidth - 30;\n    var h = Math.max(document.documentElement.clientHeight, window.innerHeight || 0) - 200;\n\n    /*---------------------BASIC COUNT ON CROSSFILTER--------------------------*/\n    /*\n     *  A basic operation is getting the filtered count and total count\n     *  of crossFilter. This performs that operation. It is built into DC.\n     *  Note that for the count we use crossFilter itself as the dimension.\n     */\n    var countGroup = crossFilter.groupAll();\n    var dataCount = dc.countWidget(\".data-count\")\n      .dimension(crossFilter)\n      .group(countGroup);\n\n    /*----------------BACKEND RENDERED SCATTERPLOT EXAMPLE-----------------------*/\n    var langDomain = ['en', 'pt', 'es', 'in', 'und', 'ja', 'tr', 'fr', 'tl', 'ru', 'ar', 'th', 'it', 'nl', 'sv', 'ht', 'de', 'et', 'pl', 'sl', 'ko', 'fi', 'lv', 'sk', 'uk', 'da', 'zh', 'ro', 'no', 'cy', 'iw', 'hu', 'bg', 'lt', 'bs', 'vi', 'el', 'is', 'hi', 'hr', 'fa', 'ur', 'ne', 'ta',  'sr', 'bn', 'si', 'ml', 'hy', 'lo', 'iu', 'ka', 'ps', 'te', 'pa', 'am', 'kn', 'chr', 'my', 'gu', 'ckb', 'km', 'ug', 'sd', 'bo', 'dv'];\n    var langOriginColors = [\"#27aeef\", \"#ea5545\", \"#87bc45\", \"#b33dc6\", \"#f46a9b\", \"#ede15b\", \"#bdcf32\", \"#ef9b20\", \"#4db6ac\", \"#edbf33\", \"#7c4dff\"]\n    var langColors = [];\n    var scatterplotDim = crossFilter.dimension(null).projectOn([\"goog_x as x\", \"goog_y as y\", \"followers as size\", \"lang as color\"]);\n    var parent = document.getElementById(\"chart1-example\");\n    mapLangColors(40);\n\n    /*\n     * We need the min/max of each dimension of the scatterplot to\n     * initialize. We calculate these extents first and then\n     * build the scatterplot\n     */\n    var extentMeasures = [\n      {\n        expression: \"goog_x\",\n        agg_mode:\"min\",\n        name: \"xmin\"\n      },\n      {\n        expression: \"goog_x\",\n        agg_mode:\"max\",\n        name: \"xmax\"\n      },\n      {\n        expression: \"goog_y\",\n        agg_mode:\"min\",\n        name: \"ymin\"\n      },\n      {\n        expression: \"goog_y\",\n        agg_mode:\"max\",\n        name: \"ymax\"\n      }\n    ];\n\n    var pointMapChart, dcTimeChart;\n\n    crossFilter\n      .groupAll()\n      .reduce(extentMeasures)\n      .valuesAsync(true).then(function(extents) {\n\n      /*\n       * Set the x/y axis dimensions, using the extents calculated above\n       */\n      var xDim = crossFilter.dimension(\"goog_x\").filter([extents.xmin,extents.xmax]);\n      var yDim = crossFilter.dimension(\"goog_y\").filter([-8000000,8000000]);\n\n      /* Scatterplot Point Radius Size:\n       * in order to calculate the radius size.  We use d3 scale and pass in a\n       * domain and range.\n       *\n       * To learn more about d3 scales, please read this:\n       * https://github.com/d3/d3-scale\n       *\n       * We then pass this scale into the r function within bubbleRasterChart\n       */\n      var rScale = d3.scale.linear().domain([0,5000]).range([1,5]);\n\n\n      var pointLayer = dc.rasterLayer(\"points\")\n                        .dimension(scatterplotDim)\n                        .group(scatterplotDim)\n                        .cap(500000)\n                        .othersGrouper(false)\n                        .xDim(xDim)\n                        .yDim(yDim)\n                        .xAttr(\"x\")               // indicate which column will drive the x dimension\n                        .yAttr(\"y\")\n                        .popupColumns(['tweet_text', 'sender_name', 'tweet_time', 'lang', 'origin', 'followers'])\n                        .fillColorAttr(\"color\")   // indicate which column will drive the fill color scale\n                        .defaultFillColor(\"#80DEEA\") // set a default color so points that aren't democrat or\n                        .fillColorScale(d3.scale.ordinal().domain(langDomain).range(langColors))\n                        .sizeAttr(\"size\")\n                        .sizeScale(rScale)\n                        .sampling(true)\n\n      pointMapChart =  dc.rasterChart(parent, false)\n                          .con(con)\n                          .height(h/1.5)\n                          .width(w)\n                          .pushLayer('points', pointLayer)\n                          // render the grid lines\n                          .renderHorizontalGridLines(true)\n                          .renderVerticalGridLines(true)\n\n                          // set the axis labels\n                          .xAxisLabel('X Axis')\n                          .yAxisLabel('Y Axis')\n\n                          // enable the mouse/touch interactions\n                          .enableInteractions(true)\n\n                          // pixel radius for hit-testing and the columns that\n                          // are shown on a hit\n                          .popupSearchRadius(2)\n\n      // custom click handler with just event data (no network calls)\n      pointMapChart.map().on('mouseup', logClick)\n      function logClick (result) {\n        console.log(\"clicked!\", result)\n      }\n      // disable with pointMapChart.map().off('mouseup', logClick)\n\n      // custom click handler with event and nearest row data\n      pointMapChart.map().on('mouseup', logClickWithData)\n      function logClickWithData (event) {\n        pointMapChart.getClosestResult(event.point, function(result){\n          console.log(result && result.row_set[0])\n        })\n      }\n\n      // hover effect with popup\n      var debouncedPopup = _.debounce(displayPopupWithData, 250)\n      pointMapChart.map().on('mousewheel', pointMapChart.hidePopup);\n      pointMapChart.map().on('wheel', pointMapChart.hidePopup);\n      pointMapChart.map().on('mousemove', pointMapChart.hidePopup);\n      pointMapChart.map().on('mousemove', debouncedPopup);\n      function displayPopupWithData (event) {\n        pointMapChart.getClosestResult(event.point, pointMapChart.displayPopup)\n      }\n\n      /*---------------------TIME CHART EXAMPLE----------------------------------*/\n\n      /*\n       *  First we want to determine the extent (min,max) of the time variable so we\n       *  can set the bounds on the time chart appropriately.\n       *\n       *  If you know the bounds a priori you can do this manually but here we will\n       *  do it dymaically via a query sent to the backend through the crossfilter\n       *  api.\n       *\n       *  We create a reduceMulti expression that will get the min and max of the\n       *  variable dep_timestamp.\n       *\n       */\n\n      var timeChartMeasures = [\n      {\n        expression: \"tweet_time\",\n        agg_mode:\"min\",\n        name: \"minimum\"\n      },\n      {\n        expression: \"tweet_time\",\n        agg_mode:\"max\",\n        name: \"maximum\"}\n      ]\n\n      /* Note than when we are doing aggregations over the entire dataset we use\n       * the crossfilter object itself as the dimension with the groupAll method\n       *\n       * values(true) gets the values for our groupAll measure (here min and max\n       * of dep_timestamp) - true means to ignore currently set filters - i.e.\n       * get a global min and max\n       */\n\n      crossFilter\n        .groupAll()\n        .reduce(timeChartMeasures)\n        .valuesAsync(true).then(function(timeChartBounds) {\n\n          var timeChartDimension = crossFilter.dimension(\"tweet_time\");\n\n          /* We would like to bin or histogram the time values.  We do this by\n           * invoking setBinParams on the group.  Here we are asking for 288 equal\n           * sized bins from the min to the max of the time range\n           */\n\n          var timeChartGroup = timeChartDimension\n            .group()\n            .reduceCount('*')\n\n        /*  We create the time chart as a line chart\n         *  with the following parameters:\n         *\n         *  Width and height - as above\n         *\n         *  elasticY(true) - cause the y-axis to scale as filters are changed\n         *\n         *  renderHorizontalGridLines(true) - add grid lines to the chart\n         *\n         *  brushOn(true) - Request a filter brush to be added to the chart - this\n         *  will allow users to drag a filter window along the time chart and filter\n         *  the rest of the data accordingly\n         *\n         */\n\n          dcTimeChart = dc.lineChart('.chart2-example')\n            .width(w)\n            .height(h/2.5)\n            .elasticY(true)\n            .renderHorizontalGridLines(true)\n            .brushOn(true)\n            .xAxisLabel('Time of Day')\n            .yAxisLabel('Number of Tweets')\n            .dimension(timeChartDimension)\n            .group(timeChartGroup)\n            .binParams({\n               numBins: 288, // 288 * 5 = number of minutes in a day\n               binBounds: [timeChartBounds.minimum, timeChartBounds.maximum]\n              });\n\n          /* Set the x and y axis formatting with standard d3 functions */\n\n          dcTimeChart\n            .x(d3.time.scale.utc().domain([timeChartBounds.minimum, timeChartBounds.maximum]))\n            .yAxis().ticks(5);\n\n          dcTimeChart\n            .xAxis()\n            .scale(dcTimeChart.x())\n            .tickFormat(dc.utils.customTimeFormat)\n            .orient('bottom');\n\n\n          /*---------------------SET UP FILTER ----------------------------------*/\n\n          /*  We create the filter\n           *  with the following parameters:\n           *\n           *  Dimension: What column you would like to search.\n           *\n           *  OPTIONAL: setDrillDownFilter: Boolean\n           *  if set to true, your search will \"AND\" for all values, instead of\n           *  the default \"OR\" for all values.\n           *\n           *  eg. If searching \"Keyboard Cat\":\n           *  This will only only return results where the tweet contains:\n           *  \"Keyboard\" AND \"Cat\"\n           *\n           */\n          var searchFilterTweets = crossFilter.dimension(\"tweet_tokens\")\n                                              .setDrillDownFilter(true);\n\n          function createMultiFilterArray(search) {\n\n            // Empty Search\n            if (search == \"\") {\n              return undefined;\n            }\n\n            return search.split(',').map(function(searchValue) {\n              return searchValue.trim();\n            });\n          }\n\n          document.querySelector(\".search-bar\").addEventListener(\"keypress\", function(e){\n            if (e.keyCode === 13) {\n              var mutipleFilterArray = createMultiFilterArray(e.target.value);\n              if (mutipleFilterArray) {\n                searchFilterTweets.filterMulti(mutipleFilterArray);\n              } else {\n                // Clears all filters\n                searchFilterTweets.filter();\n              }\n              // You must call redrawAll after applying custom filters.\n              dc.redrawAllAsync();\n            }\n          })\n\n          /* Calling dc.renderAll() will render all of the charts we set up.  Any\n             crossFilters applied by the user (via clicking the bar chart, scatter plot or dragging the time brush) will automagically call redraw on the charts without any intervention from us\n           */\n\n          dc.renderAllAsync()\n        });\n    });\n\n    /*--------------------------RESIZE EVENT------------------------------*/\n\n    /* Here we listen to any resizes of the main window.  On resize we resize the corresponding widgets and call dc.renderAll() to refresh everything */\n\n    window.addEventListener(\"resize\", _.debounce(reSizeAll, 500));\n\n    function reSizeAll(){\n      var w = document.documentElement.clientWidth - 30;\n      var h = Math.max(document.documentElement.clientHeight, window.innerHeight || 0) - 200;\n\n      pointMapChart.map().resize();\n      pointMapChart.isNodeAnimate = false;\n      pointMapChart\n        .width(w)\n        .height(h/1.5)\n        .render();\n      dcTimeChart\n        .width(w)\n        .height(h/2.5)\n\n      dc.redrawAllAsync();\n    }\n\n    function mapLangColors(n) {\n      langDomain = langDomain.slice(0, n);\n      for (var i = 0; i < langDomain.length; i++) {\n        langColors.push(langOriginColors[i%langOriginColors.length]);\n      }\n    }\n  }\n})\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./example/example4.js\n// module id = 224\n// module chunks = 6"],"sourceRoot":""}